<div id="map"></div>
<div class="container map-node-container">
  <div class="row">
    <div class="col-sm-12 text-center">
      <p class="lead map-node-status">Tap on the map to indicate where this person lives</p>
    </div>
  </div>
  <div class="row">
    <div class="col-sm-4 text-left">
      <div class='map-node-navigation map-back'>
        <span class="btn btn-primary btn-block">Previous</span>
      </div>
    </div>
    <div class="col-sm-4 text-center">
        <p class="lead">1/34</p>
    </div>
    <div class="col-sm-4 text-right">
      <div class='map-node-navigation map-forwards'>
        <span class="btn btn-primary btn-block">Next</span>
      </div>
    </div>  
  </div>
  <div class="row">
    <div class="col-sm-12 map-node-box">
      <div class="map-node">
      Josh
      </div>
  </div>
</div>


<script>

      var geojson;

      function highlightFeature(e) {
        var layer = e.target;

        layer.setStyle({
          fillOpacity: 0.8
        });

        if (!L.Browser.ie && !L.Browser.opera) {
          layer.bringToFront();
        }
      }

      var mapNodeClicked = false;
      var mapNodeSelected = false;

      function toggleFeature(e) {
        window.layer = e.target;
        console.log(e);
        console.log(layer);

        if (!mapNodeClicked) {
          highlightFeature(e);
          updateInfoBox('You selected: <strong>'+layer.feature.properties.name+'</strong>. Click the "next" button to place the next person.')
          mapNodeClicked = true;  
        } else {
          resetHighlight(e);
          mapNodeClicked = false;
        }
        
      }

      function updateInfoBox(text) {
        $('.map-node-status').html(text);
      }
    
      function resetHighlight(e) {
        geojson.resetStyle(e.target);
      }

      function zoomToFeature(e) {
        map.fitBounds(e.target.getBounds());
      }

      function onEachFeature(feature, layer) {
        layer.on({
          mouseover: highlightFeature,
          mouseout: resetHighlight,
          click: toggleFeature
        });
      }     


        var colors = ['#67c2d4','#1ECD97','#B16EFF','#FA920D','#e85657','#20B0CA','#FF2592','#153AFF','#8708FF'];


        // Initialize the map, point it at the #map element and center it on Chicago
        var map = L.map('map', {
            maxBounds: [[41.4985986599114, -88.498240224063451],[42.1070175291862,-87.070984247165939]], 
            zoomControl: false
        }).setView([41.798395426119534,-87.839671372338884], 11);

        // Add the OpenStreetMap tile layer
        L.tileLayer(
          'img/Tiles/{z}/{x}/{y}.png', {
          maxZoom: 17,
          minZoom: 11
        }).addTo(map);

        $.ajax({
          dataType: "json",
          url: "data/census2010.json",
          success: function(data) {
            geojson = L.geoJson(data, {
                onEachFeature: onEachFeature,
                style: function (feature) {
                  return {stroke:'#ff0000',fillColor:colors[1],weight:0,fillOpacity:0.3,strokeWidth:0};
                }
            }).addTo(map);
          }
        }).error(function() {});

</script>