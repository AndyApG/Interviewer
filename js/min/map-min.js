var GeoInterface=function e(){function e(e){var t=e.target,n;h===!1?(o(e),h=t.feature.properties.name,n={},n[p]=t.feature.properties.name,network.updateEdge(u[f].id,n),$(".map-node-location").html("<strong>Currently marked as:</strong> <br>"+t.feature.properties.name)):t.feature.properties.name===h&&(r(e),h=!1,n={},n[p]=void 0,network.updateEdge(u[f].id,n))}function t(){if(void 0!==u[f][p])if("Homeless"===u[f][p]||"Jail"===u[f][p]){s();var e="Homeless";"Jail"===u[f][p]&&(e="in Jail"),$(".map-node-location").html("<strong>Currently marked as:</strong> <br>"+e)}else $.each(g._layers,function(e,t){t.feature.properties.name===u[f][p]&&($(".map-node-location").html("<strong>Currently marked as:</strong> <br>"+u[f][p]),n(t))});else s()}function o(e){var t=e.target;d.fitBounds(e.target.getBounds(),{maxZoom:14}),t.setStyle({fillOpacity:.8}),L.Browser.ie||L.Browser.opera||t.bringToFront()}function n(e){var t=e;d.fitBounds(e.getBounds(),{maxZoom:14}),t.setStyle({fillOpacity:.8}),L.Browser.ie||L.Browser.opera||t.bringToFront()}function r(e){$(".map-node-location").html(""),h=!1,g.resetStyle(e.target)}function a(){$(".map-node-location").html(""),h=!1,$.each(g._layers,function(e,t){g.resetStyle(t)})}function i(t,o){o.on({click:e})}function s(){d.setView([41.798395426119534,-87.83967137233888],11)}function l(){a();var e={};e[p]="Homeless",network.updateEdge(u[f].id,e),$(".map-node-location").html("<strong>Currently marked as:</strong> <br>Homeless")}function c(){a();var e={};e[p]="Jail",network.updateEdge(u[f].id,e),$(".map-node-location").html("<strong>Currently marked as:</strong> <br>in Jail")}var m={},d,u,p="res_chicago_location_p_t0",f=0,g,h=!1,k=["#67c2d4","#1ECD97","#B16EFF","#FA920D","#e85657","#20B0CA","#FF2592","#153AFF","#8708FF"];return m.nextPerson=function(){f<u.length-1&&(a(),f++,$(".current-id").html(f+1),$(".map-node-status").html("Tap on the map to indicate the general area where <strong>"+u[f].nname_t0+"</strong> lives."),t())},m.previousPerson=function(){f>0&&(a(),f--,$(".current-id").html(f+1),$(".map-node-status").html("Tap on the map to indicate the general area where <strong>"+u[f].nname_t0+"</strong> lives."),t())},m.init=function(){d=L.map("map",{maxBounds:[[41.4985986599114,-88.49824022406345],[42.1070175291862,-87.07098424716594]],zoomControl:!1}),L.tileLayer("img/Tiles/{z}/{x}/{y}.png",{maxZoom:17,minZoom:11}).addTo(d),$.ajax({dataType:"json",url:"data/census2010.json",success:function(e){g=L.geoJson(e,{onEachFeature:i,style:function(){return{stroke:"#ff0000",fillColor:k[1],weight:0,fillOpacity:.3,strokeWidth:0}}}).addTo(d),u=network.getEdges({from:network.getNodes({type_t0:"Ego"})[0].id,type:"Dyad",res_cat_p_t0:"Chicago"}),$(".map-counter").html('<span class="current-id">1</span>/'+u.length),$(".map-node-status").html("Tap on the map to indicate the general area where <strong>"+u[0].nname_t0+"</strong> lives."),t()}}).error(function(){}),$(".map-back").on("click",m.previousPerson),$(".map-forwards").on("click",m.nextPerson),$(".homeless").on("click",l),$(".jail").on("click",c)},m.destroy=function(){$(".map-back").off("click",m.previousPerson),$(".map-forwards").off("click",m.nextPerson),$(".homeless").on("click",l),$(".jail").on("click",c)},m.init(),m};