var Session=function n(e){var t={},a=0,i=$("#content"),o;t.id=0,t.userData={};var s;t.stages=["intro.html","namegenerator.html"];var d;return t.options={fnBeforeStageChange:function(){var n=new Event("changeStageStart");window.dispatchEvent(n)},fnAfterStageChange:function(){var n=new Event("changeStageEnd");window.dispatchEvent(n)}},t.init=function(){extend(t.options,e),window.addEventListener("changeStageStart",function(){$(".loader").transition({opacity:1})},!1),window.addEventListener("changeStageEnd",function(){$(".loader").transition({opacity:0})},!1),window.nodes=t.registerData("nodes",!0),window.edges=t.registerData("edges",!0),o=new IOInterface,localStorage.getObject("activeSession")!==!1?(t.id=localStorage.getObject("activeSession"),notify("Existing session found (session id: "+t.id+"). Loading.",3),o.init(t.id),t.loadData()):t.id=o.init(),t.registerData("session"),History.Adapter.bind(window,"statechange",function(){});var n=History.getState();t.goToStage(n.data.stage?n.data.stage:0),window.addEventListener("unsavedChanges",function(){t.saveManager()},!1)},t.saveManager=function(){clearTimeout(d),d=setTimeout(t.saveData,2e3)},t.updateUserData=function(n){extend(t.userData,n);var e=new Event("unsavedChanges");window.dispatchEvent(e)},t.returnSessionID=function(){return t.id},t.loadData=function(){o.load()},t.saveData=function(){notify("saving data.",3),o.save(t.userData),s=new Date},t.addNode=function(n){var e={id:window.nodes.length+1,label:"Josh"};extend(e,n),window.nodes.push(e);var t=new Event("nodeAdded",{options:e});window.dispatchEvent(t);var a=new Event("unsavedChanges");window.dispatchEvent(a)},t.addEdge=function(n,e){var t=!1,a={from:n,to:e};if(t)return!1;window.edges.push(a);var i=new Event("edgeAdded",{options:a});window.dispatchEvent(i);var o=new Event("unsavedChanges");window.dispatchEvent(o)},t.goToStage=function(n){t.options.fnBeforeStageChange();var e=n;i.transition({opacity:"0"},400,"easeInSine").promise().done(function(){i.load("stages/"+t.stages[n],function(){i.transition({opacity:"1"},400,"easeInSine")})}),a=e,History.pushState({stage:n},null,"?stage="+n),t.options.fnAfterStageChange();var o=new Event("unsavedChanges");window.dispatchEvent(o)},t.nextStage=function(){t.goToStage(a+1)},t.prevStage=function(){t.goToStage(a-1)},t.addStage=function(){},t.registerData=function(n,e){void 0===t.userData[n]&&(t.userData[n]=e?[]:{});var a=new Event("unsavedChanges");return window.dispatchEvent(a),t.userData[n]},t.addData=function(n,e){extend(t.userData[n],e),notify("Adding data to "+n+".",2),console.log("session data is now:"),console.log(t.userData);var a=new Event("unsavedChanges");window.dispatchEvent(a)},t.returnData=function(n){return t.userData[n]},t.returnSessionData=function(){return t.userData},t.init(),t};
//# sourceMappingURL=./session-min.map