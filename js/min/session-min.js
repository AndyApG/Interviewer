var Session=function t(n){var e={},a=0,o=$("#content"),i=new Logger,s;e.id=0,e.userData={},e.stages=["intro.html","namegenerator.html"];var r=new Event("changeStageStart"),d=new Event("changeStageEnd");return e.options={fnBeforeStageChange:function(){window.dispatchEvent(r)},fnAfterStageChange:function(){window.dispatchEvent(d)}},e.log=function(t,n,e){i.addToLog(t,n,e)},e.init=function(){extend(e.options,n),window.addEventListener("changeStageStart",function(){$(".loader").transition({opacity:1})},!1),window.addEventListener("changeStageEnd",function(){$(".loader").transition({opacity:0})},!1),s=new IOInterface,localStorage.getObject("activeSession")!==!1?(e.id=localStorage.getObject("activeSession"),notify("Existing session found (session id: "+e.id+"). Loading.",3),s.init(e.id),e.loadData()):e.id=s.init(),e.registerData("session"),History.Adapter.bind(window,"statechange",function(){});var t=History.getState();e.goToStage(t.data.stage?t.data.stage:0)},e.updateUserData=function(t){extend(e.userData,t)},e.returnSessionID=function(){return e.id},e.loadData=function(){s.load()},e.saveData=function(){notify("saving data.",3),s.save(e.userData)},e.addNode=function(){var t={id:window.nodes.length+1,label:"Josh"};window.nodes.push(t)},e.goToStage=function(t){e.options.fnBeforeStageChange();var n=t;o.transition({opacity:"0"},400,"easeInSine").promise().done(function(){o.load("stages/"+e.stages[t],function(){o.transition({opacity:"1"},400,"easeInSine")})}),a=n,History.pushState({stage:t},null,"?stage="+t),e.options.fnAfterStageChange()},e.nextStage=function(){e.goToStage(a+1)},e.prevStage=function(){e.goToStage(a-1)},e.addStage=function(){},e.registerData=function(t,n){return void 0===e.userData[t]&&(e.userData[t]=n?[]:{}),e.userData[t]},e.addData=function(t,n){extend(e.userData[t],n),notify("Adding data to "+t+".",2),console.log("session data is now:"),console.log(e.userData)},e.returnData=function(t){return e.userData[t]},e.returnSessionData=function(){return e.userData},e.init(),e};
//# sourceMappingURL=./session-min.map