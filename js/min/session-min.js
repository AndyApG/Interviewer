var Session=function t(n){var a={},e=0,o=$("#content"),i=new Logger,g;a.id=0,a.date=new Date,a.data={},a.stages=["intro.html","namegenerator.html"];var s=new Event("changeStageStart"),d=new Event("changeStageEnd");return a.options={fnBeforeStageChange:function(){window.dispatchEvent(s)},fnAfterStageChange:function(){window.dispatchEvent(d)}},a.log=function(t,n,a){i.addToLog(t,n,a)},a.init=function(){extend(a.options,n),window.addEventListener("changeStageStart",function(){$(".loader").transition({opacity:1})},!1),window.addEventListener("changeStageEnd",function(){$(".loader").transition({opacity:0})},!1),g=new IOInterface,History.Adapter.bind(window,"statechange",function(){var t=History.getState();console.log(t)});var t=History.getState();a.goToStage(t.data.stage?t.data.stage:0)},a.loadData=function(t){a.data=g.load(t)},a.saveData=function(){g.save(a.data)},a.goToStage=function(t){a.options.fnBeforeStageChange();var n=t;o.transition({opacity:"0"},400,"easeInSine").promise().done(function(){o.load("stages/"+a.stages[t],function(){o.transition({opacity:"1"},400,"easeInSine")})}),e=n,History.pushState({stage:t},null,"?stage="+t),a.options.fnAfterStageChange()},a.nextStage=function(){a.goToStage(e+1)},a.prevStage=function(){a.goToStage(e-1)},a.addStage=function(t){console.log(t)},a.registerData=function(t){a.data[t]={}},a.addData=function(t,n){console.log(n),a.data[t]=n},a.getData=function(){return a.data},a.init(),a};
//# sourceMappingURL=./session-min.map