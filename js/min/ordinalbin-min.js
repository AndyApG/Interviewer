var OrdinalBin=function e(t){var n={};n.options={targetEl:$(".container"),edgeType:"Dyad",variable:{label:"gender_p_t0",values:["Female","Male","Transgender","Don't Know","Won't Answer"]},heading:"Default Heading",subheading:"Default Subheading."};var i=!1;extend(n.options,t);var a,o,d=function(){n.destroy()},s=function(e){e.stopPropagation(),e.target!==e.currentTarget&&i===!0&&($(".container").children().removeClass("invisible"),$(".copy").removeClass("node-bin-active"),$(".copy").addClass("node-bin-static"),$(".copy").removeClass("copy"),$(".draggable").draggable({cursor:"pointer",revert:"invalid",disabled:!1}),i=!1)},l=function(e){if(e.stopPropagation(),i===!1){if($(".draggable").draggable({cursor:"pointer",revert:"invalid",disabled:!0}),!$(this).hasClass(".node-bin-active")){$(".container").children().not(this).addClass("invisible");var t=$(this).offset(),n=$(this);n.offset(t),n.addClass("node-bin-active copy"),n.removeClass("node-bin-static"),n.children(".active-node-list").children(".node-item").css({top:0,left:20,opacity:0}),setTimeout(function(){n.addClass("node-bin-active"),$.each($(".active-node-list").children(),function(e,t){setTimeout(function(){$(t).transition({left:0,opacity:1})},50*e)})},400)}i=!0}},r=function(e){e.stopPropagation();var t=$(this),i=$(this).parent().parent().data("index");if($(this).parent().hasClass("active-node-list")){var a=network.getEdges({from:network.getNodes({type_t0:"Ego"})[0].id,to:t.data("node-id"),type:"Dyad"})[0].id,o={};o[n.options.variable.label]="",network.updateEdge(a,o),$(this).fadeOut(400,function(){$(this).appendTo(".node-bucket"),$(this).css("display","");var e="people";1===$(".n"+i).children(".active-node-list").children().length&&(e="person"),$(".n"+i).children("p").html(0===$(".n"+i).children(".active-node-list").children().length?"(Empty)":$(".n"+i).children(".active-node-list").children().length+" "+e+".")})}};return n.destroy=function(){notify("Destroying ordinalBin.",0),window.removeEventListener("changeStageStart",d,!1),$(".node-bin-static").off("click",l),$(".node-item").off("click",r),$(".content").off("click",s)},n.init=function(){n.options.targetEl.append("<h1>"+n.options.heading+"</h1>"),n.options.targetEl.append('<p class="lead">'+n.options.subheading+"</p>"),n.options.targetEl.append('<div class="node-bucket"></div>');var e=n.options.variable.values.length;a=$(".container").outerWidth()/e-20,o=$(".container").outerHeight()-300;var t=network.getEdges({from:network.getNodes({type_t0:"Ego"})[0].id,type:n.options.edgeType});$.each(n.options.variable.values,function(e,t){var i=$('<div class="ord-node-bin node-bin-static n'+e+'" data-index="'+e+'"><h1>'+t.label+'</h1><p class="lead">(Empty)</p><div class="active-node-list"></div></div>');i.data("index",e),n.options.targetEl.append(i),$(".n"+e).droppable({accept:".draggable",drop:function(t,i){var a=i.draggable,o=$(this);$(a).appendTo(o.children(".active-node-list")),$(a).css({position:"",top:"",left:""});var d={};d[n.options.variable.values[e].label]=n.options.variable.values[e].value;var s=network.getEdges({from:network.getNodes({type_t0:"Ego"})[0].id,to:$(a).data("node-id"),type:"Dyad"})[0].id;network.updateEdge(s,d);var l="people";1===$(".n"+e+" .active-node-list").children().length&&(l="person"),$(".n"+e+" p").html($(".n"+e+" .active-node-list").children().length+" "+l+".");var r=$(".n"+e);r.transition({scale:1.2},200,"ease"),setTimeout(function(){r.transition({background:r.data("oldBg")},200,"ease"),r.transition({scale:1},200,"ease")},0)},over:function(){$(this).data("oldBg",$(this).css("background-color")),$(this).stop().transition({background:"rgba(255, 193, 0, 1.0)"},400,"ease")},out:function(){$(this).stop().transition({background:$(this).data("oldBg")},500,"ease")}})}),$(".ord-node-bin").css({width:a,height:o}),$.each($(".ord-node-bin"),function(e,t){var n=$(t).offset();$(t).data("oldPos",n),$(t).css(n)}),$(".ord-node-bin").css({position:"absolute"}),$.each(t,function(e,t){if(void 0!==t[n.options.variable.label]&&""!==t[n.options.variable.label]){e=n.options.variable.values.indexOf(t[n.options.variable.label]),$(".n"+e).children(".active-node-list").append('<div class="node-item draggable" data-node-id="'+t.to+'">'+t.nname_t0+"</div>");var i="people";1===$(".n"+e).children(".active-node-list").children().length&&(i="person"),$(".n"+e).children("p").html(0===$(".n"+e).children(".active-node-list").children().length?"(Empty)":$(".n"+e).children(".active-node-list").children().length+" "+i+".")}else $(".node-bucket").append('<div class="node-item draggable" data-node-id="'+t.to+'">'+t.nname_t0+"</div>")}),$(".draggable").draggable({cursor:"pointer",revert:"invalid",disabled:!1}),window.addEventListener("changeStageStart",d,!1),$(".node-bin-static").on("click",l),$(".node-item").on("click",r),$(".content").on("click",s)},n.init(),n};