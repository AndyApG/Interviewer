var MultiBin=function e(n){var t={};t.options={targetEl:$(".container"),edgeType:"Dyad",variable:{label:"gender_p_t0",values:["Female","Male","Transgender","Don't Know","Won't Answer"]},heading:"Default Heading",subheading:"Default Subheading."},extend(t.options,n);var o=function(){t.destroy()},i=function(e){e.target!==e.currentTarget||($(".container").fadeIn(),$(".copy").removeClass("node-bin-active"),$(".copy").addClass("node-bin-static"),$(".copy").children("h1, h4").show(),$(".copy").removeClass("copy"),$(".content").off("click",i),$(".draggable").draggable({cursor:"pointer",revert:"invalid"}))},a=function(){if(!$(this).hasClass(".node-bin-active")){$(".content").on("click",i),$(".container").fadeOut();var e=$(this).offset(),n=$(this);n.appendTo(".content"),n.offset(e),n.addClass("node-bin-active copy"),n.removeClass("node-bin-static"),n.children("h1, h4").hide(),n.children(".active-node-list").children(".node-item").css({top:0,left:20,opacity:0}),setTimeout(function(){n.addClass("node-bin-active"),$.each($(".active-node-list").children(),function(e,n){setTimeout(function(){$(n).transition({left:0,opacity:1})},50*e)})},400)}},d=function(){var e=$(this),n=$(this).parent().parent().data("index");console.log("id is:"),console.log(n);var o=network.getEdges({from:network.getNodes({type_t0:"Ego"})[0].id,to:e.data("node-id"),type:"Dyad"})[0].id,i={};i[t.options.variable.label]="",network.updateEdge(o,i),$(this).appendTo(".node-bucket");var a="people";console.log($(".n"+n).children(".active-node-list").length),1===$(".n"+n).children(".active-node-list").children().length&&(a="person"),0===$(".n"+n).children(".active-node-list").children().length?(console.log("empty"),$(".n"+n).children("h4").html("(Empty)")):$(".n"+n).children("h4").html($(".n"+n).children(".active-node-list").children().length+" "+a+".")};return t.destroy=function(){notify("Destroying multiBin.",0),window.removeEventListener("changeStageStart",o,!1)},t.init=function(){window.addEventListener("changeStageStart",o,!1),$(document).on("click",".node-bin-static",a),$(document).on("click",".node-item",d),t.options.targetEl.append("<h1>"+t.options.heading+"</h1>"),t.options.targetEl.append('<p class="lead">'+t.options.subheading+"</p>");var e=network.getEdges({from:network.getNodes({type_t0:"Ego"})[0].id,type:t.options.edgeType});t.options.targetEl.append('<div class="node-bucket"></div>'),$.each(e,function(e,n){$(".node-bucket").append('<div class="node-item draggable" data-node-id="'+n.to+'">'+n.nname_t0+"</div>")}),$(".draggable").draggable({cursor:"pointer",revert:"invalid"}),$.each(t.options.variable.values,function(e,n){var o=$('<div class="node-bin node-bin-static n'+e+'" data-index="'+e+'"><h1>'+n+'</h1><h4>(Empty)</h4><div class="active-node-list"></div></div>');o.data("index",e),t.options.targetEl.append(o),$(".n"+e).droppable({accept:".draggable",drop:function(n,o){var i=o.draggable,a=$(this);$(i).appendTo(a.children(".active-node-list"));var d={};d[t.options.variable.label]=t.options.variable.values[e];var s=network.getEdges({from:network.getNodes({type_t0:"Ego"})[0].id,to:$(i).data("node-id"),type:"Dyad"})[0].id;network.updateEdge(s,d);var r="people";1===$(".n"+e+" .active-node-list").children().length&&(r="person"),$(".n"+e+" h4").html($(".n"+e+" .active-node-list").children().length+" "+r+".");var c=$(".n"+e);c.transition({scale:1.2},200,"ease"),setTimeout(function(){c.transition({background:c.data("oldBg")},200,"ease"),c.transition({scale:1},200,"ease")},0)},over:function(){$(this).data("oldBg",$(this).css("background-color")),$(this).stop().transition({background:"rgba(255, 193, 0, 1.0)"},400,"ease")},out:function(){$(this).stop().transition({background:$(this).data("oldBg")},500,"ease")}})}),$.each($(".node-bin"),function(e,n){var t=$(n).offset();$(n).data("oldPos",t),$(n).css(t)}),$(".node-bin").css({position:"absolute"})},t.init(),t};