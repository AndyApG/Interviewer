var MultiBin=function e(t){var n={};n.options={targetEl:$(".container"),edgeType:"Dyad",variable:{label:"gender_p_t0",values:["Female","Male","Transgender","Don't Know","Won't Answer"]},heading:"Default Heading",subheading:"Default Subheading."},extend(n.options,t);var i=function(){n.destroy()},a=function(e){e.target!==e.currentTarget||($(".container").fadeIn(),$(".copy").removeClass("node-bin-active"),setTimeout(function(){$(".copy").remove()},500),$(".content").off("click",a))},o=function(){if(!$(this).hasClass(".node-bin-active")){$(".content").on("click",a),$(".container").fadeOut();var e=$(this).offset(),t=$(this).clone(!0);t.offset(e),t.addClass("copy"),t.removeClass("node-bin-static"),t.children("h1, h4").remove(),$(".content").append(t),$(".active-node-list").children(".node-item").css({top:0,left:20,opacity:0}),setTimeout(function(){t.addClass("node-bin-active"),$.each($(".active-node-list").children(),function(e,t){setTimeout(function(){$(t).transition({left:0,opacity:1})},50*e)})},0)}},d=function(){if($(this).parent().hasClass("active-node-list")){var e=$(this),t=$(this).parent().parent().data("index");console.log("id is:"),console.log(t);var i=network.getEdges({from:network.getNodes({type_t0:"Ego"})[0].id,to:e.data("node-id"),type:"Dyad"})[0].id,a={};a[n.options.variable.label]="",network.updateEdge(i,a);var o="people";console.log($('*[data-index="'+t+'"]').first().children(".active-node-list").children().length),$('*[data-index="'+t+'"]').first().children(".active-node-list").children().length-1===1&&(o="person"),$('div[data-index="'+t+'"]').first().children("h4").html($('*[data-index="'+t+'"]').first().children(".active-node-list").children().length-1===0?"(Empty)":$('div[data-index="'+t+'"]').first().children(".active-node-list").children().length-1+" "+o+"."),$('div[data-index="'+t+'"]').first().children(".active-node-list").children().remove();var d=e.parent();e.detach().appendTo(".node-bucket");var s=d.children().clone(!0);$('div[data-index="'+t+'"]').first().children(".active-node-list").append(s)}};return n.destroy=function(){notify("Destroying multiBin.",0),window.removeEventListener("changeStageStart",i,!1)},n.init=function(){window.addEventListener("changeStageStart",i,!1),$(document).on("click",".node-bin-static",o),$(document).on("click",".node-item",d),n.options.targetEl.append("<h1>"+n.options.heading+"</h1>"),n.options.targetEl.append('<p class="lead">'+n.options.subheading+"</p>");var e=network.getEdges({from:network.getNodes({type_t0:"Ego"})[0].id,type:n.options.edgeType});n.options.targetEl.append('<div class="node-bucket"></div>'),$.each(e,function(e,t){$(".node-bucket").append('<div class="node-item draggable" data-node-id="'+t.to+'">'+t.nname_t0+"</div>")}),$(".draggable").draggable({cursor:"pointer",revert:"invalid"}),$.each(n.options.variable.values,function(e,t){var i=$('<div class="node-bin node-bin-static n'+e+'" data-index="'+e+'"><h1>'+t+'</h1><h4>(Empty)</h4><div class="active-node-list"></div></div>');i.data("index",e),n.options.targetEl.append(i),$(".n"+e).droppable({accept:".draggable",drop:function(t,i){var a=i.draggable,o=$(this);$(a).detach().appendTo(o.children(".active-node-list"));var d={};d[n.options.variable.label]=n.options.variable.values[e];var s=network.getEdges({from:network.getNodes({type_t0:"Ego"})[0].id,to:$(a).data("node-id"),type:"Dyad"})[0].id;network.updateEdge(s,d);var r="people";1===$(".n"+e+" .active-node-list").children().length&&(r="person"),$(".n"+e+" h4").html($(".n"+e+" .active-node-list").children().length+" "+r+".");var c=$(".n"+e);c.transition({scale:1.2},200,"ease"),setTimeout(function(){c.transition({background:c.data("oldBg")},200,"ease"),c.transition({scale:1},200,"ease")},0)},over:function(){$(this).data("oldBg",$(this).css("background-color")),$(this).stop().transition({background:"rgba(255, 193, 0, 1.0)"},400,"ease")},out:function(){$(this).stop().transition({background:$(this).data("oldBg")},500,"ease")}})})},n.init(),n};