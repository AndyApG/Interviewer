var IOInterface=function n(){var n="http://localhost:3000",t="netCanvas",e,o={};return o.init=function(o){return notify("IOInterface initialising.",1),o?e=o:void $.ajax({url:n+"/collections/"+t+"/",type:"POST",contentType:"application/json",dataType:"json",data:"",success:function(n){return e=n[0]._id,notify("id from last transaction: "+e,3),session.registerData("session"),localStorage.setObject("activeSession",e),session.addData("session",{sessionid:e}),e},error:function(){return!1}})},o.save=function(o){delete session.userData._id,notify("IOInterface being asked to synchronise with data store:",2),console.log(o),$.each(o,function(n,t){localStorage.setObject(n,t)});var a=n+"/collections/"+t+"/"+e;console.log(a),$.ajax({url:a,type:"PUT",contentType:"application/json",dataType:"json",data:JSON.stringify(o),success:function(n){console.log(n)},error:function(){console.log("failed")}})},o.update=function(e,o,a){$.ajax({url:n+"/collections/"+t+"/"+a,type:"PUT",contentType:"application/json",dataType:"json",data:JSON.stringify(o),success:function(){return!0},error:function(){return!1}})},o.load=function(o){notify("ioInterface being asked to load data.",2),$.getJSON(n+"/collections/"+t+"/"+e,function(n){delete n._id,notify("ioInterface returning data.",2),notify(n,1),o(n)})},o};