var IOInterface=function t(){var t="http://localhost:3000",n="netCanvas",e,o={};return o.init=function(o){return notify("ioInterface initialising.",1),o?e=o:void $.ajax({url:t+"/collections/"+n+"/",type:"POST",contentType:"application/json",dataType:"json",data:"",success:function(t){return e=t[0]._id,notify("id from last transaction: "+e,3),session.registerData("session"),localStorage.setObject("activeSession",e),session.addData("session",{sessionID:e}),e},error:function(){return!1}})},o.save=function(o){delete session.userData._id,notify("IOInterface being asked to synchronise with data store:",2),notify("Data to be saved: ",1),notify(o,1),$.each(o,function(t,n){localStorage.setObject(t,n)}),$.ajax({url:t+"/collections/"+n+"/"+e,type:"PUT",contentType:"application/json",dataType:"json",data:JSON.stringify(o),success:function(t){notify("Result of saving was: ",2),notify(t,2)},error:function(t){notify("Saving failed! "+t,1e5)}})},o.update=function(e,o,i){$.ajax({url:t+"/collections/"+n+"/"+i,type:"PUT",contentType:"application/json",dataType:"json",data:JSON.stringify(o),success:function(){return!0},error:function(){return!1}})},o.load=function(o){notify("ioInterface being asked to load data.",2),$.getJSON(t+"/collections/"+n+"/"+e,function(t){delete t._id,notify("ioInterface returning data.",2),notify(t,1),o(t)})},o};