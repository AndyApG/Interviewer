var Network=function e(){var e={},n={},t=["Barney","Jonathon","Myles","Alethia","Tammera","Veola","Meredith","Renee","Grisel","Celestina","Fausto","Eliana","Raymundo","Lyle","Carry","Kittie","Melonie","Elke","Mattie","Kieth","Lourie","Marcie","Trinity","Librada","Lloyd","Pearlie","Velvet","Stephan","Hildegard","Winfred","Tempie","Maybelle","Melynda","Tiera","Lisbeth","Kiera","Gaye","Edra","Karissa","Manda","Ethelene","Michelle","Pamella","Jospeh","Tonette","Maren","Aundrea","Madelene","Epifania","Olive"];return e.init=function(){return notify("Network Initialising",2),window.nodes=session.registerData("nodes",!0),window.edges=session.registerData("edges",!0),!0},e.addNode=function(n){for(var d=0;e.getNode(d)!==!1;)d++;var o={id:d,label:t[Math.round(randomBetween(0,t.length-1))]};extend(o,n),session.addData("nodes",o,!0);var r=new CustomEvent("log",{detail:{eventType:"nodeCreate",eventObject:o}});window.dispatchEvent(r);var i=new CustomEvent("nodeAdded",{detail:o});window.dispatchEvent(i);var a=new Event("unsavedChanges");return window.dispatchEvent(a),o.id},e.addEdge=function(e){if("undefined"==typeof e.from||"undefined"==typeof e.to)return!1;var n={id:session.returnData("edges").length,type:"Default"};extend(n,e);for(var t=!1,d=session.returnData("edges"),o=0;o<d.length;o++)(d[o].from===n.from&&d[o].to===n.to||d[o].from===n.to&&d[o].to===n.from)&&d[o].type===n.type&&d[o].type===n.type&&(t=!0);if(t===!1){session.addData("edges",n,!0);var r=new CustomEvent("log",{detail:{eventType:"edgeCreate",eventObject:n}});window.dispatchEvent(r);var i=new CustomEvent("edgeAdded",{detail:n});window.dispatchEvent(i);var a=new Event("unsavedChanges");return window.dispatchEvent(a),n.id}return!1},e.removeEdge=function(e){if(!e)return!1;var n,t,d=session.returnData("edges");if("object"==typeof e&&"undefined"!=typeof e.length)for(var o=0;o<e.length;o++)d.remove(e[o]),n=new CustomEvent("log",{detail:{eventType:"edgeRemove",eventObject:e[o]}}),t=new CustomEvent("edgeRemoved",{detail:e[o]}),window.dispatchEvent(n),window.dispatchEvent(t);else d.remove(e),n=new CustomEvent("log",{detail:{eventType:"edgeRemove",eventObject:e}}),t=new CustomEvent("edgeRemoved",{detail:e}),window.dispatchEvent(n),window.dispatchEvent(t);session.addData("edges",d);var r=new Event("unsavedChanges");return window.dispatchEvent(r),!0},e.removeNode=function(n){var t,d;e.removeEdge(e.getNodeEdges(n));for(var o=session.returnData("nodes"),r=0;r<o.length;r++)if(o[r].id===n)return d=new CustomEvent("log",{detail:{eventType:"nodeRemove",eventObject:o[r]}}),window.dispatchEvent(d),t=new CustomEvent("edgeRemoved",{detail:o[r]}),window.dispatchEvent(t),o.remove(o[r]),session.addData("nodes",o),!0;return!1},e.updateEdge=function(n,t){if(e.getNode(n)===!1||void 0===t)return!1;var d=e.getEdge(n),o,r;extend(d,t),o=new CustomEvent("edgeUpdatedEvent",{detail:d}),window.dispatchEvent(o),r=new CustomEvent("log",{detail:{eventType:"edgeUpdate",eventObject:d}}),window.dispatchEvent(r);var i=new Event("unsavedChanges");window.dispatchEvent(i)},e.getNode=function(e){if(void 0===e)return!1;for(var n=session.returnData("nodes"),t=0;t<n.length;t++)if(n[t].id===e)return n[t];return!1},e.getEdge=function(e){return window.edges[e]},e.filterObject=function(e,n){if(!n)return!1;var t=e.filter(function(e){var t=!0;for(var d in n)void 0!==e[d]&&e[d]!==n[d]&&(t=!1);return t===!0?e:void 0});return t},e.getNodes=function(n){var t=session.returnData("nodes");return"undefined"!=typeof n&&0!==Object.keys(n).length?e.filterObject(t,n):t},e.getNodeInboundEdges=function(n){return e.getEdges({to:n})},e.getNodeOutboundEdges=function(n){return e.getEdges({from:n})},e.getNodeEdges=function(n){if(e.getNode(n)===!1)return!1;var t=e.getNodeInboundEdges(n),d=e.getNodeOutboundEdges(n),o=t.concat(d);return o},e.getEdges=function(n){var t=session.returnData("edges");return"undefined"!=typeof n&&0!==Object.keys(n).length?e.filterObject(t,n):t},e.setProperties=function(e,n){if("undefined"==typeof e)return!1;if("object"==typeof e&&e.length>0)for(var t=0;t<e.length;t++)$.extend(e[t],n);else $.extend(e,n)},e.returnNetwork=function(){return n},e.returnAllNodes=function(){return session.returnData("nodes")},e.returnAllEdges=function(){return session.returnData("edges")},e.createRandomGraph=function(n,t){var d=session.returnData("nodes");n=n||10,t=t||.4,notify("Creating random graph...",1);for(var o=0;n>o;o++){var r=o+1;notify("Adding node "+r+" of "+n,2);var i={coords:[Math.round(randomBetween(100,window.innerWidth-100)),Math.round(randomBetween(100,window.innerHeight-100))]};e.addNode(i)}notify("Adding edges.",3),$.each(d,function(n){if(randomBetween(0,1)<t){var o=Math.round(randomBetween(0,d.length-1));e.addEdge({from:d[n].id,to:d[o].id})}})},e.init(),e};