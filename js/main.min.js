if(!function(t,e){"object"==typeof module&&"object"==typeof module.exports?module.exports=t.document?e(t,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return e(t)}:e(t)}("undefined"!=typeof window?window:this,function(t,e){function i(t){var e=t.length,i=J.type(t);return"function"===i||J.isWindow(t)?!1:1===t.nodeType&&e?!0:"array"===i||0===e||"number"==typeof e&&e>0&&e-1 in t}function n(t,e,i){if(J.isFunction(e))return J.grep(t,function(t,n){return!!e.call(t,n,t)!==i});if(e.nodeType)return J.grep(t,function(t){return t===e!==i});if("string"==typeof e){if(ae.test(e))return J.filter(e,t,i);e=J.filter(e,t)}return J.grep(t,function(t){return j.call(e,t)>=0!==i})}function s(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}function o(t){var e=fe[t]={};return J.each(t.match(pe)||[],function(t,i){e[i]=!0}),e}function r(){Z.removeEventListener("DOMContentLoaded",r,!1),t.removeEventListener("load",r,!1),J.ready()}function a(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=J.expando+Math.random()}function h(t,e,i){var n;if(void 0===i&&1===t.nodeType)if(n="data-"+e.replace(xe,"-$1").toLowerCase(),i=t.getAttribute(n),"string"==typeof i){try{i="true"===i?!0:"false"===i?!1:"null"===i?null:+i+""===i?+i:be.test(i)?J.parseJSON(i):i}catch(s){}ye.set(t,e,i)}else i=void 0;return i}function c(){return!0}function $(){return!1}function l(){try{return Z.activeElement}catch(t){}}function d(t,e){return J.nodeName(t,"table")&&J.nodeName(11!==e.nodeType?e:e.firstChild,"tr")?t.getElementsByTagName("tbody")[0]||t.appendChild(t.ownerDocument.createElement("tbody")):t}function u(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function p(t){var e=Fe.exec(t.type);return e?t.type=e[1]:t.removeAttribute("type"),t}function f(t,e){for(var i=0,n=t.length;n>i;i++)ve.set(t[i],"globalEval",!e||ve.get(e[i],"globalEval"))}function g(t,e){var i,n,s,o,r,a,h,c;if(1===e.nodeType){if(ve.hasData(t)&&(o=ve.access(t),r=ve.set(e,o),c=o.events)){delete r.handle,r.events={};for(s in c)for(i=0,n=c[s].length;n>i;i++)J.event.add(e,s,c[s][i])}ye.hasData(t)&&(a=ye.access(t),h=J.extend({},a),ye.set(e,h))}}function m(t,e){var i=t.getElementsByTagName?t.getElementsByTagName(e||"*"):t.querySelectorAll?t.querySelectorAll(e||"*"):[];return void 0===e||e&&J.nodeName(t,e)?J.merge([t],i):i}function v(t,e){var i=e.nodeName.toLowerCase();"input"===i&&Ce.test(t.type)?e.checked=t.checked:("input"===i||"textarea"===i)&&(e.defaultValue=t.defaultValue)}function y(e,i){var n,s=J(i.createElement(e)).appendTo(i.body),o=t.getDefaultComputedStyle&&(n=t.getDefaultComputedStyle(s[0]))?n.display:J.css(s[0],"display");return s.detach(),o}function b(t){var e=Z,i=He[t];return i||(i=y(t,e),"none"!==i&&i||(Re=(Re||J("<iframe frameborder='0' width='0' height='0'/>")).appendTo(e.documentElement),e=Re[0].contentDocument,e.write(),e.close(),i=y(t,e),Re.detach()),He[t]=i),i}function x(t,e,i){var n,s,o,r,a=t.style;return i=i||We(t),i&&(r=i.getPropertyValue(e)||i[e]),i&&(""!==r||J.contains(t.ownerDocument,t)||(r=J.style(t,e)),Be.test(r)&&Ge.test(e)&&(n=a.width,s=a.minWidth,o=a.maxWidth,a.minWidth=a.maxWidth=a.width=r,r=i.width,a.width=n,a.minWidth=s,a.maxWidth=o)),void 0!==r?r+"":r}function w(t,e){return{get:function(){return t()?void delete this.get:(this.get=e).apply(this,arguments)}}}function _(t,e){if(e in t)return e;for(var i=e[0].toUpperCase()+e.slice(1),n=e,s=Xe.length;s--;)if(e=Xe[s]+i,e in t)return e;return n}function S(t,e,i){var n=je.exec(e);return n?Math.max(0,n[1]-(i||0))+(n[2]||"px"):e}function C(t,e,i,n,s){for(var o=i===(n?"border":"content")?4:"width"===e?1:0,r=0;4>o;o+=2)"margin"===i&&(r+=J.css(t,i+_e[o],!0,s)),n?("content"===i&&(r-=J.css(t,"padding"+_e[o],!0,s)),"margin"!==i&&(r-=J.css(t,"border"+_e[o]+"Width",!0,s))):(r+=J.css(t,"padding"+_e[o],!0,s),"padding"!==i&&(r+=J.css(t,"border"+_e[o]+"Width",!0,s)));return r}function T(t,e,i){var n=!0,s="width"===e?t.offsetWidth:t.offsetHeight,o=We(t),r="border-box"===J.css(t,"boxSizing",!1,o);if(0>=s||null==s){if(s=x(t,e,o),(0>s||null==s)&&(s=t.style[e]),Be.test(s))return s;n=r&&(q.boxSizingReliable()||s===t.style[e]),s=parseFloat(s)||0}return s+C(t,e,i||(r?"border":"content"),n,o)+"px"}function D(t,e){for(var i,n,s,o=[],r=0,a=t.length;a>r;r++)n=t[r],n.style&&(o[r]=ve.get(n,"olddisplay"),i=n.style.display,e?(o[r]||"none"!==i||(n.style.display=""),""===n.style.display&&Se(n)&&(o[r]=ve.access(n,"olddisplay",b(n.nodeName)))):(s=Se(n),"none"===i&&s||ve.set(n,"olddisplay",s?i:J.css(n,"display"))));for(r=0;a>r;r++)n=t[r],n.style&&(e&&"none"!==n.style.display&&""!==n.style.display||(n.style.display=e?o[r]||"":"none"));return t}function M(t,e,i,n,s){return new M.prototype.init(t,e,i,n,s)}function E(){return setTimeout(function(){qe=void 0}),qe=J.now()}function k(t,e){var i,n=0,s={height:t};for(e=e?1:0;4>n;n+=2-e)i=_e[n],s["margin"+i]=s["padding"+i]=t;return e&&(s.opacity=s.width=t),s}function L(t,e,i){for(var n,s=(ii[e]||[]).concat(ii["*"]),o=0,r=s.length;r>o;o++)if(n=s[o].call(i,e,t))return n}function N(t,e,i){var n,s,o,r,a,h,c,l,d=this,u={},p=t.style,f=t.nodeType&&Se(t),g=ve.get(t,"fxshow");i.queue||(a=J._queueHooks(t,"fx"),null==a.unqueued&&(a.unqueued=0,h=a.empty.fire,a.empty.fire=function(){a.unqueued||h()}),a.unqueued++,d.always(function(){d.always(function(){a.unqueued--,J.queue(t,"fx").length||a.empty.fire()})})),1===t.nodeType&&("height"in e||"width"in e)&&(i.overflow=[p.overflow,p.overflowX,p.overflowY],c=J.css(t,"display"),l="none"===c?ve.get(t,"olddisplay")||b(t.nodeName):c,"inline"===l&&"none"===J.css(t,"float")&&(p.display="inline-block")),i.overflow&&(p.overflow="hidden",d.always(function(){p.overflow=i.overflow[0],p.overflowX=i.overflow[1],p.overflowY=i.overflow[2]}));for(n in e)if(s=e[n],Qe.exec(s)){if(delete e[n],o=o||"toggle"===s,s===(f?"hide":"show")){if("show"!==s||!g||void 0===g[n])continue;f=!0}u[n]=g&&g[n]||J.style(t,n)}else c=void 0;if(J.isEmptyObject(u))"inline"===("none"===c?b(t.nodeName):c)&&(p.display=c);else{g?"hidden"in g&&(f=g.hidden):g=ve.access(t,"fxshow",{}),o&&(g.hidden=!f),f?J(t).show():d.done(function(){J(t).hide()}),d.done(function(){var e;ve.remove(t,"fxshow");for(e in u)J.style(t,e,u[e])});for(n in u)r=L(f?g[n]:0,n,d),n in g||(g[n]=r.start,f&&(r.end=r.start,r.start="width"===n||"height"===n?1:0))}}function A(t,e){var i,n,s,o,r;for(i in t)if(n=J.camelCase(i),s=e[n],o=t[i],J.isArray(o)&&(s=o[1],o=t[i]=o[0]),i!==n&&(t[n]=o,delete t[i]),r=J.cssHooks[n],r&&"expand"in r){o=r.expand(o),delete t[n];for(i in o)i in t||(t[i]=o[i],e[i]=s)}else e[n]=s}function O(t,e,i){var n,s,o=0,r=ei.length,a=J.Deferred().always(function(){delete h.elem}),h=function(){if(s)return!1;for(var e=qe||E(),i=Math.max(0,c.startTime+c.duration-e),n=i/c.duration||0,o=1-n,r=0,h=c.tweens.length;h>r;r++)c.tweens[r].run(o);return a.notifyWith(t,[c,o,i]),1>o&&h?i:(a.resolveWith(t,[c]),!1)},c=a.promise({elem:t,props:J.extend({},e),opts:J.extend(!0,{specialEasing:{}},i),originalProperties:e,originalOptions:i,startTime:qe||E(),duration:i.duration,tweens:[],createTween:function(e,i){var n=J.Tween(t,c.opts,e,i,c.opts.specialEasing[e]||c.opts.easing);return c.tweens.push(n),n},stop:function(e){var i=0,n=e?c.tweens.length:0;if(s)return this;for(s=!0;n>i;i++)c.tweens[i].run(1);return e?a.resolveWith(t,[c,e]):a.rejectWith(t,[c,e]),this}}),l=c.props;for(A(l,c.opts.specialEasing);r>o;o++)if(n=ei[o].call(c,t,l,c.opts))return n;return J.map(l,L,c),J.isFunction(c.opts.start)&&c.opts.start.call(t,c),J.fx.timer(J.extend(h,{elem:t,anim:c,queue:c.opts.queue})),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always)}function P(t){return function(e,i){"string"!=typeof e&&(i=e,e="*");var n,s=0,o=e.toLowerCase().match(pe)||[];if(J.isFunction(i))for(;n=o[s++];)"+"===n[0]?(n=n.slice(1)||"*",(t[n]=t[n]||[]).unshift(i)):(t[n]=t[n]||[]).push(i)}}function I(t,e,i,n){function s(a){var h;return o[a]=!0,J.each(t[a]||[],function(t,a){var c=a(e,i,n);return"string"!=typeof c||r||o[c]?r?!(h=c):void 0:(e.dataTypes.unshift(c),s(c),!1)}),h}var o={},r=t===wi;return s(e.dataTypes[0])||!o["*"]&&s("*")}function F(t,e){var i,n,s=J.ajaxSettings.flatOptions||{};for(i in e)void 0!==e[i]&&((s[i]?t:n||(n={}))[i]=e[i]);return n&&J.extend(!0,t,n),t}function K(t,e,i){for(var n,s,o,r,a=t.contents,h=t.dataTypes;"*"===h[0];)h.shift(),void 0===n&&(n=t.mimeType||e.getResponseHeader("Content-Type"));if(n)for(s in a)if(a[s]&&a[s].test(n)){h.unshift(s);break}if(h[0]in i)o=h[0];else{for(s in i){if(!h[0]||t.converters[s+" "+h[0]]){o=s;break}r||(r=s)}o=o||r}return o?(o!==h[0]&&h.unshift(o),i[o]):void 0}function z(t,e,i,n){var s,o,r,a,h,c={},l=t.dataTypes.slice();if(l[1])for(r in t.converters)c[r.toLowerCase()]=t.converters[r];for(o=l.shift();o;)if(t.responseFields[o]&&(i[t.responseFields[o]]=e),!h&&n&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),h=o,o=l.shift())if("*"===o)o=h;else if("*"!==h&&h!==o){if(r=c[h+" "+o]||c["* "+o],!r)for(s in c)if(a=s.split(" "),a[1]===o&&(r=c[h+" "+a[0]]||c["* "+a[0]])){r===!0?r=c[s]:c[s]!==!0&&(o=a[0],l.unshift(a[1]));break}if(r!==!0)if(r&&t["throws"])e=r(e);else try{e=r(e)}catch(d){return{state:"parsererror",error:r?d:"No conversion from "+h+" to "+o}}}return{state:"success",data:e}}function R(t,e,i,n){var s;if(J.isArray(e))J.each(e,function(e,s){i||Ti.test(t)?n(t,s):R(t+"["+("object"==typeof s?e:"")+"]",s,i,n)});else if(i||"object"!==J.type(e))n(t,e);else for(s in e)R(t+"["+s+"]",e[s],i,n)}function H(t){return J.isWindow(t)?t:9===t.nodeType&&t.defaultView}var G=[],B=G.slice,W=G.concat,Y=G.push,j=G.indexOf,U={},V=U.toString,X=U.hasOwnProperty,q={},Z=t.document,Q="2.1.1",J=function(t,e){return new J.fn.init(t,e)},te=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,ee=/^-ms-/,ie=/-([\da-z])/gi,ne=function(t,e){return e.toUpperCase()};J.fn=J.prototype={jquery:Q,constructor:J,selector:"",length:0,toArray:function(){return B.call(this)},get:function(t){return null!=t?0>t?this[t+this.length]:this[t]:B.call(this)},pushStack:function(t){var e=J.merge(this.constructor(),t);return e.prevObject=this,e.context=this.context,e},each:function(t,e){return J.each(this,t,e)},map:function(t){return this.pushStack(J.map(this,function(e,i){return t.call(e,i,e)}))},slice:function(){return this.pushStack(B.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,i=+t+(0>t?e:0);return this.pushStack(i>=0&&e>i?[this[i]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:Y,sort:G.sort,splice:G.splice},J.extend=J.fn.extend=function(){var t,e,i,n,s,o,r=arguments[0]||{},a=1,h=arguments.length,c=!1;for("boolean"==typeof r&&(c=r,r=arguments[a]||{},a++),"object"==typeof r||J.isFunction(r)||(r={}),a===h&&(r=this,a--);h>a;a++)if(null!=(t=arguments[a]))for(e in t)i=r[e],n=t[e],r!==n&&(c&&n&&(J.isPlainObject(n)||(s=J.isArray(n)))?(s?(s=!1,o=i&&J.isArray(i)?i:[]):o=i&&J.isPlainObject(i)?i:{},r[e]=J.extend(c,o,n)):void 0!==n&&(r[e]=n));return r},J.extend({expando:"jQuery"+(Q+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isFunction:function(t){return"function"===J.type(t)},isArray:Array.isArray,isWindow:function(t){return null!=t&&t===t.window},isNumeric:function(t){return!J.isArray(t)&&t-parseFloat(t)>=0},isPlainObject:function(t){return"object"!==J.type(t)||t.nodeType||J.isWindow(t)?!1:t.constructor&&!X.call(t.constructor.prototype,"isPrototypeOf")?!1:!0},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},type:function(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?U[V.call(t)]||"object":typeof t},globalEval:function(t){var e,i=eval;t=J.trim(t),t&&(1===t.indexOf("use strict")?(e=Z.createElement("script"),e.text=t,Z.head.appendChild(e).parentNode.removeChild(e)):i(t))},camelCase:function(t){return t.replace(ee,"ms-").replace(ie,ne)},nodeName:function(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()},each:function(t,e,n){var s,o=0,r=t.length,a=i(t);if(n){if(a)for(;r>o&&(s=e.apply(t[o],n),s!==!1);o++);else for(o in t)if(s=e.apply(t[o],n),s===!1)break}else if(a)for(;r>o&&(s=e.call(t[o],o,t[o]),s!==!1);o++);else for(o in t)if(s=e.call(t[o],o,t[o]),s===!1)break;return t},trim:function(t){return null==t?"":(t+"").replace(te,"")},makeArray:function(t,e){var n=e||[];return null!=t&&(i(Object(t))?J.merge(n,"string"==typeof t?[t]:t):Y.call(n,t)),n},inArray:function(t,e,i){return null==e?-1:j.call(e,t,i)},merge:function(t,e){for(var i=+e.length,n=0,s=t.length;i>n;n++)t[s++]=e[n];return t.length=s,t},grep:function(t,e,i){for(var n,s=[],o=0,r=t.length,a=!i;r>o;o++)n=!e(t[o],o),n!==a&&s.push(t[o]);return s},map:function(t,e,n){var s,o=0,r=t.length,a=i(t),h=[];if(a)for(;r>o;o++)s=e(t[o],o,n),null!=s&&h.push(s);else for(o in t)s=e(t[o],o,n),null!=s&&h.push(s);return W.apply([],h)},guid:1,proxy:function(t,e){var i,n,s;return"string"==typeof e&&(i=t[e],e=t,t=i),J.isFunction(t)?(n=B.call(arguments,2),s=function(){return t.apply(e||this,n.concat(B.call(arguments)))},s.guid=t.guid=t.guid||J.guid++,s):void 0},now:Date.now,support:q}),J.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(t,e){U["[object "+e+"]"]=e.toLowerCase()});var se=function(t){function e(t,e,i,n){var s,o,r,a,h,c,d,p,f,g;if((e?e.ownerDocument||e:H)!==A&&N(e),e=e||A,i=i||[],!t||"string"!=typeof t)return i;if(1!==(a=e.nodeType)&&9!==a)return[];if(P&&!n){if(s=ye.exec(t))if(r=s[1]){if(9===a){if(o=e.getElementById(r),!o||!o.parentNode)return i;if(o.id===r)return i.push(o),i}else if(e.ownerDocument&&(o=e.ownerDocument.getElementById(r))&&z(e,o)&&o.id===r)return i.push(o),i}else{if(s[2])return te.apply(i,e.getElementsByTagName(t)),i;if((r=s[3])&&w.getElementsByClassName&&e.getElementsByClassName)return te.apply(i,e.getElementsByClassName(r)),i}if(w.qsa&&(!I||!I.test(t))){if(p=d=R,f=e,g=9===a&&t,1===a&&"object"!==e.nodeName.toLowerCase()){for(c=T(t),(d=e.getAttribute("id"))?p=d.replace(xe,"\\$&"):e.setAttribute("id",p),p="[id='"+p+"'] ",h=c.length;h--;)c[h]=p+u(c[h]);f=be.test(t)&&l(e.parentNode)||e,g=c.join(",")}if(g)try{return te.apply(i,f.querySelectorAll(g)),i}catch(m){}finally{d||e.removeAttribute("id")}}}return M(t.replace(ce,"$1"),e,i,n)}function i(){function t(i,n){return e.push(i+" ")>_.cacheLength&&delete t[e.shift()],t[i+" "]=n}var e=[];return t}function n(t){return t[R]=!0,t}function s(t){var e=A.createElement("div");try{return!!t(e)}catch(i){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function o(t,e){for(var i=t.split("|"),n=t.length;n--;)_.attrHandle[i[n]]=e}function r(t,e){var i=e&&t,n=i&&1===t.nodeType&&1===e.nodeType&&(~e.sourceIndex||X)-(~t.sourceIndex||X);if(n)return n;if(i)for(;i=i.nextSibling;)if(i===e)return-1;return t?1:-1}function a(t){return function(e){var i=e.nodeName.toLowerCase();return"input"===i&&e.type===t}}function h(t){return function(e){var i=e.nodeName.toLowerCase();return("input"===i||"button"===i)&&e.type===t}}function c(t){return n(function(e){return e=+e,n(function(i,n){for(var s,o=t([],i.length,e),r=o.length;r--;)i[s=o[r]]&&(i[s]=!(n[s]=i[s]))})})}function l(t){return t&&typeof t.getElementsByTagName!==V&&t}function d(){}function u(t){for(var e=0,i=t.length,n="";i>e;e++)n+=t[e].value;return n}function p(t,e,i){var n=e.dir,s=i&&"parentNode"===n,o=B++;return e.first?function(e,i,o){for(;e=e[n];)if(1===e.nodeType||s)return t(e,i,o)}:function(e,i,r){var a,h,c=[G,o];if(r){for(;e=e[n];)if((1===e.nodeType||s)&&t(e,i,r))return!0}else for(;e=e[n];)if(1===e.nodeType||s){if(h=e[R]||(e[R]={}),(a=h[n])&&a[0]===G&&a[1]===o)return c[2]=a[2];if(h[n]=c,c[2]=t(e,i,r))return!0}}}function f(t){return t.length>1?function(e,i,n){for(var s=t.length;s--;)if(!t[s](e,i,n))return!1;return!0}:t[0]}function g(t,i,n){for(var s=0,o=i.length;o>s;s++)e(t,i[s],n);return n}function m(t,e,i,n,s){for(var o,r=[],a=0,h=t.length,c=null!=e;h>a;a++)(o=t[a])&&(!i||i(o,n,s))&&(r.push(o),c&&e.push(a));return r}function v(t,e,i,s,o,r){return s&&!s[R]&&(s=v(s)),o&&!o[R]&&(o=v(o,r)),n(function(n,r,a,h){var c,l,d,u=[],p=[],f=r.length,v=n||g(e||"*",a.nodeType?[a]:a,[]),y=!t||!n&&e?v:m(v,u,t,a,h),b=i?o||(n?t:f||s)?[]:r:y;if(i&&i(y,b,a,h),s)for(c=m(b,p),s(c,[],a,h),l=c.length;l--;)(d=c[l])&&(b[p[l]]=!(y[p[l]]=d));if(n){if(o||t){if(o){for(c=[],l=b.length;l--;)(d=b[l])&&c.push(y[l]=d);o(null,b=[],c,h)}for(l=b.length;l--;)(d=b[l])&&(c=o?ie.call(n,d):u[l])>-1&&(n[c]=!(r[c]=d))}}else b=m(b===r?b.splice(f,b.length):b),o?o(null,r,b,h):te.apply(r,b)})}function y(t){for(var e,i,n,s=t.length,o=_.relative[t[0].type],r=o||_.relative[" "],a=o?1:0,h=p(function(t){return t===e},r,!0),c=p(function(t){return ie.call(e,t)>-1},r,!0),l=[function(t,i,n){return!o&&(n||i!==E)||((e=i).nodeType?h(t,i,n):c(t,i,n))}];s>a;a++)if(i=_.relative[t[a].type])l=[p(f(l),i)];else{if(i=_.filter[t[a].type].apply(null,t[a].matches),i[R]){for(n=++a;s>n&&!_.relative[t[n].type];n++);return v(a>1&&f(l),a>1&&u(t.slice(0,a-1).concat({value:" "===t[a-2].type?"*":""})).replace(ce,"$1"),i,n>a&&y(t.slice(a,n)),s>n&&y(t=t.slice(n)),s>n&&u(t))}l.push(i)}return f(l)}function b(t,i){var s=i.length>0,o=t.length>0,r=function(n,r,a,h,c){var l,d,u,p=0,f="0",g=n&&[],v=[],y=E,b=n||o&&_.find.TAG("*",c),x=G+=null==y?1:Math.random()||.1,w=b.length;for(c&&(E=r!==A&&r);f!==w&&null!=(l=b[f]);f++){if(o&&l){for(d=0;u=t[d++];)if(u(l,r,a)){h.push(l);break}c&&(G=x)}s&&((l=!u&&l)&&p--,n&&g.push(l))}if(p+=f,s&&f!==p){for(d=0;u=i[d++];)u(g,v,r,a);if(n){if(p>0)for(;f--;)g[f]||v[f]||(v[f]=Q.call(h));v=m(v)}te.apply(h,v),c&&!n&&v.length>0&&p+i.length>1&&e.uniqueSort(h)}return c&&(G=x,E=y),g};return s?n(r):r}var x,w,_,S,C,T,D,M,E,k,L,N,A,O,P,I,F,K,z,R="sizzle"+-new Date,H=t.document,G=0,B=0,W=i(),Y=i(),j=i(),U=function(t,e){return t===e&&(L=!0),0},V="undefined",X=1<<31,q={}.hasOwnProperty,Z=[],Q=Z.pop,J=Z.push,te=Z.push,ee=Z.slice,ie=Z.indexOf||function(t){for(var e=0,i=this.length;i>e;e++)if(this[e]===t)return e;return-1},ne="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",se="[\\x20\\t\\r\\n\\f]",oe="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",re=oe.replace("w","w#"),ae="\\["+se+"*("+oe+")(?:"+se+"*([*^$|!~]?=)"+se+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+re+"))|)"+se+"*\\]",he=":("+oe+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+ae+")*)|.*)\\)|)",ce=new RegExp("^"+se+"+|((?:^|[^\\\\])(?:\\\\.)*)"+se+"+$","g"),le=new RegExp("^"+se+"*,"+se+"*"),de=new RegExp("^"+se+"*([>+~]|"+se+")"+se+"*"),ue=new RegExp("="+se+"*([^\\]'\"]*?)"+se+"*\\]","g"),pe=new RegExp(he),fe=new RegExp("^"+re+"$"),ge={ID:new RegExp("^#("+oe+")"),CLASS:new RegExp("^\\.("+oe+")"),TAG:new RegExp("^("+oe.replace("w","w*")+")"),ATTR:new RegExp("^"+ae),PSEUDO:new RegExp("^"+he),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+se+"*(even|odd|(([+-]|)(\\d*)n|)"+se+"*(?:([+-]|)"+se+"*(\\d+)|))"+se+"*\\)|)","i"),bool:new RegExp("^(?:"+ne+")$","i"),needsContext:new RegExp("^"+se+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+se+"*((?:-\\d)?\\d*)"+se+"*\\)|)(?=[^-]|$)","i")},me=/^(?:input|select|textarea|button)$/i,ve=/^h\d$/i,$=/^[^{]+\{\s*\[native \w/,ye=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,be=/[+~]/,xe=/'|\\/g,we=new RegExp("\\\\([\\da-f]{1,6}"+se+"?|("+se+")|.)","ig"),_e=function(t,e,i){var n="0x"+e-65536;return n!==n||i?e:0>n?String.fromCharCode(n+65536):String.fromCharCode(n>>10|55296,1023&n|56320)};try{te.apply(Z=ee.call(H.childNodes),H.childNodes),Z[H.childNodes.length].nodeType}catch(Se){te={apply:Z.length?function(t,e){J.apply(t,ee.call(e))}:function(t,e){for(var i=t.length,n=0;t[i++]=e[n++];);t.length=i-1}}}w=e.support={},C=e.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return e?"HTML"!==e.nodeName:!1},N=e.setDocument=function(t){var e,i=t?t.ownerDocument||t:H,n=i.defaultView;return i!==A&&9===i.nodeType&&i.documentElement?(A=i,O=i.documentElement,P=!C(i),n&&n!==n.top&&(n.addEventListener?n.addEventListener("unload",function(){N()},!1):n.attachEvent&&n.attachEvent("onunload",function(){N()})),w.attributes=s(function(t){return t.className="i",!t.getAttribute("className")}),w.getElementsByTagName=s(function(t){return t.appendChild(i.createComment("")),!t.getElementsByTagName("*").length}),w.getElementsByClassName=$.test(i.getElementsByClassName)&&s(function(t){return t.innerHTML="<div class='a'></div><div class='a i'></div>",t.firstChild.className="i",2===t.getElementsByClassName("i").length}),w.getById=s(function(t){return O.appendChild(t).id=R,!i.getElementsByName||!i.getElementsByName(R).length}),w.getById?(_.find.ID=function(t,e){if(typeof e.getElementById!==V&&P){var i=e.getElementById(t);return i&&i.parentNode?[i]:[]}},_.filter.ID=function(t){var e=t.replace(we,_e);return function(t){return t.getAttribute("id")===e}}):(delete _.find.ID,_.filter.ID=function(t){var e=t.replace(we,_e);return function(t){var i=typeof t.getAttributeNode!==V&&t.getAttributeNode("id");return i&&i.value===e}}),_.find.TAG=w.getElementsByTagName?function(t,e){return typeof e.getElementsByTagName!==V?e.getElementsByTagName(t):void 0}:function(t,e){var i,n=[],s=0,o=e.getElementsByTagName(t);if("*"===t){for(;i=o[s++];)1===i.nodeType&&n.push(i);return n}return o},_.find.CLASS=w.getElementsByClassName&&function(t,e){return typeof e.getElementsByClassName!==V&&P?e.getElementsByClassName(t):void 0},F=[],I=[],(w.qsa=$.test(i.querySelectorAll))&&(s(function(t){t.innerHTML="<select msallowclip=''><option selected=''></option></select>",t.querySelectorAll("[msallowclip^='']").length&&I.push("[*^$]="+se+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||I.push("\\["+se+"*(?:value|"+ne+")"),t.querySelectorAll(":checked").length||I.push(":checked")}),s(function(t){var e=i.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&I.push("name"+se+"*[*^$|!~]?="),t.querySelectorAll(":enabled").length||I.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),I.push(",.*:")})),(w.matchesSelector=$.test(K=O.matches||O.webkitMatchesSelector||O.mozMatchesSelector||O.oMatchesSelector||O.msMatchesSelector))&&s(function(t){w.disconnectedMatch=K.call(t,"div"),K.call(t,"[s!='']:x"),F.push("!=",he)}),I=I.length&&new RegExp(I.join("|")),F=F.length&&new RegExp(F.join("|")),e=$.test(O.compareDocumentPosition),z=e||$.test(O.contains)?function(t,e){var i=9===t.nodeType?t.documentElement:t,n=e&&e.parentNode;return t===n||!(!n||1!==n.nodeType||!(i.contains?i.contains(n):t.compareDocumentPosition&&16&t.compareDocumentPosition(n)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},U=e?function(t,e){if(t===e)return L=!0,0;var n=!t.compareDocumentPosition-!e.compareDocumentPosition;return n?n:(n=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1,1&n||!w.sortDetached&&e.compareDocumentPosition(t)===n?t===i||t.ownerDocument===H&&z(H,t)?-1:e===i||e.ownerDocument===H&&z(H,e)?1:k?ie.call(k,t)-ie.call(k,e):0:4&n?-1:1)}:function(t,e){if(t===e)return L=!0,0;var n,s=0,o=t.parentNode,a=e.parentNode,h=[t],c=[e];if(!o||!a)return t===i?-1:e===i?1:o?-1:a?1:k?ie.call(k,t)-ie.call(k,e):0;if(o===a)return r(t,e);for(n=t;n=n.parentNode;)h.unshift(n);for(n=e;n=n.parentNode;)c.unshift(n);for(;h[s]===c[s];)s++;return s?r(h[s],c[s]):h[s]===H?-1:c[s]===H?1:0},i):A},e.matches=function(t,i){return e(t,null,null,i)},e.matchesSelector=function(t,i){if((t.ownerDocument||t)!==A&&N(t),i=i.replace(ue,"='$1']"),!(!w.matchesSelector||!P||F&&F.test(i)||I&&I.test(i)))try{var n=K.call(t,i);if(n||w.disconnectedMatch||t.document&&11!==t.document.nodeType)return n}catch(s){}return e(i,A,null,[t]).length>0},e.contains=function(t,e){return(t.ownerDocument||t)!==A&&N(t),z(t,e)},e.attr=function(t,e){(t.ownerDocument||t)!==A&&N(t);var i=_.attrHandle[e.toLowerCase()],n=i&&q.call(_.attrHandle,e.toLowerCase())?i(t,e,!P):void 0;return void 0!==n?n:w.attributes||!P?t.getAttribute(e):(n=t.getAttributeNode(e))&&n.specified?n.value:null},e.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},e.uniqueSort=function(t){var e,i=[],n=0,s=0;if(L=!w.detectDuplicates,k=!w.sortStable&&t.slice(0),t.sort(U),L){for(;e=t[s++];)e===t[s]&&(n=i.push(s));for(;n--;)t.splice(i[n],1)}return k=null,t},S=e.getText=function(t){var e,i="",n=0,s=t.nodeType;if(s){if(1===s||9===s||11===s){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)i+=S(t)}else if(3===s||4===s)return t.nodeValue}else for(;e=t[n++];)i+=S(e);return i},_=e.selectors={cacheLength:50,createPseudo:n,match:ge,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(we,_e),t[3]=(t[3]||t[4]||t[5]||"").replace(we,_e),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||e.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&e.error(t[0]),t},PSEUDO:function(t){var e,i=!t[6]&&t[2];return ge.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":i&&pe.test(i)&&(e=T(i,!0))&&(e=i.indexOf(")",i.length-e)-i.length)&&(t[0]=t[0].slice(0,e),t[2]=i.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(we,_e).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=W[t+" "];return e||(e=new RegExp("(^|"+se+")"+t+"("+se+"|$)"))&&W(t,function(t){return e.test("string"==typeof t.className&&t.className||typeof t.getAttribute!==V&&t.getAttribute("class")||"")})},ATTR:function(t,i,n){return function(s){var o=e.attr(s,t);return null==o?"!="===i:i?(o+="","="===i?o===n:"!="===i?o!==n:"^="===i?n&&0===o.indexOf(n):"*="===i?n&&o.indexOf(n)>-1:"$="===i?n&&o.slice(-n.length)===n:"~="===i?(" "+o+" ").indexOf(n)>-1:"|="===i?o===n||o.slice(0,n.length+1)===n+"-":!1):!0}},CHILD:function(t,e,i,n,s){var o="nth"!==t.slice(0,3),r="last"!==t.slice(-4),a="of-type"===e;return 1===n&&0===s?function(t){return!!t.parentNode}:function(e,i,h){var c,l,d,u,p,f,g=o!==r?"nextSibling":"previousSibling",m=e.parentNode,v=a&&e.nodeName.toLowerCase(),y=!h&&!a;if(m){if(o){for(;g;){for(d=e;d=d[g];)if(a?d.nodeName.toLowerCase()===v:1===d.nodeType)return!1;f=g="only"===t&&!f&&"nextSibling"}return!0}if(f=[r?m.firstChild:m.lastChild],r&&y){for(l=m[R]||(m[R]={}),c=l[t]||[],p=c[0]===G&&c[1],u=c[0]===G&&c[2],d=p&&m.childNodes[p];d=++p&&d&&d[g]||(u=p=0)||f.pop();)if(1===d.nodeType&&++u&&d===e){l[t]=[G,p,u];break}}else if(y&&(c=(e[R]||(e[R]={}))[t])&&c[0]===G)u=c[1];else for(;(d=++p&&d&&d[g]||(u=p=0)||f.pop())&&((a?d.nodeName.toLowerCase()!==v:1!==d.nodeType)||!++u||(y&&((d[R]||(d[R]={}))[t]=[G,u]),d!==e)););return u-=s,u===n||u%n===0&&u/n>=0}}},PSEUDO:function(t,i){var s,o=_.pseudos[t]||_.setFilters[t.toLowerCase()]||e.error("unsupported pseudo: "+t);return o[R]?o(i):o.length>1?(s=[t,t,"",i],_.setFilters.hasOwnProperty(t.toLowerCase())?n(function(t,e){for(var n,s=o(t,i),r=s.length;r--;)n=ie.call(t,s[r]),t[n]=!(e[n]=s[r])}):function(t){return o(t,0,s)}):o}},pseudos:{not:n(function(t){var e=[],i=[],s=D(t.replace(ce,"$1"));return s[R]?n(function(t,e,i,n){for(var o,r=s(t,null,n,[]),a=t.length;a--;)(o=r[a])&&(t[a]=!(e[a]=o))}):function(t,n,o){return e[0]=t,s(e,null,o,i),!i.pop()}}),has:n(function(t){return function(i){return e(t,i).length>0}}),contains:n(function(t){return function(e){return(e.textContent||e.innerText||S(e)).indexOf(t)>-1}}),lang:n(function(t){return fe.test(t||"")||e.error("unsupported lang: "+t),t=t.replace(we,_e).toLowerCase(),function(e){var i;do if(i=P?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return i=i.toLowerCase(),i===t||0===i.indexOf(t+"-");while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var i=t.location&&t.location.hash;return i&&i.slice(1)===e.id},root:function(t){return t===O},focus:function(t){return t===A.activeElement&&(!A.hasFocus||A.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:function(t){return t.disabled===!1},disabled:function(t){return t.disabled===!0},checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,t.selected===!0},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!_.pseudos.empty(t)},header:function(t){return ve.test(t.nodeName)},input:function(t){return me.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:c(function(){return[0]}),last:c(function(t,e){return[e-1]}),eq:c(function(t,e,i){return[0>i?i+e:i]}),even:c(function(t,e){for(var i=0;e>i;i+=2)t.push(i);return t}),odd:c(function(t,e){for(var i=1;e>i;i+=2)t.push(i);return t}),lt:c(function(t,e,i){for(var n=0>i?i+e:i;--n>=0;)t.push(n);return t}),gt:c(function(t,e,i){for(var n=0>i?i+e:i;++n<e;)t.push(n);return t})}},_.pseudos.nth=_.pseudos.eq;for(x in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})_.pseudos[x]=a(x);for(x in{submit:!0,reset:!0})_.pseudos[x]=h(x);return d.prototype=_.filters=_.pseudos,_.setFilters=new d,T=e.tokenize=function(t,i){var n,s,o,r,a,h,c,l=Y[t+" "];if(l)return i?0:l.slice(0);for(a=t,h=[],c=_.preFilter;a;){(!n||(s=le.exec(a)))&&(s&&(a=a.slice(s[0].length)||a),h.push(o=[])),n=!1,(s=de.exec(a))&&(n=s.shift(),o.push({value:n,type:s[0].replace(ce," ")}),a=a.slice(n.length));for(r in _.filter)!(s=ge[r].exec(a))||c[r]&&!(s=c[r](s))||(n=s.shift(),o.push({value:n,type:r,matches:s}),a=a.slice(n.length));if(!n)break}return i?a.length:a?e.error(t):Y(t,h).slice(0)},D=e.compile=function(t,e){var i,n=[],s=[],o=j[t+" "];if(!o){for(e||(e=T(t)),i=e.length;i--;)o=y(e[i]),o[R]?n.push(o):s.push(o);o=j(t,b(s,n)),o.selector=t}return o},M=e.select=function(t,e,i,n){var s,o,r,a,h,c="function"==typeof t&&t,d=!n&&T(t=c.selector||t);if(i=i||[],1===d.length){if(o=d[0]=d[0].slice(0),o.length>2&&"ID"===(r=o[0]).type&&w.getById&&9===e.nodeType&&P&&_.relative[o[1].type]){if(e=(_.find.ID(r.matches[0].replace(we,_e),e)||[])[0],!e)return i;c&&(e=e.parentNode),t=t.slice(o.shift().value.length)}for(s=ge.needsContext.test(t)?0:o.length;s--&&(r=o[s],!_.relative[a=r.type]);)if((h=_.find[a])&&(n=h(r.matches[0].replace(we,_e),be.test(o[0].type)&&l(e.parentNode)||e))){if(o.splice(s,1),t=n.length&&u(o),!t)return te.apply(i,n),i;break}}return(c||D(t,d))(n,e,!P,i,be.test(t)&&l(e.parentNode)||e),i},w.sortStable=R.split("").sort(U).join("")===R,w.detectDuplicates=!!L,N(),w.sortDetached=s(function(t){return 1&t.compareDocumentPosition(A.createElement("div"))}),s(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||o("type|href|height|width",function(t,e,i){return i?void 0:t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),w.attributes&&s(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||o("value",function(t,e,i){return i||"input"!==t.nodeName.toLowerCase()?void 0:t.defaultValue}),s(function(t){return null==t.getAttribute("disabled")})||o(ne,function(t,e,i){var n;return i?void 0:t[e]===!0?e.toLowerCase():(n=t.getAttributeNode(e))&&n.specified?n.value:null}),e}(t);J.find=se,J.expr=se.selectors,J.expr[":"]=J.expr.pseudos,J.unique=se.uniqueSort,J.text=se.getText,J.isXMLDoc=se.isXML,J.contains=se.contains;var oe=J.expr.match.needsContext,re=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,ae=/^.[^:#\[\.,]*$/;J.filter=function(t,e,i){var n=e[0];return i&&(t=":not("+t+")"),1===e.length&&1===n.nodeType?J.find.matchesSelector(n,t)?[n]:[]:J.find.matches(t,J.grep(e,function(t){return 1===t.nodeType}))},J.fn.extend({find:function(t){var e,i=this.length,n=[],s=this;if("string"!=typeof t)return this.pushStack(J(t).filter(function(){for(e=0;i>e;e++)if(J.contains(s[e],this))return!0
}));for(e=0;i>e;e++)J.find(t,s[e],n);return n=this.pushStack(i>1?J.unique(n):n),n.selector=this.selector?this.selector+" "+t:t,n},filter:function(t){return this.pushStack(n(this,t||[],!1))},not:function(t){return this.pushStack(n(this,t||[],!0))},is:function(t){return!!n(this,"string"==typeof t&&oe.test(t)?J(t):t||[],!1).length}});var he,ce=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,le=J.fn.init=function(t,e){var i,n;if(!t)return this;if("string"==typeof t){if(i="<"===t[0]&&">"===t[t.length-1]&&t.length>=3?[null,t,null]:ce.exec(t),!i||!i[1]&&e)return!e||e.jquery?(e||he).find(t):this.constructor(e).find(t);if(i[1]){if(e=e instanceof J?e[0]:e,J.merge(this,J.parseHTML(i[1],e&&e.nodeType?e.ownerDocument||e:Z,!0)),re.test(i[1])&&J.isPlainObject(e))for(i in e)J.isFunction(this[i])?this[i](e[i]):this.attr(i,e[i]);return this}return n=Z.getElementById(i[2]),n&&n.parentNode&&(this.length=1,this[0]=n),this.context=Z,this.selector=t,this}return t.nodeType?(this.context=this[0]=t,this.length=1,this):J.isFunction(t)?"undefined"!=typeof he.ready?he.ready(t):t(J):(void 0!==t.selector&&(this.selector=t.selector,this.context=t.context),J.makeArray(t,this))};le.prototype=J.fn,he=J(Z);var de=/^(?:parents|prev(?:Until|All))/,ue={children:!0,contents:!0,next:!0,prev:!0};J.extend({dir:function(t,e,i){for(var n=[],s=void 0!==i;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(s&&J(t).is(i))break;n.push(t)}return n},sibling:function(t,e){for(var i=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&i.push(t);return i}}),J.fn.extend({has:function(t){var e=J(t,this),i=e.length;return this.filter(function(){for(var t=0;i>t;t++)if(J.contains(this,e[t]))return!0})},closest:function(t,e){for(var i,n=0,s=this.length,o=[],r=oe.test(t)||"string"!=typeof t?J(t,e||this.context):0;s>n;n++)for(i=this[n];i&&i!==e;i=i.parentNode)if(i.nodeType<11&&(r?r.index(i)>-1:1===i.nodeType&&J.find.matchesSelector(i,t))){o.push(i);break}return this.pushStack(o.length>1?J.unique(o):o)},index:function(t){return t?"string"==typeof t?j.call(J(t),this[0]):j.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(J.unique(J.merge(this.get(),J(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),J.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return J.dir(t,"parentNode")},parentsUntil:function(t,e,i){return J.dir(t,"parentNode",i)},next:function(t){return s(t,"nextSibling")},prev:function(t){return s(t,"previousSibling")},nextAll:function(t){return J.dir(t,"nextSibling")},prevAll:function(t){return J.dir(t,"previousSibling")},nextUntil:function(t,e,i){return J.dir(t,"nextSibling",i)},prevUntil:function(t,e,i){return J.dir(t,"previousSibling",i)},siblings:function(t){return J.sibling((t.parentNode||{}).firstChild,t)},children:function(t){return J.sibling(t.firstChild)},contents:function(t){return t.contentDocument||J.merge([],t.childNodes)}},function(t,e){J.fn[t]=function(i,n){var s=J.map(this,e,i);return"Until"!==t.slice(-5)&&(n=i),n&&"string"==typeof n&&(s=J.filter(n,s)),this.length>1&&(ue[t]||J.unique(s),de.test(t)&&s.reverse()),this.pushStack(s)}});var pe=/\S+/g,fe={};J.Callbacks=function(t){t="string"==typeof t?fe[t]||o(t):J.extend({},t);var e,i,n,s,r,a,h=[],c=!t.once&&[],l=function(o){for(e=t.memory&&o,i=!0,a=s||0,s=0,r=h.length,n=!0;h&&r>a;a++)if(h[a].apply(o[0],o[1])===!1&&t.stopOnFalse){e=!1;break}n=!1,h&&(c?c.length&&l(c.shift()):e?h=[]:d.disable())},d={add:function(){if(h){var i=h.length;!function o(e){J.each(e,function(e,i){var n=J.type(i);"function"===n?t.unique&&d.has(i)||h.push(i):i&&i.length&&"string"!==n&&o(i)})}(arguments),n?r=h.length:e&&(s=i,l(e))}return this},remove:function(){return h&&J.each(arguments,function(t,e){for(var i;(i=J.inArray(e,h,i))>-1;)h.splice(i,1),n&&(r>=i&&r--,a>=i&&a--)}),this},has:function(t){return t?J.inArray(t,h)>-1:!(!h||!h.length)},empty:function(){return h=[],r=0,this},disable:function(){return h=c=e=void 0,this},disabled:function(){return!h},lock:function(){return c=void 0,e||d.disable(),this},locked:function(){return!c},fireWith:function(t,e){return!h||i&&!c||(e=e||[],e=[t,e.slice?e.slice():e],n?c.push(e):l(e)),this},fire:function(){return d.fireWith(this,arguments),this},fired:function(){return!!i}};return d},J.extend({Deferred:function(t){var e=[["resolve","done",J.Callbacks("once memory"),"resolved"],["reject","fail",J.Callbacks("once memory"),"rejected"],["notify","progress",J.Callbacks("memory")]],i="pending",n={state:function(){return i},always:function(){return s.done(arguments).fail(arguments),this},then:function(){var t=arguments;return J.Deferred(function(i){J.each(e,function(e,o){var r=J.isFunction(t[e])&&t[e];s[o[1]](function(){var t=r&&r.apply(this,arguments);t&&J.isFunction(t.promise)?t.promise().done(i.resolve).fail(i.reject).progress(i.notify):i[o[0]+"With"](this===n?i.promise():this,r?[t]:arguments)})}),t=null}).promise()},promise:function(t){return null!=t?J.extend(t,n):n}},s={};return n.pipe=n.then,J.each(e,function(t,o){var r=o[2],a=o[3];n[o[1]]=r.add,a&&r.add(function(){i=a},e[1^t][2].disable,e[2][2].lock),s[o[0]]=function(){return s[o[0]+"With"](this===s?n:this,arguments),this},s[o[0]+"With"]=r.fireWith}),n.promise(s),t&&t.call(s,s),s},when:function(t){var e=0,i=B.call(arguments),n=i.length,s=1!==n||t&&J.isFunction(t.promise)?n:0,o=1===s?t:J.Deferred(),r=function(t,e,i){return function(n){e[t]=this,i[t]=arguments.length>1?B.call(arguments):n,i===a?o.notifyWith(e,i):--s||o.resolveWith(e,i)}},a,h,c;if(n>1)for(a=new Array(n),h=new Array(n),c=new Array(n);n>e;e++)i[e]&&J.isFunction(i[e].promise)?i[e].promise().done(r(e,c,i)).fail(o.reject).progress(r(e,h,a)):--s;return s||o.resolveWith(c,i),o.promise()}});var ge;J.fn.ready=function(t){return J.ready.promise().done(t),this},J.extend({isReady:!1,readyWait:1,holdReady:function(t){t?J.readyWait++:J.ready(!0)},ready:function(t){(t===!0?--J.readyWait:J.isReady)||(J.isReady=!0,t!==!0&&--J.readyWait>0||(ge.resolveWith(Z,[J]),J.fn.triggerHandler&&(J(Z).triggerHandler("ready"),J(Z).off("ready"))))}}),J.ready.promise=function(e){return ge||(ge=J.Deferred(),"complete"===Z.readyState?setTimeout(J.ready):(Z.addEventListener("DOMContentLoaded",r,!1),t.addEventListener("load",r,!1))),ge.promise(e)},J.ready.promise();var me=J.access=function(t,e,i,n,s,o,r){var a=0,h=t.length,c=null==i;if("object"===J.type(i)){s=!0;for(a in i)J.access(t,e,a,i[a],!0,o,r)}else if(void 0!==n&&(s=!0,J.isFunction(n)||(r=!0),c&&(r?(e.call(t,n),e=null):(c=e,e=function(t,e,i){return c.call(J(t),i)})),e))for(;h>a;a++)e(t[a],i,r?n:n.call(t[a],a,e(t[a],i)));return s?t:c?e.call(t):h?e(t[0],i):o};J.acceptData=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType},a.uid=1,a.accepts=J.acceptData,a.prototype={key:function(t){if(!a.accepts(t))return 0;var e={},i=t[this.expando];if(!i){i=a.uid++;try{e[this.expando]={value:i},Object.defineProperties(t,e)}catch(n){e[this.expando]=i,J.extend(t,e)}}return this.cache[i]||(this.cache[i]={}),i},set:function(t,e,i){var n,s=this.key(t),o=this.cache[s];if("string"==typeof e)o[e]=i;else if(J.isEmptyObject(o))J.extend(this.cache[s],e);else for(n in e)o[n]=e[n];return o},get:function(t,e){var i=this.cache[this.key(t)];return void 0===e?i:i[e]},access:function(t,e,i){var n;return void 0===e||e&&"string"==typeof e&&void 0===i?(n=this.get(t,e),void 0!==n?n:this.get(t,J.camelCase(e))):(this.set(t,e,i),void 0!==i?i:e)},remove:function(t,e){var i,n,s,o=this.key(t),r=this.cache[o];if(void 0===e)this.cache[o]={};else{J.isArray(e)?n=e.concat(e.map(J.camelCase)):(s=J.camelCase(e),e in r?n=[e,s]:(n=s,n=n in r?[n]:n.match(pe)||[])),i=n.length;for(;i--;)delete r[n[i]]}},hasData:function(t){return!J.isEmptyObject(this.cache[t[this.expando]]||{})},discard:function(t){t[this.expando]&&delete this.cache[t[this.expando]]}};var ve=new a,ye=new a,be=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,xe=/([A-Z])/g;J.extend({hasData:function(t){return ye.hasData(t)||ve.hasData(t)},data:function(t,e,i){return ye.access(t,e,i)},removeData:function(t,e){ye.remove(t,e)},_data:function(t,e,i){return ve.access(t,e,i)},_removeData:function(t,e){ve.remove(t,e)}}),J.fn.extend({data:function(t,e){var i,n,s,o=this[0],r=o&&o.attributes;if(void 0===t){if(this.length&&(s=ye.get(o),1===o.nodeType&&!ve.get(o,"hasDataAttrs"))){for(i=r.length;i--;)r[i]&&(n=r[i].name,0===n.indexOf("data-")&&(n=J.camelCase(n.slice(5)),h(o,n,s[n])));ve.set(o,"hasDataAttrs",!0)}return s}return"object"==typeof t?this.each(function(){ye.set(this,t)}):me(this,function(e){var i,n=J.camelCase(t);if(o&&void 0===e){if(i=ye.get(o,t),void 0!==i)return i;if(i=ye.get(o,n),void 0!==i)return i;if(i=h(o,n,void 0),void 0!==i)return i}else this.each(function(){var i=ye.get(this,n);ye.set(this,n,e),-1!==t.indexOf("-")&&void 0!==i&&ye.set(this,t,e)})},null,e,arguments.length>1,null,!0)},removeData:function(t){return this.each(function(){ye.remove(this,t)})}}),J.extend({queue:function(t,e,i){var n;return t?(e=(e||"fx")+"queue",n=ve.get(t,e),i&&(!n||J.isArray(i)?n=ve.access(t,e,J.makeArray(i)):n.push(i)),n||[]):void 0},dequeue:function(t,e){e=e||"fx";var i=J.queue(t,e),n=i.length,s=i.shift(),o=J._queueHooks(t,e),r=function(){J.dequeue(t,e)};"inprogress"===s&&(s=i.shift(),n--),s&&("fx"===e&&i.unshift("inprogress"),delete o.stop,s.call(t,r,o)),!n&&o&&o.empty.fire()},_queueHooks:function(t,e){var i=e+"queueHooks";return ve.get(t,i)||ve.access(t,i,{empty:J.Callbacks("once memory").add(function(){ve.remove(t,[e+"queue",i])})})}}),J.fn.extend({queue:function(t,e){var i=2;return"string"!=typeof t&&(e=t,t="fx",i--),arguments.length<i?J.queue(this[0],t):void 0===e?this:this.each(function(){var i=J.queue(this,t,e);J._queueHooks(this,t),"fx"===t&&"inprogress"!==i[0]&&J.dequeue(this,t)})},dequeue:function(t){return this.each(function(){J.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var i,n=1,s=J.Deferred(),o=this,r=this.length,a=function(){--n||s.resolveWith(o,[o])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";r--;)i=ve.get(o[r],t+"queueHooks"),i&&i.empty&&(n++,i.empty.add(a));return a(),s.promise(e)}});var we=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,_e=["Top","Right","Bottom","Left"],Se=function(t,e){return t=e||t,"none"===J.css(t,"display")||!J.contains(t.ownerDocument,t)},Ce=/^(?:checkbox|radio)$/i;!function(){var t=Z.createDocumentFragment(),e=t.appendChild(Z.createElement("div")),i=Z.createElement("input");i.setAttribute("type","radio"),i.setAttribute("checked","checked"),i.setAttribute("name","t"),e.appendChild(i),q.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,e.innerHTML="<textarea>x</textarea>",q.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue}();var Te="undefined";q.focusinBubbles="onfocusin"in t;var De=/^key/,Me=/^(?:mouse|pointer|contextmenu)|click/,Ee=/^(?:focusinfocus|focusoutblur)$/,ke=/^([^.]*)(?:\.(.+)|)$/;J.event={global:{},add:function(t,e,i,n,s){var o,r,a,h,c,l,d,u,p,f,g,m=ve.get(t);if(m)for(i.handler&&(o=i,i=o.handler,s=o.selector),i.guid||(i.guid=J.guid++),(h=m.events)||(h=m.events={}),(r=m.handle)||(r=m.handle=function(e){return typeof J!==Te&&J.event.triggered!==e.type?J.event.dispatch.apply(t,arguments):void 0}),e=(e||"").match(pe)||[""],c=e.length;c--;)a=ke.exec(e[c])||[],p=g=a[1],f=(a[2]||"").split(".").sort(),p&&(d=J.event.special[p]||{},p=(s?d.delegateType:d.bindType)||p,d=J.event.special[p]||{},l=J.extend({type:p,origType:g,data:n,handler:i,guid:i.guid,selector:s,needsContext:s&&J.expr.match.needsContext.test(s),namespace:f.join(".")},o),(u=h[p])||(u=h[p]=[],u.delegateCount=0,d.setup&&d.setup.call(t,n,f,r)!==!1||t.addEventListener&&t.addEventListener(p,r,!1)),d.add&&(d.add.call(t,l),l.handler.guid||(l.handler.guid=i.guid)),s?u.splice(u.delegateCount++,0,l):u.push(l),J.event.global[p]=!0)},remove:function(t,e,i,n,s){var o,r,a,h,c,l,d,u,p,f,g,m=ve.hasData(t)&&ve.get(t);if(m&&(h=m.events)){for(e=(e||"").match(pe)||[""],c=e.length;c--;)if(a=ke.exec(e[c])||[],p=g=a[1],f=(a[2]||"").split(".").sort(),p){for(d=J.event.special[p]||{},p=(n?d.delegateType:d.bindType)||p,u=h[p]||[],a=a[2]&&new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"),r=o=u.length;o--;)l=u[o],!s&&g!==l.origType||i&&i.guid!==l.guid||a&&!a.test(l.namespace)||n&&n!==l.selector&&("**"!==n||!l.selector)||(u.splice(o,1),l.selector&&u.delegateCount--,d.remove&&d.remove.call(t,l));r&&!u.length&&(d.teardown&&d.teardown.call(t,f,m.handle)!==!1||J.removeEvent(t,p,m.handle),delete h[p])}else for(p in h)J.event.remove(t,p+e[c],i,n,!0);J.isEmptyObject(h)&&(delete m.handle,ve.remove(t,"events"))}},trigger:function(e,i,n,s){var o,r,a,h,c,l,d,u=[n||Z],p=X.call(e,"type")?e.type:e,f=X.call(e,"namespace")?e.namespace.split("."):[];if(r=a=n=n||Z,3!==n.nodeType&&8!==n.nodeType&&!Ee.test(p+J.event.triggered)&&(p.indexOf(".")>=0&&(f=p.split("."),p=f.shift(),f.sort()),c=p.indexOf(":")<0&&"on"+p,e=e[J.expando]?e:new J.Event(p,"object"==typeof e&&e),e.isTrigger=s?2:3,e.namespace=f.join("."),e.namespace_re=e.namespace?new RegExp("(^|\\.)"+f.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=n),i=null==i?[e]:J.makeArray(i,[e]),d=J.event.special[p]||{},s||!d.trigger||d.trigger.apply(n,i)!==!1)){if(!s&&!d.noBubble&&!J.isWindow(n)){for(h=d.delegateType||p,Ee.test(h+p)||(r=r.parentNode);r;r=r.parentNode)u.push(r),a=r;a===(n.ownerDocument||Z)&&u.push(a.defaultView||a.parentWindow||t)}for(o=0;(r=u[o++])&&!e.isPropagationStopped();)e.type=o>1?h:d.bindType||p,l=(ve.get(r,"events")||{})[e.type]&&ve.get(r,"handle"),l&&l.apply(r,i),l=c&&r[c],l&&l.apply&&J.acceptData(r)&&(e.result=l.apply(r,i),e.result===!1&&e.preventDefault());return e.type=p,s||e.isDefaultPrevented()||d._default&&d._default.apply(u.pop(),i)!==!1||!J.acceptData(n)||c&&J.isFunction(n[p])&&!J.isWindow(n)&&(a=n[c],a&&(n[c]=null),J.event.triggered=p,n[p](),J.event.triggered=void 0,a&&(n[c]=a)),e.result}},dispatch:function(t){t=J.event.fix(t);var e,i,n,s,o,r=[],a=B.call(arguments),h=(ve.get(this,"events")||{})[t.type]||[],c=J.event.special[t.type]||{};if(a[0]=t,t.delegateTarget=this,!c.preDispatch||c.preDispatch.call(this,t)!==!1){for(r=J.event.handlers.call(this,t,h),e=0;(s=r[e++])&&!t.isPropagationStopped();)for(t.currentTarget=s.elem,i=0;(o=s.handlers[i++])&&!t.isImmediatePropagationStopped();)(!t.namespace_re||t.namespace_re.test(o.namespace))&&(t.handleObj=o,t.data=o.data,n=((J.event.special[o.origType]||{}).handle||o.handler).apply(s.elem,a),void 0!==n&&(t.result=n)===!1&&(t.preventDefault(),t.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,t),t.result}},handlers:function(t,e){var i,n,s,o,r=[],a=e.delegateCount,h=t.target;if(a&&h.nodeType&&(!t.button||"click"!==t.type))for(;h!==this;h=h.parentNode||this)if(h.disabled!==!0||"click"!==t.type){for(n=[],i=0;a>i;i++)o=e[i],s=o.selector+" ",void 0===n[s]&&(n[s]=o.needsContext?J(s,this).index(h)>=0:J.find(s,this,null,[h]).length),n[s]&&n.push(o);n.length&&r.push({elem:h,handlers:n})}return a<e.length&&r.push({elem:this,handlers:e.slice(a)}),r},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(t,e){return null==t.which&&(t.which=null!=e.charCode?e.charCode:e.keyCode),t}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(t,e){var i,n,s,o=e.button;return null==t.pageX&&null!=e.clientX&&(i=t.target.ownerDocument||Z,n=i.documentElement,s=i.body,t.pageX=e.clientX+(n&&n.scrollLeft||s&&s.scrollLeft||0)-(n&&n.clientLeft||s&&s.clientLeft||0),t.pageY=e.clientY+(n&&n.scrollTop||s&&s.scrollTop||0)-(n&&n.clientTop||s&&s.clientTop||0)),t.which||void 0===o||(t.which=1&o?1:2&o?3:4&o?2:0),t}},fix:function(t){if(t[J.expando])return t;var e,i,n,s=t.type,o=t,r=this.fixHooks[s];for(r||(this.fixHooks[s]=r=Me.test(s)?this.mouseHooks:De.test(s)?this.keyHooks:{}),n=r.props?this.props.concat(r.props):this.props,t=new J.Event(o),e=n.length;e--;)i=n[e],t[i]=o[i];return t.target||(t.target=Z),3===t.target.nodeType&&(t.target=t.target.parentNode),r.filter?r.filter(t,o):t},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==l()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===l()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&J.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(t){return J.nodeName(t.target,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}},simulate:function(t,e,i,n){var s=J.extend(new J.Event,i,{type:t,isSimulated:!0,originalEvent:{}});n?J.event.trigger(s,null,e):J.event.dispatch.call(e,s),s.isDefaultPrevented()&&i.preventDefault()}},J.removeEvent=function(t,e,i){t.removeEventListener&&t.removeEventListener(e,i,!1)},J.Event=function(t,e){return this instanceof J.Event?(t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&t.returnValue===!1?c:$):this.type=t,e&&J.extend(this,e),this.timeStamp=t&&t.timeStamp||J.now(),void(this[J.expando]=!0)):new J.Event(t,e)},J.Event.prototype={isDefaultPrevented:$,isPropagationStopped:$,isImmediatePropagationStopped:$,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=c,t&&t.preventDefault&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=c,t&&t.stopPropagation&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=c,t&&t.stopImmediatePropagation&&t.stopImmediatePropagation(),this.stopPropagation()}},J.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,e){J.event.special[t]={delegateType:e,bindType:e,handle:function(t){var i,n=this,s=t.relatedTarget,o=t.handleObj;return(!s||s!==n&&!J.contains(n,s))&&(t.type=o.origType,i=o.handler.apply(this,arguments),t.type=e),i}}}),q.focusinBubbles||J.each({focus:"focusin",blur:"focusout"},function(t,e){var i=function(t){J.event.simulate(e,t.target,J.event.fix(t),!0)};J.event.special[e]={setup:function(){var n=this.ownerDocument||this,s=ve.access(n,e);s||n.addEventListener(t,i,!0),ve.access(n,e,(s||0)+1)},teardown:function(){var n=this.ownerDocument||this,s=ve.access(n,e)-1;s?ve.access(n,e,s):(n.removeEventListener(t,i,!0),ve.remove(n,e))}}}),J.fn.extend({on:function(t,e,i,n,s){var o,r;if("object"==typeof t){"string"!=typeof e&&(i=i||e,e=void 0);for(r in t)this.on(r,e,i,t[r],s);return this}if(null==i&&null==n?(n=e,i=e=void 0):null==n&&("string"==typeof e?(n=i,i=void 0):(n=i,i=e,e=void 0)),n===!1)n=$;else if(!n)return this;return 1===s&&(o=n,n=function(t){return J().off(t),o.apply(this,arguments)},n.guid=o.guid||(o.guid=J.guid++)),this.each(function(){J.event.add(this,t,n,i,e)})},one:function(t,e,i,n){return this.on(t,e,i,n,1)},off:function(t,e,i){var n,s;if(t&&t.preventDefault&&t.handleObj)return n=t.handleObj,J(t.delegateTarget).off(n.namespace?n.origType+"."+n.namespace:n.origType,n.selector,n.handler),this;if("object"==typeof t){for(s in t)this.off(s,e,t[s]);return this}return(e===!1||"function"==typeof e)&&(i=e,e=void 0),i===!1&&(i=$),this.each(function(){J.event.remove(this,t,i,e)})},trigger:function(t,e){return this.each(function(){J.event.trigger(t,e,this)})},triggerHandler:function(t,e){var i=this[0];return i?J.event.trigger(t,e,i,!0):void 0}});var Le=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Ne=/<([\w:]+)/,Ae=/<|&#?\w+;/,Oe=/<(?:script|style|link)/i,Pe=/checked\s*(?:[^=]|=\s*.checked.)/i,Ie=/^$|\/(?:java|ecma)script/i,Fe=/^true\/(.*)/,Ke=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,ze={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};ze.optgroup=ze.option,ze.tbody=ze.tfoot=ze.colgroup=ze.caption=ze.thead,ze.th=ze.td,J.extend({clone:function(t,e,i){var n,s,o,r,a=t.cloneNode(!0),h=J.contains(t.ownerDocument,t);if(!(q.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||J.isXMLDoc(t)))for(r=m(a),o=m(t),n=0,s=o.length;s>n;n++)v(o[n],r[n]);if(e)if(i)for(o=o||m(t),r=r||m(a),n=0,s=o.length;s>n;n++)g(o[n],r[n]);else g(t,a);return r=m(a,"script"),r.length>0&&f(r,!h&&m(t,"script")),a},buildFragment:function(t,e,i,n){for(var s,o,r,a,h,c,l=e.createDocumentFragment(),d=[],u=0,p=t.length;p>u;u++)if(s=t[u],s||0===s)if("object"===J.type(s))J.merge(d,s.nodeType?[s]:s);else if(Ae.test(s)){for(o=o||l.appendChild(e.createElement("div")),r=(Ne.exec(s)||["",""])[1].toLowerCase(),a=ze[r]||ze._default,o.innerHTML=a[1]+s.replace(Le,"<$1></$2>")+a[2],c=a[0];c--;)o=o.lastChild;J.merge(d,o.childNodes),o=l.firstChild,o.textContent=""}else d.push(e.createTextNode(s));for(l.textContent="",u=0;s=d[u++];)if((!n||-1===J.inArray(s,n))&&(h=J.contains(s.ownerDocument,s),o=m(l.appendChild(s),"script"),h&&f(o),i))for(c=0;s=o[c++];)Ie.test(s.type||"")&&i.push(s);return l},cleanData:function(t){for(var e,i,n,s,o=J.event.special,r=0;void 0!==(i=t[r]);r++){if(J.acceptData(i)&&(s=i[ve.expando],s&&(e=ve.cache[s]))){if(e.events)for(n in e.events)o[n]?J.event.remove(i,n):J.removeEvent(i,n,e.handle);ve.cache[s]&&delete ve.cache[s]}delete ye.cache[i[ye.expando]]}}}),J.fn.extend({text:function(t){return me(this,function(t){return void 0===t?J.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=t)})},null,t,arguments.length)},append:function(){return this.domManip(arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=d(this,t);e.appendChild(t)}})},prepend:function(){return this.domManip(arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=d(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},remove:function(t,e){for(var i,n=t?J.filter(t,this):this,s=0;null!=(i=n[s]);s++)e||1!==i.nodeType||J.cleanData(m(i)),i.parentNode&&(e&&J.contains(i.ownerDocument,i)&&f(m(i,"script")),i.parentNode.removeChild(i));return this},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(J.cleanData(m(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null==t?!1:t,e=null==e?t:e,this.map(function(){return J.clone(this,t,e)})},html:function(t){return me(this,function(t){var e=this[0]||{},i=0,n=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!Oe.test(t)&&!ze[(Ne.exec(t)||["",""])[1].toLowerCase()]){t=t.replace(Le,"<$1></$2>");try{for(;n>i;i++)e=this[i]||{},1===e.nodeType&&(J.cleanData(m(e,!1)),e.innerHTML=t);e=0}catch(s){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var t=arguments[0];return this.domManip(arguments,function(e){t=this.parentNode,J.cleanData(m(this)),t&&t.replaceChild(e,this)}),t&&(t.length||t.nodeType)?this:this.remove()},detach:function(t){return this.remove(t,!0)},domManip:function(t,e){t=W.apply([],t);var i,n,s,o,r,a,h=0,c=this.length,l=this,d=c-1,f=t[0],g=J.isFunction(f);if(g||c>1&&"string"==typeof f&&!q.checkClone&&Pe.test(f))return this.each(function(i){var n=l.eq(i);g&&(t[0]=f.call(this,i,n.html())),n.domManip(t,e)});if(c&&(i=J.buildFragment(t,this[0].ownerDocument,!1,this),n=i.firstChild,1===i.childNodes.length&&(i=n),n)){for(s=J.map(m(i,"script"),u),o=s.length;c>h;h++)r=i,h!==d&&(r=J.clone(r,!0,!0),o&&J.merge(s,m(r,"script"))),e.call(this[h],r,h);if(o)for(a=s[s.length-1].ownerDocument,J.map(s,p),h=0;o>h;h++)r=s[h],Ie.test(r.type||"")&&!ve.access(r,"globalEval")&&J.contains(a,r)&&(r.src?J._evalUrl&&J._evalUrl(r.src):J.globalEval(r.textContent.replace(Ke,"")))}return this}}),J.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){J.fn[t]=function(t){for(var i,n=[],s=J(t),o=s.length-1,r=0;o>=r;r++)i=r===o?this:this.clone(!0),J(s[r])[e](i),Y.apply(n,i.get());return this.pushStack(n)}});var Re,He={},Ge=/^margin/,Be=new RegExp("^("+we+")(?!px)[a-z%]+$","i"),We=function(t){return t.ownerDocument.defaultView.getComputedStyle(t,null)};!function(){function e(){r.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",r.innerHTML="",s.appendChild(o);var e=t.getComputedStyle(r,null);i="1%"!==e.top,n="4px"===e.width,s.removeChild(o)}var i,n,s=Z.documentElement,o=Z.createElement("div"),r=Z.createElement("div");r.style&&(r.style.backgroundClip="content-box",r.cloneNode(!0).style.backgroundClip="",q.clearCloneStyle="content-box"===r.style.backgroundClip,o.style.cssText="border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute",o.appendChild(r),t.getComputedStyle&&J.extend(q,{pixelPosition:function(){return e(),i},boxSizingReliable:function(){return null==n&&e(),n},reliableMarginRight:function(){var e,i=r.appendChild(Z.createElement("div"));return i.style.cssText=r.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",i.style.marginRight=i.style.width="0",r.style.width="1px",s.appendChild(o),e=!parseFloat(t.getComputedStyle(i,null).marginRight),s.removeChild(o),e}}))}(),J.swap=function(t,e,i,n){var s,o,r={};for(o in e)r[o]=t.style[o],t.style[o]=e[o];s=i.apply(t,n||[]);for(o in e)t.style[o]=r[o];return s};var Ye=/^(none|table(?!-c[ea]).+)/,je=new RegExp("^("+we+")(.*)$","i"),Ue=new RegExp("^([+-])=("+we+")","i"),Ve={position:"absolute",visibility:"hidden",display:"block"},$e={letterSpacing:"0",fontWeight:"400"},Xe=["Webkit","O","Moz","ms"];J.extend({cssHooks:{opacity:{get:function(t,e){if(e){var i=x(t,"opacity");return""===i?"1":i}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(t,e,i,n){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var s,o,r,a=J.camelCase(e),h=t.style;return e=J.cssProps[a]||(J.cssProps[a]=_(h,a)),r=J.cssHooks[e]||J.cssHooks[a],void 0===i?r&&"get"in r&&void 0!==(s=r.get(t,!1,n))?s:h[e]:(o=typeof i,"string"===o&&(s=Ue.exec(i))&&(i=(s[1]+1)*s[2]+parseFloat(J.css(t,e)),o="number"),void(null!=i&&i===i&&("number"!==o||J.cssNumber[a]||(i+="px"),q.clearCloneStyle||""!==i||0!==e.indexOf("background")||(h[e]="inherit"),r&&"set"in r&&void 0===(i=r.set(t,i,n))||(h[e]=i))))}},css:function(t,e,i,n){var s,o,r,a=J.camelCase(e);return e=J.cssProps[a]||(J.cssProps[a]=_(t.style,a)),r=J.cssHooks[e]||J.cssHooks[a],r&&"get"in r&&(s=r.get(t,!0,i)),void 0===s&&(s=x(t,e,n)),"normal"===s&&e in $e&&(s=$e[e]),""===i||i?(o=parseFloat(s),i===!0||J.isNumeric(o)?o||0:s):s}}),J.each(["height","width"],function(t,e){J.cssHooks[e]={get:function(t,i,n){return i?Ye.test(J.css(t,"display"))&&0===t.offsetWidth?J.swap(t,Ve,function(){return T(t,e,n)}):T(t,e,n):void 0},set:function(t,i,n){var s=n&&We(t);return S(t,i,n?C(t,e,n,"border-box"===J.css(t,"boxSizing",!1,s),s):0)}}}),J.cssHooks.marginRight=w(q.reliableMarginRight,function(t,e){return e?J.swap(t,{display:"inline-block"},x,[t,"marginRight"]):void 0}),J.each({margin:"",padding:"",border:"Width"},function(t,e){J.cssHooks[t+e]={expand:function(i){for(var n=0,s={},o="string"==typeof i?i.split(" "):[i];4>n;n++)s[t+_e[n]+e]=o[n]||o[n-2]||o[0];return s}},Ge.test(t)||(J.cssHooks[t+e].set=S)}),J.fn.extend({css:function(t,e){return me(this,function(t,e,i){var n,s,o={},r=0;if(J.isArray(e)){for(n=We(t),s=e.length;s>r;r++)o[e[r]]=J.css(t,e[r],!1,n);return o}return void 0!==i?J.style(t,e,i):J.css(t,e)},t,e,arguments.length>1)},show:function(){return D(this,!0)},hide:function(){return D(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){Se(this)?J(this).show():J(this).hide()})}}),J.Tween=M,M.prototype={constructor:M,init:function(t,e,i,n,s,o){this.elem=t,this.prop=i,this.easing=s||"swing",this.options=e,this.start=this.now=this.cur(),this.end=n,this.unit=o||(J.cssNumber[i]?"":"px")},cur:function(){var t=M.propHooks[this.prop];return t&&t.get?t.get(this):M.propHooks._default.get(this)},run:function(t){var e,i=M.propHooks[this.prop];return this.pos=e=this.options.duration?J.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),i&&i.set?i.set(this):M.propHooks._default.set(this),this}},M.prototype.init.prototype=M.prototype,M.propHooks={_default:{get:function(t){var e;return null==t.elem[t.prop]||t.elem.style&&null!=t.elem.style[t.prop]?(e=J.css(t.elem,t.prop,""),e&&"auto"!==e?e:0):t.elem[t.prop]},set:function(t){J.fx.step[t.prop]?J.fx.step[t.prop](t):t.elem.style&&(null!=t.elem.style[J.cssProps[t.prop]]||J.cssHooks[t.prop])?J.style(t.elem,t.prop,t.now+t.unit):t.elem[t.prop]=t.now}}},M.propHooks.scrollTop=M.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},J.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2}},J.fx=M.prototype.init,J.fx.step={};var qe,Ze,Qe=/^(?:toggle|show|hide)$/,Je=new RegExp("^(?:([+-])=|)("+we+")([a-z%]*)$","i"),ti=/queueHooks$/,ei=[N],ii={"*":[function(t,e){var i=this.createTween(t,e),n=i.cur(),s=Je.exec(e),o=s&&s[3]||(J.cssNumber[t]?"":"px"),r=(J.cssNumber[t]||"px"!==o&&+n)&&Je.exec(J.css(i.elem,t)),a=1,h=20;if(r&&r[3]!==o){o=o||r[3],s=s||[],r=+n||1;do a=a||".5",r/=a,J.style(i.elem,t,r+o);while(a!==(a=i.cur()/n)&&1!==a&&--h)}return s&&(r=i.start=+r||+n||0,i.unit=o,i.end=s[1]?r+(s[1]+1)*s[2]:+s[2]),i}]};J.Animation=J.extend(O,{tweener:function(t,e){J.isFunction(t)?(e=t,t=["*"]):t=t.split(" ");for(var i,n=0,s=t.length;s>n;n++)i=t[n],ii[i]=ii[i]||[],ii[i].unshift(e)},prefilter:function(t,e){e?ei.unshift(t):ei.push(t)}}),J.speed=function(t,e,i){var n=t&&"object"==typeof t?J.extend({},t):{complete:i||!i&&e||J.isFunction(t)&&t,duration:t,easing:i&&e||e&&!J.isFunction(e)&&e};return n.duration=J.fx.off?0:"number"==typeof n.duration?n.duration:n.duration in J.fx.speeds?J.fx.speeds[n.duration]:J.fx.speeds._default,(null==n.queue||n.queue===!0)&&(n.queue="fx"),n.old=n.complete,n.complete=function(){J.isFunction(n.old)&&n.old.call(this),n.queue&&J.dequeue(this,n.queue)},n},J.fn.extend({fadeTo:function(t,e,i,n){return this.filter(Se).css("opacity",0).show().end().animate({opacity:e},t,i,n)},animate:function(t,e,i,n){var s=J.isEmptyObject(t),o=J.speed(e,i,n),r=function(){var e=O(this,J.extend({},t),o);(s||ve.get(this,"finish"))&&e.stop(!0)};return r.finish=r,s||o.queue===!1?this.each(r):this.queue(o.queue,r)},stop:function(t,e,i){var n=function(t){var e=t.stop;delete t.stop,e(i)};return"string"!=typeof t&&(i=e,e=t,t=void 0),e&&t!==!1&&this.queue(t||"fx",[]),this.each(function(){var e=!0,s=null!=t&&t+"queueHooks",o=J.timers,r=ve.get(this);if(s)r[s]&&r[s].stop&&n(r[s]);else for(s in r)r[s]&&r[s].stop&&ti.test(s)&&n(r[s]);for(s=o.length;s--;)o[s].elem!==this||null!=t&&o[s].queue!==t||(o[s].anim.stop(i),e=!1,o.splice(s,1));(e||!i)&&J.dequeue(this,t)})},finish:function(t){return t!==!1&&(t=t||"fx"),this.each(function(){var e,i=ve.get(this),n=i[t+"queue"],s=i[t+"queueHooks"],o=J.timers,r=n?n.length:0;for(i.finish=!0,J.queue(this,t,[]),s&&s.stop&&s.stop.call(this,!0),e=o.length;e--;)o[e].elem===this&&o[e].queue===t&&(o[e].anim.stop(!0),o.splice(e,1));for(e=0;r>e;e++)n[e]&&n[e].finish&&n[e].finish.call(this);delete i.finish})}}),J.each(["toggle","show","hide"],function(t,e){var i=J.fn[e];
J.fn[e]=function(t,n,s){return null==t||"boolean"==typeof t?i.apply(this,arguments):this.animate(k(e,!0),t,n,s)}}),J.each({slideDown:k("show"),slideUp:k("hide"),slideToggle:k("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){J.fn[t]=function(t,i,n){return this.animate(e,t,i,n)}}),J.timers=[],J.fx.tick=function(){var t,e=0,i=J.timers;for(qe=J.now();e<i.length;e++)t=i[e],t()||i[e]!==t||i.splice(e--,1);i.length||J.fx.stop(),qe=void 0},J.fx.timer=function(t){J.timers.push(t),t()?J.fx.start():J.timers.pop()},J.fx.interval=13,J.fx.start=function(){Ze||(Ze=setInterval(J.fx.tick,J.fx.interval))},J.fx.stop=function(){clearInterval(Ze),Ze=null},J.fx.speeds={slow:600,fast:200,_default:400},J.fn.delay=function(t,e){return t=J.fx?J.fx.speeds[t]||t:t,e=e||"fx",this.queue(e,function(e,i){var n=setTimeout(e,t);i.stop=function(){clearTimeout(n)}})},function(){var t=Z.createElement("input"),e=Z.createElement("select"),i=e.appendChild(Z.createElement("option"));t.type="checkbox",q.checkOn=""!==t.value,q.optSelected=i.selected,e.disabled=!0,q.optDisabled=!i.disabled,t=Z.createElement("input"),t.value="t",t.type="radio",q.radioValue="t"===t.value}();var ni,si,oi=J.expr.attrHandle;J.fn.extend({attr:function(t,e){return me(this,J.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each(function(){J.removeAttr(this,t)})}}),J.extend({attr:function(t,e,i){var n,s,o=t.nodeType;return t&&3!==o&&8!==o&&2!==o?typeof t.getAttribute===Te?J.prop(t,e,i):(1===o&&J.isXMLDoc(t)||(e=e.toLowerCase(),n=J.attrHooks[e]||(J.expr.match.bool.test(e)?si:ni)),void 0===i?n&&"get"in n&&null!==(s=n.get(t,e))?s:(s=J.find.attr(t,e),null==s?void 0:s):null!==i?n&&"set"in n&&void 0!==(s=n.set(t,i,e))?s:(t.setAttribute(e,i+""),i):void J.removeAttr(t,e)):void 0},removeAttr:function(t,e){var i,n,s=0,o=e&&e.match(pe);if(o&&1===t.nodeType)for(;i=o[s++];)n=J.propFix[i]||i,J.expr.match.bool.test(i)&&(t[n]=!1),t.removeAttribute(i)},attrHooks:{type:{set:function(t,e){if(!q.radioValue&&"radio"===e&&J.nodeName(t,"input")){var i=t.value;return t.setAttribute("type",e),i&&(t.value=i),e}}}}}),si={set:function(t,e,i){return e===!1?J.removeAttr(t,i):t.setAttribute(i,i),i}},J.each(J.expr.match.bool.source.match(/\w+/g),function(t,e){var i=oi[e]||J.find.attr;oi[e]=function(t,e,n){var s,o;return n||(o=oi[e],oi[e]=s,s=null!=i(t,e,n)?e.toLowerCase():null,oi[e]=o),s}});var ri=/^(?:input|select|textarea|button)$/i;J.fn.extend({prop:function(t,e){return me(this,J.prop,t,e,arguments.length>1)},removeProp:function(t){return this.each(function(){delete this[J.propFix[t]||t]})}}),J.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(t,e,i){var n,s,o,r=t.nodeType;return t&&3!==r&&8!==r&&2!==r?(o=1!==r||!J.isXMLDoc(t),o&&(e=J.propFix[e]||e,s=J.propHooks[e]),void 0!==i?s&&"set"in s&&void 0!==(n=s.set(t,i,e))?n:t[e]=i:s&&"get"in s&&null!==(n=s.get(t,e))?n:t[e]):void 0},propHooks:{tabIndex:{get:function(t){return t.hasAttribute("tabindex")||ri.test(t.nodeName)||t.href?t.tabIndex:-1}}}}),q.optSelected||(J.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null}}),J.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){J.propFix[this.toLowerCase()]=this});var ai=/[\t\r\n\f]/g;J.fn.extend({addClass:function(t){var e,i,n,s,o,r,a="string"==typeof t&&t,h=0,c=this.length;if(J.isFunction(t))return this.each(function(e){J(this).addClass(t.call(this,e,this.className))});if(a)for(e=(t||"").match(pe)||[];c>h;h++)if(i=this[h],n=1===i.nodeType&&(i.className?(" "+i.className+" ").replace(ai," "):" ")){for(o=0;s=e[o++];)n.indexOf(" "+s+" ")<0&&(n+=s+" ");r=J.trim(n),i.className!==r&&(i.className=r)}return this},removeClass:function(t){var e,i,n,s,o,r,a=0===arguments.length||"string"==typeof t&&t,h=0,c=this.length;if(J.isFunction(t))return this.each(function(e){J(this).removeClass(t.call(this,e,this.className))});if(a)for(e=(t||"").match(pe)||[];c>h;h++)if(i=this[h],n=1===i.nodeType&&(i.className?(" "+i.className+" ").replace(ai," "):"")){for(o=0;s=e[o++];)for(;n.indexOf(" "+s+" ")>=0;)n=n.replace(" "+s+" "," ");r=t?J.trim(n):"",i.className!==r&&(i.className=r)}return this},toggleClass:function(t,e){var i=typeof t;return"boolean"==typeof e&&"string"===i?e?this.addClass(t):this.removeClass(t):this.each(J.isFunction(t)?function(i){J(this).toggleClass(t.call(this,i,this.className,e),e)}:function(){if("string"===i)for(var e,n=0,s=J(this),o=t.match(pe)||[];e=o[n++];)s.hasClass(e)?s.removeClass(e):s.addClass(e);else(i===Te||"boolean"===i)&&(this.className&&ve.set(this,"__className__",this.className),this.className=this.className||t===!1?"":ve.get(this,"__className__")||"")})},hasClass:function(t){for(var e=" "+t+" ",i=0,n=this.length;n>i;i++)if(1===this[i].nodeType&&(" "+this[i].className+" ").replace(ai," ").indexOf(e)>=0)return!0;return!1}});var hi=/\r/g;J.fn.extend({val:function(t){var e,i,n,s=this[0];return arguments.length?(n=J.isFunction(t),this.each(function(i){var s;1===this.nodeType&&(s=n?t.call(this,i,J(this).val()):t,null==s?s="":"number"==typeof s?s+="":J.isArray(s)&&(s=J.map(s,function(t){return null==t?"":t+""})),e=J.valHooks[this.type]||J.valHooks[this.nodeName.toLowerCase()],e&&"set"in e&&void 0!==e.set(this,s,"value")||(this.value=s))})):s?(e=J.valHooks[s.type]||J.valHooks[s.nodeName.toLowerCase()],e&&"get"in e&&void 0!==(i=e.get(s,"value"))?i:(i=s.value,"string"==typeof i?i.replace(hi,""):null==i?"":i)):void 0}}),J.extend({valHooks:{option:{get:function(t){var e=J.find.attr(t,"value");return null!=e?e:J.trim(J.text(t))}},select:{get:function(t){for(var e,i,n=t.options,s=t.selectedIndex,o="select-one"===t.type||0>s,r=o?null:[],a=o?s+1:n.length,h=0>s?a:o?s:0;a>h;h++)if(i=n[h],!(!i.selected&&h!==s||(q.optDisabled?i.disabled:null!==i.getAttribute("disabled"))||i.parentNode.disabled&&J.nodeName(i.parentNode,"optgroup"))){if(e=J(i).val(),o)return e;r.push(e)}return r},set:function(t,e){for(var i,n,s=t.options,o=J.makeArray(e),r=s.length;r--;)n=s[r],(n.selected=J.inArray(n.value,o)>=0)&&(i=!0);return i||(t.selectedIndex=-1),o}}}}),J.each(["radio","checkbox"],function(){J.valHooks[this]={set:function(t,e){return J.isArray(e)?t.checked=J.inArray(J(t).val(),e)>=0:void 0}},q.checkOn||(J.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})}),J.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(t,e){J.fn[e]=function(t,i){return arguments.length>0?this.on(e,null,t,i):this.trigger(e)}}),J.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)},bind:function(t,e,i){return this.on(t,null,e,i)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,i,n){return this.on(e,t,i,n)},undelegate:function(t,e,i){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",i)}});var ci=J.now(),li=/\?/;J.parseJSON=function(t){return JSON.parse(t+"")},J.parseXML=function(t){var e,i;if(!t||"string"!=typeof t)return null;try{i=new DOMParser,e=i.parseFromString(t,"text/xml")}catch(n){e=void 0}return(!e||e.getElementsByTagName("parsererror").length)&&J.error("Invalid XML: "+t),e};var di,ui,pi=/#.*$/,fi=/([?&])_=[^&]*/,gi=/^(.*?):[ \t]*([^\r\n]*)$/gm,mi=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,vi=/^(?:GET|HEAD)$/,yi=/^\/\//,bi=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,xi={},wi={},_i="*/".concat("*");try{ui=location.href}catch(Si){ui=Z.createElement("a"),ui.href="",ui=ui.href}di=bi.exec(ui.toLowerCase())||[],J.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:ui,type:"GET",isLocal:mi.test(di[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":_i,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":J.parseJSON,"text xml":J.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?F(F(t,J.ajaxSettings),e):F(J.ajaxSettings,t)},ajaxPrefilter:P(xi),ajaxTransport:P(wi),ajax:function(t,e){function i(t,e,i,r){var h,l,v,y,x,_=e;2!==b&&(b=2,a&&clearTimeout(a),n=void 0,o=r||"",w.readyState=t>0?4:0,h=t>=200&&300>t||304===t,i&&(y=K(d,w,i)),y=z(d,y,w,h),h?(d.ifModified&&(x=w.getResponseHeader("Last-Modified"),x&&(J.lastModified[s]=x),x=w.getResponseHeader("etag"),x&&(J.etag[s]=x)),204===t||"HEAD"===d.type?_="nocontent":304===t?_="notmodified":(_=y.state,l=y.data,v=y.error,h=!v)):(v=_,(t||!_)&&(_="error",0>t&&(t=0))),w.status=t,w.statusText=(e||_)+"",h?f.resolveWith(u,[l,_,w]):f.rejectWith(u,[w,_,v]),w.statusCode(m),m=void 0,c&&p.trigger(h?"ajaxSuccess":"ajaxError",[w,d,h?l:v]),g.fireWith(u,[w,_]),c&&(p.trigger("ajaxComplete",[w,d]),--J.active||J.event.trigger("ajaxStop")))}"object"==typeof t&&(e=t,t=void 0),e=e||{};var n,s,o,r,a,h,c,l,d=J.ajaxSetup({},e),u=d.context||d,p=d.context&&(u.nodeType||u.jquery)?J(u):J.event,f=J.Deferred(),g=J.Callbacks("once memory"),m=d.statusCode||{},v={},y={},b=0,x="canceled",w={readyState:0,getResponseHeader:function(t){var e;if(2===b){if(!r)for(r={};e=gi.exec(o);)r[e[1].toLowerCase()]=e[2];e=r[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return 2===b?o:null},setRequestHeader:function(t,e){var i=t.toLowerCase();return b||(t=y[i]=y[i]||t,v[t]=e),this},overrideMimeType:function(t){return b||(d.mimeType=t),this},statusCode:function(t){var e;if(t)if(2>b)for(e in t)m[e]=[m[e],t[e]];else w.always(t[w.status]);return this},abort:function(t){var e=t||x;return n&&n.abort(e),i(0,e),this}};if(f.promise(w).complete=g.add,w.success=w.done,w.error=w.fail,d.url=((t||d.url||ui)+"").replace(pi,"").replace(yi,di[1]+"//"),d.type=e.method||e.type||d.method||d.type,d.dataTypes=J.trim(d.dataType||"*").toLowerCase().match(pe)||[""],null==d.crossDomain&&(h=bi.exec(d.url.toLowerCase()),d.crossDomain=!(!h||h[1]===di[1]&&h[2]===di[2]&&(h[3]||("http:"===h[1]?"80":"443"))===(di[3]||("http:"===di[1]?"80":"443")))),d.data&&d.processData&&"string"!=typeof d.data&&(d.data=J.param(d.data,d.traditional)),I(xi,d,e,w),2===b)return w;c=d.global,c&&0===J.active++&&J.event.trigger("ajaxStart"),d.type=d.type.toUpperCase(),d.hasContent=!vi.test(d.type),s=d.url,d.hasContent||(d.data&&(s=d.url+=(li.test(s)?"&":"?")+d.data,delete d.data),d.cache===!1&&(d.url=fi.test(s)?s.replace(fi,"$1_="+ci++):s+(li.test(s)?"&":"?")+"_="+ci++)),d.ifModified&&(J.lastModified[s]&&w.setRequestHeader("If-Modified-Since",J.lastModified[s]),J.etag[s]&&w.setRequestHeader("If-None-Match",J.etag[s])),(d.data&&d.hasContent&&d.contentType!==!1||e.contentType)&&w.setRequestHeader("Content-Type",d.contentType),w.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+("*"!==d.dataTypes[0]?", "+_i+"; q=0.01":""):d.accepts["*"]);for(l in d.headers)w.setRequestHeader(l,d.headers[l]);if(d.beforeSend&&(d.beforeSend.call(u,w,d)===!1||2===b))return w.abort();x="abort";for(l in{success:1,error:1,complete:1})w[l](d[l]);if(n=I(wi,d,e,w)){w.readyState=1,c&&p.trigger("ajaxSend",[w,d]),d.async&&d.timeout>0&&(a=setTimeout(function(){w.abort("timeout")},d.timeout));try{b=1,n.send(v,i)}catch(_){if(!(2>b))throw _;i(-1,_)}}else i(-1,"No Transport");return w},getJSON:function(t,e,i){return J.get(t,e,i,"json")},getScript:function(t,e){return J.get(t,void 0,e,"script")}}),J.each(["get","post"],function(t,e){J[e]=function(t,i,n,s){return J.isFunction(i)&&(s=s||n,n=i,i=void 0),J.ajax({url:t,type:e,dataType:s,data:i,success:n})}}),J.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){J.fn[e]=function(t){return this.on(e,t)}}),J._evalUrl=function(t){return J.ajax({url:t,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},J.fn.extend({wrapAll:function(t){var e;return J.isFunction(t)?this.each(function(e){J(this).wrapAll(t.call(this,e))}):(this[0]&&(e=J(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t}).append(this)),this)},wrapInner:function(t){return this.each(J.isFunction(t)?function(e){J(this).wrapInner(t.call(this,e))}:function(){var e=J(this),i=e.contents();i.length?i.wrapAll(t):e.append(t)})},wrap:function(t){var e=J.isFunction(t);return this.each(function(i){J(this).wrapAll(e?t.call(this,i):t)})},unwrap:function(){return this.parent().each(function(){J.nodeName(this,"body")||J(this).replaceWith(this.childNodes)}).end()}}),J.expr.filters.hidden=function(t){return t.offsetWidth<=0&&t.offsetHeight<=0},J.expr.filters.visible=function(t){return!J.expr.filters.hidden(t)};var Ci=/%20/g,Ti=/\[\]$/,Di=/\r?\n/g,Mi=/^(?:submit|button|image|reset|file)$/i,Ei=/^(?:input|select|textarea|keygen)/i;J.param=function(t,e){var i,n=[],s=function(t,e){e=J.isFunction(e)?e():null==e?"":e,n[n.length]=encodeURIComponent(t)+"="+encodeURIComponent(e)};if(void 0===e&&(e=J.ajaxSettings&&J.ajaxSettings.traditional),J.isArray(t)||t.jquery&&!J.isPlainObject(t))J.each(t,function(){s(this.name,this.value)});else for(i in t)R(i,t[i],e,s);return n.join("&").replace(Ci,"+")},J.fn.extend({serialize:function(){return J.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=J.prop(this,"elements");return t?J.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!J(this).is(":disabled")&&Ei.test(this.nodeName)&&!Mi.test(t)&&(this.checked||!Ce.test(t))}).map(function(t,e){var i=J(this).val();return null==i?null:J.isArray(i)?J.map(i,function(t){return{name:e.name,value:t.replace(Di,"\r\n")}}):{name:e.name,value:i.replace(Di,"\r\n")}}).get()}}),J.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(t){}};var ki=0,Li={},Ni={0:200,1223:204},Ai=J.ajaxSettings.xhr();t.ActiveXObject&&J(t).on("unload",function(){for(var t in Li)Li[t]()}),q.cors=!!Ai&&"withCredentials"in Ai,q.ajax=Ai=!!Ai,J.ajaxTransport(function(t){var e;return q.cors||Ai&&!t.crossDomain?{send:function(i,n){var s,o=t.xhr(),r=++ki;if(o.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(s in t.xhrFields)o[s]=t.xhrFields[s];t.mimeType&&o.overrideMimeType&&o.overrideMimeType(t.mimeType),t.crossDomain||i["X-Requested-With"]||(i["X-Requested-With"]="XMLHttpRequest");for(s in i)o.setRequestHeader(s,i[s]);e=function(t){return function(){e&&(delete Li[r],e=o.onload=o.onerror=null,"abort"===t?o.abort():"error"===t?n(o.status,o.statusText):n(Ni[o.status]||o.status,o.statusText,"string"==typeof o.responseText?{text:o.responseText}:void 0,o.getAllResponseHeaders()))}},o.onload=e(),o.onerror=e("error"),e=Li[r]=e("abort");try{o.send(t.hasContent&&t.data||null)}catch(a){if(e)throw a}},abort:function(){e&&e()}}:void 0}),J.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(t){return J.globalEval(t),t}}}),J.ajaxPrefilter("script",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")}),J.ajaxTransport("script",function(t){if(t.crossDomain){var e,i;return{send:function(n,s){e=J("<script>").prop({async:!0,charset:t.scriptCharset,src:t.url}).on("load error",i=function(t){e.remove(),i=null,t&&s("error"===t.type?404:200,t.type)}),Z.head.appendChild(e[0])},abort:function(){i&&i()}}}});var Oi=[],Pi=/(=)\?(?=&|$)|\?\?/;J.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=Oi.pop()||J.expando+"_"+ci++;return this[t]=!0,t}}),J.ajaxPrefilter("json jsonp",function(e,i,n){var s,o,r,a=e.jsonp!==!1&&(Pi.test(e.url)?"url":"string"==typeof e.data&&!(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Pi.test(e.data)&&"data");return a||"jsonp"===e.dataTypes[0]?(s=e.jsonpCallback=J.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,a?e[a]=e[a].replace(Pi,"$1"+s):e.jsonp!==!1&&(e.url+=(li.test(e.url)?"&":"?")+e.jsonp+"="+s),e.converters["script json"]=function(){return r||J.error(s+" was not called"),r[0]},e.dataTypes[0]="json",o=t[s],t[s]=function(){r=arguments},n.always(function(){t[s]=o,e[s]&&(e.jsonpCallback=i.jsonpCallback,Oi.push(s)),r&&J.isFunction(o)&&o(r[0]),r=o=void 0}),"script"):void 0}),J.parseHTML=function(t,e,i){if(!t||"string"!=typeof t)return null;"boolean"==typeof e&&(i=e,e=!1),e=e||Z;var n=re.exec(t),s=!i&&[];return n?[e.createElement(n[1])]:(n=J.buildFragment([t],e,s),s&&s.length&&J(s).remove(),J.merge([],n.childNodes))};var Ii=J.fn.load;J.fn.load=function(t,e,i){if("string"!=typeof t&&Ii)return Ii.apply(this,arguments);var n,s,o,r=this,a=t.indexOf(" ");return a>=0&&(n=J.trim(t.slice(a)),t=t.slice(0,a)),J.isFunction(e)?(i=e,e=void 0):e&&"object"==typeof e&&(s="POST"),r.length>0&&J.ajax({url:t,type:s,dataType:"html",data:e}).done(function(t){o=arguments,r.html(n?J("<div>").append(J.parseHTML(t)).find(n):t)}).complete(i&&function(t,e){r.each(i,o||[t.responseText,e,t])}),this},J.expr.filters.animated=function(t){return J.grep(J.timers,function(e){return t===e.elem}).length};var Fi=t.document.documentElement;J.offset={setOffset:function(t,e,i){var n,s,o,r,a,h,c,l=J.css(t,"position"),d=J(t),u={};"static"===l&&(t.style.position="relative"),a=d.offset(),o=J.css(t,"top"),h=J.css(t,"left"),c=("absolute"===l||"fixed"===l)&&(o+h).indexOf("auto")>-1,c?(n=d.position(),r=n.top,s=n.left):(r=parseFloat(o)||0,s=parseFloat(h)||0),J.isFunction(e)&&(e=e.call(t,i,a)),null!=e.top&&(u.top=e.top-a.top+r),null!=e.left&&(u.left=e.left-a.left+s),"using"in e?e.using.call(t,u):d.css(u)}},J.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){J.offset.setOffset(this,t,e)});var e,i,n=this[0],s={top:0,left:0},o=n&&n.ownerDocument;return o?(e=o.documentElement,J.contains(e,n)?(typeof n.getBoundingClientRect!==Te&&(s=n.getBoundingClientRect()),i=H(o),{top:s.top+i.pageYOffset-e.clientTop,left:s.left+i.pageXOffset-e.clientLeft}):s):void 0},position:function(){if(this[0]){var t,e,i=this[0],n={top:0,left:0};return"fixed"===J.css(i,"position")?e=i.getBoundingClientRect():(t=this.offsetParent(),e=this.offset(),J.nodeName(t[0],"html")||(n=t.offset()),n.top+=J.css(t[0],"borderTopWidth",!0),n.left+=J.css(t[0],"borderLeftWidth",!0)),{top:e.top-n.top-J.css(i,"marginTop",!0),left:e.left-n.left-J.css(i,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent||Fi;t&&!J.nodeName(t,"html")&&"static"===J.css(t,"position");)t=t.offsetParent;return t||Fi})}}),J.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,i){var n="pageYOffset"===i;J.fn[e]=function(s){return me(this,function(e,s,o){var r=H(e);return void 0===o?r?r[i]:e[s]:void(r?r.scrollTo(n?t.pageXOffset:o,n?o:t.pageYOffset):e[s]=o)},e,s,arguments.length,null)}}),J.each(["top","left"],function(t,e){J.cssHooks[e]=w(q.pixelPosition,function(t,i){return i?(i=x(t,e),Be.test(i)?J(t).position()[e]+"px":i):void 0})}),J.each({Height:"height",Width:"width"},function(t,e){J.each({padding:"inner"+t,content:e,"":"outer"+t},function(i,n){J.fn[n]=function(n,s){var o=arguments.length&&(i||"boolean"!=typeof n),r=i||(n===!0||s===!0?"margin":"border");return me(this,function(e,i,n){var s;return J.isWindow(e)?e.document.documentElement["client"+t]:9===e.nodeType?(s=e.documentElement,Math.max(e.body["scroll"+t],s["scroll"+t],e.body["offset"+t],s["offset"+t],s["client"+t])):void 0===n?J.css(e,i,r):J.style(e,i,n,r)},e,o?n:void 0,o,null)}})}),J.fn.size=function(){return this.length},J.fn.andSelf=J.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return J});var Ki=t.jQuery,zi=t.$;return J.noConflict=function(e){return t.$===J&&(t.$=zi),e&&t.jQuery===J&&(t.jQuery=Ki),J},typeof e===Te&&(t.jQuery=t.$=J),J}),"undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");+function(t){"use strict";function e(){var t=document.createElement("bootstrap"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var i in e)if(void 0!==t.style[i])return{end:e[i]};return!1}t.fn.emulateTransitionEnd=function(e){var i=!1,n=this;t(this).one("bsTransitionEnd",function(){i=!0});var s=function(){i||t(n).trigger(t.support.transition.end)};return setTimeout(s,e),this},t(function(){t.support.transition=e(),t.support.transition&&(t.event.special.bsTransitionEnd={bindType:t.support.transition.end,delegateType:t.support.transition.end,handle:function(e){return t(e.target).is(this)?e.handleObj.handler.apply(this,arguments):void 0}})})}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var i=t(this),s=i.data("bs.alert");s||i.data("bs.alert",s=new n(this)),"string"==typeof e&&s[e].call(i)})}var i='[data-dismiss="alert"]',n=function(e){t(e).on("click",i,this.close)};n.VERSION="3.2.0",n.prototype.close=function(e){function i(){o.detach().trigger("closed.bs.alert").remove()}var n=t(this),s=n.attr("data-target");s||(s=n.attr("href"),s=s&&s.replace(/.*(?=#[^\s]*$)/,""));var o=t(s);e&&e.preventDefault(),o.length||(o=n.hasClass("alert")?n:n.parent()),o.trigger(e=t.Event("close.bs.alert")),e.isDefaultPrevented()||(o.removeClass("in"),t.support.transition&&o.hasClass("fade")?o.one("bsTransitionEnd",i).emulateTransitionEnd(150):i())};var s=t.fn.alert;t.fn.alert=e,t.fn.alert.Constructor=n,t.fn.alert.noConflict=function(){return t.fn.alert=s,this},t(document).on("click.bs.alert.data-api",i,n.prototype.close)}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var n=t(this),s=n.data("bs.button"),o="object"==typeof e&&e;s||n.data("bs.button",s=new i(this,o)),"toggle"==e?s.toggle():e&&s.setState(e)})}var i=function(e,n){this.$element=t(e),this.options=t.extend({},i.DEFAULTS,n),this.isLoading=!1};i.VERSION="3.2.0",i.DEFAULTS={loadingText:"loading..."},i.prototype.setState=function(e){var i="disabled",n=this.$element,s=n.is("input")?"val":"html",o=n.data();e+="Text",null==o.resetText&&n.data("resetText",n[s]()),n[s](null==o[e]?this.options[e]:o[e]),setTimeout(t.proxy(function(){"loadingText"==e?(this.isLoading=!0,n.addClass(i).attr(i,i)):this.isLoading&&(this.isLoading=!1,n.removeClass(i).removeAttr(i))},this),0)},i.prototype.toggle=function(){var t=!0,e=this.$element.closest('[data-toggle="buttons"]');if(e.length){var i=this.$element.find("input");"radio"==i.prop("type")&&(i.prop("checked")&&this.$element.hasClass("active")?t=!1:e.find(".active").removeClass("active")),t&&i.prop("checked",!this.$element.hasClass("active")).trigger("change")}t&&this.$element.toggleClass("active")};var n=t.fn.button;t.fn.button=e,t.fn.button.Constructor=i,t.fn.button.noConflict=function(){return t.fn.button=n,this},t(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(i){var n=t(i.target);n.hasClass("btn")||(n=n.closest(".btn")),e.call(n,"toggle"),i.preventDefault()})}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var n=t(this),s=n.data("bs.carousel"),o=t.extend({},i.DEFAULTS,n.data(),"object"==typeof e&&e),r="string"==typeof e?e:o.slide;s||n.data("bs.carousel",s=new i(this,o)),"number"==typeof e?s.to(e):r?s[r]():o.interval&&s.pause().cycle()})}var i=function(e,i){this.$element=t(e).on("keydown.bs.carousel",t.proxy(this.keydown,this)),this.$indicators=this.$element.find(".carousel-indicators"),this.options=i,this.paused=this.sliding=this.interval=this.$active=this.$items=null,"hover"==this.options.pause&&this.$element.on("mouseenter.bs.carousel",t.proxy(this.pause,this)).on("mouseleave.bs.carousel",t.proxy(this.cycle,this))};i.VERSION="3.2.0",i.DEFAULTS={interval:5e3,pause:"hover",wrap:!0},i.prototype.keydown=function(t){switch(t.which){case 37:this.prev();break;case 39:this.next();break;default:return}t.preventDefault()},i.prototype.cycle=function(e){return e||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(t.proxy(this.next,this),this.options.interval)),this},i.prototype.getItemIndex=function(t){return this.$items=t.parent().children(".item"),this.$items.index(t||this.$active)},i.prototype.to=function(e){var i=this,n=this.getItemIndex(this.$active=this.$element.find(".item.active"));return e>this.$items.length-1||0>e?void 0:this.sliding?this.$element.one("slid.bs.carousel",function(){i.to(e)}):n==e?this.pause().cycle():this.slide(e>n?"next":"prev",t(this.$items[e]))},i.prototype.pause=function(e){return e||(this.paused=!0),this.$element.find(".next, .prev").length&&t.support.transition&&(this.$element.trigger(t.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},i.prototype.next=function(){return this.sliding?void 0:this.slide("next")},i.prototype.prev=function(){return this.sliding?void 0:this.slide("prev")},i.prototype.slide=function(e,i){var n=this.$element.find(".item.active"),s=i||n[e](),o=this.interval,r="next"==e?"left":"right",a="next"==e?"first":"last",h=this;if(!s.length){if(!this.options.wrap)return;s=this.$element.find(".item")[a]()}if(s.hasClass("active"))return this.sliding=!1;var c=s[0],l=t.Event("slide.bs.carousel",{relatedTarget:c,direction:r});if(this.$element.trigger(l),!l.isDefaultPrevented()){if(this.sliding=!0,o&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var d=t(this.$indicators.children()[this.getItemIndex(s)]);d&&d.addClass("active")}var u=t.Event("slid.bs.carousel",{relatedTarget:c,direction:r});return t.support.transition&&this.$element.hasClass("slide")?(s.addClass(e),s[0].offsetWidth,n.addClass(r),s.addClass(r),n.one("bsTransitionEnd",function(){s.removeClass([e,r].join(" ")).addClass("active"),n.removeClass(["active",r].join(" ")),h.sliding=!1,setTimeout(function(){h.$element.trigger(u)},0)}).emulateTransitionEnd(1e3*n.css("transition-duration").slice(0,-1))):(n.removeClass("active"),s.addClass("active"),this.sliding=!1,this.$element.trigger(u)),o&&this.cycle(),this}};var n=t.fn.carousel;t.fn.carousel=e,t.fn.carousel.Constructor=i,t.fn.carousel.noConflict=function(){return t.fn.carousel=n,this},t(document).on("click.bs.carousel.data-api","[data-slide], [data-slide-to]",function(i){var n,s=t(this),o=t(s.attr("data-target")||(n=s.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,""));if(o.hasClass("carousel")){var r=t.extend({},o.data(),s.data()),a=s.attr("data-slide-to");a&&(r.interval=!1),e.call(o,r),a&&o.data("bs.carousel").to(a),i.preventDefault()}}),t(window).on("load",function(){t('[data-ride="carousel"]').each(function(){var i=t(this);e.call(i,i.data())})})}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var n=t(this),s=n.data("bs.collapse"),o=t.extend({},i.DEFAULTS,n.data(),"object"==typeof e&&e);!s&&o.toggle&&"show"==e&&(e=!e),s||n.data("bs.collapse",s=new i(this,o)),"string"==typeof e&&s[e]()})}var i=function(e,n){this.$element=t(e),this.options=t.extend({},i.DEFAULTS,n),this.transitioning=null,this.options.parent&&(this.$parent=t(this.options.parent)),this.options.toggle&&this.toggle()};i.VERSION="3.2.0",i.DEFAULTS={toggle:!0},i.prototype.dimension=function(){var t=this.$element.hasClass("width");return t?"width":"height"},i.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var i=t.Event("show.bs.collapse");if(this.$element.trigger(i),!i.isDefaultPrevented()){var n=this.$parent&&this.$parent.find("> .panel > .in");if(n&&n.length){var s=n.data("bs.collapse");if(s&&s.transitioning)return;e.call(n,"hide"),s||n.data("bs.collapse",null)}var o=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[o](0),this.transitioning=1;var r=function(){this.$element.removeClass("collapsing").addClass("collapse in")[o](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!t.support.transition)return r.call(this);var a=t.camelCase(["scroll",o].join("-"));this.$element.one("bsTransitionEnd",t.proxy(r,this)).emulateTransitionEnd(350)[o](this.$element[0][a])}}},i.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var e=t.Event("hide.bs.collapse");if(this.$element.trigger(e),!e.isDefaultPrevented()){var i=this.dimension();this.$element[i](this.$element[i]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse").removeClass("in"),this.transitioning=1;var n=function(){this.transitioning=0,this.$element.trigger("hidden.bs.collapse").removeClass("collapsing").addClass("collapse")};return t.support.transition?void this.$element[i](0).one("bsTransitionEnd",t.proxy(n,this)).emulateTransitionEnd(350):n.call(this)}}},i.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()};var n=t.fn.collapse;t.fn.collapse=e,t.fn.collapse.Constructor=i,t.fn.collapse.noConflict=function(){return t.fn.collapse=n,this},t(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(i){var n,s=t(this),o=s.attr("data-target")||i.preventDefault()||(n=s.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,""),r=t(o),a=r.data("bs.collapse"),h=a?"toggle":s.data(),c=s.attr("data-parent"),l=c&&t(c);a&&a.transitioning||(l&&l.find('[data-toggle="collapse"][data-parent="'+c+'"]').not(s).addClass("collapsed"),s[r.hasClass("in")?"addClass":"removeClass"]("collapsed")),e.call(r,h)})}(jQuery),+function(t){"use strict";function e(e){e&&3===e.which||(t(s).remove(),t(o).each(function(){var n=i(t(this)),s={relatedTarget:this};n.hasClass("open")&&(n.trigger(e=t.Event("hide.bs.dropdown",s)),e.isDefaultPrevented()||n.removeClass("open").trigger("hidden.bs.dropdown",s))}))}function i(e){var i=e.attr("data-target");i||(i=e.attr("href"),i=i&&/#[A-Za-z]/.test(i)&&i.replace(/.*(?=#[^\s]*$)/,""));var n=i&&t(i);return n&&n.length?n:e.parent()}function n(e){return this.each(function(){var i=t(this),n=i.data("bs.dropdown");n||i.data("bs.dropdown",n=new r(this)),"string"==typeof e&&n[e].call(i)})}var s=".dropdown-backdrop",o='[data-toggle="dropdown"]',r=function(e){t(e).on("click.bs.dropdown",this.toggle)};r.VERSION="3.2.0",r.prototype.toggle=function(n){var s=t(this);if(!s.is(".disabled, :disabled")){var o=i(s),r=o.hasClass("open");if(e(),!r){"ontouchstart"in document.documentElement&&!o.closest(".navbar-nav").length&&t('<div class="dropdown-backdrop"/>').insertAfter(t(this)).on("click",e);var a={relatedTarget:this};if(o.trigger(n=t.Event("show.bs.dropdown",a)),n.isDefaultPrevented())return;s.trigger("focus"),o.toggleClass("open").trigger("shown.bs.dropdown",a)}return!1}},r.prototype.keydown=function(e){if(/(38|40|27)/.test(e.keyCode)){var n=t(this);if(e.preventDefault(),e.stopPropagation(),!n.is(".disabled, :disabled")){var s=i(n),r=s.hasClass("open");if(!r||r&&27==e.keyCode)return 27==e.which&&s.find(o).trigger("focus"),n.trigger("click");var a=" li:not(.divider):visible a",h=s.find('[role="menu"]'+a+', [role="listbox"]'+a);if(h.length){var c=h.index(h.filter(":focus"));38==e.keyCode&&c>0&&c--,40==e.keyCode&&c<h.length-1&&c++,~c||(c=0),h.eq(c).trigger("focus")}}}};var a=t.fn.dropdown;t.fn.dropdown=n,t.fn.dropdown.Constructor=r,t.fn.dropdown.noConflict=function(){return t.fn.dropdown=a,this},t(document).on("click.bs.dropdown.data-api",e).on("click.bs.dropdown.data-api",".dropdown form",function(t){t.stopPropagation()}).on("click.bs.dropdown.data-api",o,r.prototype.toggle).on("keydown.bs.dropdown.data-api",o+', [role="menu"], [role="listbox"]',r.prototype.keydown)}(jQuery),+function(t){"use strict";function e(e,n){return this.each(function(){var s=t(this),o=s.data("bs.modal"),r=t.extend({},i.DEFAULTS,s.data(),"object"==typeof e&&e);o||s.data("bs.modal",o=new i(this,r)),"string"==typeof e?o[e](n):r.show&&o.show(n)})}var i=function(e,i){this.options=i,this.$body=t(document.body),this.$element=t(e),this.$backdrop=this.isShown=null,this.scrollbarWidth=0,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,t.proxy(function(){this.$element.trigger("loaded.bs.modal")
},this))};i.VERSION="3.2.0",i.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},i.prototype.toggle=function(t){return this.isShown?this.hide():this.show(t)},i.prototype.show=function(e){var i=this,n=t.Event("show.bs.modal",{relatedTarget:e});this.$element.trigger(n),this.isShown||n.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.$body.addClass("modal-open"),this.setScrollbar(),this.escape(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',t.proxy(this.hide,this)),this.backdrop(function(){var n=t.support.transition&&i.$element.hasClass("fade");i.$element.parent().length||i.$element.appendTo(i.$body),i.$element.show().scrollTop(0),n&&i.$element[0].offsetWidth,i.$element.addClass("in").attr("aria-hidden",!1),i.enforceFocus();var s=t.Event("shown.bs.modal",{relatedTarget:e});n?i.$element.find(".modal-dialog").one("bsTransitionEnd",function(){i.$element.trigger("focus").trigger(s)}).emulateTransitionEnd(300):i.$element.trigger("focus").trigger(s)}))},i.prototype.hide=function(e){e&&e.preventDefault(),e=t.Event("hide.bs.modal"),this.$element.trigger(e),this.isShown&&!e.isDefaultPrevented()&&(this.isShown=!1,this.$body.removeClass("modal-open"),this.resetScrollbar(),this.escape(),t(document).off("focusin.bs.modal"),this.$element.removeClass("in").attr("aria-hidden",!0).off("click.dismiss.bs.modal"),t.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",t.proxy(this.hideModal,this)).emulateTransitionEnd(300):this.hideModal())},i.prototype.enforceFocus=function(){t(document).off("focusin.bs.modal").on("focusin.bs.modal",t.proxy(function(t){this.$element[0]===t.target||this.$element.has(t.target).length||this.$element.trigger("focus")},this))},i.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keyup.dismiss.bs.modal",t.proxy(function(t){27==t.which&&this.hide()},this)):this.isShown||this.$element.off("keyup.dismiss.bs.modal")},i.prototype.hideModal=function(){var t=this;this.$element.hide(),this.backdrop(function(){t.$element.trigger("hidden.bs.modal")})},i.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},i.prototype.backdrop=function(e){var i=this,n=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var s=t.support.transition&&n;if(this.$backdrop=t('<div class="modal-backdrop '+n+'" />').appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",t.proxy(function(t){t.target===t.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus.call(this.$element[0]):this.hide.call(this))},this)),s&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!e)return;s?this.$backdrop.one("bsTransitionEnd",e).emulateTransitionEnd(150):e()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var o=function(){i.removeBackdrop(),e&&e()};t.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",o).emulateTransitionEnd(150):o()}else e&&e()},i.prototype.checkScrollbar=function(){document.body.clientWidth>=window.innerWidth||(this.scrollbarWidth=this.scrollbarWidth||this.measureScrollbar())},i.prototype.setScrollbar=function(){var t=parseInt(this.$body.css("padding-right")||0,10);this.scrollbarWidth&&this.$body.css("padding-right",t+this.scrollbarWidth)},i.prototype.resetScrollbar=function(){this.$body.css("padding-right","")},i.prototype.measureScrollbar=function(){var t=document.createElement("div");t.className="modal-scrollbar-measure",this.$body.append(t);var e=t.offsetWidth-t.clientWidth;return this.$body[0].removeChild(t),e};var n=t.fn.modal;t.fn.modal=e,t.fn.modal.Constructor=i,t.fn.modal.noConflict=function(){return t.fn.modal=n,this},t(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(i){var n=t(this),s=n.attr("href"),o=t(n.attr("data-target")||s&&s.replace(/.*(?=#[^\s]+$)/,"")),r=o.data("bs.modal")?"toggle":t.extend({remote:!/#/.test(s)&&s},o.data(),n.data());n.is("a")&&i.preventDefault(),o.one("show.bs.modal",function(t){t.isDefaultPrevented()||o.one("hidden.bs.modal",function(){n.is(":visible")&&n.trigger("focus")})}),e.call(o,r,this)})}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var n=t(this),s=n.data("bs.tooltip"),o="object"==typeof e&&e;(s||"destroy"!=e)&&(s||n.data("bs.tooltip",s=new i(this,o)),"string"==typeof e&&s[e]())})}var i=function(t,e){this.type=this.options=this.enabled=this.timeout=this.hoverState=this.$element=null,this.init("tooltip",t,e)};i.VERSION="3.2.0",i.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},i.prototype.init=function(e,i,n){this.enabled=!0,this.type=e,this.$element=t(i),this.options=this.getOptions(n),this.$viewport=this.options.viewport&&t(this.options.viewport.selector||this.options.viewport);for(var s=this.options.trigger.split(" "),o=s.length;o--;){var r=s[o];if("click"==r)this.$element.on("click."+this.type,this.options.selector,t.proxy(this.toggle,this));else if("manual"!=r){var a="hover"==r?"mouseenter":"focusin",h="hover"==r?"mouseleave":"focusout";this.$element.on(a+"."+this.type,this.options.selector,t.proxy(this.enter,this)),this.$element.on(h+"."+this.type,this.options.selector,t.proxy(this.leave,this))}}this.options.selector?this._options=t.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},i.prototype.getDefaults=function(){return i.DEFAULTS},i.prototype.getOptions=function(e){return e=t.extend({},this.getDefaults(),this.$element.data(),e),e.delay&&"number"==typeof e.delay&&(e.delay={show:e.delay,hide:e.delay}),e},i.prototype.getDelegateOptions=function(){var e={},i=this.getDefaults();return this._options&&t.each(this._options,function(t,n){i[t]!=n&&(e[t]=n)}),e},i.prototype.enter=function(e){var i=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);return i||(i=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,i)),clearTimeout(i.timeout),i.hoverState="in",i.options.delay&&i.options.delay.show?void(i.timeout=setTimeout(function(){"in"==i.hoverState&&i.show()},i.options.delay.show)):i.show()},i.prototype.leave=function(e){var i=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);return i||(i=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,i)),clearTimeout(i.timeout),i.hoverState="out",i.options.delay&&i.options.delay.hide?void(i.timeout=setTimeout(function(){"out"==i.hoverState&&i.hide()},i.options.delay.hide)):i.hide()},i.prototype.show=function(){var e=t.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(e);var i=t.contains(document.documentElement,this.$element[0]);if(e.isDefaultPrevented()||!i)return;var n=this,s=this.tip(),o=this.getUID(this.type);this.setContent(),s.attr("id",o),this.$element.attr("aria-describedby",o),this.options.animation&&s.addClass("fade");var r="function"==typeof this.options.placement?this.options.placement.call(this,s[0],this.$element[0]):this.options.placement,a=/\s?auto?\s?/i,h=a.test(r);h&&(r=r.replace(a,"")||"top"),s.detach().css({top:0,left:0,display:"block"}).addClass(r).data("bs."+this.type,this),this.options.container?s.appendTo(this.options.container):s.insertAfter(this.$element);var c=this.getPosition(),l=s[0].offsetWidth,d=s[0].offsetHeight;if(h){var u=r,p=this.$element.parent(),f=this.getPosition(p);r="bottom"==r&&c.top+c.height+d-f.scroll>f.height?"top":"top"==r&&c.top-f.scroll-d<0?"bottom":"right"==r&&c.right+l>f.width?"left":"left"==r&&c.left-l<f.left?"right":r,s.removeClass(u).addClass(r)}var g=this.getCalculatedOffset(r,c,l,d);this.applyPlacement(g,r);var m=function(){n.$element.trigger("shown.bs."+n.type),n.hoverState=null};t.support.transition&&this.$tip.hasClass("fade")?s.one("bsTransitionEnd",m).emulateTransitionEnd(150):m()}},i.prototype.applyPlacement=function(e,i){var n=this.tip(),s=n[0].offsetWidth,o=n[0].offsetHeight,r=parseInt(n.css("margin-top"),10),a=parseInt(n.css("margin-left"),10);isNaN(r)&&(r=0),isNaN(a)&&(a=0),e.top=e.top+r,e.left=e.left+a,t.offset.setOffset(n[0],t.extend({using:function(t){n.css({top:Math.round(t.top),left:Math.round(t.left)})}},e),0),n.addClass("in");var h=n[0].offsetWidth,c=n[0].offsetHeight;"top"==i&&c!=o&&(e.top=e.top+o-c);var l=this.getViewportAdjustedDelta(i,e,h,c);l.left?e.left+=l.left:e.top+=l.top;var d=l.left?2*l.left-s+h:2*l.top-o+c,u=l.left?"left":"top",p=l.left?"offsetWidth":"offsetHeight";n.offset(e),this.replaceArrow(d,n[0][p],u)},i.prototype.replaceArrow=function(t,e,i){this.arrow().css(i,t?50*(1-t/e)+"%":"")},i.prototype.setContent=function(){var t=this.tip(),e=this.getTitle();t.find(".tooltip-inner")[this.options.html?"html":"text"](e),t.removeClass("fade in top bottom left right")},i.prototype.hide=function(){function e(){"in"!=i.hoverState&&n.detach(),i.$element.trigger("hidden.bs."+i.type)}var i=this,n=this.tip(),s=t.Event("hide.bs."+this.type);return this.$element.removeAttr("aria-describedby"),this.$element.trigger(s),s.isDefaultPrevented()?void 0:(n.removeClass("in"),t.support.transition&&this.$tip.hasClass("fade")?n.one("bsTransitionEnd",e).emulateTransitionEnd(150):e(),this.hoverState=null,this)},i.prototype.fixTitle=function(){var t=this.$element;(t.attr("title")||"string"!=typeof t.attr("data-original-title"))&&t.attr("data-original-title",t.attr("title")||"").attr("title","")},i.prototype.hasContent=function(){return this.getTitle()},i.prototype.getPosition=function(e){e=e||this.$element;var i=e[0],n="BODY"==i.tagName;return t.extend({},"function"==typeof i.getBoundingClientRect?i.getBoundingClientRect():null,{scroll:n?document.documentElement.scrollTop||document.body.scrollTop:e.scrollTop(),width:n?t(window).width():e.outerWidth(),height:n?t(window).height():e.outerHeight()},n?{top:0,left:0}:e.offset())},i.prototype.getCalculatedOffset=function(t,e,i,n){return"bottom"==t?{top:e.top+e.height,left:e.left+e.width/2-i/2}:"top"==t?{top:e.top-n,left:e.left+e.width/2-i/2}:"left"==t?{top:e.top+e.height/2-n/2,left:e.left-i}:{top:e.top+e.height/2-n/2,left:e.left+e.width}},i.prototype.getViewportAdjustedDelta=function(t,e,i,n){var s={top:0,left:0};if(!this.$viewport)return s;var o=this.options.viewport&&this.options.viewport.padding||0,r=this.getPosition(this.$viewport);if(/right|left/.test(t)){var a=e.top-o-r.scroll,h=e.top+o-r.scroll+n;a<r.top?s.top=r.top-a:h>r.top+r.height&&(s.top=r.top+r.height-h)}else{var c=e.left-o,l=e.left+o+i;c<r.left?s.left=r.left-c:l>r.width&&(s.left=r.left+r.width-l)}return s},i.prototype.getTitle=function(){var t,e=this.$element,i=this.options;return t=e.attr("data-original-title")||("function"==typeof i.title?i.title.call(e[0]):i.title)},i.prototype.getUID=function(t){do t+=~~(1e6*Math.random());while(document.getElementById(t));return t},i.prototype.tip=function(){return this.$tip=this.$tip||t(this.options.template)},i.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},i.prototype.validate=function(){this.$element[0].parentNode||(this.hide(),this.$element=null,this.options=null)},i.prototype.enable=function(){this.enabled=!0},i.prototype.disable=function(){this.enabled=!1},i.prototype.toggleEnabled=function(){this.enabled=!this.enabled},i.prototype.toggle=function(e){var i=this;e&&(i=t(e.currentTarget).data("bs."+this.type),i||(i=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,i))),i.tip().hasClass("in")?i.leave(i):i.enter(i)},i.prototype.destroy=function(){clearTimeout(this.timeout),this.hide().$element.off("."+this.type).removeData("bs."+this.type)};var n=t.fn.tooltip;t.fn.tooltip=e,t.fn.tooltip.Constructor=i,t.fn.tooltip.noConflict=function(){return t.fn.tooltip=n,this}}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var n=t(this),s=n.data("bs.popover"),o="object"==typeof e&&e;(s||"destroy"!=e)&&(s||n.data("bs.popover",s=new i(this,o)),"string"==typeof e&&s[e]())})}var i=function(t,e){this.init("popover",t,e)};if(!t.fn.tooltip)throw new Error("Popover requires tooltip.js");i.VERSION="3.2.0",i.DEFAULTS=t.extend({},t.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),i.prototype=t.extend({},t.fn.tooltip.Constructor.prototype),i.prototype.constructor=i,i.prototype.getDefaults=function(){return i.DEFAULTS},i.prototype.setContent=function(){var t=this.tip(),e=this.getTitle(),i=this.getContent();t.find(".popover-title")[this.options.html?"html":"text"](e),t.find(".popover-content").empty()[this.options.html?"string"==typeof i?"html":"append":"text"](i),t.removeClass("fade top bottom left right in"),t.find(".popover-title").html()||t.find(".popover-title").hide()},i.prototype.hasContent=function(){return this.getTitle()||this.getContent()},i.prototype.getContent=function(){var t=this.$element,e=this.options;return t.attr("data-content")||("function"==typeof e.content?e.content.call(t[0]):e.content)},i.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")},i.prototype.tip=function(){return this.$tip||(this.$tip=t(this.options.template)),this.$tip};var n=t.fn.popover;t.fn.popover=e,t.fn.popover.Constructor=i,t.fn.popover.noConflict=function(){return t.fn.popover=n,this}}(jQuery),+function(t){"use strict";function e(i,n){var s=t.proxy(this.process,this);this.$body=t("body"),this.$scrollElement=t(t(i).is("body")?window:i),this.options=t.extend({},e.DEFAULTS,n),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",s),this.refresh(),this.process()}function i(i){return this.each(function(){var n=t(this),s=n.data("bs.scrollspy"),o="object"==typeof i&&i;s||n.data("bs.scrollspy",s=new e(this,o)),"string"==typeof i&&s[i]()})}e.VERSION="3.2.0",e.DEFAULTS={offset:10},e.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},e.prototype.refresh=function(){var e="offset",i=0;t.isWindow(this.$scrollElement[0])||(e="position",i=this.$scrollElement.scrollTop()),this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight();var n=this;this.$body.find(this.selector).map(function(){var n=t(this),s=n.data("target")||n.attr("href"),o=/^#./.test(s)&&t(s);return o&&o.length&&o.is(":visible")&&[[o[e]().top+i,s]]||null}).sort(function(t,e){return t[0]-e[0]}).each(function(){n.offsets.push(this[0]),n.targets.push(this[1])})},e.prototype.process=function(){var t,e=this.$scrollElement.scrollTop()+this.options.offset,i=this.getScrollHeight(),n=this.options.offset+i-this.$scrollElement.height(),s=this.offsets,o=this.targets,r=this.activeTarget;if(this.scrollHeight!=i&&this.refresh(),e>=n)return r!=(t=o[o.length-1])&&this.activate(t);if(r&&e<=s[0])return r!=(t=o[0])&&this.activate(t);for(t=s.length;t--;)r!=o[t]&&e>=s[t]&&(!s[t+1]||e<=s[t+1])&&this.activate(o[t])},e.prototype.activate=function(e){this.activeTarget=e,t(this.selector).parentsUntil(this.options.target,".active").removeClass("active");var i=this.selector+'[data-target="'+e+'"],'+this.selector+'[href="'+e+'"]',n=t(i).parents("li").addClass("active");n.parent(".dropdown-menu").length&&(n=n.closest("li.dropdown").addClass("active")),n.trigger("activate.bs.scrollspy")};var n=t.fn.scrollspy;t.fn.scrollspy=i,t.fn.scrollspy.Constructor=e,t.fn.scrollspy.noConflict=function(){return t.fn.scrollspy=n,this},t(window).on("load.bs.scrollspy.data-api",function(){t('[data-spy="scroll"]').each(function(){var e=t(this);i.call(e,e.data())})})}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var n=t(this),s=n.data("bs.tab");s||n.data("bs.tab",s=new i(this)),"string"==typeof e&&s[e]()})}var i=function(e){this.element=t(e)};i.VERSION="3.2.0",i.prototype.show=function(){var e=this.element,i=e.closest("ul:not(.dropdown-menu)"),n=e.data("target");if(n||(n=e.attr("href"),n=n&&n.replace(/.*(?=#[^\s]*$)/,"")),!e.parent("li").hasClass("active")){var s=i.find(".active:last a")[0],o=t.Event("show.bs.tab",{relatedTarget:s});if(e.trigger(o),!o.isDefaultPrevented()){var r=t(n);this.activate(e.closest("li"),i),this.activate(r,r.parent(),function(){e.trigger({type:"shown.bs.tab",relatedTarget:s})})}}},i.prototype.activate=function(e,i,n){function s(){o.removeClass("active").find("> .dropdown-menu > .active").removeClass("active"),e.addClass("active"),r?(e[0].offsetWidth,e.addClass("in")):e.removeClass("fade"),e.parent(".dropdown-menu")&&e.closest("li.dropdown").addClass("active"),n&&n()}var o=i.find("> .active"),r=n&&t.support.transition&&o.hasClass("fade");r?o.one("bsTransitionEnd",s).emulateTransitionEnd(150):s(),o.removeClass("in")};var n=t.fn.tab;t.fn.tab=e,t.fn.tab.Constructor=i,t.fn.tab.noConflict=function(){return t.fn.tab=n,this},t(document).on("click.bs.tab.data-api",'[data-toggle="tab"], [data-toggle="pill"]',function(i){i.preventDefault(),e.call(t(this),"show")})}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var n=t(this),s=n.data("bs.affix"),o="object"==typeof e&&e;s||n.data("bs.affix",s=new i(this,o)),"string"==typeof e&&s[e]()})}var i=function(e,n){this.options=t.extend({},i.DEFAULTS,n),this.$target=t(this.options.target).on("scroll.bs.affix.data-api",t.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",t.proxy(this.checkPositionWithEventLoop,this)),this.$element=t(e),this.affixed=this.unpin=this.pinnedOffset=null,this.checkPosition()};i.VERSION="3.2.0",i.RESET="affix affix-top affix-bottom",i.DEFAULTS={offset:0,target:window},i.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(i.RESET).addClass("affix");var t=this.$target.scrollTop(),e=this.$element.offset();return this.pinnedOffset=e.top-t},i.prototype.checkPositionWithEventLoop=function(){setTimeout(t.proxy(this.checkPosition,this),1)},i.prototype.checkPosition=function(){if(this.$element.is(":visible")){var e=t(document).height(),n=this.$target.scrollTop(),s=this.$element.offset(),o=this.options.offset,r=o.top,a=o.bottom;"object"!=typeof o&&(a=r=o),"function"==typeof r&&(r=o.top(this.$element)),"function"==typeof a&&(a=o.bottom(this.$element));var h=null!=this.unpin&&n+this.unpin<=s.top?!1:null!=a&&s.top+this.$element.height()>=e-a?"bottom":null!=r&&r>=n?"top":!1;if(this.affixed!==h){null!=this.unpin&&this.$element.css("top","");var c="affix"+(h?"-"+h:""),l=t.Event(c+".bs.affix");this.$element.trigger(l),l.isDefaultPrevented()||(this.affixed=h,this.unpin="bottom"==h?this.getPinnedOffset():null,this.$element.removeClass(i.RESET).addClass(c).trigger(t.Event(c.replace("affix","affixed"))),"bottom"==h&&this.$element.offset({top:e-this.$element.height()-a}))}}};var n=t.fn.affix;t.fn.affix=e,t.fn.affix.Constructor=i,t.fn.affix.noConflict=function(){return t.fn.affix=n,this},t(window).on("load",function(){t('[data-spy="affix"]').each(function(){var i=t(this),n=i.data();n.offset=n.offset||{},n.offsetBottom&&(n.offset.bottom=n.offsetBottom),n.offsetTop&&(n.offset.top=n.offsetTop),e.call(i,n)})})}(jQuery);var Kinetic={};!function(t){var e=Math.PI/180;Kinetic={version:"5.1.0",stages:[],idCounter:0,ids:{},names:{},shapes:{},listenClickTap:!1,inDblClickWindow:!1,enableTrace:!1,traceArrMax:100,dblClickWindow:400,pixelRatio:void 0,dragDistance:0,angleDeg:!0,UA:function(){var e=t.navigator&&t.navigator.userAgent||"",i=e.toLowerCase(),n=/(chrome)[ \/]([\w.]+)/.exec(i)||/(webkit)[ \/]([\w.]+)/.exec(i)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(i)||/(msie) ([\w.]+)/.exec(i)||i.indexOf("compatible")<0&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(i)||[],s=!!e.match(/Android|BlackBerry|iPhone|iPad|iPod|Opera Mini|IEMobile/i);return{browser:n[1]||"",version:n[2]||"0",mobile:s}}(),Filters:{},Node:function(t){this._init(t)},Shape:function(t){this.__init(t)},Container:function(t){this.__init(t)},Stage:function(t){this.___init(t)},BaseLayer:function(t){this.___init(t)},Layer:function(t){this.____init(t)},FastLayer:function(t){this.____init(t)},Group:function(t){this.___init(t)},isDragging:function(){var t=Kinetic.DD;return t?t.isDragging:!1},isDragReady:function(){var t=Kinetic.DD;return t?!!t.node:!1},_addId:function(t,e){void 0!==e&&(this.ids[e]=t)},_removeId:function(t){void 0!==t&&delete this.ids[t]},_addName:function(t,e){void 0!==e&&(void 0===this.names[e]&&(this.names[e]=[]),this.names[e].push(t))},_removeName:function(t,e){if(void 0!==t){var i=this.names[t];if(void 0!==i){for(var n=0;n<i.length;n++){var s=i[n];s._id===e&&i.splice(n,1)}0===i.length&&delete this.names[t]}}},getAngle:function(t){return this.angleDeg?t*e:t}}}(this),function(t,e){if("object"==typeof exports){var i=require("canvas"),n=require("jsdom").jsdom,s=n("<!DOCTYPE html><html><head></head><body></body></html>"),o=e();return Kinetic.document=s,Kinetic.window=Kinetic.document.createWindow(),Kinetic.window.Image=i.Image,Kinetic.root=t,Kinetic._nodeCanvas=i,void(module.exports=o)}"function"==typeof define&&define.amd&&define(e),Kinetic.document=document,Kinetic.window=window,Kinetic.root=t}((1,eval)("this"),function(){return Kinetic}),function(){Kinetic.Collection=function(){var t=[].slice.call(arguments),e=t.length,i=0;for(this.length=e;e>i;i++)this[i]=t[i];return this},Kinetic.Collection.prototype=[],Kinetic.Collection.prototype.each=function(t){for(var e=0;e<this.length;e++)t(this[e],e)},Kinetic.Collection.prototype.toArray=function(){var t,e=[],i=this.length;for(t=0;i>t;t++)e.push(this[t]);return e},Kinetic.Collection.toCollection=function(t){var e,i=new Kinetic.Collection,n=t.length;for(e=0;n>e;e++)i.push(t[e]);return i},Kinetic.Collection._mapMethod=function(t){Kinetic.Collection.prototype[t]=function(){var e,i=this.length,n=[].slice.call(arguments);for(e=0;i>e;e++)this[e][t].apply(this[e],n);return this}},Kinetic.Collection.mapMethods=function(t){var e=t.prototype;for(var i in e)Kinetic.Collection._mapMethod(i)},Kinetic.Transform=function(t){this.m=t&&t.slice()||[1,0,0,1,0,0]},Kinetic.Transform.prototype={copy:function(){return new Kinetic.Transform(this.m)},point:function(t){var e=this.m;return{x:e[0]*t.x+e[2]*t.y+e[4],y:e[1]*t.x+e[3]*t.y+e[5]}},translate:function(t,e){return this.m[4]+=this.m[0]*t+this.m[2]*e,this.m[5]+=this.m[1]*t+this.m[3]*e,this},scale:function(t,e){return this.m[0]*=t,this.m[1]*=t,this.m[2]*=e,this.m[3]*=e,this},rotate:function(t){var e=Math.cos(t),i=Math.sin(t),n=this.m[0]*e+this.m[2]*i,s=this.m[1]*e+this.m[3]*i,o=this.m[0]*-i+this.m[2]*e,r=this.m[1]*-i+this.m[3]*e;return this.m[0]=n,this.m[1]=s,this.m[2]=o,this.m[3]=r,this},getTranslation:function(){return{x:this.m[4],y:this.m[5]}},skew:function(t,e){var i=this.m[0]+this.m[2]*e,n=this.m[1]+this.m[3]*e,s=this.m[2]+this.m[0]*t,o=this.m[3]+this.m[1]*t;return this.m[0]=i,this.m[1]=n,this.m[2]=s,this.m[3]=o,this},multiply:function(t){var e=this.m[0]*t.m[0]+this.m[2]*t.m[1],i=this.m[1]*t.m[0]+this.m[3]*t.m[1],n=this.m[0]*t.m[2]+this.m[2]*t.m[3],s=this.m[1]*t.m[2]+this.m[3]*t.m[3],o=this.m[0]*t.m[4]+this.m[2]*t.m[5]+this.m[4],r=this.m[1]*t.m[4]+this.m[3]*t.m[5]+this.m[5];return this.m[0]=e,this.m[1]=i,this.m[2]=n,this.m[3]=s,this.m[4]=o,this.m[5]=r,this},invert:function(){var t=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),e=this.m[3]*t,i=-this.m[1]*t,n=-this.m[2]*t,s=this.m[0]*t,o=t*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),r=t*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=e,this.m[1]=i,this.m[2]=n,this.m[3]=s,this.m[4]=o,this.m[5]=r,this},getMatrix:function(){return this.m},setAbsolutePosition:function(t,e){var i=this.m[0],n=this.m[1],s=this.m[2],o=this.m[3],r=this.m[4],a=this.m[5],h=(i*(e-a)-n*(t-r))/(i*o-n*s),c=(t-r-s*h)/i;return this.translate(c,h)}};var t="2d",e="[object Array]",i="[object Number]",n="[object String]",s=Math.PI/180,o=180/Math.PI,r="#",a="",h="0",c="Kinetic warning: ",l="Kinetic error: ",d="rgb(",u={aqua:[0,255,255],lime:[0,255,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,255],navy:[0,0,128],white:[255,255,255],fuchsia:[255,0,255],olive:[128,128,0],yellow:[255,255,0],orange:[255,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[255,0,0],pink:[255,192,203],cyan:[0,255,255],transparent:[255,255,255,0]},p=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/;Kinetic.Util={_isElement:function(t){return!(!t||1!=t.nodeType)},_isFunction:function(t){return!!(t&&t.constructor&&t.call&&t.apply)},_isObject:function(t){return!!t&&t.constructor==Object},_isArray:function(t){return Object.prototype.toString.call(t)==e},_isNumber:function(t){return Object.prototype.toString.call(t)==i},_isString:function(t){return Object.prototype.toString.call(t)==n},_throttle:function(t,e,i){var n,s,o,r=null,a=0;i||(i={});var h=function(){a=i.leading===!1?0:(new Date).getTime(),r=null,o=t.apply(n,s),n=s=null};return function(){var c=(new Date).getTime();a||i.leading!==!1||(a=c);var l=e-(c-a);return n=this,s=arguments,0>=l?(clearTimeout(r),r=null,a=c,o=t.apply(n,s),n=s=null):r||i.trailing===!1||(r=setTimeout(h,l)),o}},_hasMethods:function(t){var e,i=[];for(e in t)this._isFunction(t[e])&&i.push(e);return i.length>0},createCanvasElement:function(){var t=Kinetic.document.createElement("canvas");return t.style=t.style||{},t},isBrowser:function(){return"object"!=typeof exports},_isInDocument:function(t){for(;t=t.parentNode;)if(t==Kinetic.document)return!0;return!1},_simplifyArray:function(t){var e,i,n=[],s=t.length,o=Kinetic.Util;for(e=0;s>e;e++)i=t[e],o._isNumber(i)?i=Math.round(1e3*i)/1e3:o._isString(i)||(i=i.toString()),n.push(i);return n},_getImage:function(e,i){var n,s;if(e)if(this._isElement(e))i(e);else if(this._isString(e))n=new Kinetic.window.Image,n.onload=function(){i(n)},n.src=e;else if(e.data){s=Kinetic.Util.createCanvasElement(),s.width=e.width,s.height=e.height;var o=s.getContext(t);o.putImageData(e,0,0),this._getImage(s.toDataURL(),i)}else i(null);else i(null)},_getRGBAString:function(t){var e=t.red||0,i=t.green||0,n=t.blue||0,s=t.alpha||1;return["rgba(",e,",",i,",",n,",",s,")"].join(a)},_rgbToHex:function(t,e,i){return((1<<24)+(t<<16)+(e<<8)+i).toString(16).slice(1)},_hexToRgb:function(t){t=t.replace(r,a);var e=parseInt(t,16);return{r:e>>16&255,g:e>>8&255,b:255&e}},getRandomColor:function(){for(var t=(16777215*Math.random()<<0).toString(16);t.length<6;)t=h+t;return r+t},get:function(t,e){return void 0===t?e:t},getRGB:function(t){var e;return t in u?(e=u[t],{r:e[0],g:e[1],b:e[2]}):t[0]===r?this._hexToRgb(t.substring(1)):t.substr(0,4)===d?(e=p.exec(t.replace(/ /g,"")),{r:parseInt(e[1],10),g:parseInt(e[2],10),b:parseInt(e[3],10)}):{r:0,g:0,b:0}},_merge:function(t,e){var i=this._clone(e);for(var n in t)i[n]=this._isObject(t[n])?this._merge(t[n],i[n]):t[n];return i},cloneObject:function(t){var e={};for(var i in t)e[i]=this._isObject(t[i])?this.cloneObject(t[i]):this._isArray(t[i])?this.cloneArray(t[i]):t[i];return e},cloneArray:function(t){return t.slice(0)},_degToRad:function(t){return t*s},_radToDeg:function(t){return t*o},_capitalize:function(t){return t.charAt(0).toUpperCase()+t.slice(1)},error:function(t){throw new Error(l+t)},warn:function(t){Kinetic.root.console&&console.warn&&console.warn(c+t)},extend:function(t,e){for(var i in e.prototype)i in t.prototype||(t.prototype[i]=e.prototype[i])},addMethods:function(t,e){var i;for(i in e)t.prototype[i]=e[i]},_getControlPoints:function(t,e,i,n,s,o,r){var a=Math.sqrt(Math.pow(i-t,2)+Math.pow(n-e,2)),h=Math.sqrt(Math.pow(s-i,2)+Math.pow(o-n,2)),c=r*a/(a+h),l=r*h/(a+h),d=i-c*(s-t),u=n-c*(o-e),p=i+l*(s-t),f=n+l*(o-e);return[d,u,p,f]},_expandPoints:function(t,e){var i,n,s=t.length,o=[];for(i=2;s-2>i;i+=2)n=Kinetic.Util._getControlPoints(t[i-2],t[i-1],t[i],t[i+1],t[i+2],t[i+3],e),o.push(n[0]),o.push(n[1]),o.push(t[i]),o.push(t[i+1]),o.push(n[2]),o.push(n[3]);return o},_removeLastLetter:function(t){return t.substring(0,t.length-1)}}}(),function(){var t=Kinetic.Util.createCanvasElement(),e=t.getContext("2d"),i=Kinetic.UA.mobile?function(){var t=window.devicePixelRatio||1,i=e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return t/i}():1;Kinetic.Canvas=function(t){this.init(t)},Kinetic.Canvas.prototype={init:function(t){t=t||{};var e=t.pixelRatio||Kinetic.pixelRatio||i;this.pixelRatio=e,this._canvas=Kinetic.Util.createCanvasElement(),this._canvas.style.padding=0,this._canvas.style.margin=0,this._canvas.style.border=0,this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top=0,this._canvas.style.left=0},getContext:function(){return this.context},getPixelRatio:function(){return this.pixelRatio},setPixelRatio:function(t){this.pixelRatio=t,this.setSize(this.getWidth(),this.getHeight())},setWidth:function(t){this.width=this._canvas.width=t*this.pixelRatio,this._canvas.style.width=t+"px"},setHeight:function(t){this.height=this._canvas.height=t*this.pixelRatio,this._canvas.style.height=t+"px"},getWidth:function(){return this.width},getHeight:function(){return this.height},setSize:function(t,e){this.setWidth(t),this.setHeight(e)},toDataURL:function(t,e){try{return this._canvas.toDataURL(t,e)}catch(i){try{return this._canvas.toDataURL()}catch(n){return Kinetic.Util.warn("Unable to get data URL. "+n.message),""}}}},Kinetic.SceneCanvas=function(t){t=t||{};var e=t.width||0,i=t.height||0;Kinetic.Canvas.call(this,t),this.context=new Kinetic.SceneContext(this),this.setSize(e,i)},Kinetic.SceneCanvas.prototype={setWidth:function(t){var e=this.pixelRatio,i=this.getContext()._context;Kinetic.Canvas.prototype.setWidth.call(this,t),i.scale(e,e)},setHeight:function(t){var e=this.pixelRatio,i=this.getContext()._context;Kinetic.Canvas.prototype.setHeight.call(this,t),i.scale(e,e)}},Kinetic.Util.extend(Kinetic.SceneCanvas,Kinetic.Canvas),Kinetic.HitCanvas=function(t){t=t||{};var e=t.width||0,i=t.height||0;Kinetic.Canvas.call(this,t),this.context=new Kinetic.HitContext(this),this.setSize(e,i)},Kinetic.Util.extend(Kinetic.HitCanvas,Kinetic.Canvas)}(),function(){var t=",",e="(",i=")",n="([",s="])",o=";",r="()",a="=",h=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"];Kinetic.Context=function(t){this.init(t)},Kinetic.Context.prototype={init:function(t){this.canvas=t,this._context=t._canvas.getContext("2d"),Kinetic.enableTrace&&(this.traceArr=[],this._enableTrace())},fillShape:function(t){t.getFillEnabled()&&this._fill(t)},strokeShape:function(t){t.getStrokeEnabled()&&this._stroke(t)},fillStrokeShape:function(t){var e=t.getFillEnabled();e&&this._fill(t),t.getStrokeEnabled()&&this._stroke(t)},getTrace:function(h){var c,l,d,u,p=this.traceArr,f=p.length,g="";for(c=0;f>c;c++)l=p[c],d=l.method,d?(u=l.args,g+=d,g+=h?r:Kinetic.Util._isArray(u[0])?n+u.join(t)+s:e+u.join(t)+i):(g+=l.property,h||(g+=a+l.val)),g+=o;return g},clearTrace:function(){this.traceArr=[]},_trace:function(t){var e,i=this.traceArr;i.push(t),e=i.length,e>=Kinetic.traceArrMax&&i.shift()},reset:function(){var t=this.getCanvas().getPixelRatio();this.setTransform(1*t,0,0,1*t,0,0)},getCanvas:function(){return this.canvas},clear:function(t){var e=this.getCanvas();t?this.clearRect(t.x||0,t.y||0,t.width||0,t.height||0):this.clearRect(0,0,e.getWidth(),e.getHeight())},_applyLineCap:function(t){var e=t.getLineCap();e&&this.setAttr("lineCap",e)},_applyOpacity:function(t){var e=t.getAbsoluteOpacity();
1!==e&&this.setAttr("globalAlpha",e)},_applyLineJoin:function(t){var e=t.getLineJoin();e&&this.setAttr("lineJoin",e)},setAttr:function(t,e){this._context[t]=e},arc:function(){var t=arguments;this._context.arc(t[0],t[1],t[2],t[3],t[4],t[5])},beginPath:function(){this._context.beginPath()},bezierCurveTo:function(){var t=arguments;this._context.bezierCurveTo(t[0],t[1],t[2],t[3],t[4],t[5])},clearRect:function(){var t=arguments;this._context.clearRect(t[0],t[1],t[2],t[3])},clip:function(){this._context.clip()},closePath:function(){this._context.closePath()},createImageData:function(){var t=arguments;return 2===t.length?this._context.createImageData(t[0],t[1]):1===t.length?this._context.createImageData(t[0]):void 0},createLinearGradient:function(){var t=arguments;return this._context.createLinearGradient(t[0],t[1],t[2],t[3])},createPattern:function(){var t=arguments;return this._context.createPattern(t[0],t[1])},createRadialGradient:function(){var t=arguments;return this._context.createRadialGradient(t[0],t[1],t[2],t[3],t[4],t[5])},drawImage:function(){var t=arguments,e=this._context;3===t.length?e.drawImage(t[0],t[1],t[2]):5===t.length?e.drawImage(t[0],t[1],t[2],t[3],t[4]):9===t.length&&e.drawImage(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8])},fill:function(){this._context.fill()},fillText:function(){var t=arguments;this._context.fillText(t[0],t[1],t[2])},getImageData:function(){var t=arguments;return this._context.getImageData(t[0],t[1],t[2],t[3])},lineTo:function(){var t=arguments;this._context.lineTo(t[0],t[1])},moveTo:function(){var t=arguments;this._context.moveTo(t[0],t[1])},rect:function(){var t=arguments;this._context.rect(t[0],t[1],t[2],t[3])},putImageData:function(){var t=arguments;this._context.putImageData(t[0],t[1],t[2])},quadraticCurveTo:function(){var t=arguments;this._context.quadraticCurveTo(t[0],t[1],t[2],t[3])},restore:function(){this._context.restore()},rotate:function(){var t=arguments;this._context.rotate(t[0])},save:function(){this._context.save()},scale:function(){var t=arguments;this._context.scale(t[0],t[1])},setLineDash:function(){var t=arguments,e=this._context;this._context.setLineDash?e.setLineDash(t[0]):"mozDash"in e?e.mozDash=t[0]:"webkitLineDash"in e&&(e.webkitLineDash=t[0])},setTransform:function(){var t=arguments;this._context.setTransform(t[0],t[1],t[2],t[3],t[4],t[5])},stroke:function(){this._context.stroke()},strokeText:function(){var t=arguments;this._context.strokeText(t[0],t[1],t[2])},transform:function(){var t=arguments;this._context.transform(t[0],t[1],t[2],t[3],t[4],t[5])},translate:function(){var t=arguments;this._context.translate(t[0],t[1])},_enableTrace:function(){var t,e,i=this,n=h.length,s=Kinetic.Util._simplifyArray,o=this.setAttr,r=function(t){var n,o=i[t];i[t]=function(){return e=s(Array.prototype.slice.call(arguments,0)),n=o.apply(i,arguments),i._trace({method:t,args:e}),n}};for(t=0;n>t;t++)r(h[t]);i.setAttr=function(){o.apply(i,arguments),i._trace({property:arguments[0],val:arguments[1]})}}},Kinetic.SceneContext=function(t){Kinetic.Context.call(this,t)},Kinetic.SceneContext.prototype={_fillColor:function(t){var e=t.fill()||Kinetic.Util._getRGBAString({red:t.fillRed(),green:t.fillGreen(),blue:t.fillBlue(),alpha:t.fillAlpha()});this.setAttr("fillStyle",e),t._fillFunc(this)},_fillPattern:function(t){var e=t.getFillPatternImage(),i=t.getFillPatternX(),n=t.getFillPatternY(),s=t.getFillPatternScale(),o=Kinetic.getAngle(t.getFillPatternRotation()),r=t.getFillPatternOffset(),a=t.getFillPatternRepeat();(i||n)&&this.translate(i||0,n||0),o&&this.rotate(o),s&&this.scale(s.x,s.y),r&&this.translate(-1*r.x,-1*r.y),this.setAttr("fillStyle",this.createPattern(e,a||"repeat")),this.fill()},_fillLinearGradient:function(t){var e=t.getFillLinearGradientStartPoint(),i=t.getFillLinearGradientEndPoint(),n=t.getFillLinearGradientColorStops(),s=this.createLinearGradient(e.x,e.y,i.x,i.y);if(n){for(var o=0;o<n.length;o+=2)s.addColorStop(n[o],n[o+1]);this.setAttr("fillStyle",s),this.fill()}},_fillRadialGradient:function(t){for(var e=t.getFillRadialGradientStartPoint(),i=t.getFillRadialGradientEndPoint(),n=t.getFillRadialGradientStartRadius(),s=t.getFillRadialGradientEndRadius(),o=t.getFillRadialGradientColorStops(),r=this.createRadialGradient(e.x,e.y,n,i.x,i.y,s),a=0;a<o.length;a+=2)r.addColorStop(o[a],o[a+1]);this.setAttr("fillStyle",r),this.fill()},_fill:function(t){var e=t.fill()||t.fillRed()||t.fillGreen()||t.fillBlue(),i=t.getFillPatternImage(),n=t.getFillLinearGradientColorStops(),s=t.getFillRadialGradientColorStops(),o=t.getFillPriority();e&&"color"===o?this._fillColor(t):i&&"pattern"===o?this._fillPattern(t):n&&"linear-gradient"===o?this._fillLinearGradient(t):s&&"radial-gradient"===o?this._fillRadialGradient(t):e?this._fillColor(t):i?this._fillPattern(t):n?this._fillLinearGradient(t):s&&this._fillRadialGradient(t)},_stroke:function(t){var e=t.dash(),i=t.getStrokeScaleEnabled();t.hasStroke()&&(i||(this.save(),this.setTransform(1,0,0,1,0,0)),this._applyLineCap(t),e&&t.dashEnabled()&&this.setLineDash(e),this.setAttr("lineWidth",t.strokeWidth()),this.setAttr("strokeStyle",t.stroke()||Kinetic.Util._getRGBAString({red:t.strokeRed(),green:t.strokeGreen(),blue:t.strokeBlue(),alpha:t.strokeAlpha()})),t._strokeFunc(this),i||this.restore())},_applyShadow:function(t){var e=Kinetic.Util,i=t.getAbsoluteOpacity(),n=e.get(t.getShadowColor(),"black"),s=e.get(t.getShadowBlur(),5),o=e.get(t.getShadowOpacity(),1),r=e.get(t.getShadowOffset(),{x:0,y:0});o&&this.setAttr("globalAlpha",o*i),this.setAttr("shadowColor",n),this.setAttr("shadowBlur",s),this.setAttr("shadowOffsetX",r.x),this.setAttr("shadowOffsetY",r.y)}},Kinetic.Util.extend(Kinetic.SceneContext,Kinetic.Context),Kinetic.HitContext=function(t){Kinetic.Context.call(this,t)},Kinetic.HitContext.prototype={_fill:function(t){this.save(),this.setAttr("fillStyle",t.colorKey),t._fillFuncHit(this),this.restore()},_stroke:function(t){t.hasStroke()&&(this._applyLineCap(t),this.setAttr("lineWidth",t.strokeWidth()),this.setAttr("strokeStyle",t.colorKey),t._strokeFuncHit(this))}},Kinetic.Util.extend(Kinetic.HitContext,Kinetic.Context)}(),function(){var t="get",e="set";Kinetic.Factory={addGetterSetter:function(t,e,i,n,s){this.addGetter(t,e,i),this.addSetter(t,e,n,s),this.addOverloadedGetterSetter(t,e)},addGetter:function(e,i,n){var s=t+Kinetic.Util._capitalize(i);e.prototype[s]=function(){var t=this.attrs[i];return void 0===t?n:t}},addSetter:function(t,i,n,s){var o=e+Kinetic.Util._capitalize(i);t.prototype[o]=function(t){return n&&(t=n.call(this,t)),this._setAttr(i,t),s&&s.call(this),this}},addComponentsGetterSetter:function(i,n,s,o,r){var a,h,c=s.length,l=Kinetic.Util._capitalize,d=t+l(n),u=e+l(n);i.prototype[d]=function(){var t={};for(a=0;c>a;a++)h=s[a],t[h]=this.getAttr(n+l(h));return t},i.prototype[u]=function(t){var e,i=this.attrs[n];o&&(t=o.call(this,t));for(e in t)this._setAttr(n+l(e),t[e]);return this._fireChangeEvent(n,i,t),r&&r.call(this),this},this.addOverloadedGetterSetter(i,n)},addOverloadedGetterSetter:function(i,n){var s=Kinetic.Util._capitalize(n),o=e+s,r=t+s;i.prototype[n]=function(){return arguments.length?(this[o](arguments[0]),this):this[r]()}},backCompat:function(t,e){var i;for(i in e)t.prototype[i]=t.prototype[e[i]]},afterSetFilter:function(){this._filterUpToDate=!1}},Kinetic.Validators={RGBComponent:function(t){return t>255?255:0>t?0:Math.round(t)},alphaComponent:function(t){return t>1?1:1e-4>t?1e-4:t}}}(),function(){var t="absoluteOpacity",e="absoluteTransform",i="Change",n="children",s=".",o="",r="get",a="id",h="kinetic",c="listening",l="mouseenter",d="mouseleave",u="name",p="set",f="Shape",g=" ",m="stage",v="transform",y="Stage",b="visible",x=["id"],w=["xChange.kinetic","yChange.kinetic","scaleXChange.kinetic","scaleYChange.kinetic","skewXChange.kinetic","skewYChange.kinetic","rotationChange.kinetic","offsetXChange.kinetic","offsetYChange.kinetic","transformsEnabledChange.kinetic"].join(g);Kinetic.Util.addMethods(Kinetic.Node,{_init:function(i){var n=this;this._id=Kinetic.idCounter++,this.eventListeners={},this.attrs={},this._cache={},this._filterUpToDate=!1,this.setAttrs(i),this.on(w,function(){this._clearCache(v),n._clearSelfAndDescendantCache(e)}),this.on("visibleChange.kinetic",function(){n._clearSelfAndDescendantCache(b)}),this.on("listeningChange.kinetic",function(){n._clearSelfAndDescendantCache(c)}),this.on("opacityChange.kinetic",function(){n._clearSelfAndDescendantCache(t)})},_clearCache:function(t){t?delete this._cache[t]:this._cache={}},_getCache:function(t,e){var i=this._cache[t];return void 0===i&&(this._cache[t]=e.call(this)),this._cache[t]},_clearSelfAndDescendantCache:function(t){this._clearCache(t),this.children&&this.getChildren().each(function(e){e._clearSelfAndDescendantCache(t)})},clearCache:function(){return delete this._cache.canvas,this._filterUpToDate=!1,this},cache:function(t){var e=t||{},i=e.x||0,n=e.y||0,s=e.width||this.width(),o=e.height||this.height(),r=e.drawBorder||!1;if(this.getLayer(),0===s||0===o)return void Kinetic.Util.warn("Width or height of caching configuration equals 0. Cache is ignored.");var a=new Kinetic.SceneCanvas({pixelRatio:1,width:s,height:o}),h=new Kinetic.SceneCanvas({pixelRatio:1,width:s,height:o}),c=new Kinetic.HitCanvas({width:s,height:o}),l=(this.transformsEnabled(),this.x(),this.y(),a.getContext()),d=c.getContext();return this.clearCache(),l.save(),d.save(),r&&(l.save(),l.beginPath(),l.rect(0,0,s,o),l.closePath(),l.setAttr("strokeStyle","red"),l.setAttr("lineWidth",5),l.stroke(),l.restore()),l.translate(-1*i,-1*n),d.translate(-1*i,-1*n),"Shape"===this.nodeType&&(l.translate(-1*this.x(),-1*this.y()),d.translate(-1*this.x(),-1*this.y())),this.drawScene(a,this),this.drawHit(c,this),l.restore(),d.restore(),this._cache.canvas={scene:a,filter:h,hit:c},this},_drawCachedSceneCanvas:function(t){t.save(),this.getLayer()._applyTransform(this,t),t.drawImage(this._getCachedSceneCanvas()._canvas,0,0),t.restore()},_getCachedSceneCanvas:function(){var t,e,i,n,s=this.filters(),o=this._cache.canvas,r=o.scene,a=o.filter,h=a.getContext();if(s){if(!this._filterUpToDate){try{for(t=s.length,h.clear(),h.drawImage(r._canvas,0,0),e=h.getImageData(0,0,a.getWidth(),a.getHeight()),i=0;t>i;i++)n=s[i],n.call(this,e),h.putImageData(e,0,0)}catch(c){Kinetic.Util.warn("Unable to apply filter. "+c.message)}this._filterUpToDate=!0}return a}return r},_drawCachedHitCanvas:function(t){var e=this._cache.canvas,i=e.hit;t.save(),this.getLayer()._applyTransform(this,t),t.drawImage(i._canvas,0,0),t.restore()},on:function(t,e){var i,n,r,a,h,c=t.split(g),l=c.length;for(i=0;l>i;i++)n=c[i],r=n.split(s),a=r[0],h=r[1]||o,this.eventListeners[a]||(this.eventListeners[a]=[]),this.eventListeners[a].push({name:h,handler:e});return this},off:function(t){var e,i,n,o,r,a,h=t.split(g),c=h.length;for(e=0;c>e;e++)if(n=h[e],o=n.split(s),r=o[0],a=o[1],r)this.eventListeners[r]&&this._off(r,a);else for(i in this.eventListeners)this._off(i,a);return this},dispatchEvent:function(t){var e={target:this,type:t.type,evt:t};this.fire(t.type,e)},addEventListener:function(t,e){this.on(t,function(t){e.call(this,t.evt)})},remove:function(){var i=this.getParent();return i&&i.children&&(i.children.splice(this.index,1),i._setChildrenIndices(),delete this.parent),this._clearSelfAndDescendantCache(m),this._clearSelfAndDescendantCache(e),this._clearSelfAndDescendantCache(b),this._clearSelfAndDescendantCache(c),this._clearSelfAndDescendantCache(t),this},destroy:function(){Kinetic._removeId(this.getId()),Kinetic._removeName(this.getName(),this._id),this.remove()},getAttr:function(t){var e=r+Kinetic.Util._capitalize(t);return Kinetic.Util._isFunction(this[e])?this[e]():this.attrs[t]},getAncestors:function(){for(var t=this.getParent(),e=new Kinetic.Collection;t;)e.push(t),t=t.getParent();return e},getAttrs:function(){return this.attrs||{}},setAttrs:function(t){var e,i;if(t)for(e in t)e===n||(i=p+Kinetic.Util._capitalize(e),Kinetic.Util._isFunction(this[i])?this[i](t[e]):this._setAttr(e,t[e]));return this},isListening:function(){return this._getCache(c,this._isListening)},_isListening:function(){var t=this.getListening(),e=this.getParent();return"inherit"===t?e?e.isListening():!0:t},isVisible:function(){return this._getCache(b,this._isVisible)},_isVisible:function(){var t=this.getVisible(),e=this.getParent();return"inherit"===t?e?e.isVisible():!0:t},shouldDrawHit:function(){var t=this.getLayer();return t&&t.hitGraphEnabled()&&this.isListening()&&this.isVisible()&&!Kinetic.isDragging()},show:function(){return this.setVisible(!0),this},hide:function(){return this.setVisible(!1),this},getZIndex:function(){return this.index||0},getAbsoluteZIndex:function(){function t(h){for(e=[],i=h.length,n=0;i>n;n++)s=h[n],a++,s.nodeType!==f&&(e=e.concat(s.getChildren().toArray())),s._id===r._id&&(n=i);e.length>0&&e[0].getDepth()<=o&&t(e)}var e,i,n,s,o=this.getDepth(),r=this,a=0;return r.nodeType!==y&&t(r.getStage().getChildren()),a},getDepth:function(){for(var t=0,e=this.parent;e;)t++,e=e.parent;return t},setPosition:function(t){return this.setX(t.x),this.setY(t.y),this},getPosition:function(){return{x:this.getX(),y:this.getY()}},getAbsolutePosition:function(){var t=this.getAbsoluteTransform().getMatrix(),e=new Kinetic.Transform,i=this.offset();return e.m=t.slice(),e.translate(i.x,i.y),e.getTranslation()},setAbsolutePosition:function(t){var e,i=this._clearTransform();return this.attrs.x=i.x,this.attrs.y=i.y,delete i.x,delete i.y,e=this.getAbsoluteTransform(),e.invert(),e.translate(t.x,t.y),t={x:this.attrs.x+e.getTranslation().x,y:this.attrs.y+e.getTranslation().y},this.setPosition({x:t.x,y:t.y}),this._setTransform(i),this},_setTransform:function(t){var i;for(i in t)this.attrs[i]=t[i];this._clearCache(v),this._clearSelfAndDescendantCache(e)},_clearTransform:function(){var t={x:this.getX(),y:this.getY(),rotation:this.getRotation(),scaleX:this.getScaleX(),scaleY:this.getScaleY(),offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),skewX:this.getSkewX(),skewY:this.getSkewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,this._clearCache(v),this._clearSelfAndDescendantCache(e),t},move:function(t){var e=t.x,i=t.y,n=this.getX(),s=this.getY();return void 0!==e&&(n+=e),void 0!==i&&(s+=i),this.setPosition({x:n,y:s}),this},_eachAncestorReverse:function(t,e){var i,n,s=[],o=this.getParent();if(e&&e._id===this._id)return t(this),!0;for(s.unshift(this);o&&(!e||o._id!==e._id);)s.unshift(o),o=o.parent;for(i=s.length,n=0;i>n;n++)t(s[n])},rotate:function(t){return this.setRotation(this.getRotation()+t),this},moveToTop:function(){if(!this.parent)return void Kinetic.Util.warn("Node has no parent. moveToTop function is ignored.");var t=this.index;return this.parent.children.splice(t,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0},moveUp:function(){if(!this.parent)return void Kinetic.Util.warn("Node has no parent. moveUp function is ignored.");var t=this.index,e=this.parent.getChildren().length;return e-1>t?(this.parent.children.splice(t,1),this.parent.children.splice(t+1,0,this),this.parent._setChildrenIndices(),!0):!1},moveDown:function(){if(!this.parent)return void Kinetic.Util.warn("Node has no parent. moveDown function is ignored.");var t=this.index;return t>0?(this.parent.children.splice(t,1),this.parent.children.splice(t-1,0,this),this.parent._setChildrenIndices(),!0):!1},moveToBottom:function(){if(!this.parent)return void Kinetic.Util.warn("Node has no parent. moveToBottom function is ignored.");var t=this.index;return t>0?(this.parent.children.splice(t,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1},setZIndex:function(t){if(!this.parent)return void Kinetic.Util.warn("Node has no parent. zIndex parameter is ignored.");var e=this.index;return this.parent.children.splice(e,1),this.parent.children.splice(t,0,this),this.parent._setChildrenIndices(),this},getAbsoluteOpacity:function(){return this._getCache(t,this._getAbsoluteOpacity)},_getAbsoluteOpacity:function(){var t=this.getOpacity();return this.getParent()&&(t*=this.getParent().getAbsoluteOpacity()),t},moveTo:function(t){return Kinetic.Node.prototype.remove.call(this),t.add(this),this},toObject:function(){var t,e,i,n,s=Kinetic.Util,o={},r=this.getAttrs();o.attrs={};for(t in r)e=r[t],s._isFunction(e)||s._isElement(e)||s._isObject(e)&&s._hasMethods(e)||(i=this[t],delete r[t],n=i?i.call(this):null,r[t]=e,n!==e&&(o.attrs[t]=e));return o.className=this.getClassName(),o},toJSON:function(){return JSON.stringify(this.toObject())},getParent:function(){return this.parent},getLayer:function(){var t=this.getParent();return t?t.getLayer():null},getStage:function(){return this._getCache(m,this._getStage)},_getStage:function(){var t=this.getParent();return t?t.getStage():void 0},fire:function(t,e,i){return i?this._fireAndBubble(t,e||{}):this._fire(t,e||{}),this},getAbsoluteTransform:function(t){return t?this._getAbsoluteTransform(t):this._getCache(e,this._getAbsoluteTransform)},_getAbsoluteTransform:function(t){var e,i,n=new Kinetic.Transform;return this._eachAncestorReverse(function(t){e=t.transformsEnabled(),i=t.getTransform(),"all"===e?n.multiply(i):"position"===e&&n.translate(t.x(),t.y())},t),n},getTransform:function(){return this._getCache(v,this._getTransform)},_getTransform:function(){var t=new Kinetic.Transform,e=this.getX(),i=this.getY(),n=Kinetic.getAngle(this.getRotation()),s=this.getScaleX(),o=this.getScaleY(),r=this.getSkewX(),a=this.getSkewY(),h=this.getOffsetX(),c=this.getOffsetY();return(0!==e||0!==i)&&t.translate(e,i),0!==n&&t.rotate(n),(0!==r||0!==a)&&t.skew(r,a),(1!==s||1!==o)&&t.scale(s,o),(0!==h||0!==c)&&t.translate(-1*h,-1*c),t},clone:function(t){var e,i,n,s,o,r=this.getClassName(),a=Kinetic.Util.cloneObject(this.attrs);for(var c in x){var l=x[c];delete a[l]}for(e in t)a[e]=t[e];var d=new Kinetic[r](a);for(e in this.eventListeners)for(i=this.eventListeners[e],n=i.length,s=0;n>s;s++)o=i[s],o.name.indexOf(h)<0&&(d.eventListeners[e]||(d.eventListeners[e]=[]),d.eventListeners[e].push(o));return d},toDataURL:function(t){t=t||{};var e=t.mimeType||null,i=t.quality||null,n=this.getStage(),s=t.x||0,o=t.y||0,r=new Kinetic.SceneCanvas({width:t.width||this.getWidth()||(n?n.getWidth():0),height:t.height||this.getHeight()||(n?n.getHeight():0),pixelRatio:1}),a=r.getContext();return a.save(),(s||o)&&a.translate(-1*s,-1*o),this.drawScene(r),a.restore(),r.toDataURL(e,i)},toImage:function(t){Kinetic.Util._getImage(this.toDataURL(t),function(e){t.callback(e)})},setSize:function(t){return this.setWidth(t.width),this.setHeight(t.height),this},getSize:function(){return{width:this.getWidth(),height:this.getHeight()}},getWidth:function(){return this.attrs.width||0},getHeight:function(){return this.attrs.height||0},getClassName:function(){return this.className||this.nodeType},getType:function(){return this.nodeType},getDragDistance:function(){return void 0!==this.attrs.dragDistance?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():Kinetic.dragDistance},_get:function(t){return this.nodeType===t?[this]:[]},_off:function(t,e){var i,n,s=this.eventListeners[t];for(i=0;i<s.length;i++)if(n=s[i].name,!("kinetic"===n&&"kinetic"!==e||e&&n!==e)){if(s.splice(i,1),0===s.length){delete this.eventListeners[t];break}i--}},_fireChangeEvent:function(t,e,n){this._fire(t+i,{oldVal:e,newVal:n})},setId:function(t){var e=this.getId();return Kinetic._removeId(e),Kinetic._addId(this,t),this._setAttr(a,t),this},setName:function(t){var e=this.getName();return Kinetic._removeName(e,this._id),Kinetic._addName(this,t),this._setAttr(u,t),this},setAttr:function(){var t=Array.prototype.slice.call(arguments),e=t[0],i=t[1],n=p+Kinetic.Util._capitalize(e),s=this[n];return Kinetic.Util._isFunction(s)?s.call(this,i):this._setAttr(e,i),this},_setAttr:function(t,e){var i;void 0!==e&&(i=this.attrs[t],this.attrs[t]=e,this._fireChangeEvent(t,i,e))},_setComponentAttr:function(t,e,i){var n;void 0!==i&&(n=this.attrs[t],n||(this.attrs[t]=this.getAttr(t)),this.attrs[t][e]=i,this._fireChangeEvent(t,n,i))},_fireAndBubble:function(t,e,i){var n=!0;e&&this.nodeType===f&&(e.target=this),t===l&&i&&this._id===i._id?n=!1:t===d&&i&&this._id===i._id&&(n=!1),n&&(this._fire(t,e),e&&!e.cancelBubble&&this.parent&&(i&&i.parent?this._fireAndBubble.call(this.parent,t,e,i.parent):this._fireAndBubble.call(this.parent,t,e)))},_fire:function(t,e){var i,n=this.eventListeners[t];if(e.type=t,n)for(i=0;i<n.length;i++)n[i].handler.call(this,e)},draw:function(){return this.drawScene(),this.drawHit(),this}}),Kinetic.Node.create=function(t,e){return this._createNode(JSON.parse(t),e)},Kinetic.Node._createNode=function(t,e){var i,n,s,o=Kinetic.Node.prototype.getClassName.call(t),r=t.children;if(e&&(t.attrs.container=e),i=new Kinetic[o](t.attrs),r)for(n=r.length,s=0;n>s;s++)i.add(this._createNode(r[s]));return i},Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Node,"position"),Kinetic.Factory.addGetterSetter(Kinetic.Node,"x",0),Kinetic.Factory.addGetterSetter(Kinetic.Node,"y",0),Kinetic.Factory.addGetterSetter(Kinetic.Node,"opacity",1),Kinetic.Factory.addGetter(Kinetic.Node,"name"),Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Node,"name"),Kinetic.Factory.addGetter(Kinetic.Node,"id"),Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Node,"id"),Kinetic.Factory.addGetterSetter(Kinetic.Node,"rotation",0),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Node,"scale",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Node,"scaleX",1),Kinetic.Factory.addGetterSetter(Kinetic.Node,"scaleY",1),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Node,"skew",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Node,"skewX",0),Kinetic.Factory.addGetterSetter(Kinetic.Node,"skewY",0),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Node,"offset",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Node,"offsetX",0),Kinetic.Factory.addGetterSetter(Kinetic.Node,"offsetY",0),Kinetic.Factory.addSetter(Kinetic.Node,"dragDistance"),Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Node,"dragDistance"),Kinetic.Factory.addSetter(Kinetic.Node,"width",0),Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Node,"width"),Kinetic.Factory.addSetter(Kinetic.Node,"height",0),Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Node,"height"),Kinetic.Factory.addGetterSetter(Kinetic.Node,"listening","inherit"),Kinetic.Factory.addGetterSetter(Kinetic.Node,"filters",void 0,function(t){return this._filterUpToDate=!1,t}),Kinetic.Factory.addGetterSetter(Kinetic.Node,"visible","inherit"),Kinetic.Factory.addGetterSetter(Kinetic.Node,"transformsEnabled","all"),Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Node,"size"),Kinetic.Factory.backCompat(Kinetic.Node,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"}),Kinetic.Collection.mapMethods(Kinetic.Node)}(),function(){Kinetic.Filters.Grayscale=function(t){var e,i,n=t.data,s=n.length;for(e=0;s>e;e+=4)i=.34*n[e]+.5*n[e+1]+.16*n[e+2],n[e]=i,n[e+1]=i,n[e+2]=i}}(),function(){Kinetic.Filters.Brighten=function(t){var e,i=255*this.brightness(),n=t.data,s=n.length;for(e=0;s>e;e+=4)n[e]+=i,n[e+1]+=i,n[e+2]+=i},Kinetic.Factory.addGetterSetter(Kinetic.Node,"brightness",0,null,Kinetic.Factory.afterSetFilter)}(),function(){Kinetic.Filters.Invert=function(t){var e,i=t.data,n=i.length;for(e=0;n>e;e+=4)i[e]=255-i[e],i[e+1]=255-i[e+1],i[e+2]=255-i[e+2]}}(),function(){function t(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}function e(e,s){var o,r,a,h,c,l,d,u,p,f,g,m,v,y,b,x,w,_,S,C,T,D,M,E,k=e.data,L=e.width,N=e.height,A=s+s+1,O=L-1,P=N-1,I=s+1,F=I*(I+1)/2,K=new t,z=null,R=K,H=null,G=null,B=i[s],W=n[s];for(a=1;A>a;a++)R=R.next=new t,a==I&&(z=R);for(R.next=K,d=l=0,r=0;N>r;r++){for(x=w=_=S=u=p=f=g=0,m=I*(C=k[l]),v=I*(T=k[l+1]),y=I*(D=k[l+2]),b=I*(M=k[l+3]),u+=F*C,p+=F*T,f+=F*D,g+=F*M,R=K,a=0;I>a;a++)R.r=C,R.g=T,R.b=D,R.a=M,R=R.next;for(a=1;I>a;a++)h=l+((a>O?O:a)<<2),u+=(R.r=C=k[h])*(E=I-a),p+=(R.g=T=k[h+1])*E,f+=(R.b=D=k[h+2])*E,g+=(R.a=M=k[h+3])*E,x+=C,w+=T,_+=D,S+=M,R=R.next;for(H=K,G=z,o=0;L>o;o++)k[l+3]=M=g*B>>W,0!==M?(M=255/M,k[l]=(u*B>>W)*M,k[l+1]=(p*B>>W)*M,k[l+2]=(f*B>>W)*M):k[l]=k[l+1]=k[l+2]=0,u-=m,p-=v,f-=y,g-=b,m-=H.r,v-=H.g,y-=H.b,b-=H.a,h=d+((h=o+s+1)<O?h:O)<<2,x+=H.r=k[h],w+=H.g=k[h+1],_+=H.b=k[h+2],S+=H.a=k[h+3],u+=x,p+=w,f+=_,g+=S,H=H.next,m+=C=G.r,v+=T=G.g,y+=D=G.b,b+=M=G.a,x-=C,w-=T,_-=D,S-=M,G=G.next,l+=4;d+=L}for(o=0;L>o;o++){for(w=_=S=x=p=f=g=u=0,l=o<<2,m=I*(C=k[l]),v=I*(T=k[l+1]),y=I*(D=k[l+2]),b=I*(M=k[l+3]),u+=F*C,p+=F*T,f+=F*D,g+=F*M,R=K,a=0;I>a;a++)R.r=C,R.g=T,R.b=D,R.a=M,R=R.next;for(c=L,a=1;s>=a;a++)l=c+o<<2,u+=(R.r=C=k[l])*(E=I-a),p+=(R.g=T=k[l+1])*E,f+=(R.b=D=k[l+2])*E,g+=(R.a=M=k[l+3])*E,x+=C,w+=T,_+=D,S+=M,R=R.next,P>a&&(c+=L);for(l=o,H=K,G=z,r=0;N>r;r++)h=l<<2,k[h+3]=M=g*B>>W,M>0?(M=255/M,k[h]=(u*B>>W)*M,k[h+1]=(p*B>>W)*M,k[h+2]=(f*B>>W)*M):k[h]=k[h+1]=k[h+2]=0,u-=m,p-=v,f-=y,g-=b,m-=H.r,v-=H.g,y-=H.b,b-=H.a,h=o+((h=r+I)<P?h:P)*L<<2,u+=x+=H.r=k[h],p+=w+=H.g=k[h+1],f+=_+=H.b=k[h+2],g+=S+=H.a=k[h+3],H=H.next,m+=C=G.r,v+=T=G.g,y+=D=G.b,b+=M=G.a,x-=C,w-=T,_-=D,S-=M,G=G.next,l+=L}}var i=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],n=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];Kinetic.Filters.Blur=function(t){var i=Math.round(this.blurRadius());i>0&&e(t,i)},Kinetic.Factory.addGetterSetter(Kinetic.Node,"blurRadius",0,null,Kinetic.Factory.afterSetFilter)}(),function(){function t(t,e,i){var n=4*(i*t.width+e),s=[];return s.push(t.data[n++],t.data[n++],t.data[n++],t.data[n++]),s}function e(t,e){return Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2)+Math.pow(t[2]-e[2],2))}function i(t){for(var e=[0,0,0],i=0;i<t.length;i++)e[0]+=t[i][0],e[1]+=t[i][1],e[2]+=t[i][2];return e[0]/=t.length,e[1]/=t.length,e[2]/=t.length,e}function n(n,s){var o=t(n,0,0),r=t(n,n.width-1,0),a=t(n,0,n.height-1),h=t(n,n.width-1,n.height-1),c=s||10;if(e(o,r)<c&&e(r,h)<c&&e(h,a)<c&&e(a,o)<c){for(var l=i([r,o,h,a]),d=[],u=0;u<n.width*n.height;u++){var p=e(l,[n.data[4*u],n.data[4*u+1],n.data[4*u+2]]);d[u]=c>p?0:255}return d}}function s(t,e){for(var i=0;i<t.width*t.height;i++)t.data[4*i+3]=e[i]}function o(t,e,i){for(var n=[1,1,1,1,0,1,1,1,1],s=Math.round(Math.sqrt(n.length)),o=Math.floor(s/2),r=[],a=0;i>a;a++)for(var h=0;e>h;h++){for(var c=a*e+h,l=0,d=0;s>d;d++)for(var u=0;s>u;u++){var p=a+d-o,f=h+u-o;if(p>=0&&i>p&&f>=0&&e>f){var g=p*e+f,m=n[d*s+u];l+=t[g]*m}}r[c]=2040===l?255:0}return r}function r(t,e,i){for(var n=[1,1,1,1,1,1,1,1,1],s=Math.round(Math.sqrt(n.length)),o=Math.floor(s/2),r=[],a=0;i>a;a++)for(var h=0;e>h;h++){for(var c=a*e+h,l=0,d=0;s>d;d++)for(var u=0;s>u;u++){var p=a+d-o,f=h+u-o;if(p>=0&&i>p&&f>=0&&e>f){var g=p*e+f,m=n[d*s+u];l+=t[g]*m}}r[c]=l>=1020?255:0}return r}function a(t,e,i){for(var n=[1/9,1/9,1/9,1/9,1/9,1/9,1/9,1/9,1/9],s=Math.round(Math.sqrt(n.length)),o=Math.floor(s/2),r=[],a=0;i>a;a++)for(var h=0;e>h;h++){for(var c=a*e+h,l=0,d=0;s>d;d++)for(var u=0;s>u;u++){var p=a+d-o,f=h+u-o;if(p>=0&&i>p&&f>=0&&e>f){var g=p*e+f,m=n[d*s+u];l+=t[g]*m}}r[c]=l}return r}Kinetic.Filters.Mask=function(t){var e=this.threshold(),i=n(t,e);return i&&(i=o(i,t.width,t.height),i=r(i,t.width,t.height),i=a(i,t.width,t.height),s(t,i)),t},Kinetic.Factory.addGetterSetter(Kinetic.Node,"threshold",0,null,Kinetic.Factory.afterSetFilter)}(),function(){Kinetic.Filters.RGB=function(t){var e,i,n=t.data,s=n.length,o=this.red(),r=this.green(),a=this.blue();for(e=0;s>e;e+=4)i=(.34*n[e]+.5*n[e+1]+.16*n[e+2])/255,n[e]=i*o,n[e+1]=i*r,n[e+2]=i*a,n[e+3]=n[e+3]},Kinetic.Factory.addGetterSetter(Kinetic.Node,"red",0,function(t){return this._filterUpToDate=!1,t>255?255:0>t?0:Math.round(t)}),Kinetic.Factory.addGetterSetter(Kinetic.Node,"green",0,function(t){return this._filterUpToDate=!1,t>255?255:0>t?0:Math.round(t)}),Kinetic.Factory.addGetterSetter(Kinetic.Node,"blue",0,Kinetic.Validators.RGBComponent,Kinetic.Factory.afterSetFilter)}(),function(){Kinetic.Filters.HSV=function(t){var e,i,n,s,o,r=t.data,a=r.length,h=Math.pow(2,this.value()),c=Math.pow(2,this.saturation()),l=Math.abs(this.hue()+360)%360,d=h*c*Math.cos(l*Math.PI/180),u=h*c*Math.sin(l*Math.PI/180),p=.299*h+.701*d+.167*u,f=.587*h-.587*d+.33*u,g=.114*h-.114*d-.497*u,m=.299*h-.299*d-.328*u,v=.587*h+.413*d+.035*u,y=.114*h-.114*d+.293*u,b=.299*h-.3*d+1.25*u,x=.587*h-.586*d-1.05*u,w=.114*h+.886*d-.2*u;for(e=0;a>e;e+=4)i=r[e+0],n=r[e+1],s=r[e+2],o=r[e+3],r[e+0]=p*i+f*n+g*s,r[e+1]=m*i+v*n+y*s,r[e+2]=b*i+x*n+w*s,r[e+3]=o},Kinetic.Factory.addGetterSetter(Kinetic.Node,"hue",0,null,Kinetic.Factory.afterSetFilter),Kinetic.Factory.addGetterSetter(Kinetic.Node,"saturation",0,null,Kinetic.Factory.afterSetFilter),Kinetic.Factory.addGetterSetter(Kinetic.Node,"value",0,null,Kinetic.Factory.afterSetFilter)}(),function(){Kinetic.Factory.addGetterSetter(Kinetic.Node,"hue",0,null,Kinetic.Factory.afterSetFilter),Kinetic.Factory.addGetterSetter(Kinetic.Node,"saturation",0,null,Kinetic.Factory.afterSetFilter),Kinetic.Factory.addGetterSetter(Kinetic.Node,"luminance",0,null,Kinetic.Factory.afterSetFilter),Kinetic.Filters.HSL=function(t){var e,i,n,s,o,r=t.data,a=r.length,h=1,c=Math.pow(2,this.saturation()),l=Math.abs(this.hue()+360)%360,d=127*this.luminance(),u=h*c*Math.cos(l*Math.PI/180),p=h*c*Math.sin(l*Math.PI/180),f=.299*h+.701*u+.167*p,g=.587*h-.587*u+.33*p,m=.114*h-.114*u-.497*p,v=.299*h-.299*u-.328*p,y=.587*h+.413*u+.035*p,b=.114*h-.114*u+.293*p,x=.299*h-.3*u+1.25*p,w=.587*h-.586*u-1.05*p,_=.114*h+.886*u-.2*p;for(e=0;a>e;e+=4)i=r[e+0],n=r[e+1],s=r[e+2],o=r[e+3],r[e+0]=f*i+g*n+m*s+d,r[e+1]=v*i+y*n+b*s+d,r[e+2]=x*i+w*n+_*s+d,r[e+3]=o}}(),function(){Kinetic.Filters.Emboss=function(t){var e=10*this.embossStrength(),i=255*this.embossWhiteLevel(),n=this.embossDirection(),s=this.embossBlend(),o=0,r=0,a=t.data,h=t.width,c=t.height,l=4*h,d=c;switch(n){case"top-left":o=-1,r=-1;break;case"top":o=-1,r=0;break;case"top-right":o=-1,r=1;break;case"right":o=0,r=1;break;case"bottom-right":o=1,r=1;break;case"bottom":o=1,r=0;break;case"bottom-left":o=1,r=-1;break;case"left":o=0,r=-1}do{var u=(d-1)*l,p=o;1>d+p&&(p=0),d+p>c&&(p=0);var f=(d-1+p)*h*4,g=h;do{var m=u+4*(g-1),v=r;1>g+v&&(v=0),g+v>h&&(v=0);var y=f+4*(g-1+v),b=a[m]-a[y],x=a[m+1]-a[y+1],w=a[m+2]-a[y+2],_=b,S=_>0?_:-_,C=x>0?x:-x,T=w>0?w:-w;if(C>S&&(_=x),T>S&&(_=w),_*=e,s){var D=a[m]+_,M=a[m+1]+_,E=a[m+2]+_;a[m]=D>255?255:0>D?0:D,a[m+1]=M>255?255:0>M?0:M,a[m+2]=E>255?255:0>E?0:E
}else{var k=i-_;0>k?k=0:k>255&&(k=255),a[m]=a[m+1]=a[m+2]=k}}while(--g)}while(--d)},Kinetic.Factory.addGetterSetter(Kinetic.Node,"embossStrength",.5,null,Kinetic.Factory.afterSetFilter),Kinetic.Factory.addGetterSetter(Kinetic.Node,"embossWhiteLevel",.5,null,Kinetic.Factory.afterSetFilter),Kinetic.Factory.addGetterSetter(Kinetic.Node,"embossDirection","top-left",null,Kinetic.Factory.afterSetFilter),Kinetic.Factory.addGetterSetter(Kinetic.Node,"embossBlend",!1,null,Kinetic.Factory.afterSetFilter)}(),function(){function t(t,e,i,n,s){var o,r=i-e,a=s-n;return 0===r?n+a/2:0===a?n:(o=(t-e)/r,o=a*o+n)}Kinetic.Filters.Enhance=function(e){var i,n,s,o,r=e.data,a=r.length,h=r[0],c=h,l=r[1],d=l,u=r[2],p=u,f=r[3],g=f,m=this.enhance();if(0!==m){for(o=0;a>o;o+=4)i=r[o+0],h>i?h=i:i>c&&(c=i),n=r[o+1],l>n?l=n:n>d&&(d=n),s=r[o+2],u>s?u=s:s>p&&(p=s);c===h&&(c=255,h=0),d===l&&(d=255,l=0),p===u&&(p=255,u=0),g===f&&(g=255,f=0);var v,y,b,x,w,_,S,C,T,D,M,E;for(m>0?(y=c+m*(255-c),b=h-m*(h-0),w=d+m*(255-d),_=l-m*(l-0),C=p+m*(255-p),E=u-m*(u-0),M=g+m*(255-g),T=f-m*(f-0)):(v=.5*(c+h),y=c+m*(c-v),b=h+m*(h-v),x=.5*(d+l),w=d+m*(d-x),_=l+m*(l-x),S=.5*(p+u),C=p+m*(p-S),E=u+m*(u-S),D=.5*(g+f),M=g+m*(g-D),T=f+m*(f-D)),o=0;a>o;o+=4)r[o+0]=t(r[o+0],h,c,b,y),r[o+1]=t(r[o+1],l,d,_,w),r[o+2]=t(r[o+2],u,p,E,C)}},Kinetic.Factory.addGetterSetter(Kinetic.Node,"enhance",0,null,Kinetic.Factory.afterSetFilter)}(),function(){Kinetic.Filters.Posterize=function(t){var e,i=Math.round(254*this.levels())+1,n=t.data,s=n.length,o=255/i;for(e=0;s>e;e+=1)n[e]=Math.floor(n[e]/o)*o},Kinetic.Factory.addGetterSetter(Kinetic.Node,"levels",.5,null,Kinetic.Factory.afterSetFilter)}(),function(){Kinetic.Filters.Noise=function(t){var e,i=255*this.noise(),n=t.data,s=n.length,o=i/2;for(e=0;s>e;e+=4)n[e+0]+=o-2*o*Math.random(),n[e+1]+=o-2*o*Math.random(),n[e+2]+=o-2*o*Math.random()},Kinetic.Factory.addGetterSetter(Kinetic.Node,"noise",.2,null,Kinetic.Factory.afterSetFilter)}(),function(){Kinetic.Filters.Pixelate=function(t){var e,i,n,s,o,r,a,h,c,l,d,u,p,f,g=Math.ceil(this.pixelSize()),m=t.width,v=t.height,y=Math.ceil(m/g),b=Math.ceil(v/g);for(t=t.data,u=0;y>u;u+=1)for(p=0;b>p;p+=1){for(s=0,o=0,r=0,a=0,h=u*g,c=h+g,l=p*g,d=l+g,f=0,e=h;c>e;e+=1)if(!(e>=m))for(i=l;d>i;i+=1)i>=v||(n=4*(m*i+e),s+=t[n+0],o+=t[n+1],r+=t[n+2],a+=t[n+3],f+=1);for(s/=f,o/=f,r/=f,e=h;c>e;e+=1)if(!(e>=m))for(i=l;d>i;i+=1)i>=v||(n=4*(m*i+e),t[n+0]=s,t[n+1]=o,t[n+2]=r,t[n+3]=a)}},Kinetic.Factory.addGetterSetter(Kinetic.Node,"pixelSize",8,null,Kinetic.Factory.afterSetFilter)}(),function(){Kinetic.Filters.Threshold=function(t){var e,i=255*this.threshold(),n=t.data,s=n.length;for(e=0;s>e;e+=1)n[e]=n[e]<i?0:255},Kinetic.Factory.addGetterSetter(Kinetic.Node,"threshold",.5,null,Kinetic.Factory.afterSetFilter)}(),function(){Kinetic.Filters.Sepia=function(t){var e,i,n,s,o,r,a,h,c,l=t.data,d=t.width,u=t.height,p=4*d;do{e=(u-1)*p,i=d;do n=e+4*(i-1),s=l[n],o=l[n+1],r=l[n+2],a=.393*s+.769*o+.189*r,h=.349*s+.686*o+.168*r,c=.272*s+.534*o+.131*r,l[n]=a>255?255:a,l[n+1]=h>255?255:h,l[n+2]=c>255?255:c,l[n+3]=l[n+3];while(--i)}while(--u)}}(),function(){Kinetic.Filters.Solarize=function(t){var e=t.data,i=t.width,n=t.height,s=4*i,o=n;do{var r=(o-1)*s,a=i;do{var h=r+4*(a-1),c=e[h],l=e[h+1],d=e[h+2];c>127&&(c=255-c),l>127&&(l=255-l),d>127&&(d=255-d),e[h]=c,e[h+1]=l,e[h+2]=d}while(--a)}while(--o)}}(),function(){var t=function(t,e,i){var n,s,o,r,a=t.data,h=e.data,c=t.width,l=t.height,d=i.polarCenterX||c/2,u=i.polarCenterY||l/2,p=0,f=0,g=0,m=0,v=Math.sqrt(d*d+u*u);s=c-d,o=l-u,r=Math.sqrt(s*s+o*o),v=r>v?r:v;var y,b,x,w,_=l,S=c,C=360/S*Math.PI/180;for(b=0;S>b;b+=1)for(x=Math.sin(b*C),w=Math.cos(b*C),y=0;_>y;y+=1)s=Math.floor(d+v*y/_*w),o=Math.floor(u+v*y/_*x),n=4*(o*c+s),p=a[n+0],f=a[n+1],g=a[n+2],m=a[n+3],n=4*(b+y*c),h[n+0]=p,h[n+1]=f,h[n+2]=g,h[n+3]=m},e=function(t,e,i){var n,s,o,r,a,h,c=t.data,l=e.data,d=t.width,u=t.height,p=i.polarCenterX||d/2,f=i.polarCenterY||u/2,g=0,m=0,v=0,y=0,b=Math.sqrt(p*p+f*f);s=d-p,o=u-f,h=Math.sqrt(s*s+o*o),b=h>b?h:b;var x,w,_,S,C=u,T=d,D=i.polarRotation||0;for(s=0;d>s;s+=1)for(o=0;u>o;o+=1)r=s-p,a=o-f,x=Math.sqrt(r*r+a*a)*C/b,w=(180*Math.atan2(a,r)/Math.PI+360+D)%360,w=w*T/360,_=Math.floor(w),S=Math.floor(x),n=4*(S*d+_),g=c[n+0],m=c[n+1],v=c[n+2],y=c[n+3],n=4*(o*d+s),l[n+0]=g,l[n+1]=m,l[n+2]=v,l[n+3]=y},i=Kinetic.Util.createCanvasElement();Kinetic.Filters.Kaleidoscope=function(n){var s,o,r,a,h,c,l,d,u,p,f=n.width,g=n.height,m=Math.round(this.kaleidoscopePower()),v=Math.round(this.kaleidoscopeAngle()),y=Math.floor(f*(v%360)/360);if(!(1>m)){i.width=f,i.height=g;var b=i.getContext("2d").getImageData(0,0,f,g);t(n,b,{polarCenterX:f/2,polarCenterY:g/2});for(var x=f/Math.pow(2,m);8>=x;)x=2*x,m-=1;x=Math.ceil(x);var w=x,_=0,S=w,C=1;for(y+x>f&&(_=w,S=0,C=-1),o=0;g>o;o+=1)for(s=_;s!==S;s+=C)r=Math.round(s+y)%f,u=4*(f*o+r),h=b.data[u+0],c=b.data[u+1],l=b.data[u+2],d=b.data[u+3],p=4*(f*o+s),b.data[p+0]=h,b.data[p+1]=c,b.data[p+2]=l,b.data[p+3]=d;for(o=0;g>o;o+=1)for(w=Math.floor(x),a=0;m>a;a+=1){for(s=0;w+1>s;s+=1)u=4*(f*o+s),h=b.data[u+0],c=b.data[u+1],l=b.data[u+2],d=b.data[u+3],p=4*(f*o+2*w-s-1),b.data[p+0]=h,b.data[p+1]=c,b.data[p+2]=l,b.data[p+3]=d;w*=2}e(b,n,{polarRotation:0})}},Kinetic.Factory.addGetterSetter(Kinetic.Node,"kaleidoscopePower",2,null,Kinetic.Factory.afterSetFilter),Kinetic.Factory.addGetterSetter(Kinetic.Node,"kaleidoscopeAngle",0,null,Kinetic.Factory.afterSetFilter)}(),function(){function t(t){Kinetic.root.setTimeout(t,1e3/60)}function e(){return s.apply(Kinetic.root,arguments)}var i=500,n=function(){return Kinetic.root.performance&&Kinetic.root.performance.now?function(){return Kinetic.root.performance.now()}:function(){return(new Date).getTime()}}(),s=function(){return Kinetic.root.requestAnimationFrame||Kinetic.root.webkitRequestAnimationFrame||Kinetic.root.mozRequestAnimationFrame||Kinetic.root.oRequestAnimationFrame||Kinetic.root.msRequestAnimationFrame||t}();Kinetic.Animation=function(t,e){var i=Kinetic.Animation;this.func=t,this.setLayers(e),this.id=i.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:n()}},Kinetic.Animation.prototype={setLayers:function(t){var e=[];e=t?t.length>0?t:[t]:[],this.layers=e},getLayers:function(){return this.layers},addLayer:function(t){var e,i,n=this.layers;if(n){for(e=n.length,i=0;e>i;i++)if(n[i]._id===t._id)return!1}else this.layers=[];return this.layers.push(t),!0},isRunning:function(){var t,e=Kinetic.Animation,i=e.animations,n=i.length;for(t=0;n>t;t++)if(i[t].id===this.id)return!0;return!1},start:function(){var t=Kinetic.Animation;this.stop(),this.frame.timeDiff=0,this.frame.lastTime=n(),t._addAnimation(this)},stop:function(){Kinetic.Animation._removeAnimation(this)},_updateFrameObject:function(t){this.frame.timeDiff=t-this.frame.lastTime,this.frame.lastTime=t,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}},Kinetic.Animation.animations=[],Kinetic.Animation.animIdCounter=0,Kinetic.Animation.animRunning=!1,Kinetic.Animation._addAnimation=function(t){this.animations.push(t),this._handleAnimation()},Kinetic.Animation._removeAnimation=function(t){var e,i=t.id,n=this.animations,s=n.length;for(e=0;s>e;e++)if(n[e].id===i){this.animations.splice(e,1);break}},Kinetic.Animation._runFrames=function(){var t,e,i,s,o,r,a,h,c={},l=this.animations;for(s=0;s<l.length;s++){for(t=l[s],e=t.layers,i=t.func,t._updateFrameObject(n()),r=e.length,o=0;r>o;o++)a=e[o],void 0!==a._id&&(c[a._id]=a);i&&i.call(t,t.frame)}for(h in c)c[h].draw()},Kinetic.Animation._animationLoop=function(){var t=Kinetic.Animation;t.animations.length?(e(t._animationLoop),t._runFrames()):t.animRunning=!1},Kinetic.Animation._handleAnimation=function(){var t=this;this.animRunning||(this.animRunning=!0,t._animationLoop())};var o=Kinetic.Node.prototype.moveTo;Kinetic.Node.prototype.moveTo=function(t){o.call(this,t)},Kinetic.Layer.prototype.batchDraw=function(){var t=this,e=Kinetic.Animation;this.batchAnim||(this.batchAnim=new e(function(){t.lastBatchDrawTime&&n()-t.lastBatchDrawTime>i&&t.batchAnim.stop()},this)),this.lastBatchDrawTime=n(),this.batchAnim.isRunning()||(this.draw(),this.batchAnim.start())},Kinetic.Stage.prototype.batchDraw=function(){this.getChildren().each(function(t){t.batchDraw()})}}((1,eval)("this")),function(){var t={node:1,duration:1,easing:1,onFinish:1,yoyo:1},e=1,i=2,n=3,s=0;Kinetic.Tween=function(e){var i,n=this,r=e.node,a=r._id,h=e.duration||1,c=e.easing||Kinetic.Easings.Linear,l=!!e.yoyo;this.node=r,this._id=s++,this.anim=new Kinetic.Animation(function(){n.tween.onEnterFrame()},r.getLayer()),this.tween=new o(i,function(t){n._tweenFunc(t)},c,0,1,1e3*h,l),this._addListeners(),Kinetic.Tween.attrs[a]||(Kinetic.Tween.attrs[a]={}),Kinetic.Tween.attrs[a][this._id]||(Kinetic.Tween.attrs[a][this._id]={}),Kinetic.Tween.tweens[a]||(Kinetic.Tween.tweens[a]={});for(i in e)void 0===t[i]&&this._addAttr(i,e[i]);this.reset(),this.onFinish=e.onFinish,this.onReset=e.onReset},Kinetic.Tween.attrs={},Kinetic.Tween.tweens={},Kinetic.Tween.prototype={_addAttr:function(t,e){var i,n,s,o,r,a=this.node,h=a._id;if(s=Kinetic.Tween.tweens[h][t],s&&delete Kinetic.Tween.attrs[h][s][t],i=a.getAttr(t),Kinetic.Util._isArray(e))for(n=[],r=e.length,o=0;r>o;o++)n.push(e[o]-i[o]);else n=e-i;Kinetic.Tween.attrs[h][this._id][t]={start:i,diff:n},Kinetic.Tween.tweens[h][t]=this._id},_tweenFunc:function(t){var e,i,n,s,o,r,a,h=this.node,c=Kinetic.Tween.attrs[h._id][this._id];for(e in c){if(i=c[e],n=i.start,s=i.diff,Kinetic.Util._isArray(n))for(o=[],a=n.length,r=0;a>r;r++)o.push(n[r]+s[r]*t);else o=n+s*t;h.setAttr(e,o)}},_addListeners:function(){var t=this;this.tween.onPlay=function(){t.anim.start()},this.tween.onReverse=function(){t.anim.start()},this.tween.onPause=function(){t.anim.stop()},this.tween.onFinish=function(){t.onFinish&&t.onFinish()},this.tween.onReset=function(){t.onReset&&t.onReset()}},play:function(){return this.tween.play(),this},reverse:function(){return this.tween.reverse(),this},reset:function(){return this.node,this.tween.reset(),this},seek:function(t){return this.node,this.tween.seek(1e3*t),this},pause:function(){return this.tween.pause(),this},finish:function(){return this.node,this.tween.finish(),this},destroy:function(){var t,e=this.node._id,i=this._id,n=Kinetic.Tween.tweens[e];this.pause();for(t in n)delete Kinetic.Tween.tweens[e][t];delete Kinetic.Tween.attrs[e][i]}};var o=function(t,e,i,n,s,o,r){this.prop=t,this.propFunc=e,this.begin=n,this._pos=n,this.duration=o,this._change=0,this.prevPos=0,this.yoyo=r,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=i,this._change=s-this.begin,this.pause()};o.prototype={fire:function(t){var e=this[t];e&&e()},setTime:function(t){t>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():0>t?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=t,this.update())},getTime:function(){return this._time},setPosition:function(t){this.prevPos=this._pos,this.propFunc(t),this._pos=t},getPosition:function(t){return void 0===t&&(t=this._time),this.func(t,this.begin,this._change,this.duration)},play:function(){this.state=i,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")},reverse:function(){this.state=n,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")},seek:function(t){this.pause(),this._time=t,this.update(),this.fire("onSeek")},reset:function(){this.pause(),this._time=0,this.update(),this.fire("onReset")},finish:function(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")},update:function(){this.setPosition(this.getPosition(this._time))},onEnterFrame:function(){var t=this.getTimer()-this._startTime;this.state===i?this.setTime(t):this.state===n&&this.setTime(this.duration-t)},pause:function(){this.state=e,this.fire("onPause")},getTimer:function(){return(new Date).getTime()}},Kinetic.Easings={BackEaseIn:function(t,e,i,n){var s=1.70158;return i*(t/=n)*t*((s+1)*t-s)+e},BackEaseOut:function(t,e,i,n){var s=1.70158;return i*((t=t/n-1)*t*((s+1)*t+s)+1)+e},BackEaseInOut:function(t,e,i,n){var s=1.70158;return(t/=n/2)<1?i/2*t*t*(((s*=1.525)+1)*t-s)+e:i/2*((t-=2)*t*(((s*=1.525)+1)*t+s)+2)+e},ElasticEaseIn:function(t,e,i,n,s,o){var r=0;return 0===t?e:1==(t/=n)?e+i:(o||(o=.3*n),!s||s<Math.abs(i)?(s=i,r=o/4):r=o/(2*Math.PI)*Math.asin(i/s),-(s*Math.pow(2,10*(t-=1))*Math.sin(2*(t*n-r)*Math.PI/o))+e)},ElasticEaseOut:function(t,e,i,n,s,o){var r=0;return 0===t?e:1==(t/=n)?e+i:(o||(o=.3*n),!s||s<Math.abs(i)?(s=i,r=o/4):r=o/(2*Math.PI)*Math.asin(i/s),s*Math.pow(2,-10*t)*Math.sin(2*(t*n-r)*Math.PI/o)+i+e)},ElasticEaseInOut:function(t,e,i,n,s,o){var r=0;return 0===t?e:2==(t/=n/2)?e+i:(o||(o=.3*n*1.5),!s||s<Math.abs(i)?(s=i,r=o/4):r=o/(2*Math.PI)*Math.asin(i/s),1>t?-.5*s*Math.pow(2,10*(t-=1))*Math.sin(2*(t*n-r)*Math.PI/o)+e:s*Math.pow(2,-10*(t-=1))*Math.sin(2*(t*n-r)*Math.PI/o)*.5+i+e)},BounceEaseOut:function(t,e,i,n){return(t/=n)<1/2.75?7.5625*i*t*t+e:2/2.75>t?i*(7.5625*(t-=1.5/2.75)*t+.75)+e:2.5/2.75>t?i*(7.5625*(t-=2.25/2.75)*t+.9375)+e:i*(7.5625*(t-=2.625/2.75)*t+.984375)+e},BounceEaseIn:function(t,e,i,n){return i-Kinetic.Easings.BounceEaseOut(n-t,0,i,n)+e},BounceEaseInOut:function(t,e,i,n){return n/2>t?.5*Kinetic.Easings.BounceEaseIn(2*t,0,i,n)+e:.5*Kinetic.Easings.BounceEaseOut(2*t-n,0,i,n)+.5*i+e},EaseIn:function(t,e,i,n){return i*(t/=n)*t+e},EaseOut:function(t,e,i,n){return-i*(t/=n)*(t-2)+e},EaseInOut:function(t,e,i,n){return(t/=n/2)<1?i/2*t*t+e:-i/2*(--t*(t-2)-1)+e},StrongEaseIn:function(t,e,i,n){return i*(t/=n)*t*t*t*t+e},StrongEaseOut:function(t,e,i,n){return i*((t=t/n-1)*t*t*t*t+1)+e},StrongEaseInOut:function(t,e,i,n){return(t/=n/2)<1?i/2*t*t*t*t*t+e:i/2*((t-=2)*t*t*t*t+2)+e},Linear:function(t,e,i,n){return i*t/n+e}}}(),function(){Kinetic.DD={anim:new Kinetic.Animation,isDragging:!1,offset:{x:0,y:0},node:null,_drag:function(t){var e=Kinetic.DD,i=e.node;if(i){if(!e.isDragging){var n=i.getStage().getPointerPosition(),s=i.dragDistance(),o=Math.max(Math.abs(n.x-e.startPointerPos.x),Math.abs(n.y-e.startPointerPos.y));if(s>o)return}i._setDragPosition(t),e.isDragging||(e.isDragging=!0,i.fire("dragstart",{type:"dragstart",target:i,evt:t},!0)),i.fire("dragmove",{type:"dragmove",target:i,evt:t},!0)}},_endDragBefore:function(t){var e,i,n=Kinetic.DD,s=n.node;s&&(e=s.nodeType,i=s.getLayer(),n.anim.stop(),n.isDragging&&(n.isDragging=!1,Kinetic.listenClickTap=!1,t&&(t.dragEndNode=s)),delete n.node,(i||s).draw())},_endDragAfter:function(t){t=t||{};var e=t.dragEndNode;t&&e&&e.fire("dragend",{type:"dragend",target:e,evt:t},!0)}},Kinetic.Node.prototype.startDrag=function(){var t=Kinetic.DD,e=this.getStage(),i=this.getLayer(),n=e.getPointerPosition(),s=this.getAbsolutePosition();n&&(t.node&&t.node.stopDrag(),t.node=this,t.startPointerPos=n,t.offset.x=n.x-s.x,t.offset.y=n.y-s.y,t.anim.setLayers(i||this.getLayers()),t.anim.start(),this._setDragPosition())},Kinetic.Node.prototype._setDragPosition=function(t){var e=Kinetic.DD,i=this.getStage().getPointerPosition(),n=this.getDragBoundFunc();if(i){var s={x:i.x-e.offset.x,y:i.y-e.offset.y};void 0!==n&&(s=n.call(this,s,t)),this.setAbsolutePosition(s)}},Kinetic.Node.prototype.stopDrag=function(){var t=Kinetic.DD,e={};t._endDragBefore(e),t._endDragAfter(e)},Kinetic.Node.prototype.setDraggable=function(t){this._setAttr("draggable",t),this._dragChange()};var t=Kinetic.Node.prototype.destroy;Kinetic.Node.prototype.destroy=function(){var e=Kinetic.DD;e.node&&e.node._id===this._id&&this.stopDrag(),t.call(this)},Kinetic.Node.prototype.isDragging=function(){var t=Kinetic.DD;return t.node&&t.node._id===this._id&&t.isDragging},Kinetic.Node.prototype._listenDrag=function(){var t=this;this._dragCleanup(),"Stage"===this.getClassName()?this.on("contentMousedown.kinetic contentTouchstart.kinetic",function(e){Kinetic.DD.node||t.startDrag(e)}):this.on("mousedown.kinetic touchstart.kinetic",function(e){Kinetic.DD.node||t.startDrag(e)})},Kinetic.Node.prototype._dragChange=function(){if(this.attrs.draggable)this._listenDrag();else{this._dragCleanup();var t=this.getStage(),e=Kinetic.DD;t&&e.node&&e.node._id===this._id&&e.node.stopDrag()}},Kinetic.Node.prototype._dragCleanup=function(){"Stage"===this.getClassName()?(this.off("contentMousedown.kinetic"),this.off("contentTouchstart.kinetic")):(this.off("mousedown.kinetic"),this.off("touchstart.kinetic"))},Kinetic.Factory.addGetterSetter(Kinetic.Node,"dragBoundFunc"),Kinetic.Factory.addGetter(Kinetic.Node,"draggable",!1),Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Node,"draggable");var e=Kinetic.document.documentElement;e.addEventListener("mouseup",Kinetic.DD._endDragBefore,!0),e.addEventListener("touchend",Kinetic.DD._endDragBefore,!0),e.addEventListener("mouseup",Kinetic.DD._endDragAfter,!1),e.addEventListener("touchend",Kinetic.DD._endDragAfter,!1)}(),function(){Kinetic.Util.addMethods(Kinetic.Container,{__init:function(t){this.children=new Kinetic.Collection,Kinetic.Node.call(this,t)},getChildren:function(t){if(t){var e=new Kinetic.Collection;return this.children.each(function(i){t(i)&&e.push(i)}),e}return this.children},hasChildren:function(){return this.getChildren().length>0},removeChildren:function(){for(var t,e=Kinetic.Collection.toCollection(this.children),i=0;i<e.length;i++)t=e[i],delete t.parent,t.index=0,t.hasChildren()&&t.removeChildren(),t.remove();return e=null,this.children=new Kinetic.Collection,this},destroyChildren:function(){for(var t,e=Kinetic.Collection.toCollection(this.children),i=0;i<e.length;i++)t=e[i],delete t.parent,t.index=0,t.destroy();return e=null,this.children=new Kinetic.Collection,this},add:function(t){if(!(arguments.length>1)){if(t.getParent())return void t.moveTo(this);var e=this.children;return this._validateAdd(t),t.index=e.length,t.parent=this,e.push(t),this._fire("add",{child:t}),this}for(var i=0;i<arguments.length;i++)this.add(arguments[i])},destroy:function(){this.hasChildren()&&this.destroyChildren(),Kinetic.Node.prototype.destroy.call(this)},find:function(t){var e,i,n,s,o,r,a,h=[],c=t.replace(/ /g,"").split(","),l=c.length;for(e=0;l>e;e++)if(n=c[e],"#"===n.charAt(0))o=this._getNodeById(n.slice(1)),o&&h.push(o);else if("."===n.charAt(0))s=this._getNodesByName(n.slice(1)),h=h.concat(s);else for(r=this.getChildren(),a=r.length,i=0;a>i;i++)h=h.concat(r[i]._get(n));return Kinetic.Collection.toCollection(h)},_getNodeById:function(t){var e=Kinetic.ids[t];return void 0!==e&&this.isAncestorOf(e)?e:null},_getNodesByName:function(t){var e=Kinetic.names[t]||[];return this._getDescendants(e)},_get:function(t){for(var e=Kinetic.Node.prototype._get.call(this,t),i=this.getChildren(),n=i.length,s=0;n>s;s++)e=e.concat(i[s]._get(t));return e},toObject:function(){var t=Kinetic.Node.prototype.toObject.call(this);t.children=[];for(var e=this.getChildren(),i=e.length,n=0;i>n;n++){var s=e[n];t.children.push(s.toObject())}return t},_getDescendants:function(t){for(var e=[],i=t.length,n=0;i>n;n++){var s=t[n];this.isAncestorOf(s)&&e.push(s)}return e},isAncestorOf:function(t){for(var e=t.getParent();e;){if(e._id===this._id)return!0;e=e.getParent()}return!1},clone:function(t){var e=Kinetic.Node.prototype.clone.call(this,t);return this.getChildren().each(function(t){e.add(t.clone())}),e},getAllIntersections:function(t){var e=[];return this.find("Shape").each(function(i){i.isVisible()&&i.intersects(t)&&e.push(i)}),e},_setChildrenIndices:function(){this.children.each(function(t,e){t.index=e})},drawScene:function(t,e){var i=this.getLayer(),n=t||i&&i.getCanvas(),s=n&&n.getContext(),o=this._cache.canvas,r=o&&o.scene;return this.isVisible()&&(r?this._drawCachedSceneCanvas(s):this._drawChildren(n,"drawScene",e)),this},drawHit:function(t,e){var i=this.getLayer(),n=t||i&&i.hitCanvas,s=n&&n.getContext(),o=this._cache.canvas,r=o&&o.hit;return this.shouldDrawHit()&&(r?this._drawCachedHitCanvas(s):this._drawChildren(n,"drawHit",e)),this},_drawChildren:function(t,e,i){var n,s,o=this.getLayer(),r=t&&t.getContext(),a=this.getClipWidth(),h=this.getClipHeight(),c=a&&h;c&&o&&(n=this.getClipX(),s=this.getClipY(),r.save(),o._applyTransform(this,r),r.beginPath(),r.rect(n,s,a,h),r.clip(),r.reset()),this.children.each(function(n){n[e](t,i)}),c&&r.restore()}}),Kinetic.Util.extend(Kinetic.Container,Kinetic.Node),Kinetic.Container.prototype.get=Kinetic.Container.prototype.find,Kinetic.Factory.addComponentsGetterSetter(Kinetic.Container,"clip",["x","y","width","height"]),Kinetic.Factory.addGetterSetter(Kinetic.Container,"clipX"),Kinetic.Factory.addGetterSetter(Kinetic.Container,"clipY"),Kinetic.Factory.addGetterSetter(Kinetic.Container,"clipWidth"),Kinetic.Factory.addGetterSetter(Kinetic.Container,"clipHeight"),Kinetic.Collection.mapMethods(Kinetic.Container)}(),function(){function t(t){t.fill()}function e(t){t.stroke()}function i(t){t.fill()}function n(t){t.stroke()}function s(){this._clearCache(o)}var o="hasShadow";Kinetic.Util.addMethods(Kinetic.Shape,{__init:function(o){this.nodeType="Shape",this._fillFunc=t,this._strokeFunc=e,this._fillFuncHit=i,this._strokeFuncHit=n;for(var r,a=Kinetic.shapes;r=Kinetic.Util.getRandomColor(),!r||r in a;);this.colorKey=r,a[r]=this,Kinetic.Node.call(this,o),this.on("shadowColorChange.kinetic shadowBlurChange.kinetic shadowOffsetChange.kinetic shadowOpacityChange.kinetic shadowEnabledChange.kinetic",s)},hasChildren:function(){return!1},getChildren:function(){return[]},getContext:function(){return this.getLayer().getContext()},getCanvas:function(){return this.getLayer().getCanvas()},hasShadow:function(){return this._getCache(o,this._hasShadow)},_hasShadow:function(){return this.getShadowEnabled()&&0!==this.getShadowOpacity()&&!!(this.getShadowColor()||this.getShadowBlur()||this.getShadowOffsetX()||this.getShadowOffsetY())},hasFill:function(){return!!(this.getFill()||this.getFillPatternImage()||this.getFillLinearGradientColorStops()||this.getFillRadialGradientColorStops())},hasStroke:function(){return!!(this.stroke()||this.strokeRed()||this.strokeGreen()||this.strokeBlue())},_get:function(t){return this.className===t||this.nodeType===t?[this]:[]},intersects:function(t){var e,i=this.getStage(),n=i.bufferHitCanvas;return n.getContext().clear(),this.drawScene(n),e=n.context.getImageData(Math.round(t.x),Math.round(t.y),1,1).data,e[3]>0},destroy:function(){Kinetic.Node.prototype.destroy.call(this),delete Kinetic.shapes[this.colorKey]},_useBufferCanvas:function(){return(this.hasShadow()||1!==this.getAbsoluteOpacity())&&this.hasFill()&&this.hasStroke()&&this.getStage()},drawScene:function(t,e){var i,n,s,o=this.getLayer(),r=t||o.getCanvas(),a=r.getContext(),h=this._cache.canvas,c=this.sceneFunc(),l=this.hasShadow();return this.isVisible()&&(h?this._drawCachedSceneCanvas(a):c&&(a.save(),this._useBufferCanvas()?(i=this.getStage(),n=i.bufferCanvas,s=n.getContext(),s.clear(),s.save(),s._applyLineJoin(this),o._applyTransform(this,s,e),c.call(this,s),s.restore(),l&&(a.save(),a._applyShadow(this),a.drawImage(n._canvas,0,0),a.restore()),a._applyOpacity(this),a.drawImage(n._canvas,0,0)):(a._applyLineJoin(this),o._applyTransform(this,a,e),l&&(a.save(),a._applyShadow(this),c.call(this,a),a.restore()),a._applyOpacity(this),c.call(this,a)),a.restore())),this},drawHit:function(t,e){var i=this.getLayer(),n=t||i.hitCanvas,s=n.getContext(),o=this.hitFunc()||this.sceneFunc(),r=this._cache.canvas,a=r&&r.hit;return this.shouldDrawHit()&&(a?this._drawCachedHitCanvas(s):o&&(s.save(),s._applyLineJoin(this),i._applyTransform(this,s,e),o.call(this,s),s.restore())),this},drawHitFromCache:function(t){var e,i,n,s,o,r,a,h,c=t||0,l=this._cache.canvas,d=this._getCachedSceneCanvas(),u=d.getContext(),p=l.hit,f=p.getContext(),g=d.getWidth(),m=d.getHeight();f.clear();try{for(e=u.getImageData(0,0,g,m),i=e.data,n=f.getImageData(0,0,g,m),s=n.data,o=i.length,r=Kinetic.Util._hexToRgb(this.colorKey),a=0;o>a;a+=4)h=i[a+3],h>c&&(s[a]=r.r,s[a+1]=r.g,s[a+2]=r.b,s[a+3]=255);f.putImageData(n,0,0)}catch(v){Kinetic.Util.warn("Unable to draw hit graph from cached scene canvas. "+v.message)}return this}}),Kinetic.Util.extend(Kinetic.Shape,Kinetic.Node),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"stroke"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"strokeRed",0,Kinetic.Validators.RGBComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"strokeGreen",0,Kinetic.Validators.RGBComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"strokeBlue",0,Kinetic.Validators.RGBComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"strokeAlpha",1,Kinetic.Validators.alphaComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"strokeWidth",2),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"lineJoin"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"lineCap"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"sceneFunc"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"hitFunc"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"dash"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowColor"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowRed",0,Kinetic.Validators.RGBComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowGreen",0,Kinetic.Validators.RGBComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowBlue",0,Kinetic.Validators.RGBComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowAlpha",1,Kinetic.Validators.alphaComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowBlur"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowOpacity"),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Shape,"shadowOffset",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowOffsetX",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowOffsetY",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPatternImage"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fill"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillRed",0,Kinetic.Validators.RGBComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillGreen",0,Kinetic.Validators.RGBComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillBlue",0,Kinetic.Validators.RGBComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillAlpha",1,Kinetic.Validators.alphaComponent),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPatternX",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPatternY",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillLinearGradientColorStops"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillRadialGradientStartRadius",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillRadialGradientEndRadius",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillRadialGradientColorStops"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPatternRepeat","repeat"),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillEnabled",!0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"strokeEnabled",!0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"shadowEnabled",!0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"dashEnabled",!0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"strokeScaleEnabled",!0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPriority","color"),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Shape,"fillPatternOffset",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPatternOffsetX",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPatternOffsetY",0),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Shape,"fillPatternScale",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPatternScaleX",1),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPatternScaleY",1),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Shape,"fillLinearGradientStartPoint",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillLinearGradientStartPointX",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillLinearGradientStartPointY",0),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Shape,"fillLinearGradientEndPoint",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillLinearGradientEndPointX",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillLinearGradientEndPointY",0),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Shape,"fillRadialGradientStartPoint",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillRadialGradientStartPointX",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillRadialGradientStartPointY",0),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Shape,"fillRadialGradientEndPoint",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillRadialGradientEndPointX",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillRadialGradientEndPointY",0),Kinetic.Factory.addGetterSetter(Kinetic.Shape,"fillPatternRotation",0),Kinetic.Factory.backCompat(Kinetic.Shape,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"}),Kinetic.Collection.mapMethods(Kinetic.Shape)}(),function(){function t(t,e){t.content.addEventListener(e,function(i){t[P+e](i)},!1)}var e="Stage",i="string",n="px",s="mouseout",o="mouseleave",r="mouseover",a="mouseenter",h="mousemove",c="mousedown",l="mouseup",d="click",u="dblclick",p="touchstart",f="touchend",g="tap",m="dbltap",v="touchmove",y="contentMouseout",b="contentMouseover",x="contentMousemove",w="contentMousedown",_="contentMouseup",S="contentClick",C="contentDblclick",T="contentTouchstart",D="contentTouchend",M="contentDbltap",E="contentTouchmove",k="div",L="relative",N="inline-block",A="kineticjs-content",O=" ",P="_",I="container",F="",K=[c,h,l,s,p,v,f,r],z=K.length;Kinetic.Util.addMethods(Kinetic.Stage,{___init:function(t){this.nodeType=e,Kinetic.Container.call(this,t),this._id=Kinetic.idCounter++,this._buildDOM(),this._bindContentEvents(),this._enableNestedTransforms=!1,Kinetic.stages.push(this)},_validateAdd:function(t){"Layer"!==t.getType()&&Kinetic.Util.error("You may only add layers to the stage.")},setContainer:function(t){if(typeof t===i){var e=t;if(t=Kinetic.document.getElementById(t),!t)throw"Can not find container in document with id "+e}return this._setAttr(I,t),this},shouldDrawHit:function(){return!0},draw:function(){return Kinetic.Node.prototype.draw.call(this),this},setHeight:function(t){return Kinetic.Node.prototype.setHeight.call(this,t),this._resizeDOM(),this},setWidth:function(t){return Kinetic.Node.prototype.setWidth.call(this,t),this._resizeDOM(),this},clear:function(){var t,e=this.children,i=e.length;for(t=0;i>t;t++)e[t].clear();return this},clone:function(t){return t||(t={}),t.container=Kinetic.document.createElement(k),Kinetic.Container.prototype.clone.call(this,t)},destroy:function(){var t=this.content;Kinetic.Container.prototype.destroy.call(this),t&&Kinetic.Util._isInDocument(t)&&this.getContainer().removeChild(t);var e=Kinetic.stages.indexOf(this);e>-1&&Kinetic.stages.splice(e,1)},getPointerPosition:function(){return this.pointerPos},getStage:function(){return this},getContent:function(){return this.content},toDataURL:function(t){function e(s){var o=h[s],c=o.toDataURL(),l=new Kinetic.window.Image;l.onload=function(){a.drawImage(l,0,0),s<h.length-1?e(s+1):t.callback(r.toDataURL(i,n))},l.src=c}t=t||{};var i=t.mimeType||null,n=t.quality||null,s=t.x||0,o=t.y||0,r=new Kinetic.SceneCanvas({width:t.width||this.getWidth(),height:t.height||this.getHeight(),pixelRatio:1}),a=r.getContext()._context,h=this.children;(s||o)&&a.translate(-1*s,-1*o),e(0)},toImage:function(t){var e=t.callback;t.callback=function(t){Kinetic.Util._getImage(t,function(t){e(t)})},this.toDataURL(t)},getIntersection:function(t){var e,i,n=this.getChildren(),s=n.length,o=s-1;for(e=o;e>=0;e--)if(i=n[e].getIntersection(t))return i;return null},_resizeDOM:function(){if(this.content){var t,e,i=this.getWidth(),s=this.getHeight(),o=this.getChildren(),r=o.length;for(this.content.style.width=i+n,this.content.style.height=s+n,this.bufferCanvas.setSize(i,s),this.bufferHitCanvas.setSize(i,s),t=0;r>t;t++)e=o[t],e.getCanvas().setSize(i,s),e.hitCanvas.setSize(i,s),e.draw()}},add:function(t){if(!(arguments.length>1))return Kinetic.Container.prototype.add.call(this,t),t._setCanvasSize(this.width(),this.height()),t.draw(),this.content.appendChild(t.canvas._canvas),this;
for(var e=0;e<arguments.length;e++)this.add(arguments[e])},getParent:function(){return null},getLayer:function(){return null},getLayers:function(){return this.getChildren()},_bindContentEvents:function(){for(var e=0;z>e;e++)t(this,K[e])},_mouseover:function(t){Kinetic.UA.mobile||(this._setPointerPosition(t),this._fire(b,{evt:t}))},_mouseout:function(t){if(!Kinetic.UA.mobile){this._setPointerPosition(t);var e=this.targetShape;e&&!Kinetic.isDragging()&&(e._fireAndBubble(s,{evt:t}),e._fireAndBubble(o,{evt:t}),this.targetShape=null),this.pointerPos=void 0,this._fire(y,{evt:t})}},_mousemove:function(t){if(!Kinetic.UA.mobile){this._setPointerPosition(t);var e=Kinetic.DD,i=this.getIntersection(this.getPointerPosition());i&&i.isListening()?Kinetic.isDragging()||this.targetShape&&this.targetShape._id===i._id?i._fireAndBubble(h,{evt:t}):(this.targetShape&&(this.targetShape._fireAndBubble(s,{evt:t},i),this.targetShape._fireAndBubble(o,{evt:t},i)),i._fireAndBubble(r,{evt:t},this.targetShape),i._fireAndBubble(a,{evt:t},this.targetShape),this.targetShape=i):this.targetShape&&!Kinetic.isDragging()&&(this.targetShape._fireAndBubble(s,{evt:t}),this.targetShape._fireAndBubble(o,{evt:t}),this.targetShape=null),this._fire(x,{evt:t}),e&&e._drag(t)}t.preventDefault&&t.preventDefault()},_mousedown:function(t){if(!Kinetic.UA.mobile){this._setPointerPosition(t);var e=this.getIntersection(this.getPointerPosition());Kinetic.listenClickTap=!0,e&&e.isListening()&&(this.clickStartShape=e,e._fireAndBubble(c,{evt:t})),this._fire(w,{evt:t})}t.preventDefault&&t.preventDefault()},_mouseup:function(t){if(!Kinetic.UA.mobile){this._setPointerPosition(t);var e=this.getIntersection(this.getPointerPosition()),i=this.clickStartShape,n=!1;Kinetic.inDblClickWindow?(n=!0,Kinetic.inDblClickWindow=!1):Kinetic.inDblClickWindow=!0,setTimeout(function(){Kinetic.inDblClickWindow=!1},Kinetic.dblClickWindow),e&&e.isListening()&&(e._fireAndBubble(l,{evt:t}),Kinetic.listenClickTap&&i&&i._id===e._id&&(e._fireAndBubble(d,{evt:t}),n&&e._fireAndBubble(u,{evt:t}))),this._fire(_,{evt:t}),Kinetic.listenClickTap&&(this._fire(S,{evt:t}),n&&this._fire(C,{evt:t})),Kinetic.listenClickTap=!1}t.preventDefault&&t.preventDefault()},_touchstart:function(t){this._setPointerPosition(t);var e=this.getIntersection(this.getPointerPosition());Kinetic.listenClickTap=!0,e&&e.isListening()&&(this.tapStartShape=e,e._fireAndBubble(p,{evt:t}),e.isListening()&&t.preventDefault&&t.preventDefault()),this._fire(T,{evt:t})},_touchend:function(t){this._setPointerPosition(t);var e=this.getIntersection(this.getPointerPosition()),i=!1;Kinetic.inDblClickWindow?(i=!0,Kinetic.inDblClickWindow=!1):Kinetic.inDblClickWindow=!0,setTimeout(function(){Kinetic.inDblClickWindow=!1},Kinetic.dblClickWindow),e&&e.isListening()&&(e._fireAndBubble(f,{evt:t}),Kinetic.listenClickTap&&e._id===this.tapStartShape._id&&(e._fireAndBubble(g,{evt:t}),i&&e._fireAndBubble(m,{evt:t})),e.isListening()&&t.preventDefault&&t.preventDefault()),Kinetic.listenClickTap&&(this._fire(D,{evt:t}),i&&this._fire(M,{evt:t})),Kinetic.listenClickTap=!1},_touchmove:function(t){this._setPointerPosition(t);var e=Kinetic.DD,i=this.getIntersection(this.getPointerPosition());i&&i.isListening()&&(i._fireAndBubble(v,{evt:t}),i.isListening()&&t.preventDefault&&t.preventDefault()),this._fire(E,{evt:t}),e&&e._drag(t)},_setPointerPosition:function(t){var e,i=this._getContentPosition(),n=t.offsetX,s=t.clientX,o=null,r=null;t=t?t:window.event,void 0!==t.touches?t.touches.length>0&&(e=t.touches[0],o=e.clientX-i.left,r=e.clientY-i.top):void 0!==n?(o=n,r=t.offsetY):"mozilla"===Kinetic.UA.browser?(o=t.layerX,r=t.layerY):void 0!==s&&i&&(o=s-i.left,r=t.clientY-i.top),null!==o&&null!==r&&(this.pointerPos={x:o,y:r})},_getContentPosition:function(){var t=this.content.getBoundingClientRect?this.content.getBoundingClientRect():{top:0,left:0};return{top:t.top,left:t.left}},_buildDOM:function(){var t=this.getContainer();if(!t){if(Kinetic.Util.isBrowser())throw"Stage has not container. But container is required";t=Kinetic.document.createElement(k)}t.innerHTML=F,this.content=Kinetic.document.createElement(k),this.content.style.position=L,this.content.style.display=N,this.content.className=A,this.content.setAttribute("role","presentation"),t.appendChild(this.content),this.bufferCanvas=new Kinetic.SceneCanvas({pixelRatio:1}),this.bufferHitCanvas=new Kinetic.HitCanvas,this._resizeDOM()},_onContent:function(t,e){var i,n,s=t.split(O),o=s.length;for(i=0;o>i;i++)n=s[i],this.content.addEventListener(n,e,!1)},cache:function(){Kinetic.Util.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes.")},clearCache:function(){}}),Kinetic.Util.extend(Kinetic.Stage,Kinetic.Container),Kinetic.Factory.addGetter(Kinetic.Stage,"container"),Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Stage,"container")}(),function(){Kinetic.Util.addMethods(Kinetic.BaseLayer,{___init:function(t){this.nodeType="Layer",Kinetic.Container.call(this,t)},createPNGStream:function(){return this.canvas._canvas.createPNGStream()},getCanvas:function(){return this.canvas},getHitCanvas:function(){return this.hitCanvas},getContext:function(){return this.getCanvas().getContext()},clear:function(t){return this.getContext().clear(t),this.getHitCanvas().getContext().clear(t),this},setZIndex:function(t){Kinetic.Node.prototype.setZIndex.call(this,t);var e=this.getStage();return e&&(e.content.removeChild(this.getCanvas()._canvas),t<e.getChildren().length-1?e.content.insertBefore(this.getCanvas()._canvas,e.getChildren()[t+1].getCanvas()._canvas):e.content.appendChild(this.getCanvas()._canvas)),this},moveToTop:function(){Kinetic.Node.prototype.moveToTop.call(this);var t=this.getStage();t&&(t.content.removeChild(this.getCanvas()._canvas),t.content.appendChild(this.getCanvas()._canvas))},moveUp:function(){if(Kinetic.Node.prototype.moveUp.call(this)){var t=this.getStage();t&&(t.content.removeChild(this.getCanvas()._canvas),this.index<t.getChildren().length-1?t.content.insertBefore(this.getCanvas()._canvas,t.getChildren()[this.index+1].getCanvas()._canvas):t.content.appendChild(this.getCanvas()._canvas))}},moveDown:function(){if(Kinetic.Node.prototype.moveDown.call(this)){var t=this.getStage();if(t){var e=t.getChildren();t.content.removeChild(this.getCanvas()._canvas),t.content.insertBefore(this.getCanvas()._canvas,e[this.index+1].getCanvas()._canvas)}}},moveToBottom:function(){if(Kinetic.Node.prototype.moveToBottom.call(this)){var t=this.getStage();if(t){var e=t.getChildren();t.content.removeChild(this.getCanvas()._canvas),t.content.insertBefore(this.getCanvas()._canvas,e[1].getCanvas()._canvas)}}},getLayer:function(){return this},remove:function(){var t=this.getCanvas()._canvas;return Kinetic.Node.prototype.remove.call(this),t&&t.parentNode&&Kinetic.Util._isInDocument(t)&&t.parentNode.removeChild(t),this},getStage:function(){return this.parent}}),Kinetic.Util.extend(Kinetic.BaseLayer,Kinetic.Container),Kinetic.Factory.addGetterSetter(Kinetic.BaseLayer,"clearBeforeDraw",!0),Kinetic.Collection.mapMethods(Kinetic.BaseLayer)}(),function(){var t="#",e="beforeDraw",i="draw",n=[{x:0,y:0},{x:-1,y:0},{x:-1,y:-1},{x:0,y:-1},{x:1,y:-1},{x:1,y:0},{x:1,y:1},{x:0,y:1},{x:-1,y:1}],s=n.length;Kinetic.Util.addMethods(Kinetic.Layer,{____init:function(t){this.nodeType="Layer",this.canvas=new Kinetic.SceneCanvas,this.hitCanvas=new Kinetic.HitCanvas,Kinetic.BaseLayer.call(this,t)},_setCanvasSize:function(t,e){this.canvas.setSize(t,e),this.hitCanvas.setSize(t,e)},_validateAdd:function(t){var e=t.getType();"Group"!==e&&"Shape"!==e&&Kinetic.Util.error("You may only add groups and shapes to a layer.")},getIntersection:function(t){var e,i,o,r;if(!this.hitGraphEnabled()||!this.isVisible())return null;for(i=0;s>i;i++){if(o=n[i],e=this._getIntersection({x:t.x+o.x,y:t.y+o.y}),r=e.shape)return r;if(!e.antialiased)return null}},_getIntersection:function(e){var i,n,s=this.hitCanvas.context._context.getImageData(e.x,e.y,1,1).data,o=s[3];return 255===o?(i=Kinetic.Util._rgbToHex(s[0],s[1],s[2]),n=Kinetic.shapes[t+i],{shape:n}):o>0?{antialiased:!0}:{}},drawScene:function(t,n){var s=this.getLayer(),o=t||s&&s.getCanvas();return this._fire(e,{node:this}),this.getClearBeforeDraw()&&o.getContext().clear(),Kinetic.Container.prototype.drawScene.call(this,o,n),this._fire(i,{node:this}),this},_applyTransform:function(t,e,i){var n=t.getAbsoluteTransform(i).getMatrix();e.transform(n[0],n[1],n[2],n[3],n[4],n[5])},drawHit:function(t,e){var i=this.getLayer(),n=t||i&&i.hitCanvas;return i&&i.getClearBeforeDraw()&&i.getHitCanvas().getContext().clear(),Kinetic.Container.prototype.drawHit.call(this,n,e),this},clear:function(t){return this.getContext().clear(t),this.getHitCanvas().getContext().clear(t),this},setVisible:function(t){return Kinetic.Node.prototype.setVisible.call(this,t),t?(this.getCanvas()._canvas.style.display="block",this.hitCanvas._canvas.style.display="block"):(this.getCanvas()._canvas.style.display="none",this.hitCanvas._canvas.style.display="none"),this},enableHitGraph:function(){return this.setHitGraphEnabled(!0),this},disableHitGraph:function(){return this.setHitGraphEnabled(!1),this}}),Kinetic.Util.extend(Kinetic.Layer,Kinetic.BaseLayer),Kinetic.Factory.addGetterSetter(Kinetic.Layer,"hitGraphEnabled",!0),Kinetic.Collection.mapMethods(Kinetic.Layer)}(),function(){Kinetic.Util.addMethods(Kinetic.FastLayer,{____init:function(t){this.nodeType="Layer",this.canvas=new Kinetic.SceneCanvas,Kinetic.BaseLayer.call(this,t)},_validateAdd:function(t){var e=t.getType();"Shape"!==e&&Kinetic.Util.error("You may only add shapes to a fast layer.")},_setCanvasSize:function(t,e){this.canvas.setSize(t,e)},hitGraphEnabled:function(){return!1},getIntersection:function(){return null},drawScene:function(t){var e=this.getLayer(),i=t||e&&e.getCanvas();return this.getClearBeforeDraw()&&i.getContext().clear(),Kinetic.Container.prototype.drawScene.call(this,i),this},_applyTransform:function(t,e,i){if(!i||i._id!==this._id){var n=t.getTransform().getMatrix();e.transform(n[0],n[1],n[2],n[3],n[4],n[5])}},draw:function(){return this.drawScene(),this},clear:function(t){return this.getContext().clear(t),this},setVisible:function(t){return Kinetic.Node.prototype.setVisible.call(this,t),this.getCanvas()._canvas.style.display=t?"block":"none",this}}),Kinetic.Util.extend(Kinetic.FastLayer,Kinetic.BaseLayer),Kinetic.Collection.mapMethods(Kinetic.FastLayer)}(),function(){Kinetic.Util.addMethods(Kinetic.Group,{___init:function(t){this.nodeType="Group",Kinetic.Container.call(this,t)},_validateAdd:function(t){var e=t.getType();"Group"!==e&&"Shape"!==e&&Kinetic.Util.error("You may only add groups and shapes to groups.")}}),Kinetic.Util.extend(Kinetic.Group,Kinetic.Container),Kinetic.Collection.mapMethods(Kinetic.Group)}(),function(){Kinetic.Rect=function(t){this.___init(t)},Kinetic.Rect.prototype={___init:function(t){Kinetic.Shape.call(this,t),this.className="Rect",this.sceneFunc(this._sceneFunc)},_sceneFunc:function(t){var e=this.getCornerRadius(),i=this.getWidth(),n=this.getHeight();t.beginPath(),e?(t.moveTo(e,0),t.lineTo(i-e,0),t.arc(i-e,e,e,3*Math.PI/2,0,!1),t.lineTo(i,n-e),t.arc(i-e,n-e,e,0,Math.PI/2,!1),t.lineTo(e,n),t.arc(e,n-e,e,Math.PI/2,Math.PI,!1),t.lineTo(0,e),t.arc(e,e,e,Math.PI,3*Math.PI/2,!1)):t.rect(0,0,i,n),t.closePath(),t.fillStrokeShape(this)}},Kinetic.Util.extend(Kinetic.Rect,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Rect,"cornerRadius",0),Kinetic.Collection.mapMethods(Kinetic.Rect)}(),function(){var t=2*Math.PI-1e-4,e="Circle";Kinetic.Circle=function(t){this.___init(t)},Kinetic.Circle.prototype={___init:function(t){Kinetic.Shape.call(this,t),this.className=e,this.sceneFunc(this._sceneFunc)},_sceneFunc:function(e){e.beginPath(),e.arc(0,0,this.getRadius(),0,t,!1),e.closePath(),e.fillStrokeShape(this)},getWidth:function(){return 2*this.getRadius()},getHeight:function(){return 2*this.getRadius()},setWidth:function(t){Kinetic.Node.prototype.setWidth.call(this,t),this.setRadius(t/2)},setHeight:function(t){Kinetic.Node.prototype.setHeight.call(this,t),this.setRadius(t/2)}},Kinetic.Util.extend(Kinetic.Circle,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Circle,"radius",0),Kinetic.Collection.mapMethods(Kinetic.Circle)}(),function(){var t=2*Math.PI-1e-4,e="Ellipse";Kinetic.Ellipse=function(t){this.___init(t)},Kinetic.Ellipse.prototype={___init:function(t){Kinetic.Shape.call(this,t),this.className=e,this.sceneFunc(this._sceneFunc)},_sceneFunc:function(e){var i=this.getRadius(),n=i.x,s=i.y;e.beginPath(),e.save(),n!==s&&e.scale(1,s/n),e.arc(0,0,n,0,t,!1),e.restore(),e.closePath(),e.fillStrokeShape(this)},getWidth:function(){return 2*this.getRadius().x},getHeight:function(){return 2*this.getRadius().y},setWidth:function(t){Kinetic.Node.prototype.setWidth.call(this,t),this.setRadius({x:t/2})},setHeight:function(t){Kinetic.Node.prototype.setHeight.call(this,t),this.setRadius({y:t/2})}},Kinetic.Util.extend(Kinetic.Ellipse,Kinetic.Shape),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Ellipse,"radius",["x","y"]),Kinetic.Factory.addGetterSetter(Kinetic.Ellipse,"radiusX",0),Kinetic.Factory.addGetterSetter(Kinetic.Ellipse,"radiusY",0),Kinetic.Collection.mapMethods(Kinetic.Ellipse)}(),function(){var t=2*Math.PI-1e-4;Kinetic.Ring=function(t){this.___init(t)},Kinetic.Ring.prototype={___init:function(t){Kinetic.Shape.call(this,t),this.className="Ring",this.sceneFunc(this._sceneFunc)},_sceneFunc:function(e){e.beginPath(),e.arc(0,0,this.getInnerRadius(),0,t,!1),e.moveTo(this.getOuterRadius(),0),e.arc(0,0,this.getOuterRadius(),t,0,!0),e.closePath(),e.fillStrokeShape(this)},getWidth:function(){return 2*this.getOuterRadius()},getHeight:function(){return 2*this.getOuterRadius()},setWidth:function(t){Kinetic.Node.prototype.setWidth.call(this,t),this.setOuterRadius(t/2)},setHeight:function(t){Kinetic.Node.prototype.setHeight.call(this,t),this.setOuterRadius(t/2)}},Kinetic.Util.extend(Kinetic.Ring,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Ring,"innerRadius",0),Kinetic.Factory.addGetterSetter(Kinetic.Ring,"outerRadius",0),Kinetic.Collection.mapMethods(Kinetic.Ring)}(),function(){Kinetic.Wedge=function(t){this.___init(t)},Kinetic.Wedge.prototype={___init:function(t){Kinetic.Shape.call(this,t),this.className="Wedge",this.sceneFunc(this._sceneFunc)},_sceneFunc:function(t){t.beginPath(),t.arc(0,0,this.getRadius(),0,Kinetic.getAngle(this.getAngle()),this.getClockwise()),t.lineTo(0,0),t.closePath(),t.fillStrokeShape(this)}},Kinetic.Util.extend(Kinetic.Wedge,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Wedge,"radius",0),Kinetic.Factory.addGetterSetter(Kinetic.Wedge,"angle",0),Kinetic.Factory.addGetterSetter(Kinetic.Wedge,"clockwise",!1),Kinetic.Factory.backCompat(Kinetic.Wedge,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"}),Kinetic.Collection.mapMethods(Kinetic.Wedge)}(),function(){Math.PI/180,Kinetic.Arc=function(t){this.___init(t)},Kinetic.Arc.prototype={___init:function(t){Kinetic.Shape.call(this,t),this.className="Arc",this.sceneFunc(this._sceneFunc)},_sceneFunc:function(t){var e=Kinetic.getAngle(this.angle()),i=this.clockwise();t.beginPath(),t.arc(0,0,this.getOuterRadius(),0,e,i),t.arc(0,0,this.getInnerRadius(),e,0,!i),t.closePath(),t.fillStrokeShape(this)}},Kinetic.Util.extend(Kinetic.Arc,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Arc,"innerRadius",0),Kinetic.Factory.addGetterSetter(Kinetic.Arc,"outerRadius",0),Kinetic.Factory.addGetterSetter(Kinetic.Arc,"angle",0),Kinetic.Factory.addGetterSetter(Kinetic.Arc,"clockwise",!1),Kinetic.Collection.mapMethods(Kinetic.Arc)}(),function(){var t="Image";Kinetic.Image=function(t){this.___init(t)},Kinetic.Image.prototype={___init:function(e){Kinetic.Shape.call(this,e),this.className=t,this.sceneFunc(this._sceneFunc),this.hitFunc(this._hitFunc)},_useBufferCanvas:function(){return(this.hasShadow()||1!==this.getAbsoluteOpacity())&&this.hasStroke()},_sceneFunc:function(t){var e,i,n,s,o=this.getWidth(),r=this.getHeight(),a=this.getImage();a&&(e=this.getCrop(),i=e.width,n=e.height,s=i&&n?[a,e.x,e.y,i,n,0,0,o,r]:[a,0,0,o,r]),t.beginPath(),t.rect(0,0,o,r),t.closePath(),t.fillStrokeShape(this),a&&t.drawImage.apply(t,s)},_hitFunc:function(t){var e=this.getWidth(),i=this.getHeight();t.beginPath(),t.rect(0,0,e,i),t.closePath(),t.fillStrokeShape(this)},getWidth:function(){var t=this.getImage();return this.attrs.width||(t?t.width:0)},getHeight:function(){var t=this.getImage();return this.attrs.height||(t?t.height:0)}},Kinetic.Util.extend(Kinetic.Image,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Image,"image"),Kinetic.Factory.addComponentsGetterSetter(Kinetic.Image,"crop",["x","y","width","height"]),Kinetic.Factory.addGetterSetter(Kinetic.Image,"cropX",0),Kinetic.Factory.addGetterSetter(Kinetic.Image,"cropY",0),Kinetic.Factory.addGetterSetter(Kinetic.Image,"cropWidth",0),Kinetic.Factory.addGetterSetter(Kinetic.Image,"cropHeight",0),Kinetic.Collection.mapMethods(Kinetic.Image)}(),function(){function t(t){t.fillText(this.partialText,0,0)}function e(t){t.strokeText(this.partialText,0,0)}var i="auto",n="center",s="Change.kinetic",o="2d",r="-",a="",h="left",c="text",l="Text",d="middle",u="normal",p="px ",f=" ",g="right",m="word",v="char",y="none",b=["fontFamily","fontSize","fontStyle","fontVariant","padding","align","lineHeight","text","width","height","wrap"],x=b.length,w=Kinetic.Util.createCanvasElement().getContext(o);Kinetic.Text=function(t){this.___init(t)},Kinetic.Text.prototype={___init:function(n){var o=this;void 0===n.width&&(n.width=i),void 0===n.height&&(n.height=i),Kinetic.Shape.call(this,n),this._fillFunc=t,this._strokeFunc=e,this.className=l;for(var r=0;x>r;r++)this.on(b[r]+s,o._setTextData);this._setTextData(),this.sceneFunc(this._sceneFunc),this.hitFunc(this._hitFunc)},_sceneFunc:function(t){var e,i=this.getPadding(),s=this.getTextHeight(),o=this.getLineHeight()*s,r=this.textArr,a=r.length,c=this.getWidth();for(t.setAttr("font",this._getContextFont()),t.setAttr("textBaseline",d),t.setAttr("textAlign",h),t.save(),t.translate(i,0),t.translate(0,i+s/2),e=0;a>e;e++){var l=r[e],u=l.text,p=l.width;t.save(),this.getAlign()===g?t.translate(c-p-2*i,0):this.getAlign()===n&&t.translate((c-p-2*i)/2,0),this.partialText=u,t.fillStrokeShape(this),t.restore(),t.translate(0,o)}t.restore()},_hitFunc:function(t){var e=this.getWidth(),i=this.getHeight();t.beginPath(),t.rect(0,0,e,i),t.closePath(),t.fillStrokeShape(this)},setText:function(t){var e=Kinetic.Util._isString(t)?t:t.toString();return this._setAttr(c,e),this},getWidth:function(){return this.attrs.width===i?this.getTextWidth()+2*this.getPadding():this.attrs.width},getHeight:function(){return this.attrs.height===i?this.getTextHeight()*this.textArr.length*this.getLineHeight()+2*this.getPadding():this.attrs.height},getTextWidth:function(){return this.textWidth},getTextHeight:function(){return this.textHeight},_getTextSize:function(t){var e,i=w,n=this.getFontSize();return i.save(),i.font=this._getContextFont(),e=i.measureText(t),i.restore(),{width:e.width,height:parseInt(n,10)}},_getContextFont:function(){return this.getFontStyle()+f+this.getFontVariant()+f+this.getFontSize()+p+this.getFontFamily()},_addTextLine:function(t,e){return this.textArr.push({text:t,width:e})},_getTextWidth:function(t){return w.measureText(t).width},_setTextData:function(){var t=this.getText().split("\n"),e=+this.getFontSize(),n=0,s=this.getLineHeight()*e,o=this.attrs.width,a=this.attrs.height,h=o!==i,c=a!==i,l=this.getPadding(),d=o-2*l,u=a-2*l,p=0,g=this.getWrap(),m=g!==y,b=g!==v&&m;this.textArr=[],w.save(),w.font=this._getContextFont();for(var x=0,_=t.length;_>x;++x){var S=t[x],C=this._getTextWidth(S);if(h&&C>d)for(;S.length>0;){for(var T=0,D=S.length,M="",E=0;D>T;){var k=T+D>>>1,L=S.slice(0,k+1),N=this._getTextWidth(L);d>=N?(T=k+1,M=L,E=N):D=k}if(!M)break;if(b){var A=Math.max(M.lastIndexOf(f),M.lastIndexOf(r))+1;A>0&&(T=A,M=M.slice(0,T),E=this._getTextWidth(M))}if(this._addTextLine(M,E),n=Math.max(n,E),p+=s,!m||c&&p+s>u)break;if(S=S.slice(T),S.length>0&&(C=this._getTextWidth(S),d>=C)){this._addTextLine(S,C),p+=s,n=Math.max(n,C);break}}else this._addTextLine(S,C),p+=s,n=Math.max(n,C);if(c&&p+s>u)break}w.restore(),this.textHeight=e,this.textWidth=n}},Kinetic.Util.extend(Kinetic.Text,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Text,"fontFamily","Arial"),Kinetic.Factory.addGetterSetter(Kinetic.Text,"fontSize",12),Kinetic.Factory.addGetterSetter(Kinetic.Text,"fontStyle",u),Kinetic.Factory.addGetterSetter(Kinetic.Text,"fontVariant",u),Kinetic.Factory.addGetterSetter(Kinetic.Text,"padding",0),Kinetic.Factory.addGetterSetter(Kinetic.Text,"align",h),Kinetic.Factory.addGetterSetter(Kinetic.Text,"lineHeight",1),Kinetic.Factory.addGetterSetter(Kinetic.Text,"wrap",m),Kinetic.Factory.addGetter(Kinetic.Text,"text",a),Kinetic.Factory.addOverloadedGetterSetter(Kinetic.Text,"text"),Kinetic.Collection.mapMethods(Kinetic.Text)}(),function(){Kinetic.Line=function(t){this.___init(t)},Kinetic.Line.prototype={___init:function(t){Kinetic.Shape.call(this,t),this.className="Line",this.on("pointsChange.kinetic tensionChange.kinetic closedChange.kinetic",function(){this._clearCache("tensionPoints")}),this.sceneFunc(this._sceneFunc)},_sceneFunc:function(t){var e,i,n,s=this.getPoints(),o=s.length,r=this.getTension(),a=this.getClosed();if(t.beginPath(),t.moveTo(s[0],s[1]),0!==r&&o>4){for(e=this.getTensionPoints(),i=e.length,n=a?0:4,a||t.quadraticCurveTo(e[0],e[1],e[2],e[3]);i-2>n;)t.bezierCurveTo(e[n++],e[n++],e[n++],e[n++],e[n++],e[n++]);a||t.quadraticCurveTo(e[i-2],e[i-1],s[o-2],s[o-1])}else for(n=2;o>n;n+=2)t.lineTo(s[n],s[n+1]);a?(t.closePath(),t.fillStrokeShape(this)):t.strokeShape(this)},getTensionPoints:function(){return this._getCache("tensionPoints",this._getTensionPoints)},_getTensionPoints:function(){return this.getClosed()?this._getTensionPointsClosed():Kinetic.Util._expandPoints(this.getPoints(),this.getTension())},_getTensionPointsClosed:function(){var t=this.getPoints(),e=t.length,i=this.getTension(),n=Kinetic.Util,s=n._getControlPoints(t[e-2],t[e-1],t[0],t[1],t[2],t[3],i),o=n._getControlPoints(t[e-4],t[e-3],t[e-2],t[e-1],t[0],t[1],i),r=Kinetic.Util._expandPoints(t,i),a=[s[2],s[3]].concat(r).concat([o[0],o[1],t[e-2],t[e-1],o[2],o[3],s[0],s[1],t[0],t[1]]);return a}},Kinetic.Util.extend(Kinetic.Line,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Line,"closed",!1),Kinetic.Factory.addGetterSetter(Kinetic.Line,"tension",0),Kinetic.Factory.addGetterSetter(Kinetic.Line,"points"),Kinetic.Collection.mapMethods(Kinetic.Line)}(),function(){Kinetic.Sprite=function(t){this.___init(t)},Kinetic.Sprite.prototype={___init:function(t){Kinetic.Shape.call(this,t),this.className="Sprite",this.anim=new Kinetic.Animation,this.on("animationChange.kinetic",function(){this.frameIndex(0)}),this.on("frameRateChange.kinetic",function(){this.anim.isRunning()&&(clearInterval(this.interval),this._setInterval())}),this.sceneFunc(this._sceneFunc),this.hitFunc(this._hitFunc)},_sceneFunc:function(t){var e=this.getAnimation(),i=this.frameIndex(),n=4*i,s=this.getAnimations()[e],o=s[n+0],r=s[n+1],a=s[n+2],h=s[n+3],c=this.getImage();c&&t.drawImage(c,o,r,a,h,0,0,a,h)},_hitFunc:function(t){var e=this.getAnimation(),i=this.frameIndex(),n=4*i,s=this.getAnimations()[e],o=s[n+2],r=s[n+3];t.beginPath(),t.rect(0,0,o,r),t.closePath(),t.fillShape(this)},_useBufferCanvas:function(){return(this.hasShadow()||1!==this.getAbsoluteOpacity())&&this.hasStroke()},_setInterval:function(){var t=this;this.interval=setInterval(function(){t._updateIndex()},1e3/this.getFrameRate())},start:function(){var t=this.getLayer();this.anim.setLayers(t),this._setInterval(),this.anim.start()},stop:function(){this.anim.stop(),clearInterval(this.interval)},isRunning:function(){return this.anim.isRunning()},_updateIndex:function(){var t=this.frameIndex(),e=this.getAnimation(),i=this.getAnimations(),n=i[e],s=n.length/4;this.frameIndex(s-1>t?t+1:0)}},Kinetic.Util.extend(Kinetic.Sprite,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Sprite,"animation"),Kinetic.Factory.addGetterSetter(Kinetic.Sprite,"animations"),Kinetic.Factory.addGetterSetter(Kinetic.Sprite,"image"),Kinetic.Factory.addGetterSetter(Kinetic.Sprite,"frameIndex",0),Kinetic.Factory.addGetterSetter(Kinetic.Sprite,"frameRate",17),Kinetic.Factory.backCompat(Kinetic.Sprite,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"}),Kinetic.Collection.mapMethods(Kinetic.Sprite)}(),function(){Kinetic.Path=function(t){this.___init(t)},Kinetic.Path.prototype={___init:function(t){this.dataArray=[];var e=this;Kinetic.Shape.call(this,t),this.className="Path",this.dataArray=Kinetic.Path.parsePathData(this.getData()),this.on("dataChange.kinetic",function(){e.dataArray=Kinetic.Path.parsePathData(this.getData())}),this.sceneFunc(this._sceneFunc)},_sceneFunc:function(t){var e=this.dataArray,i=!1;t.beginPath();for(var n=0;n<e.length;n++){var s=e[n].command,o=e[n].points;switch(s){case"L":t.lineTo(o[0],o[1]);break;case"M":t.moveTo(o[0],o[1]);break;case"C":t.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5]);break;case"Q":t.quadraticCurveTo(o[0],o[1],o[2],o[3]);break;case"A":var r=o[0],a=o[1],h=o[2],c=o[3],l=o[4],d=o[5],u=o[6],p=o[7],f=h>c?h:c,g=h>c?1:h/c,m=h>c?c/h:1;t.translate(r,a),t.rotate(u),t.scale(g,m),t.arc(0,0,f,l,l+d,1-p),t.scale(1/g,1/m),t.rotate(-u),t.translate(-r,-a);break;case"z":t.closePath(),i=!0}}i?t.fillStrokeShape(this):t.strokeShape(this)}},Kinetic.Util.extend(Kinetic.Path,Kinetic.Shape),Kinetic.Path.getLineLength=function(t,e,i,n){return Math.sqrt((i-t)*(i-t)+(n-e)*(n-e))},Kinetic.Path.getPointOnLine=function(t,e,i,n,s,o,r){void 0===o&&(o=e),void 0===r&&(r=i);var a=(s-i)/(n-e+1e-8),h=Math.sqrt(t*t/(1+a*a));e>n&&(h*=-1);var c,l=a*h;if(n===e)c={x:o,y:r+l};else if((r-i)/(o-e+1e-8)===a)c={x:o+h,y:r+l};else{var d,u,p=this.getLineLength(e,i,n,s);if(1e-8>p)return void 0;var f=(o-e)*(n-e)+(r-i)*(s-i);f/=p*p,d=e+f*(n-e),u=i+f*(s-i);var g=this.getLineLength(o,r,d,u),m=Math.sqrt(t*t-g*g);h=Math.sqrt(m*m/(1+a*a)),e>n&&(h*=-1),l=a*h,c={x:d+h,y:u+l}}return c},Kinetic.Path.getPointOnCubicBezier=function(t,e,i,n,s,o,r,a,h){function c(t){return t*t*t}function l(t){return 3*t*t*(1-t)}function d(t){return 3*t*(1-t)*(1-t)}function u(t){return(1-t)*(1-t)*(1-t)}var p=a*c(t)+o*l(t)+n*d(t)+e*u(t),f=h*c(t)+r*l(t)+s*d(t)+i*u(t);return{x:p,y:f}},Kinetic.Path.getPointOnQuadraticBezier=function(t,e,i,n,s,o,r){function a(t){return t*t}function h(t){return 2*t*(1-t)}function c(t){return(1-t)*(1-t)}var l=o*a(t)+n*h(t)+e*c(t),d=r*a(t)+s*h(t)+i*c(t);return{x:l,y:d}},Kinetic.Path.getPointOnEllipticalArc=function(t,e,i,n,s,o){var r=Math.cos(o),a=Math.sin(o),h={x:i*Math.cos(s),y:n*Math.sin(s)};return{x:t+(h.x*r-h.y*a),y:e+(h.x*a+h.y*r)}},Kinetic.Path.parsePathData=function(t){if(!t)return[];var e=t,i=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];e=e.replace(new RegExp(" ","g"),",");for(var n=0;n<i.length;n++)e=e.replace(new RegExp(i[n],"g"),"|"+i[n]);var s=e.split("|"),o=[],r=0,a=0;for(n=1;n<s.length;n++){var h=s[n],c=h.charAt(0);h=h.slice(1),h=h.replace(new RegExp(",-","g"),"-"),h=h.replace(new RegExp("-","g"),",-"),h=h.replace(new RegExp("e,-","g"),"e-");var l=h.split(",");l.length>0&&""===l[0]&&l.shift();for(var d=0;d<l.length;d++)l[d]=parseFloat(l[d]);for(;l.length>0&&!isNaN(l[0]);){var u,p,f,g,m,v,y,b,x,w,_=null,S=[],C=r,T=a;switch(c){case"l":r+=l.shift(),a+=l.shift(),_="L",S.push(r,a);break;case"L":r=l.shift(),a=l.shift(),S.push(r,a);break;case"m":var D=l.shift(),M=l.shift();if(r+=D,a+=M,_="M",o.length>2&&"z"===o[o.length-1].command)for(var E=o.length-2;E>=0;E--)if("M"===o[E].command){r=o[E].points[0]+D,a=o[E].points[1]+M;break}S.push(r,a),c="l";break;case"M":r=l.shift(),a=l.shift(),_="M",S.push(r,a),c="L";break;case"h":r+=l.shift(),_="L",S.push(r,a);break;case"H":r=l.shift(),_="L",S.push(r,a);break;case"v":a+=l.shift(),_="L",S.push(r,a);break;case"V":a=l.shift(),_="L",S.push(r,a);break;case"C":S.push(l.shift(),l.shift(),l.shift(),l.shift()),r=l.shift(),a=l.shift(),S.push(r,a);break;case"c":S.push(r+l.shift(),a+l.shift(),r+l.shift(),a+l.shift()),r+=l.shift(),a+=l.shift(),_="C",S.push(r,a);break;case"S":p=r,f=a,u=o[o.length-1],"C"===u.command&&(p=r+(r-u.points[2]),f=a+(a-u.points[3])),S.push(p,f,l.shift(),l.shift()),r=l.shift(),a=l.shift(),_="C",S.push(r,a);break;case"s":p=r,f=a,u=o[o.length-1],"C"===u.command&&(p=r+(r-u.points[2]),f=a+(a-u.points[3])),S.push(p,f,r+l.shift(),a+l.shift()),r+=l.shift(),a+=l.shift(),_="C",S.push(r,a);break;case"Q":S.push(l.shift(),l.shift()),r=l.shift(),a=l.shift(),S.push(r,a);break;case"q":S.push(r+l.shift(),a+l.shift()),r+=l.shift(),a+=l.shift(),_="Q",S.push(r,a);break;case"T":p=r,f=a,u=o[o.length-1],"Q"===u.command&&(p=r+(r-u.points[0]),f=a+(a-u.points[1])),r=l.shift(),a=l.shift(),_="Q",S.push(p,f,r,a);break;case"t":p=r,f=a,u=o[o.length-1],"Q"===u.command&&(p=r+(r-u.points[0]),f=a+(a-u.points[1])),r+=l.shift(),a+=l.shift(),_="Q",S.push(p,f,r,a);break;case"A":g=l.shift(),m=l.shift(),v=l.shift(),y=l.shift(),b=l.shift(),x=r,w=a,r=l.shift(),a=l.shift(),_="A",S=this.convertEndpointToCenterParameterization(x,w,r,a,y,b,g,m,v);break;case"a":g=l.shift(),m=l.shift(),v=l.shift(),y=l.shift(),b=l.shift(),x=r,w=a,r+=l.shift(),a+=l.shift(),_="A",S=this.convertEndpointToCenterParameterization(x,w,r,a,y,b,g,m,v)}o.push({command:_||c,points:S,start:{x:C,y:T},pathLength:this.calcLength(C,T,_||c,S)})}("z"===c||"Z"===c)&&o.push({command:"z",points:[],start:void 0,pathLength:0})}return o},Kinetic.Path.calcLength=function(t,e,i,n){var s,o,r,a,h=Kinetic.Path;switch(i){case"L":return h.getLineLength(t,e,n[0],n[1]);case"C":for(s=0,o=h.getPointOnCubicBezier(0,t,e,n[0],n[1],n[2],n[3],n[4],n[5]),a=.01;1>=a;a+=.01)r=h.getPointOnCubicBezier(a,t,e,n[0],n[1],n[2],n[3],n[4],n[5]),s+=h.getLineLength(o.x,o.y,r.x,r.y),o=r;return s;case"Q":for(s=0,o=h.getPointOnQuadraticBezier(0,t,e,n[0],n[1],n[2],n[3]),a=.01;1>=a;a+=.01)r=h.getPointOnQuadraticBezier(a,t,e,n[0],n[1],n[2],n[3]),s+=h.getLineLength(o.x,o.y,r.x,r.y),o=r;return s;case"A":s=0;var c=n[4],l=n[5],d=n[4]+l,u=Math.PI/180;if(Math.abs(c-d)<u&&(u=Math.abs(c-d)),o=h.getPointOnEllipticalArc(n[0],n[1],n[2],n[3],c,0),0>l)for(a=c-u;a>d;a-=u)r=h.getPointOnEllipticalArc(n[0],n[1],n[2],n[3],a,0),s+=h.getLineLength(o.x,o.y,r.x,r.y),o=r;else for(a=c+u;d>a;a+=u)r=h.getPointOnEllipticalArc(n[0],n[1],n[2],n[3],a,0),s+=h.getLineLength(o.x,o.y,r.x,r.y),o=r;return r=h.getPointOnEllipticalArc(n[0],n[1],n[2],n[3],d,0),s+=h.getLineLength(o.x,o.y,r.x,r.y)}return 0},Kinetic.Path.convertEndpointToCenterParameterization=function(t,e,i,n,s,o,r,a,h){var c=h*(Math.PI/180),l=Math.cos(c)*(t-i)/2+Math.sin(c)*(e-n)/2,d=-1*Math.sin(c)*(t-i)/2+Math.cos(c)*(e-n)/2,u=l*l/(r*r)+d*d/(a*a);u>1&&(r*=Math.sqrt(u),a*=Math.sqrt(u));var p=Math.sqrt((r*r*a*a-r*r*d*d-a*a*l*l)/(r*r*d*d+a*a*l*l));s===o&&(p*=-1),isNaN(p)&&(p=0);var f=p*r*d/a,g=p*-a*l/r,m=(t+i)/2+Math.cos(c)*f-Math.sin(c)*g,v=(e+n)/2+Math.sin(c)*f+Math.cos(c)*g,y=function(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])},b=function(t,e){return(t[0]*e[0]+t[1]*e[1])/(y(t)*y(e))},x=function(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(b(t,e))},w=x([1,0],[(l-f)/r,(d-g)/a]),_=[(l-f)/r,(d-g)/a],S=[(-1*l-f)/r,(-1*d-g)/a],C=x(_,S);return b(_,S)<=-1&&(C=Math.PI),b(_,S)>=1&&(C=0),0===o&&C>0&&(C-=2*Math.PI),1===o&&0>C&&(C+=2*Math.PI),[m,v,r,a,w,C,c,o]},Kinetic.Factory.addGetterSetter(Kinetic.Path,"data"),Kinetic.Collection.mapMethods(Kinetic.Path)}(),function(){function t(t){t.fillText(this.partialText,0,0)}function e(t){t.strokeText(this.partialText,0,0)}var i="",n="normal";Kinetic.TextPath=function(t){this.___init(t)},Kinetic.TextPath.prototype={___init:function(i){var n=this;this.dummyCanvas=Kinetic.Util.createCanvasElement(),this.dataArray=[],Kinetic.Shape.call(this,i),this._fillFunc=t,this._strokeFunc=e,this._fillFuncHit=t,this._strokeFuncHit=e,this.className="TextPath",this.dataArray=Kinetic.Path.parsePathData(this.attrs.data),this.on("dataChange.kinetic",function(){n.dataArray=Kinetic.Path.parsePathData(this.attrs.data)}),this.on("textChange.kinetic textStroke.kinetic textStrokeWidth.kinetic",n._setTextData),n._setTextData(),this.sceneFunc(this._sceneFunc)
},_sceneFunc:function(t){t.setAttr("font",this._getContextFont()),t.setAttr("textBaseline","middle"),t.setAttr("textAlign","left"),t.save();for(var e=this.glyphInfo,i=0;i<e.length;i++){t.save();var n=e[i].p0;t.translate(n.x,n.y),t.rotate(e[i].rotation),this.partialText=e[i].text,t.fillStrokeShape(this),t.restore()}t.restore()},getTextWidth:function(){return this.textWidth},getTextHeight:function(){return this.textHeight},setText:function(t){Kinetic.Text.prototype.setText.call(this,t)},_getTextSize:function(t){var e=this.dummyCanvas,i=e.getContext("2d");i.save(),i.font=this._getContextFont();var n=i.measureText(t);return i.restore(),{width:n.width,height:parseInt(this.attrs.fontSize,10)}},_setTextData:function(){var t=this,e=this._getTextSize(this.attrs.text);this.textWidth=e.width,this.textHeight=e.height,this.glyphInfo=[];for(var i,n,s,o=this.attrs.text.split(""),r=-1,a=0,h=function(){a=0;for(var e=t.dataArray,n=r+1;n<e.length;n++){if(e[n].pathLength>0)return r=n,e[n];"M"==e[n].command&&(i={x:e[n].points[0],y:e[n].points[1]})}return{}},c=function(e){var o=t._getTextSize(e).width,r=0,c=0;for(n=void 0;Math.abs(o-r)/o>.01&&25>c;){c++;for(var l=r;void 0===s;)s=h(),s&&l+s.pathLength<o&&(l+=s.pathLength,s=void 0);if(s==={}||void 0===i)return void 0;var d=!1;switch(s.command){case"L":Kinetic.Path.getLineLength(i.x,i.y,s.points[0],s.points[1])>o?n=Kinetic.Path.getPointOnLine(o,i.x,i.y,s.points[0],s.points[1],i.x,i.y):s=void 0;break;case"A":var u=s.points[4],p=s.points[5],f=s.points[4]+p;0===a?a=u+1e-8:o>r?a+=Math.PI/180*p/Math.abs(p):a-=Math.PI/360*p/Math.abs(p),(0>p&&f>a||p>=0&&a>f)&&(a=f,d=!0),n=Kinetic.Path.getPointOnEllipticalArc(s.points[0],s.points[1],s.points[2],s.points[3],a,s.points[6]);break;case"C":0===a?a=o>s.pathLength?1e-8:o/s.pathLength:o>r?a+=(o-r)/s.pathLength:a-=(r-o)/s.pathLength,a>1&&(a=1,d=!0),n=Kinetic.Path.getPointOnCubicBezier(a,s.start.x,s.start.y,s.points[0],s.points[1],s.points[2],s.points[3],s.points[4],s.points[5]);break;case"Q":0===a?a=o/s.pathLength:o>r?a+=(o-r)/s.pathLength:a-=(r-o)/s.pathLength,a>1&&(a=1,d=!0),n=Kinetic.Path.getPointOnQuadraticBezier(a,s.start.x,s.start.y,s.points[0],s.points[1],s.points[2],s.points[3])}void 0!==n&&(r=Kinetic.Path.getLineLength(i.x,i.y,n.x,n.y)),d&&(d=!1,s=void 0)}},l=0;l<o.length&&(c(o[l]),void 0!==i&&void 0!==n);l++){var d=Kinetic.Path.getLineLength(i.x,i.y,n.x,n.y),u=0,p=Kinetic.Path.getPointOnLine(u+d/2,i.x,i.y,n.x,n.y),f=Math.atan2(n.y-i.y,n.x-i.x);this.glyphInfo.push({transposeX:p.x,transposeY:p.y,text:o[l],rotation:f,p0:i,p1:n}),i=n}}},Kinetic.TextPath.prototype._getContextFont=Kinetic.Text.prototype._getContextFont,Kinetic.Util.extend(Kinetic.TextPath,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.TextPath,"fontFamily","Arial"),Kinetic.Factory.addGetterSetter(Kinetic.TextPath,"fontSize",12),Kinetic.Factory.addGetterSetter(Kinetic.TextPath,"fontStyle",n),Kinetic.Factory.addGetterSetter(Kinetic.TextPath,"fontVariant",n),Kinetic.Factory.addGetter(Kinetic.TextPath,"text",i),Kinetic.Collection.mapMethods(Kinetic.TextPath)}(),function(){Kinetic.RegularPolygon=function(t){this.___init(t)},Kinetic.RegularPolygon.prototype={___init:function(t){Kinetic.Shape.call(this,t),this.className="RegularPolygon",this.sceneFunc(this._sceneFunc)},_sceneFunc:function(t){var e,i,n,s=this.attrs.sides,o=this.attrs.radius;for(t.beginPath(),t.moveTo(0,0-o),e=1;s>e;e++)i=o*Math.sin(2*e*Math.PI/s),n=-1*o*Math.cos(2*e*Math.PI/s),t.lineTo(i,n);t.closePath(),t.fillStrokeShape(this)}},Kinetic.Util.extend(Kinetic.RegularPolygon,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.RegularPolygon,"radius",0),Kinetic.Factory.addGetterSetter(Kinetic.RegularPolygon,"sides",0),Kinetic.Collection.mapMethods(Kinetic.RegularPolygon)}(),function(){Kinetic.Star=function(t){this.___init(t)},Kinetic.Star.prototype={___init:function(t){Kinetic.Shape.call(this,t),this.className="Star",this.sceneFunc(this._sceneFunc)},_sceneFunc:function(t){var e=this.innerRadius(),i=this.outerRadius(),n=this.numPoints();t.beginPath(),t.moveTo(0,0-i);for(var s=1;2*n>s;s++){var o=s%2===0?i:e,r=o*Math.sin(s*Math.PI/n),a=-1*o*Math.cos(s*Math.PI/n);t.lineTo(r,a)}t.closePath(),t.fillStrokeShape(this)}},Kinetic.Util.extend(Kinetic.Star,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Star,"numPoints",5),Kinetic.Factory.addGetterSetter(Kinetic.Star,"innerRadius",0),Kinetic.Factory.addGetterSetter(Kinetic.Star,"outerRadius",0),Kinetic.Collection.mapMethods(Kinetic.Star)}(),function(){var t=["fontFamily","fontSize","fontStyle","padding","lineHeight","text"],e="Change.kinetic",i="none",n="up",s="right",o="down",r="left",a="Label",h=t.length;Kinetic.Label=function(t){this.____init(t)},Kinetic.Label.prototype={____init:function(t){var e=this;this.className=a,Kinetic.Group.call(this,t),this.on("add.kinetic",function(t){e._addListeners(t.child),e._sync()})},getText:function(){return this.find("Text")[0]},getTag:function(){return this.find("Tag")[0]},_addListeners:function(i){var n,s=this,o=function(){s._sync()};for(n=0;h>n;n++)i.on(t[n]+e,o)},getWidth:function(){return this.getText().getWidth()},getHeight:function(){return this.getText().getHeight()},_sync:function(){var t,e,i,a,h,c,l,d=this.getText(),u=this.getTag();if(d&&u){switch(t=d.getWidth(),e=d.getHeight(),i=u.getPointerDirection(),a=u.getPointerWidth(),l=u.getPointerHeight(),h=0,c=0,i){case n:h=t/2,c=-1*l;break;case s:h=t+a,c=e/2;break;case o:h=t/2,c=e+l;break;case r:h=-1*a,c=e/2}u.setAttrs({x:-1*h,y:-1*c,width:t,height:e}),d.setAttrs({x:-1*h,y:-1*c})}}},Kinetic.Util.extend(Kinetic.Label,Kinetic.Group),Kinetic.Collection.mapMethods(Kinetic.Label),Kinetic.Tag=function(t){this.___init(t)},Kinetic.Tag.prototype={___init:function(t){Kinetic.Shape.call(this,t),this.className="Tag",this.sceneFunc(this._sceneFunc)},_sceneFunc:function(t){var e=this.getWidth(),i=this.getHeight(),a=this.getPointerDirection(),h=this.getPointerWidth(),c=this.getPointerHeight();t.beginPath(),t.moveTo(0,0),a===n&&(t.lineTo((e-h)/2,0),t.lineTo(e/2,-1*c),t.lineTo((e+h)/2,0)),t.lineTo(e,0),a===s&&(t.lineTo(e,(i-c)/2),t.lineTo(e+h,i/2),t.lineTo(e,(i+c)/2)),t.lineTo(e,i),a===o&&(t.lineTo((e+h)/2,i),t.lineTo(e/2,i+c),t.lineTo((e-h)/2,i)),t.lineTo(0,i),a===r&&(t.lineTo(0,(i+c)/2),t.lineTo(-1*h,i/2),t.lineTo(0,(i-c)/2)),t.closePath(),t.fillStrokeShape(this)}},Kinetic.Util.extend(Kinetic.Tag,Kinetic.Shape),Kinetic.Factory.addGetterSetter(Kinetic.Tag,"pointerDirection",i),Kinetic.Factory.addGetterSetter(Kinetic.Tag,"pointerWidth",0),Kinetic.Factory.addGetterSetter(Kinetic.Tag,"pointerHeight",0),Kinetic.Factory.addGetterSetter(Kinetic.Tag,"cornerRadius",0),Kinetic.Collection.mapMethods(Kinetic.Tag)}(),function(t,e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof exports?module.exports=e(require("jquery")):e(t.jQuery)}(this,function($){function t(t){if(t in l.style)return t;for(var e=["Moz","Webkit","O","ms"],i=t.charAt(0).toUpperCase()+t.substr(1),n=0;n<e.length;++n){var s=e[n]+i;if(s in l.style)return s}}function e(){return l.style[d.transform]="",l.style[d.transform]="rotateY(90deg)",""!==l.style[d.transform]}function i(t){return"string"==typeof t&&this.parse(t),this}function n(t,e,i){e===!0?t.queue(i):e?t.queue(e,i):t.each(function(){i.call(this)})}function s(t){var e=[];return $.each(t,function(t){t=$.camelCase(t),t=$.transit.propertyMap[t]||$.cssProps[t]||t,t=a(t),d[t]&&(t=a(d[t])),-1===$.inArray(t,e)&&e.push(t)}),e}function o(t,e,i,n){var o=s(t);$.cssEase[i]&&(i=$.cssEase[i]);var r=""+c(e)+" "+i;parseInt(n,10)>0&&(r+=" "+c(n));var a=[];return $.each(o,function(t,e){a.push(e+" "+r)}),a.join(", ")}function r(t,e){e||($.cssNumber[t]=!0),$.transit.propertyMap[t]=d.transform,$.cssHooks[t]={get:function(e){var i=$(e).css("transit:transform");return i.get(t)},set:function(e,i){var n=$(e).css("transit:transform");n.setFromString(t,i),$(e).css({"transit:transform":n})}}}function a(t){return t.replace(/([A-Z])/g,function(t){return"-"+t.toLowerCase()})}function h(t,e){return"string"!=typeof t||t.match(/^[\-0-9\.]+$/)?""+t+e:t}function c(t){var e=t;return"string"!=typeof e||e.match(/^[\-0-9\.]+/)||(e=$.fx.speeds[e]||$.fx.speeds._default),h(e,"ms")}$.transit={version:"0.9.12",propertyMap:{marginLeft:"margin",marginRight:"margin",marginBottom:"margin",marginTop:"margin",paddingLeft:"padding",paddingRight:"padding",paddingBottom:"padding",paddingTop:"padding"},enabled:!0,useTransitionEnd:!1};var l=document.createElement("div"),d={},u=navigator.userAgent.toLowerCase().indexOf("chrome")>-1;d.transition=t("transition"),d.transitionDelay=t("transitionDelay"),d.transform=t("transform"),d.transformOrigin=t("transformOrigin"),d.filter=t("Filter"),d.transform3d=e();var p={transition:"transitionend",MozTransition:"transitionend",OTransition:"oTransitionEnd",WebkitTransition:"webkitTransitionEnd",msTransition:"MSTransitionEnd"},f=d.transitionEnd=p[d.transition]||null;for(var g in d)d.hasOwnProperty(g)&&"undefined"==typeof $.support[g]&&($.support[g]=d[g]);return l=null,$.cssEase={_default:"ease","in":"ease-in",out:"ease-out","in-out":"ease-in-out",snap:"cubic-bezier(0,1,.5,1)",easeInCubic:"cubic-bezier(.550,.055,.675,.190)",easeOutCubic:"cubic-bezier(.215,.61,.355,1)",easeInOutCubic:"cubic-bezier(.645,.045,.355,1)",easeInCirc:"cubic-bezier(.6,.04,.98,.335)",easeOutCirc:"cubic-bezier(.075,.82,.165,1)",easeInOutCirc:"cubic-bezier(.785,.135,.15,.86)",easeInExpo:"cubic-bezier(.95,.05,.795,.035)",easeOutExpo:"cubic-bezier(.19,1,.22,1)",easeInOutExpo:"cubic-bezier(1,0,0,1)",easeInQuad:"cubic-bezier(.55,.085,.68,.53)",easeOutQuad:"cubic-bezier(.25,.46,.45,.94)",easeInOutQuad:"cubic-bezier(.455,.03,.515,.955)",easeInQuart:"cubic-bezier(.895,.03,.685,.22)",easeOutQuart:"cubic-bezier(.165,.84,.44,1)",easeInOutQuart:"cubic-bezier(.77,0,.175,1)",easeInQuint:"cubic-bezier(.755,.05,.855,.06)",easeOutQuint:"cubic-bezier(.23,1,.32,1)",easeInOutQuint:"cubic-bezier(.86,0,.07,1)",easeInSine:"cubic-bezier(.47,0,.745,.715)",easeOutSine:"cubic-bezier(.39,.575,.565,1)",easeInOutSine:"cubic-bezier(.445,.05,.55,.95)",easeInBack:"cubic-bezier(.6,-.28,.735,.045)",easeOutBack:"cubic-bezier(.175, .885,.32,1.275)",easeInOutBack:"cubic-bezier(.68,-.55,.265,1.55)"},$.cssHooks["transit:transform"]={get:function(t){return $(t).data("transform")||new i},set:function(t,e){var n=e;n instanceof i||(n=new i(n)),t.style[d.transform]="WebkitTransform"!==d.transform||u?n.toString():n.toString(!0),$(t).data("transform",n)}},$.cssHooks.transform={set:$.cssHooks["transit:transform"].set},$.cssHooks.filter={get:function(t){return t.style[d.filter]},set:function(t,e){t.style[d.filter]=e}},$.fn.jquery<"1.8"&&($.cssHooks.transformOrigin={get:function(t){return t.style[d.transformOrigin]},set:function(t,e){t.style[d.transformOrigin]=e}},$.cssHooks.transition={get:function(t){return t.style[d.transition]},set:function(t,e){t.style[d.transition]=e}}),r("scale"),r("scaleX"),r("scaleY"),r("translate"),r("rotate"),r("rotateX"),r("rotateY"),r("rotate3d"),r("perspective"),r("skewX"),r("skewY"),r("x",!0),r("y",!0),i.prototype={setFromString:function(t,e){var n="string"==typeof e?e.split(","):e.constructor===Array?e:[e];n.unshift(t),i.prototype.set.apply(this,n)},set:function(t){var e=Array.prototype.slice.apply(arguments,[1]);this.setter[t]?this.setter[t].apply(this,e):this[t]=e.join(",")},get:function(t){return this.getter[t]?this.getter[t].apply(this):this[t]||0},setter:{rotate:function(t){this.rotate=h(t,"deg")},rotateX:function(t){this.rotateX=h(t,"deg")},rotateY:function(t){this.rotateY=h(t,"deg")},scale:function(t,e){void 0===e&&(e=t),this.scale=t+","+e},skewX:function(t){this.skewX=h(t,"deg")},skewY:function(t){this.skewY=h(t,"deg")},perspective:function(t){this.perspective=h(t,"px")},x:function(t){this.set("translate",t,null)},y:function(t){this.set("translate",null,t)},translate:function(t,e){void 0===this._translateX&&(this._translateX=0),void 0===this._translateY&&(this._translateY=0),null!==t&&void 0!==t&&(this._translateX=h(t,"px")),null!==e&&void 0!==e&&(this._translateY=h(e,"px")),this.translate=this._translateX+","+this._translateY}},getter:{x:function(){return this._translateX||0},y:function(){return this._translateY||0},scale:function(){var t=(this.scale||"1,1").split(",");return t[0]&&(t[0]=parseFloat(t[0])),t[1]&&(t[1]=parseFloat(t[1])),t[0]===t[1]?t[0]:t},rotate3d:function(){for(var t=(this.rotate3d||"0,0,0,0deg").split(","),e=0;3>=e;++e)t[e]&&(t[e]=parseFloat(t[e]));return t[3]&&(t[3]=h(t[3],"deg")),t}},parse:function(t){var e=this;t.replace(/([a-zA-Z0-9]+)\((.*?)\)/g,function(t,i,n){e.setFromString(i,n)})},toString:function(t){var e=[];for(var i in this)if(this.hasOwnProperty(i)){if(!d.transform3d&&("rotateX"===i||"rotateY"===i||"perspective"===i||"transformOrigin"===i))continue;"_"!==i[0]&&e.push(t&&"scale"===i?i+"3d("+this[i]+",1)":t&&"translate"===i?i+"3d("+this[i]+",0)":i+"("+this[i]+")")}return e.join(" ")}},$.fn.transition=$.fn.transit=function(t,e,i,s){var r=this,a=0,h=!0,l=$.extend(!0,{},t);"function"==typeof e&&(s=e,e=void 0),"object"==typeof e&&(i=e.easing,a=e.delay||0,h="undefined"==typeof e.queue?!0:e.queue,s=e.complete,e=e.duration),"function"==typeof i&&(s=i,i=void 0),"undefined"!=typeof l.easing&&(i=l.easing,delete l.easing),"undefined"!=typeof l.duration&&(e=l.duration,delete l.duration),"undefined"!=typeof l.complete&&(s=l.complete,delete l.complete),"undefined"!=typeof l.queue&&(h=l.queue,delete l.queue),"undefined"!=typeof l.delay&&(a=l.delay,delete l.delay),"undefined"==typeof e&&(e=$.fx.speeds._default),"undefined"==typeof i&&(i=$.cssEase._default),e=c(e);var u=o(l,e,i,a),p=$.transit.enabled&&d.transition,g=p?parseInt(e,10)+parseInt(a,10):0;if(0===g){var m=function(t){r.css(l),s&&s.apply(r),t&&t()};return n(r,h,m),r}var v={},y=function(t){var e=!1,i=function(){e&&r.unbind(f,i),g>0&&r.each(function(){this.style[d.transition]=v[this]||null}),"function"==typeof s&&s.apply(r),"function"==typeof t&&t()};g>0&&f&&$.transit.useTransitionEnd?(e=!0,r.bind(f,i)):window.setTimeout(i,g),r.each(function(){g>0&&(this.style[d.transition]=u),$(this).css(l)})},b=function(t){this.offsetWidth,y(t)};return n(r,h,b),this},$.transit.getTransitionValue=o,$}),/**
 * vis.js
 * https://github.com/almende/vis
 *
 * A dynamic, browser-based visualization library.
 *
 * @version 3.1.0
 * @date    2014-07-22
 *
 * @license
 * Copyright (C) 2011-2014 Almende B.V, http://almende.com
 *
 * Licensed under the Apache License, Version 2.0 (the "License"); you may not
 * use this file except in compliance with the License. You may obtain a copy
 * of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS, WITHOUT
 * WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
 * License for the specific language governing permissions and limitations under
 * the License.
 */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):"object"==typeof exports?exports.vis=e():t.vis=e()}(this,function(){return function(t){function e(n){if(i[n])return i[n].exports;var s=i[n]={exports:{},id:n,loaded:!1};return t[n].call(s.exports,s,s.exports,e),s.loaded=!0,s.exports}var i={};return e.m=t,e.c=i,e.p="",e(0)}([function(t,e,i){e.util=i(1),e.DOMutil=i(2),e.DataSet=i(3),e.DataView=i(4),e.Graph3d=i(5),e.graph3d={Camera:i(6),Filter:i(7),Point2d:i(8),Point3d:i(9),Slider:i(10),StepNumber:i(11)},e.Timeline=i(12),e.Graph2d=i(13),e.timeline={DataStep:i(14),Range:i(15),stack:i(16),TimeStep:i(17),components:{items:{Item:i(28),ItemBox:i(29),ItemPoint:i(30),ItemRange:i(31)},Component:i(18),CurrentTime:i(19),CustomTime:i(20),DataAxis:i(21),GraphGroup:i(22),Group:i(23),ItemSet:i(24),Legend:i(25),LineGraph:i(26),TimeAxis:i(27)}},e.Network=i(32),e.network={Edge:i(33),Groups:i(34),Images:i(35),Node:i(36),Popup:i(37),dotparser:i(38),gephiParser:i(39)},e.Graph=function(){throw new Error("Graph is renamed to Network. Please create a graph as new vis.Network(...)")},e.moment=i(40),e.hammer=i(41)},function(module,exports,__webpack_require__){var moment=__webpack_require__(40);exports.isNumber=function(t){return t instanceof Number||"number"==typeof t},exports.isString=function(t){return t instanceof String||"string"==typeof t},exports.isDate=function(t){if(t instanceof Date)return!0;if(exports.isString(t)){var e=ASPDateRegex.exec(t);if(e)return!0;if(!isNaN(Date.parse(t)))return!0}return!1},exports.isDataTable=function(t){return"undefined"!=typeof google&&google.visualization&&google.visualization.DataTable&&t instanceof google.visualization.DataTable},exports.randomUUID=function(){var t=function(){return Math.floor(65536*Math.random()).toString(16)};return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()},exports.extend=function(t){for(var e=1,i=arguments.length;i>e;e++){var n=arguments[e];for(var s in n)n.hasOwnProperty(s)&&(t[s]=n[s])}return t},exports.selectiveExtend=function(t,e){if(!Array.isArray(t))throw new Error("Array with property names expected as first argument");for(var i=2;i<arguments.length;i++)for(var n=arguments[i],s=0;s<t.length;s++){var o=t[s];n.hasOwnProperty(o)&&(e[o]=n[o])}return e},exports.selectiveDeepExtend=function(t,e,i){if(Array.isArray(i))throw new TypeError("Arrays are not supported by deepExtend");for(var n=2;n<arguments.length;n++)for(var s=arguments[n],o=0;o<t.length;o++){var r=t[o];if(s.hasOwnProperty(r))if(i[r]&&i[r].constructor===Object)void 0===e[r]&&(e[r]={}),e[r].constructor===Object?exports.deepExtend(e[r],i[r]):e[r]=i[r];else{if(Array.isArray(i[r]))throw new TypeError("Arrays are not supported by deepExtend");e[r]=i[r]}}return e},exports.deepExtend=function(t,e){if(Array.isArray(e))throw new TypeError("Arrays are not supported by deepExtend");for(var i in e)if(e.hasOwnProperty(i))if(e[i]&&e[i].constructor===Object)void 0===t[i]&&(t[i]={}),t[i].constructor===Object?exports.deepExtend(t[i],e[i]):t[i]=e[i];else{if(Array.isArray(e[i]))throw new TypeError("Arrays are not supported by deepExtend");t[i]=e[i]}return t},exports.equalArray=function(t,e){if(t.length!=e.length)return!1;for(var i=0,n=t.length;n>i;i++)if(t[i]!=e[i])return!1;return!0},exports.convert=function(t,e){var i;if(void 0===t)return void 0;if(null===t)return null;if(!e)return t;if("string"!=typeof e&&!(e instanceof String))throw new Error("Type must be a string");switch(e){case"boolean":case"Boolean":return Boolean(t);case"number":case"Number":return Number(t.valueOf());case"string":case"String":return String(t);case"Date":if(exports.isNumber(t))return new Date(t);if(t instanceof Date)return new Date(t.valueOf());if(moment.isMoment(t))return new Date(t.valueOf());if(exports.isString(t))return i=ASPDateRegex.exec(t),i?new Date(Number(i[1])):moment(t).toDate();throw new Error("Cannot convert object of type "+exports.getType(t)+" to type Date");case"Moment":if(exports.isNumber(t))return moment(t);if(t instanceof Date)return moment(t.valueOf());if(moment.isMoment(t))return moment(t);if(exports.isString(t))return i=ASPDateRegex.exec(t),moment(i?Number(i[1]):t);throw new Error("Cannot convert object of type "+exports.getType(t)+" to type Date");case"ISODate":if(exports.isNumber(t))return new Date(t);if(t instanceof Date)return t.toISOString();if(moment.isMoment(t))return t.toDate().toISOString();if(exports.isString(t))return i=ASPDateRegex.exec(t),i?new Date(Number(i[1])).toISOString():new Date(t).toISOString();throw new Error("Cannot convert object of type "+exports.getType(t)+" to type ISODate");case"ASPDate":if(exports.isNumber(t))return"/Date("+t+")/";if(t instanceof Date)return"/Date("+t.valueOf()+")/";if(exports.isString(t)){i=ASPDateRegex.exec(t);var n;return n=i?new Date(Number(i[1])).valueOf():new Date(t).valueOf(),"/Date("+n+")/"}throw new Error("Cannot convert object of type "+exports.getType(t)+" to type ASPDate");default:throw new Error('Unknown type "'+e+'"')}};var ASPDateRegex=/^\/?Date\((\-?\d+)/i;exports.getType=function(t){var e=typeof t;return"object"==e?null==t?"null":t instanceof Boolean?"Boolean":t instanceof Number?"Number":t instanceof String?"String":t instanceof Array?"Array":t instanceof Date?"Date":"Object":"number"==e?"Number":"boolean"==e?"Boolean":"string"==e?"String":e},exports.getAbsoluteLeft=function(t){return t.getBoundingClientRect().left+window.pageXOffset},exports.getAbsoluteTop=function(t){return t.getBoundingClientRect().top+window.pageYOffset},exports.addClassName=function(t,e){var i=t.className.split(" ");-1==i.indexOf(e)&&(i.push(e),t.className=i.join(" "))},exports.removeClassName=function(t,e){var i=t.className.split(" "),n=i.indexOf(e);-1!=n&&(i.splice(n,1),t.className=i.join(" "))},exports.forEach=function(t,e){var i,n;if(t instanceof Array)for(i=0,n=t.length;n>i;i++)e(t[i],i,t);else for(i in t)t.hasOwnProperty(i)&&e(t[i],i,t)},exports.toArray=function(t){var e=[];for(var i in t)t.hasOwnProperty(i)&&e.push(t[i]);return e},exports.updateProperty=function(t,e,i){return t[e]!==i?(t[e]=i,!0):!1},exports.addEventListener=function(t,e,i,n){t.addEventListener?(void 0===n&&(n=!1),"mousewheel"===e&&navigator.userAgent.indexOf("Firefox")>=0&&(e="DOMMouseScroll"),t.addEventListener(e,i,n)):t.attachEvent("on"+e,i)},exports.removeEventListener=function(t,e,i,n){t.removeEventListener?(void 0===n&&(n=!1),"mousewheel"===e&&navigator.userAgent.indexOf("Firefox")>=0&&(e="DOMMouseScroll"),t.removeEventListener(e,i,n)):t.detachEvent("on"+e,i)},exports.preventDefault=function(t){t||(t=window.event),t.preventDefault?t.preventDefault():t.returnValue=!1},exports.getTarget=function(t){t||(t=window.event);var e;return t.target?e=t.target:t.srcElement&&(e=t.srcElement),void 0!=e.nodeType&&3==e.nodeType&&(e=e.parentNode),e},exports.option={},exports.option.asBoolean=function(t,e){return"function"==typeof t&&(t=t()),null!=t?0!=t:e||null},exports.option.asNumber=function(t,e){return"function"==typeof t&&(t=t()),null!=t?Number(t)||e||null:e||null},exports.option.asString=function(t,e){return"function"==typeof t&&(t=t()),null!=t?String(t):e||null},exports.option.asSize=function(t,e){return"function"==typeof t&&(t=t()),exports.isString(t)?t:exports.isNumber(t)?t+"px":e||null},exports.option.asElement=function(t,e){return"function"==typeof t&&(t=t()),t||e||null},exports.GiveDec=function(Hex){var Value;return Value="A"==Hex?10:"B"==Hex?11:"C"==Hex?12:"D"==Hex?13:"E"==Hex?14:"F"==Hex?15:eval(Hex)},exports.GiveHex=function(t){var e;return e=10==t?"A":11==t?"B":12==t?"C":13==t?"D":14==t?"E":15==t?"F":""+t},exports.parseColor=function(t){var e;if(exports.isString(t)){if(exports.isValidRGB(t)){var i=t.substr(4).substr(0,t.length-5).split(",");t=exports.RGBToHex(i[0],i[1],i[2])}if(exports.isValidHex(t)){var n=exports.hexToHSV(t),s={h:n.h,s:.45*n.s,v:Math.min(1,1.05*n.v)},o={h:n.h,s:Math.min(1,1.25*n.v),v:.6*n.v},r=exports.HSVToHex(o.h,o.h,o.v),a=exports.HSVToHex(s.h,s.s,s.v);e={background:t,border:r,highlight:{background:a,border:r},hover:{background:a,border:r}}}else e={background:t,border:t,highlight:{background:t,border:t},hover:{background:t,border:t}}}else e={},e.background=t.background||"white",e.border=t.border||e.background,exports.isString(t.highlight)?e.highlight={border:t.highlight,background:t.highlight}:(e.highlight={},e.highlight.background=t.highlight&&t.highlight.background||e.background,e.highlight.border=t.highlight&&t.highlight.border||e.border),exports.isString(t.hover)?e.hover={border:t.hover,background:t.hover}:(e.hover={},e.hover.background=t.hover&&t.hover.background||e.background,e.hover.border=t.hover&&t.hover.border||e.border);return e},exports.hexToRGB=function(t){t=t.replace("#","").toUpperCase();var e=exports.GiveDec(t.substring(0,1)),i=exports.GiveDec(t.substring(1,2)),n=exports.GiveDec(t.substring(2,3)),s=exports.GiveDec(t.substring(3,4)),o=exports.GiveDec(t.substring(4,5)),r=exports.GiveDec(t.substring(5,6)),a=16*e+i,h=16*n+s,i=16*o+r;return{r:a,g:h,b:i}},exports.RGBToHex=function(t,e,i){var n=exports.GiveHex(Math.floor(t/16)),s=exports.GiveHex(t%16),o=exports.GiveHex(Math.floor(e/16)),r=exports.GiveHex(e%16),a=exports.GiveHex(Math.floor(i/16)),h=exports.GiveHex(i%16),c=n+s+o+r+a+h;return"#"+c},exports.RGBToHSV=function(t,e,i){t/=255,e/=255,i/=255;var n=Math.min(t,Math.min(e,i)),s=Math.max(t,Math.max(e,i));if(n==s)return{h:0,s:0,v:n};var o=t==n?e-i:i==n?t-e:i-t,r=t==n?3:i==n?1:5,a=60*(r-o/(s-n))/360,h=(s-n)/s,c=s;return{h:a,s:h,v:c}},exports.HSVToRGB=function(t,e,i){var n,s,o,r=Math.floor(6*t),a=6*t-r,h=i*(1-e),c=i*(1-a*e),l=i*(1-(1-a)*e);switch(r%6){case 0:n=i,s=l,o=h;break;case 1:n=c,s=i,o=h;break;case 2:n=h,s=i,o=l;break;case 3:n=h,s=c,o=i;break;case 4:n=l,s=h,o=i;break;case 5:n=i,s=h,o=c}return{r:Math.floor(255*n),g:Math.floor(255*s),b:Math.floor(255*o)}},exports.HSVToHex=function(t,e,i){var n=exports.HSVToRGB(t,e,i);return exports.RGBToHex(n.r,n.g,n.b)},exports.hexToHSV=function(t){var e=exports.hexToRGB(t);return exports.RGBToHSV(e.r,e.g,e.b)},exports.isValidHex=function(t){var e=/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)/i.test(t);return e},exports.isValidRGB=function(t){t=t.replace(" ","");var e=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/i.test(t);return e},exports.selectiveBridgeObject=function(t,e){if("object"==typeof e){for(var i=Object.create(e),n=0;n<t.length;n++)e.hasOwnProperty(t[n])&&"object"==typeof e[t[n]]&&(i[t[n]]=exports.bridgeObject(e[t[n]]));return i}return null},exports.bridgeObject=function(t){if("object"==typeof t){var e=Object.create(t);for(var i in t)t.hasOwnProperty(i)&&"object"==typeof t[i]&&(e[i]=exports.bridgeObject(t[i]));return e}return null},exports.mergeOptions=function(t,e,i){if(void 0!==e[i])if("boolean"==typeof e[i])t[i].enabled=e[i];else{t[i].enabled=!0;for(prop in e[i])e[i].hasOwnProperty(prop)&&(t[i][prop]=e[i][prop])}},exports.mergeOptions=function(t,e,i){if(void 0!==e[i])if("boolean"==typeof e[i])t[i].enabled=e[i];else{t[i].enabled=!0;for(prop in e[i])e[i].hasOwnProperty(prop)&&(t[i][prop]=e[i][prop])}},exports.binarySearch=function(t,e,i,n){var s,o=t,r=1e4,a=0,h=!1,c=0,l=o.length,d=c,u=l,p=Math.floor(.5*(l+c));if(0==l)p=-1;else if(1==l)p=o[p].isVisible(e)?0:-1;else{for(l-=1;0==h&&r>a;)s=void 0===n?o[p][i]:o[p][i][n],o[p].isVisible(e)?h=!0:(s<e.start?d=Math.floor(.5*(l+c)):u=Math.floor(.5*(l+c)),c==d&&l==u?(p=-1,h=!0):(l=u,c=d,p=Math.floor(.5*(l+c)))),a++;a>=r&&console.log("BinarySearch too many iterations. Aborting.")}return p},exports.binarySearchGeneric=function(t,e,i,n){var s,o,r,a,h=1e4,c=0,l=t,d=!1,u=0,p=l.length,f=u,g=p,m=Math.floor(.5*(p+u));if(0==p)m=-1;else if(1==p)r=l[m][i],m=r==e?0:-1;else{for(p-=1;0==d&&h>c;)o=l[Math.max(0,m-1)][i],r=l[m][i],a=l[Math.min(l.length-1,m+1)][i],r==e||e>o&&r>e||e>r&&a>e?(d=!0,r!=e&&("before"==n?e>o&&r>e&&(m=Math.max(0,m-1)):e>r&&a>e&&(m=Math.min(l.length-1,m+1)))):(e>r?f=Math.floor(.5*(p+u)):g=Math.floor(.5*(p+u)),s=Math.floor(.5*(p+u)),u==f&&p==g?(m=-1,d=!0):(p=g,u=f,m=Math.floor(.5*(p+u)))),c++;c>=h&&console.log("BinarySearch too many iterations. Aborting.")}return m}},function(t,e){e.prepareElements=function(t){for(var e in t)t.hasOwnProperty(e)&&(t[e].redundant=t[e].used,t[e].used=[])},e.cleanupElements=function(t){for(var e in t)if(t.hasOwnProperty(e)&&t[e].redundant){for(var i=0;i<t[e].redundant.length;i++)t[e].redundant[i].parentNode.removeChild(t[e].redundant[i]);t[e].redundant=[]}},e.getSVGElement=function(t,e,i){var n;return e.hasOwnProperty(t)?e[t].redundant.length>0?(n=e[t].redundant[0],e[t].redundant.shift()):(n=document.createElementNS("http://www.w3.org/2000/svg",t),i.appendChild(n)):(n=document.createElementNS("http://www.w3.org/2000/svg",t),e[t]={used:[],redundant:[]},i.appendChild(n)),e[t].used.push(n),n},e.getDOMElement=function(t,e,i){var n;return e.hasOwnProperty(t)?e[t].redundant.length>0?(n=e[t].redundant[0],e[t].redundant.shift()):(n=document.createElement(t),i.appendChild(n)):(n=document.createElement(t),e[t]={used:[],redundant:[]},i.appendChild(n)),e[t].used.push(n),n},e.drawPoint=function(t,i,n,s,o){var r;return"circle"==n.options.drawPoints.style?(r=e.getSVGElement("circle",s,o),r.setAttributeNS(null,"cx",t),r.setAttributeNS(null,"cy",i),r.setAttributeNS(null,"r",.5*n.options.drawPoints.size),r.setAttributeNS(null,"class",n.className+" point")):(r=e.getSVGElement("rect",s,o),r.setAttributeNS(null,"x",t-.5*n.options.drawPoints.size),r.setAttributeNS(null,"y",i-.5*n.options.drawPoints.size),r.setAttributeNS(null,"width",n.options.drawPoints.size),r.setAttributeNS(null,"height",n.options.drawPoints.size),r.setAttributeNS(null,"class",n.className+" point")),r},e.drawBar=function(t,i,n,s,o,r,a){var h=e.getSVGElement("rect",r,a);h.setAttributeNS(null,"x",t-.5*n),h.setAttributeNS(null,"y",i),h.setAttributeNS(null,"width",n),h.setAttributeNS(null,"height",s),h.setAttributeNS(null,"class",o)}},function(t,e,i){function n(t,e){if(!t||Array.isArray(t)||s.isDataTable(t)||(e=t,t=null),this._options=e||{},this._data={},this._fieldId=this._options.fieldId||"id",this._type={},this._options.type)for(var i in this._options.type)if(this._options.type.hasOwnProperty(i)){var n=this._options.type[i];this._type[i]="Date"==n||"ISODate"==n||"ASPDate"==n?"Date":n}if(this._options.convert)throw new Error('Option "convert" is deprecated. Use "type" instead.');this._subscribers={},t&&this.add(t)}var s=i(1);n.prototype.on=function(t,e){var i=this._subscribers[t];i||(i=[],this._subscribers[t]=i),i.push({callback:e})},n.prototype.subscribe=n.prototype.on,n.prototype.off=function(t,e){var i=this._subscribers[t];i&&(this._subscribers[t]=i.filter(function(t){return t.callback!=e}))},n.prototype.unsubscribe=n.prototype.off,n.prototype._trigger=function(t,e,i){if("*"==t)throw new Error("Cannot trigger event *");var n=[];t in this._subscribers&&(n=n.concat(this._subscribers[t])),"*"in this._subscribers&&(n=n.concat(this._subscribers["*"]));for(var s=0;s<n.length;s++){var o=n[s];o.callback&&o.callback(t,e,i||null)}},n.prototype.add=function(t,e){var i,n=[],o=this;if(Array.isArray(t))for(var r=0,a=t.length;a>r;r++)i=o._addItem(t[r]),n.push(i);else if(s.isDataTable(t))for(var h=this._getColumnNames(t),c=0,l=t.getNumberOfRows();l>c;c++){for(var d={},u=0,p=h.length;p>u;u++){var f=h[u];d[f]=t.getValue(c,u)}i=o._addItem(d),n.push(i)}else{if(!(t instanceof Object))throw new Error("Unknown dataType");i=o._addItem(t),n.push(i)}return n.length&&this._trigger("add",{items:n},e),n},n.prototype.update=function(t,e){var i=[],n=[],o=this,r=o._fieldId,a=function(t){var e=t[r];o._data[e]?(e=o._updateItem(t),n.push(e)):(e=o._addItem(t),i.push(e))};if(Array.isArray(t))for(var h=0,c=t.length;c>h;h++)a(t[h]);else if(s.isDataTable(t))for(var l=this._getColumnNames(t),d=0,u=t.getNumberOfRows();u>d;d++){for(var p={},f=0,g=l.length;g>f;f++){var m=l[f];p[m]=t.getValue(d,f)}a(p)}else{if(!(t instanceof Object))throw new Error("Unknown dataType");a(t)}return i.length&&this._trigger("add",{items:i},e),n.length&&this._trigger("update",{items:n},e),i.concat(n)},n.prototype.get=function(){var t,e,i,n,o=this,r=s.getType(arguments[0]);"String"==r||"Number"==r?(t=arguments[0],i=arguments[1],n=arguments[2]):"Array"==r?(e=arguments[0],i=arguments[1],n=arguments[2]):(i=arguments[0],n=arguments[1]);var a;if(i&&i.returnType){var h=["DataTable","Array","Object"];if(a=-1==h.indexOf(i.returnType)?"Array":i.returnType,n&&a!=s.getType(n))throw new Error('Type of parameter "data" ('+s.getType(n)+") does not correspond with specified options.type ("+i.type+")");if("DataTable"==a&&!s.isDataTable(n))throw new Error('Parameter "data" must be a DataTable when options.type is "DataTable"')}else a=n&&"DataTable"==s.getType(n)?"DataTable":"Array";var c,l,d,u,p=i&&i.type||this._options.type,f=i&&i.filter,g=[];if(void 0!=t)c=o._getItem(t,p),f&&!f(c)&&(c=null);else if(void 0!=e)for(d=0,u=e.length;u>d;d++)c=o._getItem(e[d],p),(!f||f(c))&&g.push(c);else for(l in this._data)this._data.hasOwnProperty(l)&&(c=o._getItem(l,p),(!f||f(c))&&g.push(c));if(i&&i.order&&void 0==t&&this._sort(g,i.order),i&&i.fields){var m=i.fields;if(void 0!=t)c=this._filterFields(c,m);else for(d=0,u=g.length;u>d;d++)g[d]=this._filterFields(g[d],m)}if("DataTable"==a){var v=this._getColumnNames(n);if(void 0!=t)o._appendRow(n,v,c);else for(d=0;d<g.length;d++)o._appendRow(n,v,g[d]);return n}if("Object"==a){var y={};for(d=0;d<g.length;d++)y[g[d].id]=g[d];return y}if(void 0!=t)return c;if(n){for(d=0,u=g.length;u>d;d++)n.push(g[d]);return n}return g},n.prototype.getIds=function(t){var e,i,n,s,o,r=this._data,a=t&&t.filter,h=t&&t.order,c=t&&t.type||this._options.type,l=[];if(a)if(h){o=[];for(n in r)r.hasOwnProperty(n)&&(s=this._getItem(n,c),a(s)&&o.push(s));for(this._sort(o,h),e=0,i=o.length;i>e;e++)l[e]=o[e][this._fieldId]}else for(n in r)r.hasOwnProperty(n)&&(s=this._getItem(n,c),a(s)&&l.push(s[this._fieldId]));else if(h){o=[];for(n in r)r.hasOwnProperty(n)&&o.push(r[n]);for(this._sort(o,h),e=0,i=o.length;i>e;e++)l[e]=o[e][this._fieldId]}else for(n in r)r.hasOwnProperty(n)&&(s=r[n],l.push(s[this._fieldId]));return l},n.prototype.getDataSet=function(){return this},n.prototype.forEach=function(t,e){var i,n,s=e&&e.filter,o=e&&e.type||this._options.type,r=this._data;if(e&&e.order)for(var a=this.get(e),h=0,c=a.length;c>h;h++)i=a[h],n=i[this._fieldId],t(i,n);else for(n in r)r.hasOwnProperty(n)&&(i=this._getItem(n,o),(!s||s(i))&&t(i,n))},n.prototype.map=function(t,e){var i,n=e&&e.filter,s=e&&e.type||this._options.type,o=[],r=this._data;for(var a in r)r.hasOwnProperty(a)&&(i=this._getItem(a,s),(!n||n(i))&&o.push(t(i,a)));return e&&e.order&&this._sort(o,e.order),o},n.prototype._filterFields=function(t,e){var i={};for(var n in t)t.hasOwnProperty(n)&&-1!=e.indexOf(n)&&(i[n]=t[n]);return i},n.prototype._sort=function(t,e){if(s.isString(e)){var i=e;t.sort(function(t,e){var n=t[i],s=e[i];return n>s?1:s>n?-1:0})}else{if("function"!=typeof e)throw new TypeError("Order must be a function or a string");t.sort(e)}},n.prototype.remove=function(t,e){var i,n,s,o=[];if(Array.isArray(t))for(i=0,n=t.length;n>i;i++)s=this._remove(t[i]),null!=s&&o.push(s);else s=this._remove(t),null!=s&&o.push(s);return o.length&&this._trigger("remove",{items:o},e),o},n.prototype._remove=function(t){if(s.isNumber(t)||s.isString(t)){if(this._data[t])return delete this._data[t],t}else if(t instanceof Object){var e=t[this._fieldId];if(e&&this._data[e])return delete this._data[e],e}return null},n.prototype.clear=function(t){var e=Object.keys(this._data);return this._data={},this._trigger("remove",{items:e},t),e},n.prototype.max=function(t){var e=this._data,i=null,n=null;for(var s in e)if(e.hasOwnProperty(s)){var o=e[s],r=o[t];null!=r&&(!i||r>n)&&(i=o,n=r)}return i},n.prototype.min=function(t){var e=this._data,i=null,n=null;for(var s in e)if(e.hasOwnProperty(s)){var o=e[s],r=o[t];null!=r&&(!i||n>r)&&(i=o,n=r)}return i},n.prototype.distinct=function(t){var e,i=this._data,n=[],o=this._options.type&&this._options.type[t]||null,r=0;for(var a in i)if(i.hasOwnProperty(a)){var h=i[a],c=h[t],l=!1;for(e=0;r>e;e++)if(n[e]==c){l=!0;break}l||void 0===c||(n[r]=c,r++)}if(o)for(e=0;e<n.length;e++)n[e]=s.convert(n[e],o);return n},n.prototype._addItem=function(t){var e=t[this._fieldId];if(void 0!=e){if(this._data[e])throw new Error("Cannot add item: item with id "+e+" already exists")}else e=s.randomUUID(),t[this._fieldId]=e;var i={};for(var n in t)if(t.hasOwnProperty(n)){var o=this._type[n];i[n]=s.convert(t[n],o)}return this._data[e]=i,e},n.prototype._getItem=function(t,e){var i,n,o=this._data[t];if(!o)return null;var r={};if(e)for(i in o)o.hasOwnProperty(i)&&(n=o[i],r[i]=s.convert(n,e[i]));else for(i in o)o.hasOwnProperty(i)&&(n=o[i],r[i]=n);return r},n.prototype._updateItem=function(t){var e=t[this._fieldId];if(void 0==e)throw new Error("Cannot update item: item has no id (item: "+JSON.stringify(t)+")");var i=this._data[e];if(!i)throw new Error("Cannot update item: no item with id "+e+" found");for(var n in t)if(t.hasOwnProperty(n)){var o=this._type[n];i[n]=s.convert(t[n],o)}return e},n.prototype._getColumnNames=function(t){for(var e=[],i=0,n=t.getNumberOfColumns();n>i;i++)e[i]=t.getColumnId(i)||t.getColumnLabel(i);return e},n.prototype._appendRow=function(t,e,i){for(var n=t.addRow(),s=0,o=e.length;o>s;s++){var r=e[s];t.setValue(n,s,i[r])}},t.exports=n},function(t,e,i){function n(t,e){this._data=null,this._ids={},this._options=e||{},this._fieldId="id",this._subscribers={};var i=this;this.listener=function(){i._onEvent.apply(i,arguments)},this.setData(t)}var s=i(1),o=i(3);n.prototype.setData=function(t){var e,i,n;if(this._data){this._data.unsubscribe&&this._data.unsubscribe("*",this.listener),e=[];for(var s in this._ids)this._ids.hasOwnProperty(s)&&e.push(s);this._ids={},this._trigger("remove",{items:e})}if(this._data=t,this._data){for(this._fieldId=this._options.fieldId||this._data&&this._data.options&&this._data.options.fieldId||"id",e=this._data.getIds({filter:this._options&&this._options.filter}),i=0,n=e.length;n>i;i++)s=e[i],this._ids[s]=!0;this._trigger("add",{items:e}),this._data.on&&this._data.on("*",this.listener)}},n.prototype.get=function(){var t,e,i,n=this,o=s.getType(arguments[0]);"String"==o||"Number"==o||"Array"==o?(t=arguments[0],e=arguments[1],i=arguments[2]):(e=arguments[0],i=arguments[1]);var r=s.extend({},this._options,e);this._options.filter&&e&&e.filter&&(r.filter=function(t){return n._options.filter(t)&&e.filter(t)});var a=[];return void 0!=t&&a.push(t),a.push(r),a.push(i),this._data&&this._data.get.apply(this._data,a)},n.prototype.getIds=function(t){var e;if(this._data){var i,n=this._options.filter;i=t&&t.filter?n?function(e){return n(e)&&t.filter(e)}:t.filter:n,e=this._data.getIds({filter:i,order:t&&t.order})}else e=[];return e},n.prototype.getDataSet=function(){for(var t=this;t instanceof n;)t=t._data;return t||null},n.prototype._onEvent=function(t,e,i){var n,s,o,r,a=e&&e.items,h=this._data,c=[],l=[],d=[];if(a&&h){switch(t){case"add":for(n=0,s=a.length;s>n;n++)o=a[n],r=this.get(o),r&&(this._ids[o]=!0,c.push(o));break;case"update":for(n=0,s=a.length;s>n;n++)o=a[n],r=this.get(o),r?this._ids[o]?l.push(o):(this._ids[o]=!0,c.push(o)):this._ids[o]&&(delete this._ids[o],d.push(o));break;case"remove":for(n=0,s=a.length;s>n;n++)o=a[n],this._ids[o]&&(delete this._ids[o],d.push(o))}c.length&&this._trigger("add",{items:c},i),l.length&&this._trigger("update",{items:l},i),d.length&&this._trigger("remove",{items:d},i)}},n.prototype.on=o.prototype.on,n.prototype.off=o.prototype.off,n.prototype._trigger=o.prototype._trigger,n.prototype.subscribe=n.prototype.on,n.prototype.unsubscribe=n.prototype.off,t.exports=n},function(t,e,i){function n(t,e,i){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");this.containerElement=t,this.width="400px",this.height="400px",this.margin=10,this.defaultXCenter="55%",this.defaultYCenter="50%",this.xLabel="x",this.yLabel="y",this.zLabel="z",this.filterLabel="time",this.legendLabel="value",this.style=n.STYLE.DOT,this.showPerspective=!0,this.showGrid=!0,this.keepAspectRatio=!0,this.showShadow=!1,this.showGrayBottom=!1,this.showTooltip=!1,this.verticalRatio=.5,this.animationInterval=1e3,this.animationPreload=!1,this.camera=new l,this.eye=new h(0,0,-1),this.dataTable=null,this.dataPoints=null,this.colX=void 0,this.colY=void 0,this.colZ=void 0,this.colValue=void 0,this.colFilter=void 0,this.xMin=0,this.xStep=void 0,this.xMax=1,this.yMin=0,this.yStep=void 0,this.yMax=1,this.zMin=0,this.zStep=void 0,this.zMax=1,this.valueMin=0,this.valueMax=1,this.xBarWidth=1,this.yBarWidth=1,this.colorAxis="#4D4D4D",this.colorGrid="#D3D3D3",this.colorDot="#7DC1FF",this.colorDotBorder="#3267D2",this.create(),this.setOptions(i),e&&this.setData(e)}var s=i(45),o=i(3),r=i(4),a=i(1),h=i(9),c=i(8),l=i(6),d=i(7),u=i(10),p=i(11);s(n.prototype),n.prototype._setScale=function(){this.scale=new h(1/(this.xMax-this.xMin),1/(this.yMax-this.yMin),1/(this.zMax-this.zMin)),this.keepAspectRatio&&(this.scale.x<this.scale.y?this.scale.y=this.scale.x:this.scale.x=this.scale.y),this.scale.z*=this.verticalRatio,this.scale.value=1/(this.valueMax-this.valueMin);var t=(this.xMax+this.xMin)/2*this.scale.x,e=(this.yMax+this.yMin)/2*this.scale.y,i=(this.zMax+this.zMin)/2*this.scale.z;this.camera.setArmLocation(t,e,i)},n.prototype._convert3Dto2D=function(t){var e=this._convertPointToTranslation(t);return this._convertTranslationToScreen(e)},n.prototype._convertPointToTranslation=function(t){var e=t.x*this.scale.x,i=t.y*this.scale.y,n=t.z*this.scale.z,s=this.camera.getCameraLocation().x,o=this.camera.getCameraLocation().y,r=this.camera.getCameraLocation().z,a=Math.sin(this.camera.getCameraRotation().x),c=Math.cos(this.camera.getCameraRotation().x),l=Math.sin(this.camera.getCameraRotation().y),d=Math.cos(this.camera.getCameraRotation().y),u=Math.sin(this.camera.getCameraRotation().z),p=Math.cos(this.camera.getCameraRotation().z),f=d*(u*(i-o)+p*(e-s))-l*(n-r),g=a*(d*(n-r)+l*(u*(i-o)+p*(e-s)))+c*(p*(i-o)-u*(e-s)),m=c*(d*(n-r)+l*(u*(i-o)+p*(e-s)))-a*(p*(i-o)-u*(e-s));return new h(f,g,m)},n.prototype._convertTranslationToScreen=function(t){var e,i,n=this.eye.x,s=this.eye.y,o=this.eye.z,r=t.x,a=t.y,h=t.z;return this.showPerspective?(e=(r-n)*(o/h),i=(a-s)*(o/h)):(e=r*-(o/this.camera.getArmLength()),i=a*-(o/this.camera.getArmLength())),new c(this.xcenter+e*this.frame.canvas.clientWidth,this.ycenter-i*this.frame.canvas.clientWidth)},n.prototype._setBackgroundColor=function(t){var e="white",i="gray",n=1;if("string"==typeof t)e=t,i="none",n=0;else if("object"==typeof t)void 0!==t.fill&&(e=t.fill),void 0!==t.stroke&&(i=t.stroke),void 0!==t.strokeWidth&&(n=t.strokeWidth);else if(void 0!==t)throw"Unsupported type of backgroundColor";this.frame.style.backgroundColor=e,this.frame.style.borderColor=i,this.frame.style.borderWidth=n+"px",this.frame.style.borderStyle="solid"},n.STYLE={BAR:0,BARCOLOR:1,BARSIZE:2,DOT:3,DOTLINE:4,DOTCOLOR:5,DOTSIZE:6,GRID:7,LINE:8,SURFACE:9},n.prototype._getStyleNumber=function(t){switch(t){case"dot":return n.STYLE.DOT;case"dot-line":return n.STYLE.DOTLINE;case"dot-color":return n.STYLE.DOTCOLOR;case"dot-size":return n.STYLE.DOTSIZE;case"line":return n.STYLE.LINE;case"grid":return n.STYLE.GRID;case"surface":return n.STYLE.SURFACE;case"bar":return n.STYLE.BAR;case"bar-color":return n.STYLE.BARCOLOR;case"bar-size":return n.STYLE.BARSIZE}return-1},n.prototype._determineColumnIndexes=function(t){if(this.style===n.STYLE.DOT||this.style===n.STYLE.DOTLINE||this.style===n.STYLE.LINE||this.style===n.STYLE.GRID||this.style===n.STYLE.SURFACE||this.style===n.STYLE.BAR)this.colX=0,this.colY=1,this.colZ=2,this.colValue=void 0,t.getNumberOfColumns()>3&&(this.colFilter=3);else{if(this.style!==n.STYLE.DOTCOLOR&&this.style!==n.STYLE.DOTSIZE&&this.style!==n.STYLE.BARCOLOR&&this.style!==n.STYLE.BARSIZE)throw'Unknown style "'+this.style+'"';this.colX=0,this.colY=1,this.colZ=2,this.colValue=3,t.getNumberOfColumns()>4&&(this.colFilter=4)}},n.prototype.getNumberOfRows=function(t){return t.length},n.prototype.getNumberOfColumns=function(t){var e=0;for(var i in t[0])t[0].hasOwnProperty(i)&&e++;return e},n.prototype.getDistinctValues=function(t,e){for(var i=[],n=0;n<t.length;n++)-1==i.indexOf(t[n][e])&&i.push(t[n][e]);return i},n.prototype.getColumnRange=function(t,e){for(var i={min:t[0][e],max:t[0][e]},n=0;n<t.length;n++)i.min>t[n][e]&&(i.min=t[n][e]),i.max<t[n][e]&&(i.max=t[n][e]);return i},n.prototype._dataInitialize=function(t){var e=this;if(this.dataSet&&this.dataSet.off("*",this._onChange),void 0!==t){Array.isArray(t)&&(t=new o(t));var i;if(!(t instanceof o||t instanceof r))throw new Error("Array, DataSet, or DataView expected");if(i=t.get(),0!=i.length){this.dataSet=t,this.dataTable=i,this._onChange=function(){e.setData(e.dataSet)},this.dataSet.on("*",this._onChange),this.colX="x",this.colY="y",this.colZ="z",this.colValue="style",this.colFilter="filter",i[0].hasOwnProperty("filter")&&void 0===this.dataFilter&&(this.dataFilter=new d(t,this.colFilter,this),this.dataFilter.setOnLoadCallback(function(){e.redraw()}));var s=this.style==n.STYLE.BAR||this.style==n.STYLE.BARCOLOR||this.style==n.STYLE.BARSIZE;if(s){if(void 0!==this.defaultXBarWidth)this.xBarWidth=this.defaultXBarWidth;else{var a=this.getDistinctValues(i,this.colX);this.xBarWidth=a[1]-a[0]||1}if(void 0!==this.defaultYBarWidth)this.yBarWidth=this.defaultYBarWidth;else{var h=this.getDistinctValues(i,this.colY);this.yBarWidth=h[1]-h[0]||1}}var c=this.getColumnRange(i,this.colX);s&&(c.min-=this.xBarWidth/2,c.max+=this.xBarWidth/2),this.xMin=void 0!==this.defaultXMin?this.defaultXMin:c.min,this.xMax=void 0!==this.defaultXMax?this.defaultXMax:c.max,this.xMax<=this.xMin&&(this.xMax=this.xMin+1),this.xStep=void 0!==this.defaultXStep?this.defaultXStep:(this.xMax-this.xMin)/5;var l=this.getColumnRange(i,this.colY);s&&(l.min-=this.yBarWidth/2,l.max+=this.yBarWidth/2),this.yMin=void 0!==this.defaultYMin?this.defaultYMin:l.min,this.yMax=void 0!==this.defaultYMax?this.defaultYMax:l.max,this.yMax<=this.yMin&&(this.yMax=this.yMin+1),this.yStep=void 0!==this.defaultYStep?this.defaultYStep:(this.yMax-this.yMin)/5;var u=this.getColumnRange(i,this.colZ);if(this.zMin=void 0!==this.defaultZMin?this.defaultZMin:u.min,this.zMax=void 0!==this.defaultZMax?this.defaultZMax:u.max,this.zMax<=this.zMin&&(this.zMax=this.zMin+1),this.zStep=void 0!==this.defaultZStep?this.defaultZStep:(this.zMax-this.zMin)/5,void 0!==this.colValue){var p=this.getColumnRange(i,this.colValue);this.valueMin=void 0!==this.defaultValueMin?this.defaultValueMin:p.min,this.valueMax=void 0!==this.defaultValueMax?this.defaultValueMax:p.max,this.valueMax<=this.valueMin&&(this.valueMax=this.valueMin+1)}this._setScale()}}},n.prototype._getDataPoints=function(t){function e(t,e){return t-e}var i,s,o,r,a,c,l=[];if(this.style===n.STYLE.GRID||this.style===n.STYLE.SURFACE){var d=[],u=[];for(o=0;o<this.getNumberOfRows(t);o++)i=t[o][this.colX]||0,s=t[o][this.colY]||0,-1===d.indexOf(i)&&d.push(i),-1===u.indexOf(s)&&u.push(s);d.sort(e),u.sort(e);var p=[];for(o=0;o<t.length;o++){i=t[o][this.colX]||0,s=t[o][this.colY]||0,r=t[o][this.colZ]||0;var f=d.indexOf(i),g=u.indexOf(s);void 0===p[f]&&(p[f]=[]);var m=new h;m.x=i,m.y=s,m.z=r,a={},a.point=m,a.trans=void 0,a.screen=void 0,a.bottom=new h(i,s,this.zMin),p[f][g]=a,l.push(a)}for(i=0;i<p.length;i++)for(s=0;s<p[i].length;s++)p[i][s]&&(p[i][s].pointRight=i<p.length-1?p[i+1][s]:void 0,p[i][s].pointTop=s<p[i].length-1?p[i][s+1]:void 0,p[i][s].pointCross=i<p.length-1&&s<p[i].length-1?p[i+1][s+1]:void 0)}else for(o=0;o<t.length;o++)c=new h,c.x=t[o][this.colX]||0,c.y=t[o][this.colY]||0,c.z=t[o][this.colZ]||0,void 0!==this.colValue&&(c.value=t[o][this.colValue]||0),a={},a.point=c,a.bottom=new h(c.x,c.y,this.zMin),a.trans=void 0,a.screen=void 0,l.push(a);return l},n.prototype.create=function(){for(;this.containerElement.hasChildNodes();)this.containerElement.removeChild(this.containerElement.firstChild);this.frame=document.createElement("div"),this.frame.style.position="relative",this.frame.style.overflow="hidden",this.frame.canvas=document.createElement("canvas"),this.frame.canvas.style.position="relative",this.frame.appendChild(this.frame.canvas);
var t=document.createElement("DIV");t.style.color="red",t.style.fontWeight="bold",t.style.padding="10px",t.innerHTML="Error: your browser does not support HTML canvas",this.frame.canvas.appendChild(t),this.frame.filter=document.createElement("div"),this.frame.filter.style.position="absolute",this.frame.filter.style.bottom="0px",this.frame.filter.style.left="0px",this.frame.filter.style.width="100%",this.frame.appendChild(this.frame.filter);var e=this,i=function(t){e._onMouseDown(t)},n=function(t){e._onTouchStart(t)},s=function(t){e._onWheel(t)},o=function(t){e._onTooltip(t)};a.addEventListener(this.frame.canvas,"keydown",onkeydown),a.addEventListener(this.frame.canvas,"mousedown",i),a.addEventListener(this.frame.canvas,"touchstart",n),a.addEventListener(this.frame.canvas,"mousewheel",s),a.addEventListener(this.frame.canvas,"mousemove",o),this.containerElement.appendChild(this.frame)},n.prototype.setSize=function(t,e){this.frame.style.width=t,this.frame.style.height=e,this._resizeCanvas()},n.prototype._resizeCanvas=function(){this.frame.canvas.style.width="100%",this.frame.canvas.style.height="100%",this.frame.canvas.width=this.frame.canvas.clientWidth,this.frame.canvas.height=this.frame.canvas.clientHeight,this.frame.filter.style.width=this.frame.canvas.clientWidth-20+"px"},n.prototype.animationStart=function(){if(!this.frame.filter||!this.frame.filter.slider)throw"No animation available";this.frame.filter.slider.play()},n.prototype.animationStop=function(){this.frame.filter&&this.frame.filter.slider&&this.frame.filter.slider.stop()},n.prototype._resizeCenter=function(){this.xcenter="%"===this.defaultXCenter.charAt(this.defaultXCenter.length-1)?parseFloat(this.defaultXCenter)/100*this.frame.canvas.clientWidth:parseFloat(this.defaultXCenter),this.ycenter="%"===this.defaultYCenter.charAt(this.defaultYCenter.length-1)?parseFloat(this.defaultYCenter)/100*(this.frame.canvas.clientHeight-this.frame.filter.clientHeight):parseFloat(this.defaultYCenter)},n.prototype.setCameraPosition=function(t){void 0!==t&&(void 0!==t.horizontal&&void 0!==t.vertical&&this.camera.setArmRotation(t.horizontal,t.vertical),void 0!==t.distance&&this.camera.setArmLength(t.distance),this.redraw())},n.prototype.getCameraPosition=function(){var t=this.camera.getArmRotation();return t.distance=this.camera.getArmLength(),t},n.prototype._readData=function(t){this._dataInitialize(t,this.style),this.dataPoints=this.dataFilter?this.dataFilter._getDataPoints():this._getDataPoints(this.dataTable),this._redrawFilter()},n.prototype.setData=function(t){this._readData(t),this.redraw(),this.animationAutoStart&&this.dataFilter&&this.animationStart()},n.prototype.setOptions=function(t){var e=void 0;if(this.animationStop(),void 0!==t){if(void 0!==t.width&&(this.width=t.width),void 0!==t.height&&(this.height=t.height),void 0!==t.xCenter&&(this.defaultXCenter=t.xCenter),void 0!==t.yCenter&&(this.defaultYCenter=t.yCenter),void 0!==t.filterLabel&&(this.filterLabel=t.filterLabel),void 0!==t.legendLabel&&(this.legendLabel=t.legendLabel),void 0!==t.xLabel&&(this.xLabel=t.xLabel),void 0!==t.yLabel&&(this.yLabel=t.yLabel),void 0!==t.zLabel&&(this.zLabel=t.zLabel),void 0!==t.style){var i=this._getStyleNumber(t.style);-1!==i&&(this.style=i)}void 0!==t.showGrid&&(this.showGrid=t.showGrid),void 0!==t.showPerspective&&(this.showPerspective=t.showPerspective),void 0!==t.showShadow&&(this.showShadow=t.showShadow),void 0!==t.tooltip&&(this.showTooltip=t.tooltip),void 0!==t.showAnimationControls&&(this.showAnimationControls=t.showAnimationControls),void 0!==t.keepAspectRatio&&(this.keepAspectRatio=t.keepAspectRatio),void 0!==t.verticalRatio&&(this.verticalRatio=t.verticalRatio),void 0!==t.animationInterval&&(this.animationInterval=t.animationInterval),void 0!==t.animationPreload&&(this.animationPreload=t.animationPreload),void 0!==t.animationAutoStart&&(this.animationAutoStart=t.animationAutoStart),void 0!==t.xBarWidth&&(this.defaultXBarWidth=t.xBarWidth),void 0!==t.yBarWidth&&(this.defaultYBarWidth=t.yBarWidth),void 0!==t.xMin&&(this.defaultXMin=t.xMin),void 0!==t.xStep&&(this.defaultXStep=t.xStep),void 0!==t.xMax&&(this.defaultXMax=t.xMax),void 0!==t.yMin&&(this.defaultYMin=t.yMin),void 0!==t.yStep&&(this.defaultYStep=t.yStep),void 0!==t.yMax&&(this.defaultYMax=t.yMax),void 0!==t.zMin&&(this.defaultZMin=t.zMin),void 0!==t.zStep&&(this.defaultZStep=t.zStep),void 0!==t.zMax&&(this.defaultZMax=t.zMax),void 0!==t.valueMin&&(this.defaultValueMin=t.valueMin),void 0!==t.valueMax&&(this.defaultValueMax=t.valueMax),void 0!==t.cameraPosition&&(e=t.cameraPosition),void 0!==e?(this.camera.setArmRotation(e.horizontal,e.vertical),this.camera.setArmLength(e.distance)):(this.camera.setArmRotation(1,.5),this.camera.setArmLength(1.7))}this._setBackgroundColor(t&&t.backgroundColor),this.setSize(this.width,this.height),this.dataTable&&this.setData(this.dataTable),this.animationAutoStart&&this.dataFilter&&this.animationStart()},n.prototype.redraw=function(){if(void 0===this.dataPoints)throw"Error: graph data not initialized";this._resizeCanvas(),this._resizeCenter(),this._redrawSlider(),this._redrawClear(),this._redrawAxis(),this.style===n.STYLE.GRID||this.style===n.STYLE.SURFACE?this._redrawDataGrid():this.style===n.STYLE.LINE?this._redrawDataLine():this.style===n.STYLE.BAR||this.style===n.STYLE.BARCOLOR||this.style===n.STYLE.BARSIZE?this._redrawDataBar():this._redrawDataDot(),this._redrawInfo(),this._redrawLegend()},n.prototype._redrawClear=function(){var t=this.frame.canvas,e=t.getContext("2d");e.clearRect(0,0,t.width,t.height)},n.prototype._redrawLegend=function(){var t;if(this.style===n.STYLE.DOTCOLOR||this.style===n.STYLE.DOTSIZE){var e,i,s=.02*this.frame.clientWidth;this.style===n.STYLE.DOTSIZE?(e=s/2,i=s/2+2*s):(e=20,i=20);var o=Math.max(.25*this.frame.clientHeight,100),r=this.margin,a=this.frame.clientWidth-this.margin,h=a-i,c=r+o}var l=this.frame.canvas,d=l.getContext("2d");if(d.lineWidth=1,d.font="14px arial",this.style===n.STYLE.DOTCOLOR){var u=0,f=o;for(t=u;f>t;t++){var g=(t-u)/(f-u),m=240*g,v=this._hsv2rgb(m,1,1);d.strokeStyle=v,d.beginPath(),d.moveTo(h,r+t),d.lineTo(a,r+t),d.stroke()}d.strokeStyle=this.colorAxis,d.strokeRect(h,r,i,o)}if(this.style===n.STYLE.DOTSIZE&&(d.strokeStyle=this.colorAxis,d.fillStyle=this.colorDot,d.beginPath(),d.moveTo(h,r),d.lineTo(a,r),d.lineTo(a-i+e,c),d.lineTo(h,c),d.closePath(),d.fill(),d.stroke()),this.style===n.STYLE.DOTCOLOR||this.style===n.STYLE.DOTSIZE){var y=5,b=new p(this.valueMin,this.valueMax,(this.valueMax-this.valueMin)/5,!0);for(b.start(),b.getCurrent()<this.valueMin&&b.next();!b.end();)t=c-(b.getCurrent()-this.valueMin)/(this.valueMax-this.valueMin)*o,d.beginPath(),d.moveTo(h-y,t),d.lineTo(h,t),d.stroke(),d.textAlign="right",d.textBaseline="middle",d.fillStyle=this.colorAxis,d.fillText(b.getCurrent(),h-2*y,t),b.next();d.textAlign="right",d.textBaseline="top";var x=this.legendLabel;d.fillText(x,a,c+this.margin)}},n.prototype._redrawFilter=function(){if(this.frame.filter.innerHTML="",this.dataFilter){var t={visible:this.showAnimationControls},e=new u(this.frame.filter,t);this.frame.filter.slider=e,this.frame.filter.style.padding="10px",e.setValues(this.dataFilter.values),e.setPlayInterval(this.animationInterval);var i=this,n=function(){var t=e.getIndex();i.dataFilter.selectValue(t),i.dataPoints=i.dataFilter._getDataPoints(),i.redraw()};e.setOnChangeCallback(n)}else this.frame.filter.slider=void 0},n.prototype._redrawSlider=function(){void 0!==this.frame.filter.slider&&this.frame.filter.slider.redraw()},n.prototype._redrawInfo=function(){if(this.dataFilter){var t=this.frame.canvas,e=t.getContext("2d");e.font="14px arial",e.lineStyle="gray",e.fillStyle="gray",e.textAlign="left",e.textBaseline="top";var i=this.margin,n=this.margin;e.fillText(this.dataFilter.getLabel()+": "+this.dataFilter.getSelectedValue(),i,n)}},n.prototype._redrawAxis=function(){var t,e,i,n,s,o,r,a,c,l,d,u,f,g=this.frame.canvas,m=g.getContext("2d");m.font=24/this.camera.getArmLength()+"px arial";var v=.025/this.scale.x,y=.025/this.scale.y,b=5/this.camera.getArmLength(),x=this.camera.getArmRotation().horizontal;for(m.lineWidth=1,n=void 0===this.defaultXStep,i=new p(this.xMin,this.xMax,this.xStep,n),i.start(),i.getCurrent()<this.xMin&&i.next();!i.end();){var w=i.getCurrent();this.showGrid?(t=this._convert3Dto2D(new h(w,this.yMin,this.zMin)),e=this._convert3Dto2D(new h(w,this.yMax,this.zMin)),m.strokeStyle=this.colorGrid,m.beginPath(),m.moveTo(t.x,t.y),m.lineTo(e.x,e.y),m.stroke()):(t=this._convert3Dto2D(new h(w,this.yMin,this.zMin)),e=this._convert3Dto2D(new h(w,this.yMin+v,this.zMin)),m.strokeStyle=this.colorAxis,m.beginPath(),m.moveTo(t.x,t.y),m.lineTo(e.x,e.y),m.stroke(),t=this._convert3Dto2D(new h(w,this.yMax,this.zMin)),e=this._convert3Dto2D(new h(w,this.yMax-v,this.zMin)),m.strokeStyle=this.colorAxis,m.beginPath(),m.moveTo(t.x,t.y),m.lineTo(e.x,e.y),m.stroke()),r=Math.cos(x)>0?this.yMin:this.yMax,s=this._convert3Dto2D(new h(w,r,this.zMin)),Math.cos(2*x)>0?(m.textAlign="center",m.textBaseline="top",s.y+=b):Math.sin(2*x)<0?(m.textAlign="right",m.textBaseline="middle"):(m.textAlign="left",m.textBaseline="middle"),m.fillStyle=this.colorAxis,m.fillText("  "+i.getCurrent()+"  ",s.x,s.y),i.next()}for(m.lineWidth=1,n=void 0===this.defaultYStep,i=new p(this.yMin,this.yMax,this.yStep,n),i.start(),i.getCurrent()<this.yMin&&i.next();!i.end();)this.showGrid?(t=this._convert3Dto2D(new h(this.xMin,i.getCurrent(),this.zMin)),e=this._convert3Dto2D(new h(this.xMax,i.getCurrent(),this.zMin)),m.strokeStyle=this.colorGrid,m.beginPath(),m.moveTo(t.x,t.y),m.lineTo(e.x,e.y),m.stroke()):(t=this._convert3Dto2D(new h(this.xMin,i.getCurrent(),this.zMin)),e=this._convert3Dto2D(new h(this.xMin+y,i.getCurrent(),this.zMin)),m.strokeStyle=this.colorAxis,m.beginPath(),m.moveTo(t.x,t.y),m.lineTo(e.x,e.y),m.stroke(),t=this._convert3Dto2D(new h(this.xMax,i.getCurrent(),this.zMin)),e=this._convert3Dto2D(new h(this.xMax-y,i.getCurrent(),this.zMin)),m.strokeStyle=this.colorAxis,m.beginPath(),m.moveTo(t.x,t.y),m.lineTo(e.x,e.y),m.stroke()),o=Math.sin(x)>0?this.xMin:this.xMax,s=this._convert3Dto2D(new h(o,i.getCurrent(),this.zMin)),Math.cos(2*x)<0?(m.textAlign="center",m.textBaseline="top",s.y+=b):Math.sin(2*x)>0?(m.textAlign="right",m.textBaseline="middle"):(m.textAlign="left",m.textBaseline="middle"),m.fillStyle=this.colorAxis,m.fillText("  "+i.getCurrent()+"  ",s.x,s.y),i.next();for(m.lineWidth=1,n=void 0===this.defaultZStep,i=new p(this.zMin,this.zMax,this.zStep,n),i.start(),i.getCurrent()<this.zMin&&i.next(),o=Math.cos(x)>0?this.xMin:this.xMax,r=Math.sin(x)<0?this.yMin:this.yMax;!i.end();)t=this._convert3Dto2D(new h(o,r,i.getCurrent())),m.strokeStyle=this.colorAxis,m.beginPath(),m.moveTo(t.x,t.y),m.lineTo(t.x-b,t.y),m.stroke(),m.textAlign="right",m.textBaseline="middle",m.fillStyle=this.colorAxis,m.fillText(i.getCurrent()+" ",t.x-5,t.y),i.next();m.lineWidth=1,t=this._convert3Dto2D(new h(o,r,this.zMin)),e=this._convert3Dto2D(new h(o,r,this.zMax)),m.strokeStyle=this.colorAxis,m.beginPath(),m.moveTo(t.x,t.y),m.lineTo(e.x,e.y),m.stroke(),m.lineWidth=1,u=this._convert3Dto2D(new h(this.xMin,this.yMin,this.zMin)),f=this._convert3Dto2D(new h(this.xMax,this.yMin,this.zMin)),m.strokeStyle=this.colorAxis,m.beginPath(),m.moveTo(u.x,u.y),m.lineTo(f.x,f.y),m.stroke(),u=this._convert3Dto2D(new h(this.xMin,this.yMax,this.zMin)),f=this._convert3Dto2D(new h(this.xMax,this.yMax,this.zMin)),m.strokeStyle=this.colorAxis,m.beginPath(),m.moveTo(u.x,u.y),m.lineTo(f.x,f.y),m.stroke(),m.lineWidth=1,t=this._convert3Dto2D(new h(this.xMin,this.yMin,this.zMin)),e=this._convert3Dto2D(new h(this.xMin,this.yMax,this.zMin)),m.strokeStyle=this.colorAxis,m.beginPath(),m.moveTo(t.x,t.y),m.lineTo(e.x,e.y),m.stroke(),t=this._convert3Dto2D(new h(this.xMax,this.yMin,this.zMin)),e=this._convert3Dto2D(new h(this.xMax,this.yMax,this.zMin)),m.strokeStyle=this.colorAxis,m.beginPath(),m.moveTo(t.x,t.y),m.lineTo(e.x,e.y),m.stroke();var _=this.xLabel;_.length>0&&(d=.1/this.scale.y,o=(this.xMin+this.xMax)/2,r=Math.cos(x)>0?this.yMin-d:this.yMax+d,s=this._convert3Dto2D(new h(o,r,this.zMin)),Math.cos(2*x)>0?(m.textAlign="center",m.textBaseline="top"):Math.sin(2*x)<0?(m.textAlign="right",m.textBaseline="middle"):(m.textAlign="left",m.textBaseline="middle"),m.fillStyle=this.colorAxis,m.fillText(_,s.x,s.y));var S=this.yLabel;S.length>0&&(l=.1/this.scale.x,o=Math.sin(x)>0?this.xMin-l:this.xMax+l,r=(this.yMin+this.yMax)/2,s=this._convert3Dto2D(new h(o,r,this.zMin)),Math.cos(2*x)<0?(m.textAlign="center",m.textBaseline="top"):Math.sin(2*x)>0?(m.textAlign="right",m.textBaseline="middle"):(m.textAlign="left",m.textBaseline="middle"),m.fillStyle=this.colorAxis,m.fillText(S,s.x,s.y));var C=this.zLabel;C.length>0&&(c=30,o=Math.cos(x)>0?this.xMin:this.xMax,r=Math.sin(x)<0?this.yMin:this.yMax,a=(this.zMin+this.zMax)/2,s=this._convert3Dto2D(new h(o,r,a)),m.textAlign="right",m.textBaseline="middle",m.fillStyle=this.colorAxis,m.fillText(C,s.x-c,s.y))},n.prototype._hsv2rgb=function(t,e,i){var n,s,o,r,a,h;switch(r=i*e,a=Math.floor(t/60),h=r*(1-Math.abs(t/60%2-1)),a){case 0:n=r,s=h,o=0;break;case 1:n=h,s=r,o=0;break;case 2:n=0,s=r,o=h;break;case 3:n=0,s=h,o=r;break;case 4:n=h,s=0,o=r;break;case 5:n=r,s=0,o=h;break;default:n=0,s=0,o=0}return"RGB("+parseInt(255*n)+","+parseInt(255*s)+","+parseInt(255*o)+")"},n.prototype._redrawDataGrid=function(){var t,e,i,s,o,r,a,c,l,d,u,p,f,g=this.frame.canvas,m=g.getContext("2d");if(!(void 0===this.dataPoints||this.dataPoints.length<=0)){for(o=0;o<this.dataPoints.length;o++){var v=this._convertPointToTranslation(this.dataPoints[o].point),y=this._convertTranslationToScreen(v);this.dataPoints[o].trans=v,this.dataPoints[o].screen=y;var b=this._convertPointToTranslation(this.dataPoints[o].bottom);this.dataPoints[o].dist=this.showPerspective?b.length():-b.z}var x=function(t,e){return e.dist-t.dist};if(this.dataPoints.sort(x),this.style===n.STYLE.SURFACE){for(o=0;o<this.dataPoints.length;o++)if(t=this.dataPoints[o],e=this.dataPoints[o].pointRight,i=this.dataPoints[o].pointTop,s=this.dataPoints[o].pointCross,void 0!==t&&void 0!==e&&void 0!==i&&void 0!==s){if(this.showGrayBottom||this.showShadow){var w=h.subtract(s.trans,t.trans),_=h.subtract(i.trans,e.trans),S=h.crossProduct(w,_),C=S.length();r=S.z>0}else r=!0;r?(f=(t.point.z+e.point.z+i.point.z+s.point.z)/4,d=240*(1-(f-this.zMin)*this.scale.z/this.verticalRatio),u=1,this.showShadow?(p=Math.min(1+S.x/C/2,1),a=this._hsv2rgb(d,u,p),c=a):(p=1,a=this._hsv2rgb(d,u,p),c=this.colorAxis)):(a="gray",c=this.colorAxis),l=.5,m.lineWidth=l,m.fillStyle=a,m.strokeStyle=c,m.beginPath(),m.moveTo(t.screen.x,t.screen.y),m.lineTo(e.screen.x,e.screen.y),m.lineTo(s.screen.x,s.screen.y),m.lineTo(i.screen.x,i.screen.y),m.closePath(),m.fill(),m.stroke()}}else for(o=0;o<this.dataPoints.length;o++)t=this.dataPoints[o],e=this.dataPoints[o].pointRight,i=this.dataPoints[o].pointTop,void 0!==t&&(l=this.showPerspective?2/-t.trans.z:2*-(this.eye.z/this.camera.getArmLength())),void 0!==t&&void 0!==e&&(f=(t.point.z+e.point.z)/2,d=240*(1-(f-this.zMin)*this.scale.z/this.verticalRatio),m.lineWidth=l,m.strokeStyle=this._hsv2rgb(d,1,1),m.beginPath(),m.moveTo(t.screen.x,t.screen.y),m.lineTo(e.screen.x,e.screen.y),m.stroke()),void 0!==t&&void 0!==i&&(f=(t.point.z+i.point.z)/2,d=240*(1-(f-this.zMin)*this.scale.z/this.verticalRatio),m.lineWidth=l,m.strokeStyle=this._hsv2rgb(d,1,1),m.beginPath(),m.moveTo(t.screen.x,t.screen.y),m.lineTo(i.screen.x,i.screen.y),m.stroke())}},n.prototype._redrawDataDot=function(){var t,e=this.frame.canvas,i=e.getContext("2d");if(!(void 0===this.dataPoints||this.dataPoints.length<=0)){for(t=0;t<this.dataPoints.length;t++){var s=this._convertPointToTranslation(this.dataPoints[t].point),o=this._convertTranslationToScreen(s);this.dataPoints[t].trans=s,this.dataPoints[t].screen=o;var r=this._convertPointToTranslation(this.dataPoints[t].bottom);this.dataPoints[t].dist=this.showPerspective?r.length():-r.z}var a=function(t,e){return e.dist-t.dist};this.dataPoints.sort(a);var h=.02*this.frame.clientWidth;for(t=0;t<this.dataPoints.length;t++){var c=this.dataPoints[t];if(this.style===n.STYLE.DOTLINE){var l=this._convert3Dto2D(c.bottom);i.lineWidth=1,i.strokeStyle=this.colorGrid,i.beginPath(),i.moveTo(l.x,l.y),i.lineTo(c.screen.x,c.screen.y),i.stroke()}var d;d=this.style===n.STYLE.DOTSIZE?h/2+2*h*(c.point.value-this.valueMin)/(this.valueMax-this.valueMin):h;var u;u=this.showPerspective?d/-c.trans.z:d*-(this.eye.z/this.camera.getArmLength()),0>u&&(u=0);var p,f,g;this.style===n.STYLE.DOTCOLOR?(p=240*(1-(c.point.value-this.valueMin)*this.scale.value),f=this._hsv2rgb(p,1,1),g=this._hsv2rgb(p,1,.8)):this.style===n.STYLE.DOTSIZE?(f=this.colorDot,g=this.colorDotBorder):(p=240*(1-(c.point.z-this.zMin)*this.scale.z/this.verticalRatio),f=this._hsv2rgb(p,1,1),g=this._hsv2rgb(p,1,.8)),i.lineWidth=1,i.strokeStyle=g,i.fillStyle=f,i.beginPath(),i.arc(c.screen.x,c.screen.y,u,0,2*Math.PI,!0),i.fill(),i.stroke()}}},n.prototype._redrawDataBar=function(){var t,e,i,s,o=this.frame.canvas,r=o.getContext("2d");if(!(void 0===this.dataPoints||this.dataPoints.length<=0)){for(t=0;t<this.dataPoints.length;t++){var a=this._convertPointToTranslation(this.dataPoints[t].point),c=this._convertTranslationToScreen(a);this.dataPoints[t].trans=a,this.dataPoints[t].screen=c;var l=this._convertPointToTranslation(this.dataPoints[t].bottom);this.dataPoints[t].dist=this.showPerspective?l.length():-l.z}var d=function(t,e){return e.dist-t.dist};this.dataPoints.sort(d);var u=this.xBarWidth/2,p=this.yBarWidth/2;for(t=0;t<this.dataPoints.length;t++){var f,g,m,v=this.dataPoints[t];this.style===n.STYLE.BARCOLOR?(f=240*(1-(v.point.value-this.valueMin)*this.scale.value),g=this._hsv2rgb(f,1,1),m=this._hsv2rgb(f,1,.8)):this.style===n.STYLE.BARSIZE?(g=this.colorDot,m=this.colorDotBorder):(f=240*(1-(v.point.z-this.zMin)*this.scale.z/this.verticalRatio),g=this._hsv2rgb(f,1,1),m=this._hsv2rgb(f,1,.8)),this.style===n.STYLE.BARSIZE&&(u=this.xBarWidth/2*((v.point.value-this.valueMin)/(this.valueMax-this.valueMin)*.8+.2),p=this.yBarWidth/2*((v.point.value-this.valueMin)/(this.valueMax-this.valueMin)*.8+.2));var y=this,b=v.point,x=[{point:new h(b.x-u,b.y-p,b.z)},{point:new h(b.x+u,b.y-p,b.z)},{point:new h(b.x+u,b.y+p,b.z)},{point:new h(b.x-u,b.y+p,b.z)}],w=[{point:new h(b.x-u,b.y-p,this.zMin)},{point:new h(b.x+u,b.y-p,this.zMin)},{point:new h(b.x+u,b.y+p,this.zMin)},{point:new h(b.x-u,b.y+p,this.zMin)}];x.forEach(function(t){t.screen=y._convert3Dto2D(t.point)}),w.forEach(function(t){t.screen=y._convert3Dto2D(t.point)});var _=[{corners:x,center:h.avg(w[0].point,w[2].point)},{corners:[x[0],x[1],w[1],w[0]],center:h.avg(w[1].point,w[0].point)},{corners:[x[1],x[2],w[2],w[1]],center:h.avg(w[2].point,w[1].point)},{corners:[x[2],x[3],w[3],w[2]],center:h.avg(w[3].point,w[2].point)},{corners:[x[3],x[0],w[0],w[3]],center:h.avg(w[0].point,w[3].point)}];for(v.surfaces=_,e=0;e<_.length;e++){i=_[e];var S=this._convertPointToTranslation(i.center);i.dist=this.showPerspective?S.length():-S.z}for(_.sort(function(t,e){var i=e.dist-t.dist;return i?i:t.corners===x?1:e.corners===x?-1:0}),r.lineWidth=1,r.strokeStyle=m,r.fillStyle=g,e=2;e<_.length;e++)i=_[e],s=i.corners,r.beginPath(),r.moveTo(s[3].screen.x,s[3].screen.y),r.lineTo(s[0].screen.x,s[0].screen.y),r.lineTo(s[1].screen.x,s[1].screen.y),r.lineTo(s[2].screen.x,s[2].screen.y),r.lineTo(s[3].screen.x,s[3].screen.y),r.fill(),r.stroke()}}},n.prototype._redrawDataLine=function(){var t,e,i=this.frame.canvas,n=i.getContext("2d");if(!(void 0===this.dataPoints||this.dataPoints.length<=0)){for(e=0;e<this.dataPoints.length;e++){var s=this._convertPointToTranslation(this.dataPoints[e].point),o=this._convertTranslationToScreen(s);this.dataPoints[e].trans=s,this.dataPoints[e].screen=o}for(this.dataPoints.length>0&&(t=this.dataPoints[0],n.lineWidth=1,n.strokeStyle="blue",n.beginPath(),n.moveTo(t.screen.x,t.screen.y)),e=1;e<this.dataPoints.length;e++)t=this.dataPoints[e],n.lineTo(t.screen.x,t.screen.y);this.dataPoints.length>0&&n.stroke()}},n.prototype._onMouseDown=function(t){if(t=t||window.event,this.leftButtonDown&&this._onMouseUp(t),this.leftButtonDown=t.which?1===t.which:1===t.button,this.leftButtonDown||this.touchDown){this.startMouseX=getMouseX(t),this.startMouseY=getMouseY(t),this.startStart=new Date(this.start),this.startEnd=new Date(this.end),this.startArmRotation=this.camera.getArmRotation(),this.frame.style.cursor="move";var e=this;this.onmousemove=function(t){e._onMouseMove(t)},this.onmouseup=function(t){e._onMouseUp(t)},a.addEventListener(document,"mousemove",e.onmousemove),a.addEventListener(document,"mouseup",e.onmouseup),a.preventDefault(t)}},n.prototype._onMouseMove=function(t){t=t||window.event;var e=parseFloat(getMouseX(t))-this.startMouseX,i=parseFloat(getMouseY(t))-this.startMouseY,n=this.startArmRotation.horizontal+e/200,s=this.startArmRotation.vertical+i/200,o=4,r=Math.sin(o/360*2*Math.PI);Math.abs(Math.sin(n))<r&&(n=Math.round(n/Math.PI)*Math.PI-.001),Math.abs(Math.cos(n))<r&&(n=(Math.round(n/Math.PI-.5)+.5)*Math.PI-.001),Math.abs(Math.sin(s))<r&&(s=Math.round(s/Math.PI)*Math.PI),Math.abs(Math.cos(s))<r&&(s=(Math.round(s/Math.PI-.5)+.5)*Math.PI),this.camera.setArmRotation(n,s),this.redraw();var h=this.getCameraPosition();this.emit("cameraPositionChange",h),a.preventDefault(t)},n.prototype._onMouseUp=function(t){this.frame.style.cursor="auto",this.leftButtonDown=!1,a.removeEventListener(document,"mousemove",this.onmousemove),a.removeEventListener(document,"mouseup",this.onmouseup),a.preventDefault(t)},n.prototype._onTooltip=function(t){var e=300,i=getMouseX(t)-a.getAbsoluteLeft(this.frame),n=getMouseY(t)-a.getAbsoluteTop(this.frame);if(this.showTooltip){if(this.tooltipTimeout&&clearTimeout(this.tooltipTimeout),this.leftButtonDown)return void this._hideTooltip();if(this.tooltip&&this.tooltip.dataPoint){var s=this._dataPointFromXY(i,n);s!==this.tooltip.dataPoint&&(s?this._showTooltip(s):this._hideTooltip())}else{var o=this;this.tooltipTimeout=setTimeout(function(){o.tooltipTimeout=null;var t=o._dataPointFromXY(i,n);t&&o._showTooltip(t)},e)}}},n.prototype._onTouchStart=function(t){this.touchDown=!0;var e=this;this.ontouchmove=function(t){e._onTouchMove(t)},this.ontouchend=function(t){e._onTouchEnd(t)},a.addEventListener(document,"touchmove",e.ontouchmove),a.addEventListener(document,"touchend",e.ontouchend),this._onMouseDown(t)},n.prototype._onTouchMove=function(t){this._onMouseMove(t)},n.prototype._onTouchEnd=function(t){this.touchDown=!1,a.removeEventListener(document,"touchmove",this.ontouchmove),a.removeEventListener(document,"touchend",this.ontouchend),this._onMouseUp(t)},n.prototype._onWheel=function(t){t||(t=window.event);var e=0;if(t.wheelDelta?e=t.wheelDelta/120:t.detail&&(e=-t.detail/3),e){var i=this.camera.getArmLength(),n=i*(1-e/10);this.camera.setArmLength(n),this.redraw(),this._hideTooltip()}var s=this.getCameraPosition();this.emit("cameraPositionChange",s),a.preventDefault(t)},n.prototype._insideTriangle=function(t,e){function i(t){return t>0?1:0>t?-1:0}var n=e[0],s=e[1],o=e[2],r=i((s.x-n.x)*(t.y-n.y)-(s.y-n.y)*(t.x-n.x)),a=i((o.x-s.x)*(t.y-s.y)-(o.y-s.y)*(t.x-s.x)),h=i((n.x-o.x)*(t.y-o.y)-(n.y-o.y)*(t.x-o.x));return!(0!=r&&0!=a&&r!=a||0!=a&&0!=h&&a!=h||0!=r&&0!=h&&r!=h)},n.prototype._dataPointFromXY=function(t,e){var i,s=100,o=null,r=null,a=null,h=new c(t,e);if(this.style===n.STYLE.BAR||this.style===n.STYLE.BARCOLOR||this.style===n.STYLE.BARSIZE)for(i=this.dataPoints.length-1;i>=0;i--){o=this.dataPoints[i];var l=o.surfaces;if(l)for(var d=l.length-1;d>=0;d--){var u=l[d],p=u.corners,f=[p[0].screen,p[1].screen,p[2].screen],g=[p[2].screen,p[3].screen,p[0].screen];if(this._insideTriangle(h,f)||this._insideTriangle(h,g))return o}}else for(i=0;i<this.dataPoints.length;i++){o=this.dataPoints[i];var m=o.screen;if(m){var v=Math.abs(t-m.x),y=Math.abs(e-m.y),b=Math.sqrt(v*v+y*y);(null===a||a>b)&&s>b&&(a=b,r=o)}}return r},n.prototype._showTooltip=function(t){var e,i,n;this.tooltip?(e=this.tooltip.dom.content,i=this.tooltip.dom.line,n=this.tooltip.dom.dot):(e=document.createElement("div"),e.style.position="absolute",e.style.padding="10px",e.style.border="1px solid #4d4d4d",e.style.color="#1a1a1a",e.style.background="rgba(255,255,255,0.7)",e.style.borderRadius="2px",e.style.boxShadow="5px 5px 10px rgba(128,128,128,0.5)",i=document.createElement("div"),i.style.position="absolute",i.style.height="40px",i.style.width="0",i.style.borderLeft="1px solid #4d4d4d",n=document.createElement("div"),n.style.position="absolute",n.style.height="0",n.style.width="0",n.style.border="5px solid #4d4d4d",n.style.borderRadius="5px",this.tooltip={dataPoint:null,dom:{content:e,line:i,dot:n}}),this._hideTooltip(),this.tooltip.dataPoint=t,e.innerHTML="function"==typeof this.showTooltip?this.showTooltip(t.point):"<table><tr><td>x:</td><td>"+t.point.x+"</td></tr><tr><td>y:</td><td>"+t.point.y+"</td></tr><tr><td>z:</td><td>"+t.point.z+"</td></tr></table>",e.style.left="0",e.style.top="0",this.frame.appendChild(e),this.frame.appendChild(i),this.frame.appendChild(n);var s=e.offsetWidth,o=e.offsetHeight,r=i.offsetHeight,a=n.offsetWidth,h=n.offsetHeight,c=t.screen.x-s/2;c=Math.min(Math.max(c,10),this.frame.clientWidth-10-s),i.style.left=t.screen.x+"px",i.style.top=t.screen.y-r+"px",e.style.left=c+"px",e.style.top=t.screen.y-r-o+"px",n.style.left=t.screen.x-a/2+"px",n.style.top=t.screen.y-h/2+"px"},n.prototype._hideTooltip=function(){if(this.tooltip){this.tooltip.dataPoint=null;for(var t in this.tooltip.dom)if(this.tooltip.dom.hasOwnProperty(t)){var e=this.tooltip.dom[t];e&&e.parentNode&&e.parentNode.removeChild(e)}}},getMouseX=function(t){return"clientX"in t?t.clientX:t.targetTouches[0]&&t.targetTouches[0].clientX||0},getMouseY=function(t){return"clientY"in t?t.clientY:t.targetTouches[0]&&t.targetTouches[0].clientY||0},t.exports=n},function(t,e,i){var n=i(9);Camera=function(){this.armLocation=new n,this.armRotation={},this.armRotation.horizontal=0,this.armRotation.vertical=0,this.armLength=1.7,this.cameraLocation=new n,this.cameraRotation=new n(.5*Math.PI,0,0),this.calculateCameraOrientation()},Camera.prototype.setArmLocation=function(t,e,i){this.armLocation.x=t,this.armLocation.y=e,this.armLocation.z=i,this.calculateCameraOrientation()},Camera.prototype.setArmRotation=function(t,e){void 0!==t&&(this.armRotation.horizontal=t),void 0!==e&&(this.armRotation.vertical=e,this.armRotation.vertical<0&&(this.armRotation.vertical=0),this.armRotation.vertical>.5*Math.PI&&(this.armRotation.vertical=.5*Math.PI)),(void 0!==t||void 0!==e)&&this.calculateCameraOrientation()},Camera.prototype.getArmRotation=function(){var t={};return t.horizontal=this.armRotation.horizontal,t.vertical=this.armRotation.vertical,t},Camera.prototype.setArmLength=function(t){void 0!==t&&(this.armLength=t,this.armLength<.71&&(this.armLength=.71),this.armLength>5&&(this.armLength=5),this.calculateCameraOrientation())},Camera.prototype.getArmLength=function(){return this.armLength},Camera.prototype.getCameraLocation=function(){return this.cameraLocation},Camera.prototype.getCameraRotation=function(){return this.cameraRotation},Camera.prototype.calculateCameraOrientation=function(){this.cameraLocation.x=this.armLocation.x-this.armLength*Math.sin(this.armRotation.horizontal)*Math.cos(this.armRotation.vertical),this.cameraLocation.y=this.armLocation.y-this.armLength*Math.cos(this.armRotation.horizontal)*Math.cos(this.armRotation.vertical),this.cameraLocation.z=this.armLocation.z+this.armLength*Math.sin(this.armRotation.vertical),this.cameraRotation.x=Math.PI/2-this.armRotation.vertical,this.cameraRotation.y=0,this.cameraRotation.z=-this.armRotation.horizontal},t.exports=Camera},function(t,e,i){function n(t,e,i){this.data=t,this.column=e,this.graph=i,this.index=void 0,this.value=void 0,this.values=i.getDistinctValues(t.get(),this.column),this.values.sort(function(t,e){return t>e?1:e>t?-1:0}),this.values.length>0&&this.selectValue(0),this.dataPoints=[],this.loaded=!1,this.onLoadCallback=void 0,i.animationPreload?(this.loaded=!1,this.loadInBackground()):this.loaded=!0}var s=i(4);n.prototype.isLoaded=function(){return this.loaded},n.prototype.getLoadedProgress=function(){for(var t=this.values.length,e=0;this.dataPoints[e];)e++;return Math.round(e/t*100)},n.prototype.getLabel=function(){return this.graph.filterLabel},n.prototype.getColumn=function(){return this.column},n.prototype.getSelectedValue=function(){return void 0===this.index?void 0:this.values[this.index]},n.prototype.getValues=function(){return this.values},n.prototype.getValue=function(t){if(t>=this.values.length)throw"Error: index out of range";return this.values[t]},n.prototype._getDataPoints=function(t){if(void 0===t&&(t=this.index),void 0===t)return[];var e;if(this.dataPoints[t])e=this.dataPoints[t];else{var i={};i.column=this.column,i.value=this.values[t];var n=new s(this.data,{filter:function(t){return t[i.column]==i.value}}).get();e=this.graph._getDataPoints(n),this.dataPoints[t]=e}return e},n.prototype.setOnLoadCallback=function(t){this.onLoadCallback=t},n.prototype.selectValue=function(t){if(t>=this.values.length)throw"Error: index out of range";this.index=t,this.value=this.values[t]},n.prototype.loadInBackground=function(t){void 0===t&&(t=0);var e=this.graph.frame;if(t<this.values.length){this._getDataPoints(t),void 0===e.progress&&(e.progress=document.createElement("DIV"),e.progress.style.position="absolute",e.progress.style.color="gray",e.appendChild(e.progress));var i=this.getLoadedProgress();e.progress.innerHTML="Loading animation... "+i+"%",e.progress.style.bottom="60px",e.progress.style.left="10px";var n=this;setTimeout(function(){n.loadInBackground(t+1)},10),this.loaded=!1}else this.loaded=!0,void 0!==e.progress&&(e.removeChild(e.progress),e.progress=void 0),this.onLoadCallback&&this.onLoadCallback()},t.exports=n},function(t){Point2d=function(t,e){this.x=void 0!==t?t:0,this.y=void 0!==e?e:0},t.exports=Point2d},function(t){function e(t,e,i){this.x=void 0!==t?t:0,this.y=void 0!==e?e:0,this.z=void 0!==i?i:0}e.subtract=function(t,i){var n=new e;return n.x=t.x-i.x,n.y=t.y-i.y,n.z=t.z-i.z,n},e.add=function(t,i){var n=new e;return n.x=t.x+i.x,n.y=t.y+i.y,n.z=t.z+i.z,n},e.avg=function(t,i){return new e((t.x+i.x)/2,(t.y+i.y)/2,(t.z+i.z)/2)},e.crossProduct=function(t,i){var n=new e;return n.x=t.y*i.z-t.z*i.y,n.y=t.z*i.x-t.x*i.z,n.z=t.x*i.y-t.y*i.x,n},e.prototype.length=function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},t.exports=e},function(t,e,i){function n(t,e){if(void 0===t)throw"Error: No container element defined";if(this.container=t,this.visible=e&&void 0!=e.visible?e.visible:!0,this.visible){this.frame=document.createElement("DIV"),this.frame.style.width="100%",this.frame.style.position="relative",this.container.appendChild(this.frame),this.frame.prev=document.createElement("INPUT"),this.frame.prev.type="BUTTON",this.frame.prev.value="Prev",this.frame.appendChild(this.frame.prev),this.frame.play=document.createElement("INPUT"),this.frame.play.type="BUTTON",this.frame.play.value="Play",this.frame.appendChild(this.frame.play),this.frame.next=document.createElement("INPUT"),this.frame.next.type="BUTTON",this.frame.next.value="Next",this.frame.appendChild(this.frame.next),this.frame.bar=document.createElement("INPUT"),this.frame.bar.type="BUTTON",this.frame.bar.style.position="absolute",this.frame.bar.style.border="1px solid red",this.frame.bar.style.width="100px",this.frame.bar.style.height="6px",this.frame.bar.style.borderRadius="2px",this.frame.bar.style.MozBorderRadius="2px",this.frame.bar.style.border="1px solid #7F7F7F",this.frame.bar.style.backgroundColor="#E5E5E5",this.frame.appendChild(this.frame.bar),this.frame.slide=document.createElement("INPUT"),this.frame.slide.type="BUTTON",this.frame.slide.style.margin="0px",this.frame.slide.value=" ",this.frame.slide.style.position="relative",this.frame.slide.style.left="-100px",this.frame.appendChild(this.frame.slide);var i=this;this.frame.slide.onmousedown=function(t){i._onMouseDown(t)},this.frame.prev.onclick=function(t){i.prev(t)},this.frame.play.onclick=function(t){i.togglePlay(t)
},this.frame.next.onclick=function(t){i.next(t)}}this.onChangeCallback=void 0,this.values=[],this.index=void 0,this.playTimeout=void 0,this.playInterval=1e3,this.playLoop=!0}var s=i(1);n.prototype.prev=function(){var t=this.getIndex();t>0&&(t--,this.setIndex(t))},n.prototype.next=function(){var t=this.getIndex();t<this.values.length-1&&(t++,this.setIndex(t))},n.prototype.playNext=function(){var t=new Date,e=this.getIndex();e<this.values.length-1?(e++,this.setIndex(e)):this.playLoop&&(e=0,this.setIndex(e));var i=new Date,n=i-t,s=Math.max(this.playInterval-n,0),o=this;this.playTimeout=setTimeout(function(){o.playNext()},s)},n.prototype.togglePlay=function(){void 0===this.playTimeout?this.play():this.stop()},n.prototype.play=function(){this.playTimeout||(this.playNext(),this.frame&&(this.frame.play.value="Stop"))},n.prototype.stop=function(){clearInterval(this.playTimeout),this.playTimeout=void 0,this.frame&&(this.frame.play.value="Play")},n.prototype.setOnChangeCallback=function(t){this.onChangeCallback=t},n.prototype.setPlayInterval=function(t){this.playInterval=t},n.prototype.getPlayInterval=function(){return this.playInterval},n.prototype.setPlayLoop=function(t){this.playLoop=t},n.prototype.onChange=function(){void 0!==this.onChangeCallback&&this.onChangeCallback()},n.prototype.redraw=function(){if(this.frame){this.frame.bar.style.top=this.frame.clientHeight/2-this.frame.bar.offsetHeight/2+"px",this.frame.bar.style.width=this.frame.clientWidth-this.frame.prev.clientWidth-this.frame.play.clientWidth-this.frame.next.clientWidth-30+"px";var t=this.indexToLeft(this.index);this.frame.slide.style.left=t+"px"}},n.prototype.setValues=function(t){this.values=t,this.values.length>0?this.setIndex(0):this.index=void 0},n.prototype.setIndex=function(t){if(!(t<this.values.length))throw"Error: index out of range";this.index=t,this.redraw(),this.onChange()},n.prototype.getIndex=function(){return this.index},n.prototype.get=function(){return this.values[this.index]},n.prototype._onMouseDown=function(t){var e=t.which?1===t.which:1===t.button;if(e){this.startClientX=t.clientX,this.startSlideX=parseFloat(this.frame.slide.style.left),this.frame.style.cursor="move";var i=this;this.onmousemove=function(t){i._onMouseMove(t)},this.onmouseup=function(t){i._onMouseUp(t)},s.addEventListener(document,"mousemove",this.onmousemove),s.addEventListener(document,"mouseup",this.onmouseup),s.preventDefault(t)}},n.prototype.leftToIndex=function(t){var e=parseFloat(this.frame.bar.style.width)-this.frame.slide.clientWidth-10,i=t-3,n=Math.round(i/e*(this.values.length-1));return 0>n&&(n=0),n>this.values.length-1&&(n=this.values.length-1),n},n.prototype.indexToLeft=function(t){var e=parseFloat(this.frame.bar.style.width)-this.frame.slide.clientWidth-10,i=t/(this.values.length-1)*e,n=i+3;return n},n.prototype._onMouseMove=function(t){var e=t.clientX-this.startClientX,i=this.startSlideX+e,n=this.leftToIndex(i);this.setIndex(n),s.preventDefault()},n.prototype._onMouseUp=function(){this.frame.style.cursor="auto",s.removeEventListener(document,"mousemove",this.onmousemove),s.removeEventListener(document,"mouseup",this.onmouseup),s.preventDefault()},t.exports=n},function(t){function e(t,e,i,n){this._start=0,this._end=0,this._step=1,this.prettyStep=!0,this.precision=5,this._current=0,this.setRange(t,e,i,n)}e.prototype.setRange=function(t,e,i,n){this._start=t?t:0,this._end=e?e:0,this.setStep(i,n)},e.prototype.setStep=function(t,i){void 0===t||0>=t||(void 0!==i&&(this.prettyStep=i),this._step=this.prettyStep===!0?e.calculatePrettyStep(t):t)},e.calculatePrettyStep=function(t){var e=function(t){return Math.log(t)/Math.LN10},i=Math.pow(10,Math.round(e(t))),n=2*Math.pow(10,Math.round(e(t/2))),s=5*Math.pow(10,Math.round(e(t/5))),o=i;return Math.abs(n-t)<=Math.abs(o-t)&&(o=n),Math.abs(s-t)<=Math.abs(o-t)&&(o=s),0>=o&&(o=1),o},e.prototype.getCurrent=function(){return parseFloat(this._current.toPrecision(this.precision))},e.prototype.getStep=function(){return this._step},e.prototype.start=function(){this._current=this._start-this._start%this._step},e.prototype.next=function(){this._current+=this._step},e.prototype.end=function(){return this._current>this._end},t.exports=e},function(t,e,i){function n(t,e,i){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");var s=this;this.defaultOptions={start:null,end:null,autoResize:!0,orientation:"bottom",width:null,height:null,maxHeight:null,minHeight:null},this.options=r.deepExtend({},this.defaultOptions),this._create(t),this.components=[],this.body={dom:this.dom,domProps:this.props,emitter:{on:this.on.bind(this),off:this.off.bind(this),emit:this.emit.bind(this)},util:{snap:null,toScreen:s._toScreen.bind(s),toGlobalScreen:s._toGlobalScreen.bind(s),toTime:s._toTime.bind(s),toGlobalTime:s._toGlobalTime.bind(s)}},this.range=new c(this.body),this.components.push(this.range),this.body.range=this.range,this.timeAxis=new l(this.body),this.components.push(this.timeAxis),this.body.util.snap=this.timeAxis.snap.bind(this.timeAxis),this.currentTime=new d(this.body),this.components.push(this.currentTime),this.customTime=new u(this.body),this.components.push(this.customTime),this.itemSet=new p(this.body),this.components.push(this.itemSet),this.itemsData=null,this.groupsData=null,i&&this.setOptions(i),e?this.setItems(e):this.redraw()}var s=i(45),o=i(41),r=i(1),a=i(3),h=i(4),c=i(15),l=i(27),d=i(19),u=i(20),p=i(24);s(n.prototype),n.prototype._create=function(t){this.dom={},this.dom.root=document.createElement("div"),this.dom.background=document.createElement("div"),this.dom.backgroundVertical=document.createElement("div"),this.dom.backgroundHorizontal=document.createElement("div"),this.dom.centerContainer=document.createElement("div"),this.dom.leftContainer=document.createElement("div"),this.dom.rightContainer=document.createElement("div"),this.dom.center=document.createElement("div"),this.dom.left=document.createElement("div"),this.dom.right=document.createElement("div"),this.dom.top=document.createElement("div"),this.dom.bottom=document.createElement("div"),this.dom.shadowTop=document.createElement("div"),this.dom.shadowBottom=document.createElement("div"),this.dom.shadowTopLeft=document.createElement("div"),this.dom.shadowBottomLeft=document.createElement("div"),this.dom.shadowTopRight=document.createElement("div"),this.dom.shadowBottomRight=document.createElement("div"),this.dom.background.className="vispanel background",this.dom.backgroundVertical.className="vispanel background vertical",this.dom.backgroundHorizontal.className="vispanel background horizontal",this.dom.centerContainer.className="vispanel center",this.dom.leftContainer.className="vispanel left",this.dom.rightContainer.className="vispanel right",this.dom.top.className="vispanel top",this.dom.bottom.className="vispanel bottom",this.dom.left.className="content",this.dom.center.className="content",this.dom.right.className="content",this.dom.shadowTop.className="shadow top",this.dom.shadowBottom.className="shadow bottom",this.dom.shadowTopLeft.className="shadow top",this.dom.shadowBottomLeft.className="shadow bottom",this.dom.shadowTopRight.className="shadow top",this.dom.shadowBottomRight.className="shadow bottom",this.dom.root.appendChild(this.dom.background),this.dom.root.appendChild(this.dom.backgroundVertical),this.dom.root.appendChild(this.dom.backgroundHorizontal),this.dom.root.appendChild(this.dom.centerContainer),this.dom.root.appendChild(this.dom.leftContainer),this.dom.root.appendChild(this.dom.rightContainer),this.dom.root.appendChild(this.dom.top),this.dom.root.appendChild(this.dom.bottom),this.dom.centerContainer.appendChild(this.dom.center),this.dom.leftContainer.appendChild(this.dom.left),this.dom.rightContainer.appendChild(this.dom.right),this.dom.centerContainer.appendChild(this.dom.shadowTop),this.dom.centerContainer.appendChild(this.dom.shadowBottom),this.dom.leftContainer.appendChild(this.dom.shadowTopLeft),this.dom.leftContainer.appendChild(this.dom.shadowBottomLeft),this.dom.rightContainer.appendChild(this.dom.shadowTopRight),this.dom.rightContainer.appendChild(this.dom.shadowBottomRight),this.on("rangechange",this.redraw.bind(this)),this.on("change",this.redraw.bind(this)),this.on("touch",this._onTouch.bind(this)),this.on("pinch",this._onPinch.bind(this)),this.on("dragstart",this._onDragStart.bind(this)),this.on("drag",this._onDrag.bind(this)),this.hammer=o(this.dom.root,{prevent_default:!0}),this.listeners={};var e=this,i=["touch","pinch","tap","doubletap","hold","dragstart","drag","dragend","mousewheel","DOMMouseScroll"];if(i.forEach(function(t){var i=function(){var i=[t].concat(Array.prototype.slice.call(arguments,0));e.emit.apply(e,i)};e.hammer.on(t,i),e.listeners[t]=i}),this.props={root:{},background:{},centerContainer:{},leftContainer:{},rightContainer:{},center:{},left:{},right:{},top:{},bottom:{},border:{},scrollTop:0,scrollTopMin:0},this.touch={},!t)throw new Error("No container provided");t.appendChild(this.dom.root)},n.prototype.destroy=function(){this.clear(),this.off(),this._stopAutoResize(),this.dom.root.parentNode&&this.dom.root.parentNode.removeChild(this.dom.root),this.dom=null;for(var t in this.listeners)this.listeners.hasOwnProperty(t)&&delete this.listeners[t];this.listeners=null,this.hammer=null,this.components.forEach(function(t){t.destroy()}),this.body=null},n.prototype.setOptions=function(t){if(t){var e=["width","height","minHeight","maxHeight","autoResize","start","end","orientation"];r.selectiveExtend(e,this.options,t),this._initAutoResize()}if(this.components.forEach(function(e){e.setOptions(t)}),t&&t.order)throw new Error("Option order is deprecated. There is no replacement for this feature.");this.redraw()},n.prototype.setCustomTime=function(t){if(!this.customTime)throw new Error("Cannot get custom time: Custom time bar is not enabled");this.customTime.setCustomTime(t)},n.prototype.getCustomTime=function(){if(!this.customTime)throw new Error("Cannot get custom time: Custom time bar is not enabled");return this.customTime.getCustomTime()},n.prototype.setItems=function(t){var e,i=null==this.itemsData;if(e=t?t instanceof a||t instanceof h?t:new a(t,{type:{start:"Date",end:"Date"}}):null,this.itemsData=e,this.itemSet&&this.itemSet.setItems(e),i&&("start"in this.options||"end"in this.options)){this.fit();var n="start"in this.options?r.convert(this.options.start,"Date"):null,s="end"in this.options?r.convert(this.options.end,"Date"):null;this.setWindow(n,s)}},n.prototype.getVisibleItems=function(){return this.itemSet&&this.itemSet.getVisibleItems()||[]},n.prototype.setGroups=function(t){var e;e=t?t instanceof a||t instanceof h?t:new a(t):null,this.groupsData=e,this.itemSet.setGroups(e)},n.prototype.clear=function(t){(!t||t.items)&&this.setItems(null),(!t||t.groups)&&this.setGroups(null),(!t||t.options)&&(this.components.forEach(function(t){t.setOptions(t.defaultOptions)}),this.setOptions(this.defaultOptions))},n.prototype.fit=function(){var t=this.getItemRange(),e=t.min,i=t.max;if(null!=e&&null!=i){var n=i.valueOf()-e.valueOf();0>=n&&(n=864e5),e=new Date(e.valueOf()-.05*n),i=new Date(i.valueOf()+.05*n)}(null!==e||null!==i)&&this.range.setRange(e,i)},n.prototype.getItemRange=function(){var t=this.itemsData.getDataSet(),e=null,i=null;if(t){var n=t.min("start");e=n?r.convert(n.start,"Date").valueOf():null;var s=t.max("start");s&&(i=r.convert(s.start,"Date").valueOf());var o=t.max("end");o&&(i=null==i?r.convert(o.end,"Date").valueOf():Math.max(i,r.convert(o.end,"Date").valueOf()))}return{min:null!=e?new Date(e):null,max:null!=i?new Date(i):null}},n.prototype.setSelection=function(t){this.itemSet&&this.itemSet.setSelection(t)},n.prototype.getSelection=function(){return this.itemSet&&this.itemSet.getSelection()||[]},n.prototype.setWindow=function(t,e){if(1==arguments.length){var i=arguments[0];this.range.setRange(i.start,i.end)}else this.range.setRange(t,e)},n.prototype.getWindow=function(){var t=this.range.getRange();return{start:new Date(t.start),end:new Date(t.end)}},n.prototype.redraw=function(){var t=!1,e=this.options,i=this.props,n=this.dom;if(n){n.root.className="vis timeline root "+e.orientation,n.root.style.maxHeight=r.option.asSize(e.maxHeight,""),n.root.style.minHeight=r.option.asSize(e.minHeight,""),n.root.style.width=r.option.asSize(e.width,""),i.border.left=(n.centerContainer.offsetWidth-n.centerContainer.clientWidth)/2,i.border.right=i.border.left,i.border.top=(n.centerContainer.offsetHeight-n.centerContainer.clientHeight)/2,i.border.bottom=i.border.top;var s=n.root.offsetHeight-n.root.clientHeight,o=n.root.offsetWidth-n.root.clientWidth;i.center.height=n.center.offsetHeight,i.left.height=n.left.offsetHeight,i.right.height=n.right.offsetHeight,i.top.height=n.top.clientHeight||-i.border.top,i.bottom.height=n.bottom.clientHeight||-i.border.bottom;var a=Math.max(i.left.height,i.center.height,i.right.height),h=i.top.height+a+i.bottom.height+s+i.border.top+i.border.bottom;n.root.style.height=r.option.asSize(e.height,h+"px"),i.root.height=n.root.offsetHeight,i.background.height=i.root.height-s;var c=i.root.height-i.top.height-i.bottom.height-s;i.centerContainer.height=c,i.leftContainer.height=c,i.rightContainer.height=i.leftContainer.height,i.root.width=n.root.offsetWidth,i.background.width=i.root.width-o,i.left.width=n.leftContainer.clientWidth||-i.border.left,i.leftContainer.width=i.left.width,i.right.width=n.rightContainer.clientWidth||-i.border.right,i.rightContainer.width=i.right.width;var l=i.root.width-i.left.width-i.right.width-o;i.center.width=l,i.centerContainer.width=l,i.top.width=l,i.bottom.width=l,n.background.style.height=i.background.height+"px",n.backgroundVertical.style.height=i.background.height+"px",n.backgroundHorizontal.style.height=i.centerContainer.height+"px",n.centerContainer.style.height=i.centerContainer.height+"px",n.leftContainer.style.height=i.leftContainer.height+"px",n.rightContainer.style.height=i.rightContainer.height+"px",n.background.style.width=i.background.width+"px",n.backgroundVertical.style.width=i.centerContainer.width+"px",n.backgroundHorizontal.style.width=i.background.width+"px",n.centerContainer.style.width=i.center.width+"px",n.top.style.width=i.top.width+"px",n.bottom.style.width=i.bottom.width+"px",n.background.style.left="0",n.background.style.top="0",n.backgroundVertical.style.left=i.left.width+"px",n.backgroundVertical.style.top="0",n.backgroundHorizontal.style.left="0",n.backgroundHorizontal.style.top=i.top.height+"px",n.centerContainer.style.left=i.left.width+"px",n.centerContainer.style.top=i.top.height+"px",n.leftContainer.style.left="0",n.leftContainer.style.top=i.top.height+"px",n.rightContainer.style.left=i.left.width+i.center.width+"px",n.rightContainer.style.top=i.top.height+"px",n.top.style.left=i.left.width+"px",n.top.style.top="0",n.bottom.style.left=i.left.width+"px",n.bottom.style.top=i.top.height+i.centerContainer.height+"px",this._updateScrollTop();var d=this.props.scrollTop;"bottom"==e.orientation&&(d+=Math.max(this.props.centerContainer.height-this.props.center.height-this.props.border.top-this.props.border.bottom,0)),n.center.style.left="0",n.center.style.top=d+"px",n.left.style.left="0",n.left.style.top=d+"px",n.right.style.left="0",n.right.style.top=d+"px";var u=0==this.props.scrollTop?"hidden":"",p=this.props.scrollTop==this.props.scrollTopMin?"hidden":"";n.shadowTop.style.visibility=u,n.shadowBottom.style.visibility=p,n.shadowTopLeft.style.visibility=u,n.shadowBottomLeft.style.visibility=p,n.shadowTopRight.style.visibility=u,n.shadowBottomRight.style.visibility=p,this.components.forEach(function(e){t=e.redraw()||t}),t&&this.redraw()}},n.prototype.repaint=function(){throw new Error("Function repaint is deprecated. Use redraw instead.")},n.prototype._toTime=function(t){var e=this.range.conversion(this.props.center.width);return new Date(t/e.scale+e.offset)},n.prototype._toGlobalTime=function(t){var e=this.range.conversion(this.props.root.width);return new Date(t/e.scale+e.offset)},n.prototype._toScreen=function(t){var e=this.range.conversion(this.props.center.width);return(t.valueOf()-e.offset)*e.scale},n.prototype._toGlobalScreen=function(t){var e=this.range.conversion(this.props.root.width);return(t.valueOf()-e.offset)*e.scale},n.prototype._initAutoResize=function(){1==this.options.autoResize?this._startAutoResize():this._stopAutoResize()},n.prototype._startAutoResize=function(){var t=this;this._stopAutoResize(),this._onResize=function(){return 1!=t.options.autoResize?void t._stopAutoResize():void(t.dom.root&&(t.dom.root.clientWidth!=t.props.lastWidth||t.dom.root.clientHeight!=t.props.lastHeight)&&(t.props.lastWidth=t.dom.root.clientWidth,t.props.lastHeight=t.dom.root.clientHeight,t.emit("change")))},r.addEventListener(window,"resize",this._onResize),this.watchTimer=setInterval(this._onResize,1e3)},n.prototype._stopAutoResize=function(){this.watchTimer&&(clearInterval(this.watchTimer),this.watchTimer=void 0),r.removeEventListener(window,"resize",this._onResize),this._onResize=null},n.prototype._onTouch=function(){this.touch.allowDragging=!0},n.prototype._onPinch=function(){this.touch.allowDragging=!1},n.prototype._onDragStart=function(){this.touch.initialScrollTop=this.props.scrollTop},n.prototype._onDrag=function(t){if(this.touch.allowDragging){var e=t.gesture.deltaY,i=this._getScrollTop(),n=this._setScrollTop(this.touch.initialScrollTop+e);n!=i&&this.redraw()}},n.prototype._setScrollTop=function(t){return this.props.scrollTop=t,this._updateScrollTop(),this.props.scrollTop},n.prototype._updateScrollTop=function(){var t=Math.min(this.props.centerContainer.height-this.props.center.height,0);return t!=this.props.scrollTopMin&&("bottom"==this.options.orientation&&(this.props.scrollTop+=t-this.props.scrollTopMin),this.props.scrollTopMin=t),this.props.scrollTop>0&&(this.props.scrollTop=0),this.props.scrollTop<t&&(this.props.scrollTop=t),this.props.scrollTop},n.prototype._getScrollTop=function(){return this.props.scrollTop},t.exports=n},function(t,e,i){function n(t,e,i,n){var s=this;this.defaultOptions={start:null,end:null,autoResize:!0,orientation:"bottom",width:null,height:null,maxHeight:null,minHeight:null},this.options=r.deepExtend({},this.defaultOptions),this._create(t),this.components=[],this.body={dom:this.dom,domProps:this.props,emitter:{on:this.on.bind(this),off:this.off.bind(this),emit:this.emit.bind(this)},util:{snap:null,toScreen:s._toScreen.bind(s),toGlobalScreen:s._toGlobalScreen.bind(s),toTime:s._toTime.bind(s),toGlobalTime:s._toGlobalTime.bind(s)}},this.range=new c(this.body),this.components.push(this.range),this.body.range=this.range,this.timeAxis=new l(this.body),this.components.push(this.timeAxis),this.body.util.snap=this.timeAxis.snap.bind(this.timeAxis),this.currentTime=new d(this.body),this.components.push(this.currentTime),this.customTime=new u(this.body),this.components.push(this.customTime),this.linegraph=new p(this.body),this.components.push(this.linegraph),this.itemsData=null,this.groupsData=null,i&&this.setOptions(i),n&&this.setGroups(n),e?this.setItems(e):this.redraw()}var s=i(45),o=i(41),r=i(1),a=i(3),h=i(4),c=i(15),l=i(27),d=i(19),u=i(20),p=i(26);s(n.prototype),n.prototype._create=function(t){this.dom={},this.dom.root=document.createElement("div"),this.dom.background=document.createElement("div"),this.dom.backgroundVertical=document.createElement("div"),this.dom.backgroundHorizontalContainer=document.createElement("div"),this.dom.centerContainer=document.createElement("div"),this.dom.leftContainer=document.createElement("div"),this.dom.rightContainer=document.createElement("div"),this.dom.backgroundHorizontal=document.createElement("div"),this.dom.center=document.createElement("div"),this.dom.left=document.createElement("div"),this.dom.right=document.createElement("div"),this.dom.top=document.createElement("div"),this.dom.bottom=document.createElement("div"),this.dom.shadowTop=document.createElement("div"),this.dom.shadowBottom=document.createElement("div"),this.dom.shadowTopLeft=document.createElement("div"),this.dom.shadowBottomLeft=document.createElement("div"),this.dom.shadowTopRight=document.createElement("div"),this.dom.shadowBottomRight=document.createElement("div"),this.dom.background.className="vispanel background",this.dom.backgroundVertical.className="vispanel background vertical",this.dom.backgroundHorizontalContainer.className="vispanel background horizontal",this.dom.backgroundHorizontal.className="vispanel background horizontal",this.dom.centerContainer.className="vispanel center",this.dom.leftContainer.className="vispanel left",this.dom.rightContainer.className="vispanel right",this.dom.top.className="vispanel top",this.dom.bottom.className="vispanel bottom",this.dom.left.className="content",this.dom.center.className="content",this.dom.right.className="content",this.dom.shadowTop.className="shadow top",this.dom.shadowBottom.className="shadow bottom",this.dom.shadowTopLeft.className="shadow top",this.dom.shadowBottomLeft.className="shadow bottom",this.dom.shadowTopRight.className="shadow top",this.dom.shadowBottomRight.className="shadow bottom",this.dom.root.appendChild(this.dom.background),this.dom.root.appendChild(this.dom.backgroundVertical),this.dom.root.appendChild(this.dom.backgroundHorizontalContainer),this.dom.root.appendChild(this.dom.centerContainer),this.dom.root.appendChild(this.dom.leftContainer),this.dom.root.appendChild(this.dom.rightContainer),this.dom.root.appendChild(this.dom.top),this.dom.root.appendChild(this.dom.bottom),this.dom.backgroundHorizontalContainer.appendChild(this.dom.backgroundHorizontal),this.dom.centerContainer.appendChild(this.dom.center),this.dom.leftContainer.appendChild(this.dom.left),this.dom.rightContainer.appendChild(this.dom.right),this.dom.centerContainer.appendChild(this.dom.shadowTop),this.dom.centerContainer.appendChild(this.dom.shadowBottom),this.dom.leftContainer.appendChild(this.dom.shadowTopLeft),this.dom.leftContainer.appendChild(this.dom.shadowBottomLeft),this.dom.rightContainer.appendChild(this.dom.shadowTopRight),this.dom.rightContainer.appendChild(this.dom.shadowBottomRight),this.on("rangechange",this.redraw.bind(this)),this.on("change",this.redraw.bind(this)),this.on("touch",this._onTouch.bind(this)),this.on("pinch",this._onPinch.bind(this)),this.on("dragstart",this._onDragStart.bind(this)),this.on("drag",this._onDrag.bind(this)),this.hammer=o(this.dom.root,{prevent_default:!0}),this.listeners={};var e=this,i=["touch","pinch","tap","doubletap","hold","dragstart","drag","dragend","mousewheel","DOMMouseScroll"];if(i.forEach(function(t){var i=function(){var i=[t].concat(Array.prototype.slice.call(arguments,0));e.emit.apply(e,i)};e.hammer.on(t,i),e.listeners[t]=i}),this.props={root:{},background:{},centerContainer:{},leftContainer:{},rightContainer:{},center:{},left:{},right:{},top:{},bottom:{},border:{},scrollTop:0,scrollTopMin:0},this.touch={},!t)throw new Error("No container provided");t.appendChild(this.dom.root)},n.prototype.destroy=function(){this.clear(),this.off(),this._stopAutoResize(),this.dom.root.parentNode&&this.dom.root.parentNode.removeChild(this.dom.root),this.dom=null;for(var t in this.listeners)this.listeners.hasOwnProperty(t)&&delete this.listeners[t];this.listeners=null,this.hammer=null,this.components.forEach(function(t){t.destroy()}),this.body=null},n.prototype.setOptions=function(t){if(t){var e=["width","height","minHeight","maxHeight","autoResize","start","end","orientation"];r.selectiveExtend(e,this.options,t),this._initAutoResize()}if(this.components.forEach(function(e){e.setOptions(t)}),t&&t.order)throw new Error("Option order is deprecated. There is no replacement for this feature.");this.redraw()},n.prototype.setCustomTime=function(t){if(!this.customTime)throw new Error("Cannot get custom time: Custom time bar is not enabled");this.customTime.setCustomTime(t)},n.prototype.getCustomTime=function(){if(!this.customTime)throw new Error("Cannot get custom time: Custom time bar is not enabled");return this.customTime.getCustomTime()},n.prototype.setItems=function(t){var e,i=null==this.itemsData;if(e=t?t instanceof a||t instanceof h?t:new a(t,{type:{start:"Date",end:"Date"}}):null,this.itemsData=e,this.linegraph&&this.linegraph.setItems(e),i&&("start"in this.options||"end"in this.options)){this.fit();var n="start"in this.options?r.convert(this.options.start,"Date"):null,s="end"in this.options?r.convert(this.options.end,"Date"):null;this.setWindow(n,s)}},n.prototype.setGroups=function(t){var e;e=t?t instanceof a||t instanceof h?t:new a(t):null,this.groupsData=e,this.linegraph.setGroups(e)},n.prototype.clear=function(t){(!t||t.items)&&this.setItems(null),(!t||t.groups)&&this.setGroups(null),(!t||t.options)&&(this.components.forEach(function(t){t.setOptions(t.defaultOptions)}),this.setOptions(this.defaultOptions))},n.prototype.fit=function(){var t=this.getItemRange(),e=t.min,i=t.max;if(null!=e&&null!=i){var n=i.valueOf()-e.valueOf();0>=n&&(n=864e5),e=new Date(e.valueOf()-.05*n),i=new Date(i.valueOf()+.05*n)}(null!==e||null!==i)&&this.range.setRange(e,i)},n.prototype.getItemRange=function(){var t=this.itemsData,e=null,i=null;if(t){var n=t.min("start");e=n?r.convert(n.start,"Date").valueOf():null;var s=t.max("start");s&&(i=r.convert(s.start,"Date").valueOf());var o=t.max("end");o&&(i=null==i?r.convert(o.end,"Date").valueOf():Math.max(i,r.convert(o.end,"Date").valueOf()))}return{min:null!=e?new Date(e):null,max:null!=i?new Date(i):null}},n.prototype.setWindow=function(t,e){if(1==arguments.length){var i=arguments[0];this.range.setRange(i.start,i.end)}else this.range.setRange(t,e)},n.prototype.getWindow=function(){var t=this.range.getRange();return{start:new Date(t.start),end:new Date(t.end)}},n.prototype.redraw=function(){var t=!1,e=this.options,i=this.props,n=this.dom;if(n){n.root.className="vis timeline root "+e.orientation,n.root.style.maxHeight=r.option.asSize(e.maxHeight,""),n.root.style.minHeight=r.option.asSize(e.minHeight,""),n.root.style.width=r.option.asSize(e.width,""),i.border.left=(n.centerContainer.offsetWidth-n.centerContainer.clientWidth)/2,i.border.right=i.border.left,i.border.top=(n.centerContainer.offsetHeight-n.centerContainer.clientHeight)/2,i.border.bottom=i.border.top;var s=n.root.offsetHeight-n.root.clientHeight,o=n.root.offsetWidth-n.root.clientWidth;i.center.height=n.center.offsetHeight,i.left.height=n.left.offsetHeight,i.right.height=n.right.offsetHeight,i.top.height=n.top.clientHeight||-i.border.top,i.bottom.height=n.bottom.clientHeight||-i.border.bottom;var a=Math.max(i.left.height,i.center.height,i.right.height),h=i.top.height+a+i.bottom.height+s+i.border.top+i.border.bottom;n.root.style.height=r.option.asSize(e.height,h+"px"),i.root.height=n.root.offsetHeight,i.background.height=i.root.height-s;var c=i.root.height-i.top.height-i.bottom.height-s;i.centerContainer.height=c,i.leftContainer.height=c,i.rightContainer.height=i.leftContainer.height,i.root.width=n.root.offsetWidth,i.background.width=i.root.width-o,i.left.width=n.leftContainer.clientWidth||-i.border.left,i.leftContainer.width=i.left.width,i.right.width=n.rightContainer.clientWidth||-i.border.right,i.rightContainer.width=i.right.width;var l=i.root.width-i.left.width-i.right.width-o;i.center.width=l,i.centerContainer.width=l,i.top.width=l,i.bottom.width=l,n.background.style.height=i.background.height+"px",n.backgroundVertical.style.height=i.background.height+"px",n.backgroundHorizontalContainer.style.height=i.centerContainer.height+"px",n.centerContainer.style.height=i.centerContainer.height+"px",n.leftContainer.style.height=i.leftContainer.height+"px",n.rightContainer.style.height=i.rightContainer.height+"px",n.background.style.width=i.background.width+"px",n.backgroundVertical.style.width=i.centerContainer.width+"px",n.backgroundHorizontalContainer.style.width=i.background.width+"px",n.backgroundHorizontal.style.width=i.background.width+"px",n.centerContainer.style.width=i.center.width+"px",n.top.style.width=i.top.width+"px",n.bottom.style.width=i.bottom.width+"px",n.background.style.left="0",n.background.style.top="0",n.backgroundVertical.style.left=i.left.width+"px",n.backgroundVertical.style.top="0",n.backgroundHorizontalContainer.style.left="0",n.backgroundHorizontalContainer.style.top=i.top.height+"px",n.centerContainer.style.left=i.left.width+"px",n.centerContainer.style.top=i.top.height+"px",n.leftContainer.style.left="0",n.leftContainer.style.top=i.top.height+"px",n.rightContainer.style.left=i.left.width+i.center.width+"px",n.rightContainer.style.top=i.top.height+"px",n.top.style.left=i.left.width+"px",n.top.style.top="0",n.bottom.style.left=i.left.width+"px",n.bottom.style.top=i.top.height+i.centerContainer.height+"px",this._updateScrollTop();var d=this.props.scrollTop;"bottom"==e.orientation&&(d+=Math.max(this.props.centerContainer.height-this.props.center.height-this.props.border.top-this.props.border.bottom,0)),n.center.style.left="0",n.center.style.top=d+"px",n.backgroundHorizontal.style.left="0",n.backgroundHorizontal.style.top=d+"px",n.left.style.left="0",n.left.style.top=d+"px",n.right.style.left="0",n.right.style.top=d+"px";var u=0==this.props.scrollTop?"hidden":"",p=this.props.scrollTop==this.props.scrollTopMin?"hidden":"";n.shadowTop.style.visibility=u,n.shadowBottom.style.visibility=p,n.shadowTopLeft.style.visibility=u,n.shadowBottomLeft.style.visibility=p,n.shadowTopRight.style.visibility=u,n.shadowBottomRight.style.visibility=p,this.components.forEach(function(e){t=e.redraw()||t}),t&&this.redraw()}},n.prototype._toTime=function(t){var e=this.range.conversion(this.props.center.width);return new Date(t/e.scale+e.offset)},n.prototype._toGlobalTime=function(t){var e=this.range.conversion(this.props.root.width);return new Date(t/e.scale+e.offset)},n.prototype._toScreen=function(t){var e=this.range.conversion(this.props.center.width);return(t.valueOf()-e.offset)*e.scale},n.prototype._toGlobalScreen=function(t){var e=this.range.conversion(this.props.root.width);return(t.valueOf()-e.offset)*e.scale},n.prototype._initAutoResize=function(){1==this.options.autoResize?this._startAutoResize():this._stopAutoResize()},n.prototype._startAutoResize=function(){var t=this;this._stopAutoResize(),this._onResize=function(){return 1!=t.options.autoResize?void t._stopAutoResize():void(t.dom.root&&(t.dom.root.clientWidth!=t.props.lastWidth||t.dom.root.clientHeight!=t.props.lastHeight)&&(t.props.lastWidth=t.dom.root.clientWidth,t.props.lastHeight=t.dom.root.clientHeight,t.emit("change")))},r.addEventListener(window,"resize",this._onResize),this.watchTimer=setInterval(this._onResize,1e3)},n.prototype._stopAutoResize=function(){this.watchTimer&&(clearInterval(this.watchTimer),this.watchTimer=void 0),r.removeEventListener(window,"resize",this._onResize),this._onResize=null},n.prototype._onTouch=function(){this.touch.allowDragging=!0},n.prototype._onPinch=function(){this.touch.allowDragging=!1},n.prototype._onDragStart=function(){this.touch.initialScrollTop=this.props.scrollTop},n.prototype._onDrag=function(t){if(this.touch.allowDragging){var e=t.gesture.deltaY,i=this._getScrollTop(),n=this._setScrollTop(this.touch.initialScrollTop+e);n!=i&&this.redraw()}},n.prototype._setScrollTop=function(t){return this.props.scrollTop=t,this._updateScrollTop(),this.props.scrollTop},n.prototype._updateScrollTop=function(){var t=Math.min(this.props.centerContainer.height-this.props.center.height,0);return t!=this.props.scrollTopMin&&("bottom"==this.options.orientation&&(this.props.scrollTop+=t-this.props.scrollTopMin),this.props.scrollTopMin=t),this.props.scrollTop>0&&(this.props.scrollTop=0),this.props.scrollTop<t&&(this.props.scrollTop=t),this.props.scrollTop},n.prototype._getScrollTop=function(){return this.props.scrollTop},t.exports=n},function(t){function e(t,e,i,n,s){this.current=0,this.autoScale=!0,this.stepIndex=0,this.step=1,this.scale=1,this.marginStart,this.marginEnd,this.majorSteps=[1,2,5,10],this.minorSteps=[.25,.5,1,2],this.setRange(t,e,i,n,s)}e.prototype.setRange=function(t,e,i,n,s){this._start=t,this._end=e,t==e&&(this._start=t-.75,this._end=e+1),this.autoScale&&this.setMinimumStep(i,n,s),this.setFirst()
},e.prototype.setMinimumStep=function(t,e){var i=this._end-this._start,n=1.1*i,s=t*(n/e),o=Math.round(Math.log(n)/Math.LN10),r=-1,a=Math.pow(10,o),h=0;0>o&&(h=o);for(var c=!1,l=h;Math.abs(l)<=Math.abs(o);l++){a=Math.pow(10,l);for(var d=0;d<this.minorSteps.length;d++){var u=a*this.minorSteps[d];if(u>=s){c=!0,r=d;break}}if(1==c)break}this.stepIndex=r,this.scale=a,this.step=a*this.minorSteps[r]},e.prototype.first=function(){this.setFirst()},e.prototype.setFirst=function(){var t=this._start-this.scale*this.minorSteps[this.stepIndex],e=this._end+this.scale*this.minorSteps[this.stepIndex];this.marginEnd=this.roundToMinor(e),this.marginStart=this.roundToMinor(t),this.marginRange=this.marginEnd-this.marginStart,this.current=this.marginEnd},e.prototype.roundToMinor=function(t){var e=t-t%(this.scale*this.minorSteps[this.stepIndex]);return t%(this.scale*this.minorSteps[this.stepIndex])>.5*this.scale*this.minorSteps[this.stepIndex]?e+this.scale*this.minorSteps[this.stepIndex]:e},e.prototype.hasNext=function(){return this.current>=this.marginStart},e.prototype.next=function(){var t=this.current;this.current-=this.step,this.current==t&&(this.current=this._end)},e.prototype.previous=function(){this.current+=this.step,this.marginEnd+=this.step,this.marginRange=this.marginEnd-this.marginStart},e.prototype.getCurrent=function(){for(var t=""+Number(this.current).toPrecision(5),e=t.length-1;e>0;e--){if("0"!=t[e]){if("."==t[e]||","==t[e]){t=t.slice(0,e);break}break}t=t.slice(0,e)}return t},e.prototype.snap=function(){},e.prototype.isMajor=function(){return this.current%(this.scale*this.majorSteps[this.stepIndex])==0},t.exports=e},function(t,e,i){function n(t,e){var i=h().hours(0).minutes(0).seconds(0).milliseconds(0);this.start=i.clone().add("days",-3).valueOf(),this.end=i.clone().add("days",4).valueOf(),this.body=t,this.defaultOptions={start:null,end:null,direction:"horizontal",moveable:!0,zoomable:!0,min:null,max:null,zoomMin:10,zoomMax:31536e10},this.options=r.extend({},this.defaultOptions),this.props={touch:{}},this.body.emitter.on("dragstart",this._onDragStart.bind(this)),this.body.emitter.on("drag",this._onDrag.bind(this)),this.body.emitter.on("dragend",this._onDragEnd.bind(this)),this.body.emitter.on("hold",this._onHold.bind(this)),this.body.emitter.on("mousewheel",this._onMouseWheel.bind(this)),this.body.emitter.on("DOMMouseScroll",this._onMouseWheel.bind(this)),this.body.emitter.on("touch",this._onTouch.bind(this)),this.body.emitter.on("pinch",this._onPinch.bind(this)),this.setOptions(e)}function s(t){if("horizontal"!=t&&"vertical"!=t)throw new TypeError('Unknown direction "'+t+'". Choose "horizontal" or "vertical".')}function o(t,e){return{x:t.pageX-r.getAbsoluteLeft(e),y:t.pageY-r.getAbsoluteTop(e)}}var r=i(1),a=i(42),h=i(40),c=i(18);n.prototype=new c,n.prototype.setOptions=function(t){if(t){var e=["direction","min","max","zoomMin","zoomMax","moveable","zoomable"];r.selectiveExtend(e,this.options,t),("start"in t||"end"in t)&&this.setRange(t.start,t.end)}},n.prototype.setRange=function(t,e){var i=this._applyRange(t,e);if(i){var n={start:new Date(this.start),end:new Date(this.end)};this.body.emitter.emit("rangechange",n),this.body.emitter.emit("rangechanged",n)}},n.prototype._applyRange=function(t,e){var i,n=null!=t?r.convert(t,"Date").valueOf():this.start,s=null!=e?r.convert(e,"Date").valueOf():this.end,o=null!=this.options.max?r.convert(this.options.max,"Date").valueOf():null,a=null!=this.options.min?r.convert(this.options.min,"Date").valueOf():null;if(isNaN(n)||null===n)throw new Error('Invalid start "'+t+'"');if(isNaN(s)||null===s)throw new Error('Invalid end "'+e+'"');if(n>s&&(s=n),null!==a&&a>n&&(i=a-n,n+=i,s+=i,null!=o&&s>o&&(s=o)),null!==o&&s>o&&(i=s-o,n-=i,s-=i,null!=a&&a>n&&(n=a)),null!==this.options.zoomMin){var h=parseFloat(this.options.zoomMin);0>h&&(h=0),h>s-n&&(this.end-this.start===h?(n=this.start,s=this.end):(i=h-(s-n),n-=i/2,s+=i/2))}if(null!==this.options.zoomMax){var c=parseFloat(this.options.zoomMax);0>c&&(c=0),s-n>c&&(this.end-this.start===c?(n=this.start,s=this.end):(i=s-n-c,n+=i/2,s-=i/2))}var l=this.start!=n||this.end!=s;return this.start=n,this.end=s,l},n.prototype.getRange=function(){return{start:this.start,end:this.end}},n.prototype.conversion=function(t){return n.conversion(this.start,this.end,t)},n.conversion=function(t,e,i){return 0!=i&&e-t!=0?{offset:t,scale:i/(e-t)}:{offset:0,scale:1}},n.prototype._onDragStart=function(){this.options.moveable&&this.props.touch.allowDragging&&(this.props.touch.start=this.start,this.props.touch.end=this.end,this.body.dom.root&&(this.body.dom.root.style.cursor="move"))},n.prototype._onDrag=function(t){if(this.options.moveable){var e=this.options.direction;if(s(e),this.props.touch.allowDragging){var i="horizontal"==e?t.gesture.deltaX:t.gesture.deltaY,n=this.props.touch.end-this.props.touch.start,o="horizontal"==e?this.body.domProps.center.width:this.body.domProps.center.height,r=-i/o*n;this._applyRange(this.props.touch.start+r,this.props.touch.end+r),this.body.emitter.emit("rangechange",{start:new Date(this.start),end:new Date(this.end)})}}},n.prototype._onDragEnd=function(){this.options.moveable&&this.props.touch.allowDragging&&(this.body.dom.root&&(this.body.dom.root.style.cursor="auto"),this.body.emitter.emit("rangechanged",{start:new Date(this.start),end:new Date(this.end)}))},n.prototype._onMouseWheel=function(t){if(this.options.zoomable&&this.options.moveable){var e=0;if(t.wheelDelta?e=t.wheelDelta/120:t.detail&&(e=-t.detail/3),e){var i;i=0>e?1-e/5:1/(1+e/5);var n=a.fakeGesture(this,t),s=o(n.center,this.body.dom.center),r=this._pointerToDate(s);this.zoom(i,r)}t.preventDefault()}},n.prototype._onTouch=function(){this.props.touch.start=this.start,this.props.touch.end=this.end,this.props.touch.allowDragging=!0,this.props.touch.center=null},n.prototype._onHold=function(){this.props.touch.allowDragging=!1},n.prototype._onPinch=function(t){if(this.options.zoomable&&this.options.moveable&&(this.props.touch.allowDragging=!1,t.gesture.touches.length>1)){this.props.touch.center||(this.props.touch.center=o(t.gesture.center,this.body.dom.center));var e=1/t.gesture.scale,i=this._pointerToDate(this.props.touch.center),n=parseInt(i+(this.props.touch.start-i)*e),s=parseInt(i+(this.props.touch.end-i)*e);this.setRange(n,s)}},n.prototype._pointerToDate=function(t){var e,i=this.options.direction;if(s(i),"horizontal"==i){var n=this.body.domProps.center.width;return e=this.conversion(n),t.x/e.scale+e.offset}var o=this.body.domProps.center.height;return e=this.conversion(o),t.y/e.scale+e.offset},n.prototype.zoom=function(t,e){null==e&&(e=(this.start+this.end)/2);var i=e+(this.start-e)*t,n=e+(this.end-e)*t;this.setRange(i,n)},n.prototype.move=function(t){var e=this.end-this.start,i=this.start+e*t,n=this.end+e*t;this.start=i,this.end=n},n.prototype.moveTo=function(t){var e=(this.start+this.end)/2,i=e-t,n=this.start-i,s=this.end-i;this.setRange(n,s)},t.exports=n},function(t,e){var i=.001;e.orderByStart=function(t){t.sort(function(t,e){return t.data.start-e.data.start})},e.orderByEnd=function(t){t.sort(function(t,e){var i="end"in t.data?t.data.end:t.data.start,n="end"in e.data?e.data.end:e.data.start;return i-n})},e.stack=function(t,i,n){var s,o;if(n)for(s=0,o=t.length;o>s;s++)t[s].top=null;for(s=0,o=t.length;o>s;s++){var r=t[s];if(null===r.top){r.top=i.axis;do{for(var a=null,h=0,c=t.length;c>h;h++){var l=t[h];if(null!==l.top&&l!==r&&e.collision(r,l,i.item)){a=l;break}}null!=a&&(r.top=a.top+a.height+i.item.vertical)}while(a)}}},e.nostack=function(t,e){var i,n;for(i=0,n=t.length;n>i;i++)t[i].top=e.axis},e.collision=function(t,e,n){return t.left-n.horizontal+i<e.left+e.width&&t.left+t.width+n.horizontal-i>e.left&&t.top-n.vertical+i<e.top+e.height&&t.top+t.height+n.vertical-i>e.top}},function(t,e,i){function n(t,e,i){this.current=new Date,this._start=new Date,this._end=new Date,this.autoScale=!0,this.scale=n.SCALE.DAY,this.step=1,this.setRange(t,e,i)}var s=i(40);n.SCALE={MILLISECOND:1,SECOND:2,MINUTE:3,HOUR:4,DAY:5,WEEKDAY:6,MONTH:7,YEAR:8},n.prototype.setRange=function(t,e,i){if(!(t instanceof Date&&e instanceof Date))throw"No legal start or end date in method setRange";this._start=void 0!=t?new Date(t.valueOf()):new Date,this._end=void 0!=e?new Date(e.valueOf()):new Date,this.autoScale&&this.setMinimumStep(i)},n.prototype.first=function(){this.current=new Date(this._start.valueOf()),this.roundToMinor()},n.prototype.roundToMinor=function(){switch(this.scale){case n.SCALE.YEAR:this.current.setFullYear(this.step*Math.floor(this.current.getFullYear()/this.step)),this.current.setMonth(0);case n.SCALE.MONTH:this.current.setDate(1);case n.SCALE.DAY:case n.SCALE.WEEKDAY:this.current.setHours(0);case n.SCALE.HOUR:this.current.setMinutes(0);case n.SCALE.MINUTE:this.current.setSeconds(0);case n.SCALE.SECOND:this.current.setMilliseconds(0)}if(1!=this.step)switch(this.scale){case n.SCALE.MILLISECOND:this.current.setMilliseconds(this.current.getMilliseconds()-this.current.getMilliseconds()%this.step);break;case n.SCALE.SECOND:this.current.setSeconds(this.current.getSeconds()-this.current.getSeconds()%this.step);break;case n.SCALE.MINUTE:this.current.setMinutes(this.current.getMinutes()-this.current.getMinutes()%this.step);break;case n.SCALE.HOUR:this.current.setHours(this.current.getHours()-this.current.getHours()%this.step);break;case n.SCALE.WEEKDAY:case n.SCALE.DAY:this.current.setDate(this.current.getDate()-1-(this.current.getDate()-1)%this.step+1);break;case n.SCALE.MONTH:this.current.setMonth(this.current.getMonth()-this.current.getMonth()%this.step);break;case n.SCALE.YEAR:this.current.setFullYear(this.current.getFullYear()-this.current.getFullYear()%this.step)}},n.prototype.hasNext=function(){return this.current.valueOf()<=this._end.valueOf()},n.prototype.next=function(){var t=this.current.valueOf();if(this.current.getMonth()<6)switch(this.scale){case n.SCALE.MILLISECOND:this.current=new Date(this.current.valueOf()+this.step);break;case n.SCALE.SECOND:this.current=new Date(this.current.valueOf()+1e3*this.step);break;case n.SCALE.MINUTE:this.current=new Date(this.current.valueOf()+1e3*this.step*60);break;case n.SCALE.HOUR:this.current=new Date(this.current.valueOf()+1e3*this.step*60*60);var e=this.current.getHours();this.current.setHours(e-e%this.step);break;case n.SCALE.WEEKDAY:case n.SCALE.DAY:this.current.setDate(this.current.getDate()+this.step);break;case n.SCALE.MONTH:this.current.setMonth(this.current.getMonth()+this.step);break;case n.SCALE.YEAR:this.current.setFullYear(this.current.getFullYear()+this.step)}else switch(this.scale){case n.SCALE.MILLISECOND:this.current=new Date(this.current.valueOf()+this.step);break;case n.SCALE.SECOND:this.current.setSeconds(this.current.getSeconds()+this.step);break;case n.SCALE.MINUTE:this.current.setMinutes(this.current.getMinutes()+this.step);break;case n.SCALE.HOUR:this.current.setHours(this.current.getHours()+this.step);break;case n.SCALE.WEEKDAY:case n.SCALE.DAY:this.current.setDate(this.current.getDate()+this.step);break;case n.SCALE.MONTH:this.current.setMonth(this.current.getMonth()+this.step);break;case n.SCALE.YEAR:this.current.setFullYear(this.current.getFullYear()+this.step)}if(1!=this.step)switch(this.scale){case n.SCALE.MILLISECOND:this.current.getMilliseconds()<this.step&&this.current.setMilliseconds(0);break;case n.SCALE.SECOND:this.current.getSeconds()<this.step&&this.current.setSeconds(0);break;case n.SCALE.MINUTE:this.current.getMinutes()<this.step&&this.current.setMinutes(0);break;case n.SCALE.HOUR:this.current.getHours()<this.step&&this.current.setHours(0);break;case n.SCALE.WEEKDAY:case n.SCALE.DAY:this.current.getDate()<this.step+1&&this.current.setDate(1);break;case n.SCALE.MONTH:this.current.getMonth()<this.step&&this.current.setMonth(0);break;case n.SCALE.YEAR:}this.current.valueOf()==t&&(this.current=new Date(this._end.valueOf()))},n.prototype.getCurrent=function(){return this.current},n.prototype.setScale=function(t,e){this.scale=t,e>0&&(this.step=e),this.autoScale=!1},n.prototype.setAutoScale=function(t){this.autoScale=t},n.prototype.setMinimumStep=function(t){if(void 0!=t){var e=31104e6,i=2592e6,s=864e5,o=36e5,r=6e4,a=1e3,h=1;1e3*e>t&&(this.scale=n.SCALE.YEAR,this.step=1e3),500*e>t&&(this.scale=n.SCALE.YEAR,this.step=500),100*e>t&&(this.scale=n.SCALE.YEAR,this.step=100),50*e>t&&(this.scale=n.SCALE.YEAR,this.step=50),10*e>t&&(this.scale=n.SCALE.YEAR,this.step=10),5*e>t&&(this.scale=n.SCALE.YEAR,this.step=5),e>t&&(this.scale=n.SCALE.YEAR,this.step=1),3*i>t&&(this.scale=n.SCALE.MONTH,this.step=3),i>t&&(this.scale=n.SCALE.MONTH,this.step=1),5*s>t&&(this.scale=n.SCALE.DAY,this.step=5),2*s>t&&(this.scale=n.SCALE.DAY,this.step=2),s>t&&(this.scale=n.SCALE.DAY,this.step=1),s/2>t&&(this.scale=n.SCALE.WEEKDAY,this.step=1),4*o>t&&(this.scale=n.SCALE.HOUR,this.step=4),o>t&&(this.scale=n.SCALE.HOUR,this.step=1),15*r>t&&(this.scale=n.SCALE.MINUTE,this.step=15),10*r>t&&(this.scale=n.SCALE.MINUTE,this.step=10),5*r>t&&(this.scale=n.SCALE.MINUTE,this.step=5),r>t&&(this.scale=n.SCALE.MINUTE,this.step=1),15*a>t&&(this.scale=n.SCALE.SECOND,this.step=15),10*a>t&&(this.scale=n.SCALE.SECOND,this.step=10),5*a>t&&(this.scale=n.SCALE.SECOND,this.step=5),a>t&&(this.scale=n.SCALE.SECOND,this.step=1),200*h>t&&(this.scale=n.SCALE.MILLISECOND,this.step=200),100*h>t&&(this.scale=n.SCALE.MILLISECOND,this.step=100),50*h>t&&(this.scale=n.SCALE.MILLISECOND,this.step=50),10*h>t&&(this.scale=n.SCALE.MILLISECOND,this.step=10),5*h>t&&(this.scale=n.SCALE.MILLISECOND,this.step=5),h>t&&(this.scale=n.SCALE.MILLISECOND,this.step=1)}},n.prototype.snap=function(t){var e=new Date(t.valueOf());if(this.scale==n.SCALE.YEAR){var i=e.getFullYear()+Math.round(e.getMonth()/12);e.setFullYear(Math.round(i/this.step)*this.step),e.setMonth(0),e.setDate(0),e.setHours(0),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0)}else if(this.scale==n.SCALE.MONTH)e.getDate()>15?(e.setDate(1),e.setMonth(e.getMonth()+1)):e.setDate(1),e.setHours(0),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0);else if(this.scale==n.SCALE.DAY){switch(this.step){case 5:case 2:e.setHours(24*Math.round(e.getHours()/24));break;default:e.setHours(12*Math.round(e.getHours()/12))}e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0)}else if(this.scale==n.SCALE.WEEKDAY){switch(this.step){case 5:case 2:e.setHours(12*Math.round(e.getHours()/12));break;default:e.setHours(6*Math.round(e.getHours()/6))}e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0)}else if(this.scale==n.SCALE.HOUR){switch(this.step){case 4:e.setMinutes(60*Math.round(e.getMinutes()/60));break;default:e.setMinutes(30*Math.round(e.getMinutes()/30))}e.setSeconds(0),e.setMilliseconds(0)}else if(this.scale==n.SCALE.MINUTE){switch(this.step){case 15:case 10:e.setMinutes(5*Math.round(e.getMinutes()/5)),e.setSeconds(0);break;case 5:e.setSeconds(60*Math.round(e.getSeconds()/60));break;default:e.setSeconds(30*Math.round(e.getSeconds()/30))}e.setMilliseconds(0)}else if(this.scale==n.SCALE.SECOND)switch(this.step){case 15:case 10:e.setSeconds(5*Math.round(e.getSeconds()/5)),e.setMilliseconds(0);break;case 5:e.setMilliseconds(1e3*Math.round(e.getMilliseconds()/1e3));break;default:e.setMilliseconds(500*Math.round(e.getMilliseconds()/500))}else if(this.scale==n.SCALE.MILLISECOND){var s=this.step>5?this.step/2:1;e.setMilliseconds(Math.round(e.getMilliseconds()/s)*s)}return e},n.prototype.isMajor=function(){switch(this.scale){case n.SCALE.MILLISECOND:return 0==this.current.getMilliseconds();case n.SCALE.SECOND:return 0==this.current.getSeconds();case n.SCALE.MINUTE:return 0==this.current.getHours()&&0==this.current.getMinutes();case n.SCALE.HOUR:return 0==this.current.getHours();case n.SCALE.WEEKDAY:case n.SCALE.DAY:return 1==this.current.getDate();case n.SCALE.MONTH:return 0==this.current.getMonth();case n.SCALE.YEAR:return!1;default:return!1}},n.prototype.getLabelMinor=function(t){switch(void 0==t&&(t=this.current),this.scale){case n.SCALE.MILLISECOND:return s(t).format("SSS");case n.SCALE.SECOND:return s(t).format("s");case n.SCALE.MINUTE:return s(t).format("HH:mm");case n.SCALE.HOUR:return s(t).format("HH:mm");case n.SCALE.WEEKDAY:return s(t).format("ddd D");case n.SCALE.DAY:return s(t).format("D");case n.SCALE.MONTH:return s(t).format("MMM");case n.SCALE.YEAR:return s(t).format("YYYY");default:return""}},n.prototype.getLabelMajor=function(t){switch(void 0==t&&(t=this.current),this.scale){case n.SCALE.MILLISECOND:return s(t).format("HH:mm:ss");case n.SCALE.SECOND:return s(t).format("D MMMM HH:mm");case n.SCALE.MINUTE:case n.SCALE.HOUR:return s(t).format("ddd D MMMM");case n.SCALE.WEEKDAY:case n.SCALE.DAY:return s(t).format("MMMM YYYY");case n.SCALE.MONTH:return s(t).format("YYYY");case n.SCALE.YEAR:return"";default:return""}},t.exports=n},function(t){function e(){this.options=null,this.props=null}e.prototype.setOptions=function(t){t&&util.extend(this.options,t)},e.prototype.redraw=function(){return!1},e.prototype.destroy=function(){},e.prototype._isResized=function(){var t=this.props._previousWidth!==this.props.width||this.props._previousHeight!==this.props.height;return this.props._previousWidth=this.props.width,this.props._previousHeight=this.props.height,t},t.exports=e},function(t,e,i){function n(t,e){this.body=t,this.defaultOptions={showCurrentTime:!0},this.options=s.extend({},this.defaultOptions),this._create(),this.setOptions(e)}var s=i(1),o=i(18);n.prototype=new o,n.prototype._create=function(){var t=document.createElement("div");t.className="currenttime",t.style.position="absolute",t.style.top="0px",t.style.height="100%",this.bar=t},n.prototype.destroy=function(){this.options.showCurrentTime=!1,this.redraw(),this.body=null},n.prototype.setOptions=function(t){t&&s.selectiveExtend(["showCurrentTime"],this.options,t)},n.prototype.redraw=function(){if(this.options.showCurrentTime){var t=this.body.dom.backgroundVertical;this.bar.parentNode!=t&&(this.bar.parentNode&&this.bar.parentNode.removeChild(this.bar),t.appendChild(this.bar),this.start());var e=new Date,i=this.body.util.toScreen(e);this.bar.style.left=i+"px",this.bar.title="Current time: "+e}else this.bar.parentNode&&this.bar.parentNode.removeChild(this.bar),this.stop();return!1},n.prototype.start=function(){function t(){e.stop();var i=e.body.range.conversion(e.body.domProps.center.width).scale,n=1/i/10;30>n&&(n=30),n>1e3&&(n=1e3),e.redraw(),e.currentTimeTimer=setTimeout(t,n)}var e=this;t()},n.prototype.stop=function(){void 0!==this.currentTimeTimer&&(clearTimeout(this.currentTimeTimer),delete this.currentTimeTimer)},t.exports=n},function(t,e,i){function n(t,e){this.body=t,this.defaultOptions={showCustomTime:!1},this.options=o.extend({},this.defaultOptions),this.customTime=new Date,this.eventParams={},this._create(),this.setOptions(e)}var s=i(41),o=i(1),r=i(18);n.prototype=new r,n.prototype.setOptions=function(t){t&&o.selectiveExtend(["showCustomTime"],this.options,t)},n.prototype._create=function(){var t=document.createElement("div");t.className="customtime",t.style.position="absolute",t.style.top="0px",t.style.height="100%",this.bar=t;var e=document.createElement("div");e.style.position="relative",e.style.top="0px",e.style.left="-10px",e.style.height="100%",e.style.width="20px",t.appendChild(e),this.hammer=s(t,{prevent_default:!0}),this.hammer.on("dragstart",this._onDragStart.bind(this)),this.hammer.on("drag",this._onDrag.bind(this)),this.hammer.on("dragend",this._onDragEnd.bind(this))},n.prototype.destroy=function(){this.options.showCustomTime=!1,this.redraw(),this.hammer.enable(!1),this.hammer=null,this.body=null},n.prototype.redraw=function(){if(this.options.showCustomTime){var t=this.body.dom.backgroundVertical;this.bar.parentNode!=t&&(this.bar.parentNode&&this.bar.parentNode.removeChild(this.bar),t.appendChild(this.bar));var e=this.body.util.toScreen(this.customTime);this.bar.style.left=e+"px",this.bar.title="Time: "+this.customTime}else this.bar.parentNode&&this.bar.parentNode.removeChild(this.bar);return!1},n.prototype.setCustomTime=function(t){this.customTime=new Date(t.valueOf()),this.redraw()},n.prototype.getCustomTime=function(){return new Date(this.customTime.valueOf())},n.prototype._onDragStart=function(t){this.eventParams.dragging=!0,this.eventParams.customTime=this.customTime,t.stopPropagation(),t.preventDefault()},n.prototype._onDrag=function(t){if(this.eventParams.dragging){var e=t.gesture.deltaX,i=this.body.util.toScreen(this.eventParams.customTime)+e,n=this.body.util.toTime(i);this.setCustomTime(n),this.body.emitter.emit("timechange",{time:new Date(this.customTime.valueOf())}),t.stopPropagation(),t.preventDefault()}},n.prototype._onDragEnd=function(t){this.eventParams.dragging&&(this.body.emitter.emit("timechanged",{time:new Date(this.customTime.valueOf())}),t.stopPropagation(),t.preventDefault())},t.exports=n},function(t,e,i){function n(t,e,i){this.id=s.randomUUID(),this.body=t,this.defaultOptions={orientation:"left",showMinorLabels:!0,showMajorLabels:!0,icons:!0,majorLinesOffset:7,minorLinesOffset:4,labelOffsetX:10,labelOffsetY:2,iconWidth:20,width:"40px",visible:!0},this.linegraphSVG=i,this.props={},this.DOMelements={lines:{},labels:{}},this.dom={},this.range={start:0,end:0},this.options=s.extend({},this.defaultOptions),this.conversionFactor=1,this.setOptions(e),this.width=Number((""+this.options.width).replace("px","")),this.minWidth=this.width,this.height=this.linegraphSVG.offsetHeight,this.stepPixels=25,this.stepPixelsForced=25,this.lineOffset=0,this.master=!0,this.svgElements={},this.groups={},this.amountOfGroups=0,this._create()}var s=i(1),o=i(2),r=i(18),a=i(14);n.prototype=new r,n.prototype.addGroup=function(t,e){this.groups.hasOwnProperty(t)||(this.groups[t]=e),this.amountOfGroups+=1},n.prototype.updateGroup=function(t,e){this.groups[t]=e},n.prototype.removeGroup=function(t){this.groups.hasOwnProperty(t)&&(delete this.groups[t],this.amountOfGroups-=1)},n.prototype.setOptions=function(t){if(t){var e=!1;this.options.orientation!=t.orientation&&void 0!==t.orientation&&(e=!0);var i=["orientation","showMinorLabels","showMajorLabels","icons","majorLinesOffset","minorLinesOffset","labelOffsetX","labelOffsetY","iconWidth","width","visible"];s.selectiveExtend(i,this.options,t),this.minWidth=Number((""+this.options.width).replace("px","")),1==e&&this.dom.frame&&(this.hide(),this.show())}},n.prototype._create=function(){this.dom.frame=document.createElement("div"),this.dom.frame.style.width=this.options.width,this.dom.frame.style.height=this.height,this.dom.lineContainer=document.createElement("div"),this.dom.lineContainer.style.width="100%",this.dom.lineContainer.style.height=this.height,this.svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.svg.style.position="absolute",this.svg.style.top="0px",this.svg.style.height="100%",this.svg.style.width="100%",this.svg.style.display="block",this.dom.frame.appendChild(this.svg)},n.prototype._redrawGroupIcons=function(){o.prepareElements(this.svgElements);var t,e=this.options.iconWidth,i=15,n=4,s=n+.5*i;t="left"==this.options.orientation?n:this.width-e-n;for(var r in this.groups)this.groups.hasOwnProperty(r)&&(this.groups[r].drawIcon(t,s,this.svgElements,this.svg,e,i),s+=i+n);o.cleanupElements(this.svgElements)},n.prototype.show=function(){this.dom.frame.parentNode||("left"==this.options.orientation?this.body.dom.left.appendChild(this.dom.frame):this.body.dom.right.appendChild(this.dom.frame)),this.dom.lineContainer.parentNode||this.body.dom.backgroundHorizontal.appendChild(this.dom.lineContainer)},n.prototype.hide=function(){this.dom.frame.parentNode&&this.dom.frame.parentNode.removeChild(this.dom.frame),this.dom.lineContainer.parentNode&&this.dom.lineContainer.parentNode.removeChild(this.dom.lineContainer)},n.prototype.setRange=function(t,e){this.range.start=t,this.range.end=e},n.prototype.redraw=function(){var t=!1;if(0==this.amountOfGroups)this.hide();else{this.show(),this.height=Number(this.linegraphSVG.style.height.replace("px","")),this.dom.lineContainer.style.height=this.height+"px",this.width=1==this.options.visible?Number((""+this.options.width).replace("px","")):0;var e=this.props,i=this.dom.frame;i.className="dataaxis",this._calculateCharSize();var n=this.options.orientation,s=this.options.showMinorLabels,o=this.options.showMajorLabels;e.minorLabelHeight=s?e.minorCharHeight:0,e.majorLabelHeight=o?e.majorCharHeight:0,e.minorLineWidth=this.body.dom.backgroundHorizontal.offsetWidth-this.lineOffset-this.width+2*this.options.minorLinesOffset,e.minorLineHeight=1,e.majorLineWidth=this.body.dom.backgroundHorizontal.offsetWidth-this.lineOffset-this.width+2*this.options.majorLinesOffset,e.majorLineHeight=1,"left"==n?(i.style.top="0",i.style.left="0",i.style.bottom="",i.style.width=this.width+"px",i.style.height=this.height+"px"):(i.style.top="",i.style.bottom="0",i.style.left="0",i.style.width=this.width+"px",i.style.height=this.height+"px"),t=this._redrawLabels(),1==this.options.icons&&this._redrawGroupIcons()}return t},n.prototype._redrawLabels=function(){o.prepareElements(this.DOMelements);var t=this.options.orientation,e=this.master?this.props.majorCharHeight||10:this.stepPixelsForced,i=new a(this.range.start,this.range.end,e,this.dom.frame.offsetHeight);this.step=i,i.first();var n=this.dom.frame.offsetHeight/(i.marginRange/i.step+1);this.stepPixels=n;var s=this.height/n,r=0;if(0==this.master){n=this.stepPixelsForced,r=Math.round(this.height/n-s);for(var h=0;.5*r>h;h++)i.previous();s=this.height/n}this.valueAtZero=i.marginEnd;var c=0,l=1;i.next(),this.maxLabelSize=0;for(var d=0;l<Math.round(s);){d=Math.round(l*n),c=l*n;var u=i.isMajor();(this.options.showMinorLabels&&0==u||0==this.master&&1==this.options.showMinorLabels)&&this._redrawLabel(d-2,i.getCurrent(),t,"yAxis minor",this.props.minorCharHeight),u&&this.options.showMajorLabels&&1==this.master||0==this.options.showMinorLabels&&0==this.master&&1==u?(d>=0&&this._redrawLabel(d-2,i.getCurrent(),t,"yAxis major",this.props.majorCharHeight),this._redrawLine(d,t,"grid horizontal major",this.options.majorLinesOffset,this.props.majorLineWidth)):this._redrawLine(d,t,"grid horizontal minor",this.options.minorLinesOffset,this.props.minorLineWidth),i.next(),l++}this.conversionFactor=c/((s-1)*i.step);var p=1==this.options.icons?this.options.iconWidth+this.options.labelOffsetX+15:this.options.labelOffsetX+15;return this.maxLabelSize>this.width-p&&1==this.options.visible?(this.width=this.maxLabelSize+p,this.options.width=this.width+"px",o.cleanupElements(this.DOMelements),this.redraw(),!0):this.maxLabelSize<this.width-p&&1==this.options.visible&&this.width>this.minWidth?(this.width=Math.max(this.minWidth,this.maxLabelSize+p),this.options.width=this.width+"px",o.cleanupElements(this.DOMelements),this.redraw(),!0):(o.cleanupElements(this.DOMelements),!1)},n.prototype._redrawLabel=function(t,e,i,n,s){var r=o.getDOMElement("div",this.DOMelements,this.dom.frame);r.className=n,r.innerHTML=e,"left"==i?(r.style.left="-"+this.options.labelOffsetX+"px",r.style.textAlign="right"):(r.style.right="-"+this.options.labelOffsetX+"px",r.style.textAlign="left"),r.style.top=t-.5*s+this.options.labelOffsetY+"px",e+="";var a=Math.max(this.props.majorCharWidth,this.props.minorCharWidth);this.maxLabelSize<e.length*a&&(this.maxLabelSize=e.length*a)},n.prototype._redrawLine=function(t,e,i,n,s){if(1==this.master){var r=o.getDOMElement("div",this.DOMelements,this.dom.lineContainer);r.className=i,r.innerHTML="","left"==e?r.style.left=this.width-n+"px":r.style.right=this.width-n+"px",r.style.width=s+"px",r.style.top=t+"px"}},n.prototype.convertValue=function(t){var e=this.valueAtZero-t,i=e*this.conversionFactor;return i},n.prototype._calculateCharSize=function(){if(!("minorCharHeight"in this.props)){var t=document.createTextNode("0"),e=document.createElement("DIV");e.className="yAxis minor measure",e.appendChild(t),this.dom.frame.appendChild(e),this.props.minorCharHeight=e.clientHeight,this.props.minorCharWidth=e.clientWidth,this.dom.frame.removeChild(e)}if(!("majorCharHeight"in this.props)){var i=document.createTextNode("0"),n=document.createElement("DIV");n.className="yAxis major measure",n.appendChild(i),this.dom.frame.appendChild(n),this.props.majorCharHeight=n.clientHeight,this.props.majorCharWidth=n.clientWidth,this.dom.frame.removeChild(n)}},n.prototype.snap=function(t){return this.step.snap(t)},t.exports=n},function(t,e,i){function n(t,e,i,n){this.id=e;var o=["sampling","style","sort","yAxisOrientation","barChart","drawPoints","shaded","catmullRom"];this.options=s.selectiveBridgeObject(o,i),this.usingDefaultStyle=void 0===t.className,this.groupsUsingDefaultStyles=n,this.zeroPosition=0,this.update(t),1==this.usingDefaultStyle&&(this.groupsUsingDefaultStyles[0]+=1),this.itemsData=[]}var s=i(1),o=i(2);n.prototype.setItems=function(t){null!=t?(this.itemsData=t,1==this.options.sort&&this.itemsData.sort(function(t,e){return t.x-e.x})):this.itemsData=[]},n.prototype.setZeroPosition=function(t){this.zeroPosition=t},n.prototype.setOptions=function(t){if(void 0!==t){var e=["sampling","style","sort","yAxisOrientation","barChart"];s.selectiveDeepExtend(e,this.options,t),s.mergeOptions(this.options,t,"catmullRom"),s.mergeOptions(this.options,t,"drawPoints"),s.mergeOptions(this.options,t,"shaded"),t.catmullRom&&"object"==typeof t.catmullRom&&t.catmullRom.parametrization&&("uniform"==t.catmullRom.parametrization?this.options.catmullRom.alpha=0:"chordal"==t.catmullRom.parametrization?this.options.catmullRom.alpha=1:(this.options.catmullRom.parametrization="centripetal",this.options.catmullRom.alpha=.5))}},n.prototype.update=function(t){this.group=t,this.content=t.content||"graph",this.className=t.className||this.className||"graphGroup"+this.groupsUsingDefaultStyles[0]%10,this.setOptions(t.options)},n.prototype.drawIcon=function(t,e,i,n,s,r){var a,h,c=.5*r,l=o.getSVGElement("rect",i,n);if(l.setAttributeNS(null,"x",t),l.setAttributeNS(null,"y",e-c),l.setAttributeNS(null,"width",s),l.setAttributeNS(null,"height",2*c),l.setAttributeNS(null,"class","outline"),"line"==this.options.style)a=o.getSVGElement("path",i,n),a.setAttributeNS(null,"class",this.className),a.setAttributeNS(null,"d","M"+t+","+e+" L"+(t+s)+","+e),1==this.options.shaded.enabled&&(h=o.getSVGElement("path",i,n),"top"==this.options.shaded.orientation?h.setAttributeNS(null,"d","M"+t+", "+(e-c)+"L"+t+","+e+" L"+(t+s)+","+e+" L"+(t+s)+","+(e-c)):h.setAttributeNS(null,"d","M"+t+","+e+" L"+t+","+(e+c)+" L"+(t+s)+","+(e+c)+"L"+(t+s)+","+e),h.setAttributeNS(null,"class",this.className+" iconFill")),1==this.options.drawPoints.enabled&&o.drawPoint(t+.5*s,e,this,i,n);else{var d=Math.round(.3*s),u=Math.round(.4*r),p=Math.round(.75*r),f=Math.round((s-2*d)/3);o.drawBar(t+.5*d+f,e+c-u-1,d,u,this.className+" bar",i,n),o.drawBar(t+1.5*d+f+2,e+c-p-1,d,p,this.className+" bar",i,n)}},t.exports=n},function(t,e,i){function n(t,e,i){this.groupId=t,this.itemSet=i,this.dom={},this.props={label:{width:0,height:0}},this.className=null,this.items={},this.visibleItems=[],this.orderedItems={byStart:[],byEnd:[]},this._create(),this.setData(e)}var s=i(1),o=i(16),r=i(31);n.prototype._create=function(){var t=document.createElement("div");t.className="vlabel",this.dom.label=t;var e=document.createElement("div");e.className="inner",t.appendChild(e),this.dom.inner=e;var i=document.createElement("div");i.className="group",i["timeline-group"]=this,this.dom.foreground=i,this.dom.background=document.createElement("div"),this.dom.background.className="group",this.dom.axis=document.createElement("div"),this.dom.axis.className="group",this.dom.marker=document.createElement("div"),this.dom.marker.style.visibility="hidden",this.dom.marker.innerHTML="?",this.dom.background.appendChild(this.dom.marker)},n.prototype.setData=function(t){var e=t&&t.content;e instanceof Element?this.dom.inner.appendChild(e):this.dom.inner.innerHTML=void 0!=e?e:this.groupId,this.dom.label.title=t&&t.title||"",this.dom.inner.firstChild?s.removeClassName(this.dom.inner,"hidden"):s.addClassName(this.dom.inner,"hidden");var i=t&&t.className||null;i!=this.className&&(this.className&&(s.removeClassName(this.dom.label,i),s.removeClassName(this.dom.foreground,i),s.removeClassName(this.dom.background,i),s.removeClassName(this.dom.axis,i)),s.addClassName(this.dom.label,i),s.addClassName(this.dom.foreground,i),s.addClassName(this.dom.background,i),s.addClassName(this.dom.axis,i))
},n.prototype.getLabelWidth=function(){return this.props.label.width},n.prototype.redraw=function(t,e,i){var n=!1;this.visibleItems=this._updateVisibleItems(this.orderedItems,this.visibleItems,t);var r=this.dom.marker.clientHeight;r!=this.lastMarkerHeight&&(this.lastMarkerHeight=r,s.forEach(this.items,function(t){t.dirty=!0,t.displayed&&t.redraw()}),i=!0),this.itemSet.options.stack?o.stack(this.visibleItems,e,i):o.nostack(this.visibleItems,e);var a,h=this.visibleItems;if(h.length){var c=h[0].top,l=h[0].top+h[0].height;if(s.forEach(h,function(t){c=Math.min(c,t.top),l=Math.max(l,t.top+t.height)}),c>e.axis){var d=c-e.axis;l-=d,s.forEach(h,function(t){t.top-=d})}a=l+e.item.vertical/2}else a=e.axis+e.item.vertical;a=Math.max(a,this.props.label.height);var u=this.dom.foreground;this.top=u.offsetTop,this.left=u.offsetLeft,this.width=u.offsetWidth,n=s.updateProperty(this,"height",a)||n,n=s.updateProperty(this.props.label,"width",this.dom.inner.clientWidth)||n,n=s.updateProperty(this.props.label,"height",this.dom.inner.clientHeight)||n,this.dom.background.style.height=a+"px",this.dom.foreground.style.height=a+"px",this.dom.label.style.height=a+"px";for(var p=0,f=this.visibleItems.length;f>p;p++){var g=this.visibleItems[p];g.repositionY()}return n},n.prototype.show=function(){this.dom.label.parentNode||this.itemSet.dom.labelSet.appendChild(this.dom.label),this.dom.foreground.parentNode||this.itemSet.dom.foreground.appendChild(this.dom.foreground),this.dom.background.parentNode||this.itemSet.dom.background.appendChild(this.dom.background),this.dom.axis.parentNode||this.itemSet.dom.axis.appendChild(this.dom.axis)},n.prototype.hide=function(){var t=this.dom.label;t.parentNode&&t.parentNode.removeChild(t);var e=this.dom.foreground;e.parentNode&&e.parentNode.removeChild(e);var i=this.dom.background;i.parentNode&&i.parentNode.removeChild(i);var n=this.dom.axis;n.parentNode&&n.parentNode.removeChild(n)},n.prototype.add=function(t){if(this.items[t.id]=t,t.setParent(this),t instanceof r&&-1==this.visibleItems.indexOf(t)){var e=this.itemSet.body.range;this._checkIfVisible(t,this.visibleItems,e)}},n.prototype.remove=function(t){delete this.items[t.id],t.setParent(this.itemSet);var e=this.visibleItems.indexOf(t);-1!=e&&this.visibleItems.splice(e,1)},n.prototype.removeFromDataSet=function(t){this.itemSet.removeItem(t.id)},n.prototype.order=function(){var t=s.toArray(this.items);this.orderedItems.byStart=t,this.orderedItems.byEnd=this._constructByEndArray(t),o.orderByStart(this.orderedItems.byStart),o.orderByEnd(this.orderedItems.byEnd)},n.prototype._constructByEndArray=function(t){for(var e=[],i=0;i<t.length;i++)t[i]instanceof r&&e.push(t[i]);return e},n.prototype._updateVisibleItems=function(t,e,i){var n,o,r=[];if(e.length>0)for(o=0;o<e.length;o++)this._checkIfVisible(e[o],r,i);n=0==r.length?s.binarySearch(t.byStart,i,"data","start"):t.byStart.indexOf(r[0]);var a=s.binarySearch(t.byEnd,i,"data","end");if(-1!=n){for(o=n;o>=0&&!this._checkIfInvisible(t.byStart[o],r,i);o--);for(o=n+1;o<t.byStart.length&&!this._checkIfInvisible(t.byStart[o],r,i);o++);}if(-1!=a){for(o=a;o>=0&&!this._checkIfInvisible(t.byEnd[o],r,i);o--);for(o=a+1;o<t.byEnd.length&&!this._checkIfInvisible(t.byEnd[o],r,i);o++);}return r},n.prototype._checkIfInvisible=function(t,e,i){return t.isVisible(i)?(t.displayed||t.show(),t.repositionX(),-1==e.indexOf(t)&&e.push(t),!1):(t.displayed&&t.hide(),!0)},n.prototype._checkIfVisible=function(t,e,i){t.isVisible(i)?(t.displayed||t.show(),t.repositionX(),e.push(t)):t.displayed&&t.hide()},t.exports=n},function(t,e,i){function n(t,e){this.body=t,this.defaultOptions={type:null,orientation:"bottom",align:"center",stack:!0,groupOrder:null,selectable:!0,editable:{updateTime:!1,updateGroup:!1,add:!1,remove:!1},onAdd:function(t,e){e(t)},onUpdate:function(t,e){e(t)},onMove:function(t,e){e(t)},onRemove:function(t,e){e(t)},margin:{item:{horizontal:10,vertical:10},axis:20},padding:5},this.options=o.extend({},this.defaultOptions),this.itemOptions={type:{start:"Date",end:"Date"}},this.conversion={toScreen:t.util.toScreen,toTime:t.util.toTime},this.dom={},this.props={},this.hammer=null;var i=this;this.itemsData=null,this.groupsData=null,this.itemListeners={add:function(t,e){i._onAdd(e.items)},update:function(t,e){i._onUpdate(e.items)},remove:function(t,e){i._onRemove(e.items)}},this.groupListeners={add:function(t,e){i._onAddGroups(e.items)},update:function(t,e){i._onUpdateGroups(e.items)},remove:function(t,e){i._onRemoveGroups(e.items)}},this.items={},this.groups={},this.groupIds=[],this.selection=[],this.stackDirty=!0,this.touchParams={},this._create(),this.setOptions(e)}var s=i(41),o=i(1),r=i(3),a=i(4),h=i(18),c=i(23),l=i(29),d=i(30),u=i(31),p="__ungrouped__";n.prototype=new h,n.types={box:l,range:u,point:d},n.prototype._create=function(){var t=document.createElement("div");t.className="itemset",t["timeline-itemset"]=this,this.dom.frame=t;var e=document.createElement("div");e.className="background",t.appendChild(e),this.dom.background=e;var i=document.createElement("div");i.className="foreground",t.appendChild(i),this.dom.foreground=i;var n=document.createElement("div");n.className="axis",this.dom.axis=n;var o=document.createElement("div");o.className="labelset",this.dom.labelSet=o,this._updateUngrouped(),this.hammer=s(this.body.dom.centerContainer,{prevent_default:!0}),this.hammer.on("touch",this._onTouch.bind(this)),this.hammer.on("dragstart",this._onDragStart.bind(this)),this.hammer.on("drag",this._onDrag.bind(this)),this.hammer.on("dragend",this._onDragEnd.bind(this)),this.hammer.on("tap",this._onSelectItem.bind(this)),this.hammer.on("hold",this._onMultiSelectItem.bind(this)),this.hammer.on("doubletap",this._onAddItem.bind(this)),this.show()},n.prototype.setOptions=function(t){if(t){var e=["type","align","orientation","padding","stack","selectable","groupOrder"];o.selectiveExtend(e,this.options,t),"margin"in t&&("number"==typeof t.margin?(this.options.margin.axis=t.margin,this.options.margin.item.horizontal=t.margin,this.options.margin.item.vertical=t.margin):"object"==typeof t.margin&&(o.selectiveExtend(["axis"],this.options.margin,t.margin),"item"in t.margin&&("number"==typeof t.margin.item?(this.options.margin.item.horizontal=t.margin.item,this.options.margin.item.vertical=t.margin.item):"object"==typeof t.margin.item&&o.selectiveExtend(["horizontal","vertical"],this.options.margin.item,t.margin.item)))),"editable"in t&&("boolean"==typeof t.editable?(this.options.editable.updateTime=t.editable,this.options.editable.updateGroup=t.editable,this.options.editable.add=t.editable,this.options.editable.remove=t.editable):"object"==typeof t.editable&&o.selectiveExtend(["updateTime","updateGroup","add","remove"],this.options.editable,t.editable));var i=function(e){if(e in t){var i=t[e];if(!(i instanceof Function))throw new Error("option "+e+" must be a function "+e+"(item, callback)");this.options[e]=i}}.bind(this);["onAdd","onUpdate","onRemove","onMove"].forEach(i),this.markDirty()}},n.prototype.markDirty=function(){this.groupIds=[],this.stackDirty=!0},n.prototype.destroy=function(){this.hide(),this.setItems(null),this.setGroups(null),this.hammer=null,this.body=null,this.conversion=null},n.prototype.hide=function(){this.dom.frame.parentNode&&this.dom.frame.parentNode.removeChild(this.dom.frame),this.dom.axis.parentNode&&this.dom.axis.parentNode.removeChild(this.dom.axis),this.dom.labelSet.parentNode&&this.dom.labelSet.parentNode.removeChild(this.dom.labelSet)},n.prototype.show=function(){this.dom.frame.parentNode||this.body.dom.center.appendChild(this.dom.frame),this.dom.axis.parentNode||this.body.dom.backgroundVertical.appendChild(this.dom.axis),this.dom.labelSet.parentNode||this.body.dom.left.appendChild(this.dom.labelSet)},n.prototype.setSelection=function(t){var e,i,n,s;if(t){if(!Array.isArray(t))throw new TypeError("Array expected");for(e=0,i=this.selection.length;i>e;e++)n=this.selection[e],s=this.items[n],s&&s.unselect();for(this.selection=[],e=0,i=t.length;i>e;e++)n=t[e],s=this.items[n],s&&(this.selection.push(n),s.select())}},n.prototype.getSelection=function(){return this.selection.concat([])},n.prototype.getVisibleItems=function(){var t=this.body.range.getRange(),e=this.body.util.toScreen(t.start),i=this.body.util.toScreen(t.end),n=[];for(var s in this.groups)if(this.groups.hasOwnProperty(s))for(var o=this.groups[s],r=o.visibleItems,a=0;a<r.length;a++){var h=r[a];h.left<i&&h.left+h.width>e&&n.push(h.id)}return n},n.prototype._deselect=function(t){for(var e=this.selection,i=0,n=e.length;n>i;i++)if(e[i]==t){e.splice(i,1);break}},n.prototype.redraw=function(){var t=this.options.margin,e=this.body.range,i=o.option.asSize,n=this.options,s=n.orientation,r=!1,a=this.dom.frame,h=n.editable.updateTime||n.editable.updateGroup;a.className="itemset"+(h?" editable":""),r=this._orderGroups()||r;var c=e.end-e.start,l=c!=this.lastVisibleInterval||this.props.width!=this.props.lastWidth;l&&(this.stackDirty=!0),this.lastVisibleInterval=c,this.props.lastWidth=this.props.width;var d=this.stackDirty,u=this._firstGroup(),p={item:t.item,axis:t.axis},f={item:t.item,axis:t.item.vertical/2},g=0,m=t.axis+t.item.vertical;return o.forEach(this.groups,function(t){var i=t==u?p:f,n=t.redraw(e,i,d);r=n||r,g+=t.height}),g=Math.max(g,m),this.stackDirty=!1,a.style.height=i(g),this.props.top=a.offsetTop,this.props.left=a.offsetLeft,this.props.width=a.offsetWidth,this.props.height=g,this.dom.axis.style.top=i("top"==s?this.body.domProps.top.height+this.body.domProps.border.top:this.body.domProps.top.height+this.body.domProps.centerContainer.height),this.dom.axis.style.left=this.body.domProps.border.left+"px",r=this._isResized()||r},n.prototype._firstGroup=function(){var t="top"==this.options.orientation?0:this.groupIds.length-1,e=this.groupIds[t],i=this.groups[e]||this.groups[p];return i||null},n.prototype._updateUngrouped=function(){var t=this.groups[p];if(this.groupsData)t&&(t.hide(),delete this.groups[p]);else if(!t){var e=null,i=null;t=new c(e,i,this),this.groups[p]=t;for(var n in this.items)this.items.hasOwnProperty(n)&&t.add(this.items[n]);t.show()}},n.prototype.getLabelSet=function(){return this.dom.labelSet},n.prototype.setItems=function(t){var e,i=this,n=this.itemsData;if(t){if(!(t instanceof r||t instanceof a))throw new TypeError("Data must be an instance of DataSet or DataView");this.itemsData=t}else this.itemsData=null;if(n&&(o.forEach(this.itemListeners,function(t,e){n.off(e,t)}),e=n.getIds(),this._onRemove(e)),this.itemsData){var s=this.id;o.forEach(this.itemListeners,function(t,e){i.itemsData.on(e,t,s)}),e=this.itemsData.getIds(),this._onAdd(e),this._updateUngrouped()}},n.prototype.getItems=function(){return this.itemsData},n.prototype.setGroups=function(t){var e,i=this;if(this.groupsData&&(o.forEach(this.groupListeners,function(t,e){i.groupsData.unsubscribe(e,t)}),e=this.groupsData.getIds(),this.groupsData=null,this._onRemoveGroups(e)),t){if(!(t instanceof r||t instanceof a))throw new TypeError("Data must be an instance of DataSet or DataView");this.groupsData=t}else this.groupsData=null;if(this.groupsData){var n=this.id;o.forEach(this.groupListeners,function(t,e){i.groupsData.on(e,t,n)}),e=this.groupsData.getIds(),this._onAddGroups(e)}this._updateUngrouped(),this._order(),this.body.emitter.emit("change")},n.prototype.getGroups=function(){return this.groupsData},n.prototype.removeItem=function(t){var e=this.itemsData.get(t),i=this.itemsData.getDataSet();e&&this.options.onRemove(e,function(e){e&&i.remove(t)})},n.prototype._onUpdate=function(t){var e=this;t.forEach(function(t){var i=e.itemsData.get(t,e.itemOptions),s=e.items[t],o=i.type||e.options.type||(i.end?"range":"box"),r=n.types[o];if(s&&(r&&s instanceof r?e._updateItem(s,i):(e._removeItem(s),s=null)),!s){if(!r)throw new TypeError("rangeoverflow"==o?'Item type "rangeoverflow" is deprecated. Use css styling instead: .vis.timeline .item.range .content {overflow: visible;}':'Unknown item type "'+o+'"');s=new r(i,e.conversion,e.options),s.id=t,e._addItem(s)}}),this._order(),this.stackDirty=!0,this.body.emitter.emit("change")},n.prototype._onAdd=n.prototype._onUpdate,n.prototype._onRemove=function(t){var e=0,i=this;t.forEach(function(t){var n=i.items[t];n&&(e++,i._removeItem(n))}),e&&(this._order(),this.stackDirty=!0,this.body.emitter.emit("change"))},n.prototype._order=function(){o.forEach(this.groups,function(t){t.order()})},n.prototype._onUpdateGroups=function(t){this._onAddGroups(t)},n.prototype._onAddGroups=function(t){var e=this;t.forEach(function(t){var i=e.groupsData.get(t),n=e.groups[t];if(n)n.setData(i);else{if(t==p)throw new Error("Illegal group id. "+t+" is a reserved id.");var s=Object.create(e.options);o.extend(s,{height:null}),n=new c(t,i,e),e.groups[t]=n;for(var r in e.items)if(e.items.hasOwnProperty(r)){var a=e.items[r];a.data.group==t&&n.add(a)}n.order(),n.show()}}),this.body.emitter.emit("change")},n.prototype._onRemoveGroups=function(t){var e=this.groups;t.forEach(function(t){var i=e[t];i&&(i.hide(),delete e[t])}),this.markDirty(),this.body.emitter.emit("change")},n.prototype._orderGroups=function(){if(this.groupsData){var t=this.groupsData.getIds({order:this.options.groupOrder}),e=!o.equalArray(t,this.groupIds);if(e){var i=this.groups;t.forEach(function(t){i[t].hide()}),t.forEach(function(t){i[t].show()}),this.groupIds=t}return e}return!1},n.prototype._addItem=function(t){this.items[t.id]=t;var e=this.groupsData?t.data.group:p,i=this.groups[e];i&&i.add(t)},n.prototype._updateItem=function(t,e){var i=t.data.group;if(t.data=e,t.displayed&&t.redraw(),i!=t.data.group){var n=this.groups[i];n&&n.remove(t);var s=this.groupsData?t.data.group:p,o=this.groups[s];o&&o.add(t)}},n.prototype._removeItem=function(t){t.hide(),delete this.items[t.id];var e=this.selection.indexOf(t.id);-1!=e&&this.selection.splice(e,1);var i=this.groupsData?t.data.group:p,n=this.groups[i];n&&n.remove(t)},n.prototype._constructByEndArray=function(t){for(var e=[],i=0;i<t.length;i++)t[i]instanceof u&&e.push(t[i]);return e},n.prototype._onTouch=function(t){this.touchParams.item=n.itemFromTarget(t)},n.prototype._onDragStart=function(t){if(this.options.editable.updateTime||this.options.editable.updateGroup){var e,i=this.touchParams.item||null,n=this;if(i&&i.selected){var s=t.target.dragLeftItem,o=t.target.dragRightItem;s?(e={item:s},n.options.editable.updateTime&&(e.start=i.data.start.valueOf()),n.options.editable.updateGroup&&"group"in i.data&&(e.group=i.data.group),this.touchParams.itemProps=[e]):o?(e={item:o},n.options.editable.updateTime&&(e.end=i.data.end.valueOf()),n.options.editable.updateGroup&&"group"in i.data&&(e.group=i.data.group),this.touchParams.itemProps=[e]):this.touchParams.itemProps=this.getSelection().map(function(t){var e=n.items[t],i={item:e};return n.options.editable.updateTime&&("start"in e.data&&(i.start=e.data.start.valueOf()),"end"in e.data&&(i.end=e.data.end.valueOf())),n.options.editable.updateGroup&&"group"in e.data&&(i.group=e.data.group),i}),t.stopPropagation()}}},n.prototype._onDrag=function(t){if(this.touchParams.itemProps){var e=this.body.range,i=this.body.util.snap||null,s=t.gesture.deltaX,o=this.props.width/(e.end-e.start),r=s/o;this.touchParams.itemProps.forEach(function(e){if("start"in e){var s=new Date(e.start+r);e.item.data.start=i?i(s):s}if("end"in e){var o=new Date(e.end+r);e.item.data.end=i?i(o):o}if("group"in e){var a=n.groupFromTarget(t);if(a&&a.groupId!=e.item.data.group){var h=e.item.parent;h.remove(e.item),h.order(),a.add(e.item),a.order(),e.item.data.group=a.groupId}}}),this.stackDirty=!0,this.body.emitter.emit("change"),t.stopPropagation()}},n.prototype._onDragEnd=function(t){if(this.touchParams.itemProps){var e=[],i=this,n=this.itemsData.getDataSet();this.touchParams.itemProps.forEach(function(t){var s=t.item.id,r=i.itemsData.get(s,i.itemOptions),a=!1;"start"in t.item.data&&(a=t.start!=t.item.data.start.valueOf(),r.start=o.convert(t.item.data.start,n._options.type&&n._options.type.start||"Date")),"end"in t.item.data&&(a=a||t.end!=t.item.data.end.valueOf(),r.end=o.convert(t.item.data.end,n._options.type&&n._options.type.end||"Date")),"group"in t.item.data&&(a=a||t.group!=t.item.data.group,r.group=t.item.data.group),a&&i.options.onMove(r,function(o){o?(o[n._fieldId]=s,e.push(o)):("start"in t&&(t.item.data.start=t.start),"end"in t&&(t.item.data.end=t.end),i.stackDirty=!0,i.body.emitter.emit("change"))})}),this.touchParams.itemProps=null,e.length&&n.update(e),t.stopPropagation()}},n.prototype._onSelectItem=function(t){if(this.options.selectable){var e=t.gesture.srcEvent&&t.gesture.srcEvent.ctrlKey,i=t.gesture.srcEvent&&t.gesture.srcEvent.shiftKey;if(e||i)return void this._onMultiSelectItem(t);var s=this.getSelection(),o=n.itemFromTarget(t),r=o?[o.id]:[];this.setSelection(r);var a=this.getSelection();(a.length>0||s.length>0)&&this.body.emitter.emit("select",{items:this.getSelection()}),t.stopPropagation()}},n.prototype._onAddItem=function(t){if(this.options.selectable&&this.options.editable.add){var e=this,i=this.body.util.snap||null,s=n.itemFromTarget(t);if(s){var r=e.itemsData.get(s.id);this.options.onUpdate(r,function(t){t&&e.itemsData.update(t)})}else{var a=o.getAbsoluteLeft(this.dom.frame),h=t.gesture.center.pageX-a,c=this.body.util.toTime(h),l={start:i?i(c):c,content:"new item"};if("range"===this.options.type){var d=this.body.util.toTime(h+this.props.width/5);l.end=i?i(d):d}l[this.itemsData.fieldId]=o.randomUUID();var u=n.groupFromTarget(t);u&&(l.group=u.groupId),this.options.onAdd(l,function(t){t&&e.itemsData.add(l)})}}},n.prototype._onMultiSelectItem=function(t){if(this.options.selectable){var e,i=n.itemFromTarget(t);if(i){e=this.getSelection();var s=e.indexOf(i.id);-1==s?e.push(i.id):e.splice(s,1),this.setSelection(e),this.body.emitter.emit("select",{items:this.getSelection()}),t.stopPropagation()}}},n.itemFromTarget=function(t){for(var e=t.target;e;){if(e.hasOwnProperty("timeline-item"))return e["timeline-item"];e=e.parentNode}return null},n.groupFromTarget=function(t){for(var e=t.target;e;){if(e.hasOwnProperty("timeline-group"))return e["timeline-group"];e=e.parentNode}return null},n.itemSetFromTarget=function(t){for(var e=t.target;e;){if(e.hasOwnProperty("timeline-itemset"))return e["timeline-itemset"];e=e.parentNode}return null},t.exports=n},function(t,e,i){function n(t,e,i){this.body=t,this.defaultOptions={enabled:!0,icons:!0,iconSize:20,iconSpacing:6,left:{visible:!0,position:"top-left"},right:{visible:!0,position:"top-left"}},this.side=i,this.options=s.extend({},this.defaultOptions),this.svgElements={},this.dom={},this.groups={},this.amountOfGroups=0,this._create(),this.setOptions(e)}var s=i(1),o=i(2),r=i(18);n.prototype=new r,n.prototype.addGroup=function(t,e){this.groups.hasOwnProperty(t)||(this.groups[t]=e),this.amountOfGroups+=1},n.prototype.updateGroup=function(t,e){this.groups[t]=e},n.prototype.removeGroup=function(t){this.groups.hasOwnProperty(t)&&(delete this.groups[t],this.amountOfGroups-=1)},n.prototype._create=function(){this.dom.frame=document.createElement("div"),this.dom.frame.className="legend",this.dom.frame.style.position="absolute",this.dom.frame.style.top="10px",this.dom.frame.style.display="block",this.dom.textArea=document.createElement("div"),this.dom.textArea.className="legendText",this.dom.textArea.style.position="relative",this.dom.textArea.style.top="0px",this.svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.svg.style.position="absolute",this.svg.style.top="0px",this.svg.style.width=this.options.iconSize+5+"px",this.dom.frame.appendChild(this.svg),this.dom.frame.appendChild(this.dom.textArea)},n.prototype.hide=function(){this.dom.frame.parentNode&&this.dom.frame.parentNode.removeChild(this.dom.frame)},n.prototype.show=function(){this.dom.frame.parentNode||this.body.dom.center.appendChild(this.dom.frame)},n.prototype.setOptions=function(t){var e=["enabled","orientation","icons","left","right"];s.selectiveDeepExtend(e,this.options,t)},n.prototype.redraw=function(){if(0==this.options[this.side].visible||0==this.amountOfGroups||0==this.options.enabled)this.hide();else{this.show(),"top-left"==this.options[this.side].position||"bottom-left"==this.options[this.side].position?(this.dom.frame.style.left="4px",this.dom.frame.style.textAlign="left",this.dom.textArea.style.textAlign="left",this.dom.textArea.style.left=this.options.iconSize+15+"px",this.dom.textArea.style.right="",this.svg.style.left="0px",this.svg.style.right=""):(this.dom.frame.style.right="4px",this.dom.frame.style.textAlign="right",this.dom.textArea.style.textAlign="right",this.dom.textArea.style.right=this.options.iconSize+15+"px",this.dom.textArea.style.left="",this.svg.style.right="0px",this.svg.style.left=""),"top-left"==this.options[this.side].position||"top-right"==this.options[this.side].position?(this.dom.frame.style.top=4-Number(this.body.dom.center.style.top.replace("px",""))+"px",this.dom.frame.style.bottom=""):(this.dom.frame.style.bottom=4-Number(this.body.dom.center.style.top.replace("px",""))+"px",this.dom.frame.style.top=""),0==this.options.icons?(this.dom.frame.style.width=this.dom.textArea.offsetWidth+10+"px",this.dom.textArea.style.right="",this.dom.textArea.style.left="",this.svg.style.width="0px"):(this.dom.frame.style.width=this.options.iconSize+15+this.dom.textArea.offsetWidth+10+"px",this.drawLegendIcons());var t="";for(var e in this.groups)this.groups.hasOwnProperty(e)&&(t+=this.groups[e].content+"<br />");this.dom.textArea.innerHTML=t,this.dom.textArea.style.lineHeight=.75*this.options.iconSize+this.options.iconSpacing+"px"}},n.prototype.drawLegendIcons=function(){if(this.dom.frame.parentNode){o.prepareElements(this.svgElements);var t=window.getComputedStyle(this.dom.frame).paddingTop,e=Number(t.replace("px","")),i=e,n=this.options.iconSize,s=.75*this.options.iconSize,r=e+.5*s+3;this.svg.style.width=n+5+e+"px";for(var a in this.groups)this.groups.hasOwnProperty(a)&&(this.groups[a].drawIcon(i,r,this.svgElements,this.svg,n,s),r+=s+this.options.iconSpacing);o.cleanupElements(this.svgElements)}},t.exports=n},function(t,e,i){function n(t,e){this.id=s.randomUUID(),this.body=t,this.defaultOptions={yAxisOrientation:"left",defaultGroup:"default",sort:!0,sampling:!0,graphHeight:"400px",shaded:{enabled:!1,orientation:"bottom"},style:"line",barChart:{width:50,align:"center"},catmullRom:{enabled:!0,parametrization:"centripetal",alpha:.5},drawPoints:{enabled:!0,size:6,style:"square"},dataAxis:{showMinorLabels:!0,showMajorLabels:!0,icons:!1,width:"40px",visible:!0},legend:{enabled:!1,icons:!0,left:{visible:!0,position:"top-left"},right:{visible:!0,position:"top-right"}}},this.options=s.extend({},this.defaultOptions),this.dom={},this.props={},this.hammer=null,this.groups={};var i=this;this.itemsData=null,this.groupsData=null,this.itemListeners={add:function(t,e){i._onAdd(e.items)},update:function(t,e){i._onUpdate(e.items)},remove:function(t,e){i._onRemove(e.items)}},this.groupListeners={add:function(t,e){i._onAddGroups(e.items)},update:function(t,e){i._onUpdateGroups(e.items)},remove:function(t,e){i._onRemoveGroups(e.items)}},this.items={},this.selection=[],this.lastStart=this.body.range.start,this.touchParams={},this.svgElements={},this.setOptions(e),this.groupsUsingDefaultStyles=[0],this.body.emitter.on("rangechange",function(){if(0!=i.lastStart){var t=i.body.range.start-i.lastStart,e=i.body.range.end-i.body.range.start;if(0!=i.width){var n=i.width/e,s=t*n;i.svg.style.left=-i.width-s+"px"}}}),this.body.emitter.on("rangechanged",function(){i.lastStart=i.body.range.start,i.svg.style.left=s.option.asSize(-i.width),i._updateGraph.apply(i)}),this._create(),this.body.emitter.emit("change")}var s=i(1),o=i(2),r=i(3),a=i(4),h=i(18),c=i(21),l=i(22),d=i(25),u="__ungrouped__";n.prototype=new h,n.prototype._create=function(){var t=document.createElement("div");t.className="LineGraph",this.dom.frame=t,this.svg=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.svg.style.position="relative",this.svg.style.height=(""+this.options.graphHeight).replace("px","")+"px",this.svg.style.display="block",t.appendChild(this.svg),this.options.dataAxis.orientation="left",this.yAxisLeft=new c(this.body,this.options.dataAxis,this.svg),this.options.dataAxis.orientation="right",this.yAxisRight=new c(this.body,this.options.dataAxis,this.svg),delete this.options.dataAxis.orientation,this.legendLeft=new d(this.body,this.options.legend,"left"),this.legendRight=new d(this.body,this.options.legend,"right"),this.show()},n.prototype.setOptions=function(t){if(t){var e=["sampling","defaultGroup","graphHeight","yAxisOrientation","style","barChart","dataAxis","sort"];s.selectiveDeepExtend(e,this.options,t),s.mergeOptions(this.options,t,"catmullRom"),s.mergeOptions(this.options,t,"drawPoints"),s.mergeOptions(this.options,t,"shaded"),s.mergeOptions(this.options,t,"legend"),t.catmullRom&&"object"==typeof t.catmullRom&&t.catmullRom.parametrization&&("uniform"==t.catmullRom.parametrization?this.options.catmullRom.alpha=0:"chordal"==t.catmullRom.parametrization?this.options.catmullRom.alpha=1:(this.options.catmullRom.parametrization="centripetal",this.options.catmullRom.alpha=.5)),this.yAxisLeft&&void 0!==t.dataAxis&&(this.yAxisLeft.setOptions(this.options.dataAxis),this.yAxisRight.setOptions(this.options.dataAxis)),this.legendLeft&&void 0!==t.legend&&(this.legendLeft.setOptions(this.options.legend),this.legendRight.setOptions(this.options.legend)),this.groups.hasOwnProperty(u)&&this.groups[u].setOptions(t)}this.dom.frame&&this._updateGraph()},n.prototype.hide=function(){this.dom.frame.parentNode&&this.dom.frame.parentNode.removeChild(this.dom.frame)},n.prototype.show=function(){this.dom.frame.parentNode||this.body.dom.center.appendChild(this.dom.frame)},n.prototype.setItems=function(t){var e,i=this,n=this.itemsData;if(t){if(!(t instanceof r||t instanceof a))throw new TypeError("Data must be an instance of DataSet or DataView");this.itemsData=t}else this.itemsData=null;if(n&&(s.forEach(this.itemListeners,function(t,e){n.off(e,t)}),e=n.getIds(),this._onRemove(e)),this.itemsData){var o=this.id;s.forEach(this.itemListeners,function(t,e){i.itemsData.on(e,t,o)}),e=this.itemsData.getIds(),this._onAdd(e)}this._updateUngrouped(),this._updateGraph(),this.redraw()},n.prototype.setGroups=function(t){var e,i=this;if(this.groupsData&&(s.forEach(this.groupListeners,function(t,e){i.groupsData.unsubscribe(e,t)}),e=this.groupsData.getIds(),this.groupsData=null,this._onRemoveGroups(e)),t){if(!(t instanceof r||t instanceof a))throw new TypeError("Data must be an instance of DataSet or DataView");this.groupsData=t}else this.groupsData=null;if(this.groupsData){var n=this.id;s.forEach(this.groupListeners,function(t,e){i.groupsData.on(e,t,n)}),e=this.groupsData.getIds(),this._onAddGroups(e)}this._onUpdate()},n.prototype._onUpdate=function(){this._updateUngrouped(),this._updateAllGroupData(),this._updateGraph(),this.redraw()},n.prototype._onAdd=function(t){this._onUpdate(t)},n.prototype._onRemove=function(t){this._onUpdate(t)},n.prototype._onUpdateGroups=function(t){for(var e=0;e<t.length;e++){var i=this.groupsData.get(t[e]);this._updateGroup(i,t[e])}this._updateGraph(),this.redraw()},n.prototype._onAddGroups=function(t){this._onUpdateGroups(t)},n.prototype._onRemoveGroups=function(t){for(var e=0;e<t.length;e++)this.groups.hasOwnProperty(t[e])||("right"==this.groups[t[e]].options.yAxisOrientation?(this.yAxisRight.removeGroup(t[e]),this.legendRight.removeGroup(t[e]),this.legendRight.redraw()):(this.yAxisLeft.removeGroup(t[e]),this.legendLeft.removeGroup(t[e]),this.legendLeft.redraw()),delete this.groups[t[e]]);this._updateUngrouped(),this._updateGraph(),this.redraw()},n.prototype._updateGroup=function(t,e){this.groups.hasOwnProperty(e)?(this.groups[e].update(t),"right"==this.groups[e].options.yAxisOrientation?(this.yAxisRight.updateGroup(e,this.groups[e]),this.legendRight.updateGroup(e,this.groups[e])):(this.yAxisLeft.updateGroup(e,this.groups[e]),this.legendLeft.updateGroup(e,this.groups[e]))):(this.groups[e]=new l(t,e,this.options,this.groupsUsingDefaultStyles),"right"==this.groups[e].options.yAxisOrientation?(this.yAxisRight.addGroup(e,this.groups[e]),this.legendRight.addGroup(e,this.groups[e])):(this.yAxisLeft.addGroup(e,this.groups[e]),this.legendLeft.addGroup(e,this.groups[e]))),this.legendLeft.redraw(),this.legendRight.redraw()},n.prototype._updateAllGroupData=function(){if(null!=this.itemsData){var t={};for(var e in this.groups)this.groups.hasOwnProperty(e)&&(t[e]=[]);for(var i in this.itemsData._data)if(this.itemsData._data.hasOwnProperty(i)){var n=this.itemsData._data[i];n.x=s.convert(n.x,"Date"),t[n.group].push(n)}for(var e in this.groups)this.groups.hasOwnProperty(e)&&this.groups[e].setItems(t[e])}},n.prototype._updateUngrouped=function(){if(null!=this.itemsData){var t={id:u,content:this.options.defaultGroup};this._updateGroup(t,u);var e=0;if(this.itemsData)for(var i in this.itemsData._data)if(this.itemsData._data.hasOwnProperty(i)){var n=this.itemsData._data[i];void 0!=n&&(n.hasOwnProperty("group")?void 0===n.group&&(n.group=u):n.group=u,e=n.group==u?e+1:e)}0==e&&(delete this.groups[u],this.legendLeft.removeGroup(u),this.legendRight.removeGroup(u),this.yAxisLeft.removeGroup(u),this.yAxisRight.removeGroup(u))}else delete this.groups[u],this.legendLeft.removeGroup(u),this.legendRight.removeGroup(u),this.yAxisLeft.removeGroup(u),this.yAxisRight.removeGroup(u);this.legendLeft.redraw(),this.legendRight.redraw()},n.prototype.redraw=function(){var t=!1;this.svg.style.height=(""+this.options.graphHeight).replace("px","")+"px",(void 0===this.lastWidth&&this.width||this.lastWidth!=this.width)&&(t=!0),t=this._isResized()||t;var e=this.body.range.end-this.body.range.start,i=e!=this.lastVisibleInterval||this.width!=this.lastWidth;return this.lastVisibleInterval=e,this.lastWidth=this.width,this.width=this.dom.frame.offsetWidth,1==t&&(this.svg.style.width=s.option.asSize(3*this.width),this.svg.style.left=s.option.asSize(-this.width)),1==i&&this._updateGraph(),this.legendLeft.redraw(),this.legendRight.redraw(),t},n.prototype._updateGraph=function(){if(o.prepareElements(this.svgElements),0!=this.width&&null!=this.itemsData){var t,e,i,n,r=[],a=[],h=[],c=!1,l=[];for(var d in this.groups)this.groups.hasOwnProperty(d)&&l.push(d);var u=this.body.util.toGlobalTime(-this.body.domProps.root.width),p=this.body.util.toGlobalTime(2*this.body.domProps.root.width);if(l.length>0){for(n=0;n<l.length;n++){if(t=this.groups[l[n]],e=[],1==t.options.sort)for(var f=Math.max(0,s.binarySearchGeneric(t.itemsData,u,"x","before")),g=f;g<t.itemsData.length;g++){var m=t.itemsData[g];if(void 0!==m){if(m.x>p){e.push(m);break}e.push(m)}}else for(var g=0;g<t.itemsData.length;g++){var m=t.itemsData[g];void 0!==m&&m.x>u&&m.x<p&&e.push(m)}i=this._preprocessData(e,t),h.push({min:i.min,max:i.max}),r.push(i.data)}if(c=this._updateYAxis(l,h),1==c)return o.cleanupElements(this.svgElements),void this.body.emitter.emit("change");for(n=0;n<l.length;n++)t=this.groups[l[n]],a.push(this._convertYvalues(r[n],t));for(n=0;n<l.length;n++)t=this.groups[l[n]],"line"==t.options.style?this._drawLineGraph(a[n],t):this._drawBarGraph(a[n],t)}}o.cleanupElements(this.svgElements)},n.prototype._updateYAxis=function(t,e){var i,n,s=!1,o=!1,r=!1,a=1e9,h=1e9,c=-1e9,l=-1e9,d="left";if(t.length>0){for(var u=0;u<t.length;u++){d="left";var p=this.groups[t[u]];"right"==p.options.yAxisOrientation&&(d="right"),i=e[u].min,n=e[u].max,"left"==d?(o=!0,a=a>i?i:a,c=n>c?n:c):(r=!0,h=h>i?i:h,l=n>l?n:l)}1==o&&this.yAxisLeft.setRange(a,c),1==r&&this.yAxisRight.setRange(h,l)}return s=this._toggleAxisVisiblity(o,this.yAxisLeft)||s,s=this._toggleAxisVisiblity(r,this.yAxisRight)||s,1==r&&1==o?(this.yAxisLeft.drawIcons=!0,this.yAxisRight.drawIcons=!0):(this.yAxisLeft.drawIcons=!1,this.yAxisRight.drawIcons=!1),this.yAxisRight.master=!o,0==this.yAxisRight.master?(1==r&&(this.yAxisLeft.lineOffset=this.yAxisRight.width),s=this.yAxisLeft.redraw()||s,this.yAxisRight.stepPixelsForced=this.yAxisLeft.stepPixels,s=this.yAxisRight.redraw()||s):s=this.yAxisRight.redraw()||s,s},n.prototype._toggleAxisVisiblity=function(t,e){var i=!1;
return 0==t?e.dom.frame.parentNode&&(e.hide(),i=!0):e.dom.frame.parentNode||(e.show(),i=!0),i},n.prototype._drawBarGraph=function(t,e){if(null!=t&&t.length>0){var i,n=.1*e.options.barChart.width,s=0,r=e.options.barChart.width;"left"==e.options.barChart.align?s-=.5*r:"right"==e.options.barChart.align&&(s+=.5*r);for(var a=0;a<t.length;a++)a+1<t.length&&(i=Math.abs(t[a+1].x-t[a].x)),a>0&&(i=Math.min(i,Math.abs(t[a-1].x-t[a].x))),r>i&&(r=n>i?n:i),o.drawBar(t[a].x+s,t[a].y,r,e.zeroPosition-t[a].y,e.className+" bar",this.svgElements,this.svg);1==e.options.drawPoints.enabled&&this._drawPoints(t,e,this.svgElements,this.svg,s)}},n.prototype._drawLineGraph=function(t,e){if(null!=t&&t.length>0){var i,n,s=Number(this.svg.style.height.replace("px",""));if(i=o.getSVGElement("path",this.svgElements,this.svg),i.setAttributeNS(null,"class",e.className),n=1==e.options.catmullRom.enabled?this._catmullRom(t,e):this._linear(t),1==e.options.shaded.enabled){var r,a=o.getSVGElement("path",this.svgElements,this.svg);r="top"==e.options.shaded.orientation?"M"+t[0].x+",0 "+n+"L"+t[t.length-1].x+",0":"M"+t[0].x+","+s+" "+n+"L"+t[t.length-1].x+","+s,a.setAttributeNS(null,"class",e.className+" fill"),a.setAttributeNS(null,"d",r)}i.setAttributeNS(null,"d","M"+n),1==e.options.drawPoints.enabled&&this._drawPoints(t,e,this.svgElements,this.svg)}},n.prototype._drawPoints=function(t,e,i,n,s){void 0===s&&(s=0);for(var r=0;r<t.length;r++)o.drawPoint(t[r].x+s,t[r].y,e,i,n)},n.prototype._preprocessData=function(t,e){var i,n,s=[],o=this.body.util.toScreen,r=1,a=t.length,h=t[0].y,c=t[0].y;if(1==e.options.sampling){var l=this.body.util.toGlobalScreen(t[t.length-1].x)-this.body.util.toGlobalScreen(t[0].x),d=a/l;r=Math.min(Math.ceil(.2*a),Math.max(1,Math.round(d)))}for(var u=0;a>u;u+=r)i=o(t[u].x)+this.width-1,n=t[u].y,s.push({x:i,y:n}),h=h>n?n:h,c=n>c?n:c;return{min:h,max:c,data:s}},n.prototype._convertYvalues=function(t,e){var i,n,s=[],o=this.yAxisLeft,r=Number(this.svg.style.height.replace("px",""));"right"==e.options.yAxisOrientation&&(o=this.yAxisRight);for(var a=0;a<t.length;a++)i=t[a].x,n=Math.round(o.convertValue(t[a].y)),s.push({x:i,y:n});return e.setZeroPosition(Math.min(r,o.convertValue(0))),s},n.prototype._catmullRomUniform=function(t){for(var e,i,n,s,o,r,a=Math.round(t[0].x)+","+Math.round(t[0].y)+" ",h=1/6,c=t.length,l=0;c-1>l;l++)e=0==l?t[0]:t[l-1],i=t[l],n=t[l+1],s=c>l+2?t[l+2]:n,o={x:(-e.x+6*i.x+n.x)*h,y:(-e.y+6*i.y+n.y)*h},r={x:(i.x+6*n.x-s.x)*h,y:(i.y+6*n.y-s.y)*h},a+="C"+o.x+","+o.y+" "+r.x+","+r.y+" "+n.x+","+n.y+" ";return a},n.prototype._catmullRom=function(t,e){var i=e.options.catmullRom.alpha;if(0==i||void 0===i)return this._catmullRomUniform(t);for(var n,s,o,r,a,h,c,l,d,u,p,f,g,m,v,y,b,x,w,_=Math.round(t[0].x)+","+Math.round(t[0].y)+" ",S=t.length,C=0;S-1>C;C++)n=0==C?t[0]:t[C-1],s=t[C],o=t[C+1],r=S>C+2?t[C+2]:o,c=Math.sqrt(Math.pow(n.x-s.x,2)+Math.pow(n.y-s.y,2)),l=Math.sqrt(Math.pow(s.x-o.x,2)+Math.pow(s.y-o.y,2)),d=Math.sqrt(Math.pow(o.x-r.x,2)+Math.pow(o.y-r.y,2)),m=Math.pow(d,i),y=Math.pow(d,2*i),v=Math.pow(l,i),b=Math.pow(l,2*i),w=Math.pow(c,i),x=Math.pow(c,2*i),u=2*x+3*w*v+b,p=2*y+3*m*v+b,f=3*w*(w+v),f>0&&(f=1/f),g=3*m*(m+v),g>0&&(g=1/g),a={x:(-b*n.x+u*s.x+x*o.x)*f,y:(-b*n.y+u*s.y+x*o.y)*f},h={x:(y*s.x+p*o.x-b*r.x)*g,y:(y*s.y+p*o.y-b*r.y)*g},0==a.x&&0==a.y&&(a=s),0==h.x&&0==h.y&&(h=o),_+="C"+a.x+","+a.y+" "+h.x+","+h.y+" "+o.x+","+o.y+" ";return _},n.prototype._linear=function(t){for(var e="",i=0;i<t.length;i++)e+=0==i?t[i].x+","+t[i].y:" "+t[i].x+","+t[i].y;return e},t.exports=n},function(t,e,i){function n(t,e){this.dom={foreground:null,majorLines:[],majorTexts:[],minorLines:[],minorTexts:[],redundant:{majorLines:[],majorTexts:[],minorLines:[],minorTexts:[]}},this.props={range:{start:0,end:0,minimumStep:0},lineTop:0},this.defaultOptions={orientation:"bottom",showMinorLabels:!0,showMajorLabels:!0},this.options=s.extend({},this.defaultOptions),this.body=t,this._create(),this.setOptions(e)}var s=i(1),o=i(18),r=i(17);n.prototype=new o,n.prototype.setOptions=function(t){t&&s.selectiveExtend(["orientation","showMinorLabels","showMajorLabels"],this.options,t)},n.prototype._create=function(){this.dom.foreground=document.createElement("div"),this.dom.background=document.createElement("div"),this.dom.foreground.className="timeaxis foreground",this.dom.background.className="timeaxis background"},n.prototype.destroy=function(){this.dom.foreground.parentNode&&this.dom.foreground.parentNode.removeChild(this.dom.foreground),this.dom.background.parentNode&&this.dom.background.parentNode.removeChild(this.dom.background),this.body=null},n.prototype.redraw=function(){var t=this.options,e=this.props,i=this.dom.foreground,n=this.dom.background,s="top"==t.orientation?this.body.dom.top:this.body.dom.bottom,o=i.parentNode!==s;this._calculateCharSize();var r=(this.options.orientation,this.options.showMinorLabels),a=this.options.showMajorLabels;e.minorLabelHeight=r?e.minorCharHeight:0,e.majorLabelHeight=a?e.majorCharHeight:0,e.height=e.minorLabelHeight+e.majorLabelHeight,e.width=i.offsetWidth,e.minorLineHeight=this.body.domProps.root.height-e.majorLabelHeight-("top"==t.orientation?this.body.domProps.bottom.height:this.body.domProps.top.height),e.minorLineWidth=1,e.majorLineHeight=e.minorLineHeight+e.majorLabelHeight,e.majorLineWidth=1;var h=i.nextSibling,c=n.nextSibling;return i.parentNode&&i.parentNode.removeChild(i),n.parentNode&&n.parentNode.removeChild(n),i.style.height=this.props.height+"px",this._repaintLabels(),h?s.insertBefore(i,h):s.appendChild(i),c?this.body.dom.backgroundVertical.insertBefore(n,c):this.body.dom.backgroundVertical.appendChild(n),this._isResized()||o},n.prototype._repaintLabels=function(){var t=this.options.orientation,e=s.convert(this.body.range.start,"Number"),i=s.convert(this.body.range.end,"Number"),n=this.body.util.toTime(7*(this.props.minorCharWidth||10)).valueOf()-this.body.util.toTime(0).valueOf(),o=new r(new Date(e),new Date(i),n);this.step=o;var a=this.dom;a.redundant.majorLines=a.majorLines,a.redundant.majorTexts=a.majorTexts,a.redundant.minorLines=a.minorLines,a.redundant.minorTexts=a.minorTexts,a.majorLines=[],a.majorTexts=[],a.minorLines=[],a.minorTexts=[],o.first();for(var h=void 0,c=0;o.hasNext()&&1e3>c;){c++;var l=o.getCurrent(),d=this.body.util.toScreen(l),u=o.isMajor();this.options.showMinorLabels&&this._repaintMinorText(d,o.getLabelMinor(),t),u&&this.options.showMajorLabels?(d>0&&(void 0==h&&(h=d),this._repaintMajorText(d,o.getLabelMajor(),t)),this._repaintMajorLine(d,t)):this._repaintMinorLine(d,t),o.next()}if(this.options.showMajorLabels){var p=this.body.util.toTime(0),f=o.getLabelMajor(p),g=f.length*(this.props.majorCharWidth||10)+10;(void 0==h||h>g)&&this._repaintMajorText(0,f,t)}s.forEach(this.dom.redundant,function(t){for(;t.length;){var e=t.pop();e&&e.parentNode&&e.parentNode.removeChild(e)}})},n.prototype._repaintMinorText=function(t,e,i){var n=this.dom.redundant.minorTexts.shift();if(!n){var s=document.createTextNode("");n=document.createElement("div"),n.appendChild(s),n.className="text minor",this.dom.foreground.appendChild(n)}this.dom.minorTexts.push(n),n.childNodes[0].nodeValue=e,n.style.top="top"==i?this.props.majorLabelHeight+"px":"0",n.style.left=t+"px"},n.prototype._repaintMajorText=function(t,e,i){var n=this.dom.redundant.majorTexts.shift();if(!n){var s=document.createTextNode(e);n=document.createElement("div"),n.className="text major",n.appendChild(s),this.dom.foreground.appendChild(n)}this.dom.majorTexts.push(n),n.childNodes[0].nodeValue=e,n.style.top="top"==i?"0":this.props.minorLabelHeight+"px",n.style.left=t+"px"},n.prototype._repaintMinorLine=function(t,e){var i=this.dom.redundant.minorLines.shift();i||(i=document.createElement("div"),i.className="grid vertical minor",this.dom.background.appendChild(i)),this.dom.minorLines.push(i);var n=this.props;i.style.top="top"==e?n.majorLabelHeight+"px":this.body.domProps.top.height+"px",i.style.height=n.minorLineHeight+"px",i.style.left=t-n.minorLineWidth/2+"px"},n.prototype._repaintMajorLine=function(t,e){var i=this.dom.redundant.majorLines.shift();i||(i=document.createElement("DIV"),i.className="grid vertical major",this.dom.background.appendChild(i)),this.dom.majorLines.push(i);var n=this.props;i.style.top="top"==e?"0":this.body.domProps.top.height+"px",i.style.left=t-n.majorLineWidth/2+"px",i.style.height=n.majorLineHeight+"px"},n.prototype._calculateCharSize=function(){this.dom.measureCharMinor||(this.dom.measureCharMinor=document.createElement("DIV"),this.dom.measureCharMinor.className="text minor measure",this.dom.measureCharMinor.style.position="absolute",this.dom.measureCharMinor.appendChild(document.createTextNode("0")),this.dom.foreground.appendChild(this.dom.measureCharMinor)),this.props.minorCharHeight=this.dom.measureCharMinor.clientHeight,this.props.minorCharWidth=this.dom.measureCharMinor.clientWidth,this.dom.measureCharMajor||(this.dom.measureCharMajor=document.createElement("DIV"),this.dom.measureCharMajor.className="text minor measure",this.dom.measureCharMajor.style.position="absolute",this.dom.measureCharMajor.appendChild(document.createTextNode("0")),this.dom.foreground.appendChild(this.dom.measureCharMajor)),this.props.majorCharHeight=this.dom.measureCharMajor.clientHeight,this.props.majorCharWidth=this.dom.measureCharMajor.clientWidth},n.prototype.snap=function(t){return this.step.snap(t)},t.exports=n},function(t,e,i){function n(t,e,i){this.id=null,this.parent=null,this.data=t,this.dom=null,this.conversion=e||{},this.options=i||{},this.selected=!1,this.displayed=!1,this.dirty=!0,this.top=null,this.left=null,this.width=null,this.height=null}var s=i(41);n.prototype.select=function(){this.selected=!0,this.displayed&&this.redraw()},n.prototype.unselect=function(){this.selected=!1,this.displayed&&this.redraw()},n.prototype.setParent=function(t){this.displayed?(this.hide(),this.parent=t,this.parent&&this.show()):this.parent=t},n.prototype.isVisible=function(){return!1},n.prototype.show=function(){return!1},n.prototype.hide=function(){return!1},n.prototype.redraw=function(){},n.prototype.repositionX=function(){},n.prototype.repositionY=function(){},n.prototype._repaintDeleteButton=function(t){if(this.selected&&this.options.editable.remove&&!this.dom.deleteButton){var e=this,i=document.createElement("div");i.className="delete",i.title="Delete this item",s(i,{preventDefault:!0}).on("tap",function(t){e.parent.removeFromDataSet(e),t.stopPropagation()}),t.appendChild(i),this.dom.deleteButton=i}else!this.selected&&this.dom.deleteButton&&(this.dom.deleteButton.parentNode&&this.dom.deleteButton.parentNode.removeChild(this.dom.deleteButton),this.dom.deleteButton=null)},t.exports=n},function(t,e,i){function n(t,e,i){if(this.props={dot:{width:0,height:0},line:{width:0,height:0}},t&&void 0==t.start)throw new Error('Property "start" missing in item '+t);s.call(this,t,e,i)}var s=i(28);n.prototype=new s(null,null,null),n.prototype.isVisible=function(t){var e=(t.end-t.start)/4;return this.data.start>t.start-e&&this.data.start<t.end+e},n.prototype.redraw=function(){var t=this.dom;if(t||(this.dom={},t=this.dom,t.box=document.createElement("DIV"),t.content=document.createElement("DIV"),t.content.className="content",t.box.appendChild(t.content),t.line=document.createElement("DIV"),t.line.className="line",t.dot=document.createElement("DIV"),t.dot.className="dot",t.box["timeline-item"]=this),!this.parent)throw new Error("Cannot redraw item: no parent attached");if(!t.box.parentNode){var e=this.parent.dom.foreground;if(!e)throw new Error("Cannot redraw time axis: parent has no foreground container element");e.appendChild(t.box)}if(!t.line.parentNode){var i=this.parent.dom.background;if(!i)throw new Error("Cannot redraw time axis: parent has no background container element");i.appendChild(t.line)}if(!t.dot.parentNode){var n=this.parent.dom.axis;if(!i)throw new Error("Cannot redraw time axis: parent has no axis container element");n.appendChild(t.dot)}if(this.displayed=!0,this.data.content!=this.content){if(this.content=this.data.content,this.content instanceof Element)t.content.innerHTML="",t.content.appendChild(this.content);else{if(void 0==this.data.content)throw new Error('Property "content" missing in item '+this.data.id);t.content.innerHTML=this.content}this.dirty=!0}this.data.title!=this.title&&(t.box.title=this.data.title,this.title=this.data.title);var s=(this.data.className?" "+this.data.className:"")+(this.selected?" selected":"");this.className!=s&&(this.className=s,t.box.className="item box"+s,t.line.className="item line"+s,t.dot.className="item dot"+s,this.dirty=!0),this.dirty&&(this.props.dot.height=t.dot.offsetHeight,this.props.dot.width=t.dot.offsetWidth,this.props.line.width=t.line.offsetWidth,this.width=t.box.offsetWidth,this.height=t.box.offsetHeight,this.dirty=!1),this._repaintDeleteButton(t.box)},n.prototype.show=function(){this.displayed||this.redraw()},n.prototype.hide=function(){if(this.displayed){var t=this.dom;t.box.parentNode&&t.box.parentNode.removeChild(t.box),t.line.parentNode&&t.line.parentNode.removeChild(t.line),t.dot.parentNode&&t.dot.parentNode.removeChild(t.dot),this.top=null,this.left=null,this.displayed=!1}},n.prototype.repositionX=function(){var t=this.conversion.toScreen(this.data.start),e=this.options.align,i=this.dom.box,n=this.dom.line,s=this.dom.dot;this.left="right"==e?t-this.width:"left"==e?t:t-this.width/2,i.style.left=this.left+"px",n.style.left=t-this.props.line.width/2+"px",s.style.left=t-this.props.dot.width/2+"px"},n.prototype.repositionY=function(){var t=this.options.orientation,e=this.dom.box,i=this.dom.line,n=this.dom.dot;if("top"==t)e.style.top=(this.top||0)+"px",i.style.top="0",i.style.height=this.parent.top+this.top+1+"px",i.style.bottom="";else{var s=this.parent.itemSet.props.height,o=s-this.parent.top-this.parent.height+this.top;e.style.top=(this.parent.height-this.top-this.height||0)+"px",i.style.top=s-o+"px",i.style.bottom="0"}n.style.top=-this.props.dot.height/2+"px"},t.exports=n},function(t,e,i){function n(t,e,i){if(this.props={dot:{top:0,width:0,height:0},content:{height:0,marginLeft:0}},t&&void 0==t.start)throw new Error('Property "start" missing in item '+t);s.call(this,t,e,i)}var s=i(28);n.prototype=new s(null,null,null),n.prototype.isVisible=function(t){var e=(t.end-t.start)/4;return this.data.start>t.start-e&&this.data.start<t.end+e},n.prototype.redraw=function(){var t=this.dom;if(t||(this.dom={},t=this.dom,t.point=document.createElement("div"),t.content=document.createElement("div"),t.content.className="content",t.point.appendChild(t.content),t.dot=document.createElement("div"),t.point.appendChild(t.dot),t.point["timeline-item"]=this),!this.parent)throw new Error("Cannot redraw item: no parent attached");if(!t.point.parentNode){var e=this.parent.dom.foreground;if(!e)throw new Error("Cannot redraw time axis: parent has no foreground container element");e.appendChild(t.point)}if(this.displayed=!0,this.data.content!=this.content){if(this.content=this.data.content,this.content instanceof Element)t.content.innerHTML="",t.content.appendChild(this.content);else{if(void 0==this.data.content)throw new Error('Property "content" missing in item '+this.data.id);t.content.innerHTML=this.content}this.dirty=!0}this.data.title!=this.title&&(t.point.title=this.data.title,this.title=this.data.title);var i=(this.data.className?" "+this.data.className:"")+(this.selected?" selected":"");this.className!=i&&(this.className=i,t.point.className="item point"+i,t.dot.className="item dot"+i,this.dirty=!0),this.dirty&&(this.width=t.point.offsetWidth,this.height=t.point.offsetHeight,this.props.dot.width=t.dot.offsetWidth,this.props.dot.height=t.dot.offsetHeight,this.props.content.height=t.content.offsetHeight,t.content.style.marginLeft=2*this.props.dot.width+"px",t.dot.style.top=(this.height-this.props.dot.height)/2+"px",t.dot.style.left=this.props.dot.width/2+"px",this.dirty=!1),this._repaintDeleteButton(t.point)},n.prototype.show=function(){this.displayed||this.redraw()},n.prototype.hide=function(){this.displayed&&(this.dom.point.parentNode&&this.dom.point.parentNode.removeChild(this.dom.point),this.top=null,this.left=null,this.displayed=!1)},n.prototype.repositionX=function(){var t=this.conversion.toScreen(this.data.start);this.left=t-this.props.dot.width,this.dom.point.style.left=this.left+"px"},n.prototype.repositionY=function(){var t=this.options.orientation,e=this.dom.point;e.style.top="top"==t?this.top+"px":this.parent.height-this.top-this.height+"px"},t.exports=n},function(t,e,i){function n(t,e,i){if(this.props={content:{width:0}},this.overflow=!1,t){if(void 0==t.start)throw new Error('Property "start" missing in item '+t.id);if(void 0==t.end)throw new Error('Property "end" missing in item '+t.id)}o.call(this,t,e,i)}var s=i(41),o=i(28);n.prototype=new o(null,null,null),n.prototype.baseClassName="item range",n.prototype.isVisible=function(t){return this.data.start<t.end&&this.data.end>t.start},n.prototype.redraw=function(){var t=this.dom;if(t||(this.dom={},t=this.dom,t.box=document.createElement("div"),t.content=document.createElement("div"),t.content.className="content",t.box.appendChild(t.content),t.box["timeline-item"]=this),!this.parent)throw new Error("Cannot redraw item: no parent attached");if(!t.box.parentNode){var e=this.parent.dom.foreground;if(!e)throw new Error("Cannot redraw time axis: parent has no foreground container element");e.appendChild(t.box)}if(this.displayed=!0,this.data.content!=this.content){if(this.content=this.data.content,this.content instanceof Element)t.content.innerHTML="",t.content.appendChild(this.content);else{if(void 0==this.data.content)throw new Error('Property "content" missing in item '+this.data.id);t.content.innerHTML=this.content}this.dirty=!0}this.data.title!=this.title&&(t.box.title=this.data.title,this.title=this.data.title);var i=(this.data.className?" "+this.data.className:"")+(this.selected?" selected":"");this.className!=i&&(this.className=i,t.box.className=this.baseClassName+i,this.dirty=!0),this.dirty&&(this.overflow="hidden"!==window.getComputedStyle(t.content).overflow,this.props.content.width=this.dom.content.offsetWidth,this.height=this.dom.box.offsetHeight,this.dirty=!1),this._repaintDeleteButton(t.box),this._repaintDragLeft(),this._repaintDragRight()},n.prototype.show=function(){this.displayed||this.redraw()},n.prototype.hide=function(){if(this.displayed){var t=this.dom.box;t.parentNode&&t.parentNode.removeChild(t),this.top=null,this.left=null,this.displayed=!1}},n.prototype.repositionX=function(){var t,e=this.props,i=this.parent.width,n=this.conversion.toScreen(this.data.start),s=this.conversion.toScreen(this.data.end),o=this.options.padding;-i>n&&(n=-i),s>2*i&&(s=2*i);var r=Math.max(s-n,1);this.overflow?(t=Math.max(-n,0),this.left=n,this.width=r+this.props.content.width):(t=0>n?Math.min(-n,s-n-e.content.width-2*o):0,this.left=n,this.width=r),this.dom.box.style.left=this.left+"px",this.dom.box.style.width=r+"px",this.dom.content.style.left=t+"px"},n.prototype.repositionY=function(){var t=this.options.orientation,e=this.dom.box;e.style.top="top"==t?this.top+"px":this.parent.height-this.top-this.height+"px"},n.prototype._repaintDragLeft=function(){if(this.selected&&this.options.editable.updateTime&&!this.dom.dragLeft){var t=document.createElement("div");t.className="drag-left",t.dragLeftItem=this,s(t,{preventDefault:!0}).on("drag",function(){}),this.dom.box.appendChild(t),this.dom.dragLeft=t}else!this.selected&&this.dom.dragLeft&&(this.dom.dragLeft.parentNode&&this.dom.dragLeft.parentNode.removeChild(this.dom.dragLeft),this.dom.dragLeft=null)},n.prototype._repaintDragRight=function(){if(this.selected&&this.options.editable.updateTime&&!this.dom.dragRight){var t=document.createElement("div");t.className="drag-right",t.dragRightItem=this,s(t,{preventDefault:!0}).on("drag",function(){}),this.dom.box.appendChild(t),this.dom.dragRight=t}else!this.selected&&this.dom.dragRight&&(this.dom.dragRight.parentNode&&this.dom.dragRight.parentNode.removeChild(this.dom.dragRight),this.dom.dragRight=null)},t.exports=n},function(t,e,i){function n(t,e,i){if(!(this instanceof n))throw new SyntaxError("Constructor must be called with the new operator");this._initializeMixinLoaders(),this.containerElement=t,this.width="100%",this.height="100%",this.renderRefreshRate=60,this.renderTimestep=1e3/this.renderRefreshRate,this.renderTime=.5*this.renderTimestep,this.maxPhysicsTicksPerRender=3,this.physicsDiscreteStepsize=.5,this.stabilize=!0,this.selectable=!0,this.initializing=!0,this.triggerFunctions={add:null,edit:null,editEdge:null,connect:null,del:null},this.constants={nodes:{radiusMin:10,radiusMax:30,radius:10,shape:"ellipse",image:void 0,widthMin:16,widthMax:64,fixed:!1,fontColor:"black",fontSize:14,fontFace:"verdana",level:-1,color:{border:"#2B7CE9",background:"#97C2FC",highlight:{border:"#2B7CE9",background:"#D2E5FF"},hover:{border:"#2B7CE9",background:"#D2E5FF"}},borderColor:"#2B7CE9",backgroundColor:"#97C2FC",highlightColor:"#D2E5FF",group:void 0,borderWidth:1},edges:{widthMin:1,widthMax:15,width:1,widthSelectionMultiplier:2,hoverWidth:1.5,style:"line",color:{color:"#848484",highlight:"#848484",hover:"#848484"},fontColor:"#343434",fontSize:14,fontFace:"arial",fontFill:"white",arrowScaleFactor:1,dash:{length:10,gap:5,altLength:void 0},inheritColor:"from"},configurePhysics:!1,physics:{barnesHut:{enabled:!0,theta:1/.6,gravitationalConstant:-2e3,centralGravity:.3,springLength:95,springConstant:.04,damping:.09},repulsion:{centralGravity:0,springLength:200,springConstant:.05,nodeDistance:100,damping:.09},hierarchicalRepulsion:{enabled:!1,centralGravity:0,springLength:100,springConstant:.01,nodeDistance:150,damping:.09},damping:null,centralGravity:null,springLength:null,springConstant:null},clustering:{enabled:!1,initialMaxNodes:100,clusterThreshold:500,reduceToNodes:300,chainThreshold:.4,clusterEdgeThreshold:20,sectorThreshold:100,screenSizeThreshold:.2,fontSizeMultiplier:4,maxFontSize:1e3,forceAmplification:.1,distanceAmplification:.1,edgeGrowth:20,nodeScaling:{width:1,height:1,radius:1},maxNodeSizeIncrements:600,activeAreaBoxSize:80,clusterLevelDifference:2},navigation:{enabled:!1},keyboard:{enabled:!1,speed:{x:10,y:10,zoom:.02}},dataManipulation:{enabled:!1,initiallyVisible:!1},hierarchicalLayout:{enabled:!1,levelSeparation:150,nodeSpacing:100,direction:"UD"},freezeForStabilization:!1,smoothCurves:{enabled:!0,dynamic:!0,type:"continuous",roundness:.5},dynamicSmoothCurves:!0,maxVelocity:30,minVelocity:.1,stabilizationIterations:1e3,labels:{add:"Add Node",edit:"Edit",link:"Add Link",del:"Delete selected",editNode:"Edit Node",editEdge:"Edit Edge",back:"Back",addDescription:"Click in an empty space to place a new node.",linkDescription:"Click on a node and drag the edge to another node to connect them.",editEdgeDescription:"Click on the control points and drag them to a node to connect to it.",addError:"The function for add does not support two arguments (data,callback).",linkError:"The function for connect does not support two arguments (data,callback).",editError:"The function for edit does not support two arguments (data, callback).",editBoundError:"No edit function has been bound to this button.",deleteError:"The function for delete does not support two arguments (data, callback).",deleteClusterError:"Clusters cannot be deleted."},tooltip:{delay:300,fontColor:"black",fontSize:14,fontFace:"verdana",color:{border:"#666",background:"#FFFFC6"}},dragNetwork:!0,dragNodes:!0,zoomable:!0,hover:!1,hideEdgesOnDrag:!1,hideNodesOnDrag:!1},this.hoverObj={nodes:{},edges:{}},this.controlNodesActive=!1;var s=this;this.groups=new p,this.images=new f,this.images.setOnloadCallback(function(){s._redraw()}),this.xIncrement=0,this.yIncrement=0,this.zoomIncrement=0,this._loadPhysicsSystem(),this._create(),this._loadSectorSystem(),this._loadClusterSystem(),this._loadSelectionSystem(),this._loadHierarchySystem(),this._setTranslation(this.frame.clientWidth/2,this.frame.clientHeight/2),this._setScale(1),this.setOptions(i),this.freezeSimulation=!1,this.cachedFunctions={},this.calculationNodes={},this.calculationNodeIndices=[],this.nodeIndices=[],this.nodes={},this.edges={},this.canvasTopLeft={x:0,y:0},this.canvasBottomRight={x:0,y:0},this.pointerPosition={x:0,y:0},this.areaCenter={},this.scale=1,this.previousScale=this.scale,this.nodesData=null,this.edgesData=null,this.nodesListeners={add:function(t,e){s._addNodes(e.items),s.start()},update:function(t,e){s._updateNodes(e.items),s.start()},remove:function(t,e){s._removeNodes(e.items),s.start()}},this.edgesListeners={add:function(t,e){s._addEdges(e.items),s.start()},update:function(t,e){s._updateEdges(e.items),s.start()},remove:function(t,e){s._removeEdges(e.items),s.start()}},this.moving=!0,this.timer=void 0,this.setData(e,this.constants.clustering.enabled||this.constants.hierarchicalLayout.enabled),this.initializing=!1,1==this.constants.hierarchicalLayout.enabled?this._setupHierarchicalLayout():0==this.stabilize&&this.zoomExtent(!0,this.constants.clustering.enabled),this.constants.clustering.enabled&&this.startWithClustering()}var s=i(45),o=i(41),r=i(47),a=i(1),h=i(42),c=i(3),l=i(4),d=i(38),u=i(39),p=i(34),f=i(35),g=i(36),m=i(33),v=i(37),y=i(44);i(43),s(n.prototype),n.prototype._getScriptPath=function(){for(var t=document.getElementsByTagName("script"),e=0;e<t.length;e++){var i=t[e].src,n=i&&/\/?vis(.min)?\.js$/.exec(i);if(n)return i.substring(0,i.length-n[0].length)}return null},n.prototype._getRange=function(){var t,e=1e9,i=-1e9,n=1e9,s=-1e9;for(var o in this.nodes)this.nodes.hasOwnProperty(o)&&(t=this.nodes[o],n>t.x&&(n=t.x),s<t.x&&(s=t.x),e>t.y&&(e=t.y),i<t.y&&(i=t.y));return 1e9==n&&-1e9==s&&1e9==e&&-1e9==i&&(e=0,i=0,n=0,s=0),{minX:n,maxX:s,minY:e,maxY:i}},n.prototype._findCenter=function(t){return{x:.5*(t.maxX+t.minX),y:.5*(t.maxY+t.minY)}},n.prototype._centerNetwork=function(t){var e=this._findCenter(t);e.x*=this.scale,e.y*=this.scale,e.x-=.5*this.frame.canvas.clientWidth,e.y-=.5*this.frame.canvas.clientHeight,this._setTranslation(-e.x,-e.y)},n.prototype.zoomExtent=function(t,e){void 0===t&&(t=!1),void 0===e&&(e=!1);var i,n=this._getRange();if(1==t){var s=this.nodeIndices.length;i=1==this.constants.smoothCurves?1==this.constants.clustering.enabled&&s>=this.constants.clustering.initialMaxNodes?49.07548/(s+142.05338)+91444e-8:12.662/(s+7.4147)+.0964822:1==this.constants.clustering.enabled&&s>=this.constants.clustering.initialMaxNodes?77.5271985/(s+187.266146)+476710517e-13:30.5062972/(s+19.93597763)+.08413486;var o=Math.min(this.frame.canvas.clientWidth/600,this.frame.canvas.clientHeight/600);i*=o}else{var r=1.1*(Math.abs(n.minX)+Math.abs(n.maxX)),a=1.1*(Math.abs(n.minY)+Math.abs(n.maxY)),h=this.frame.canvas.clientWidth/r,c=this.frame.canvas.clientHeight/a;i=c>=h?h:c}i>1&&(i=1),this._setScale(i),this._centerNetwork(n),0==e&&(this.moving=!0,this.start())},n.prototype._updateNodeIndexList=function(){this._clearNodeIndexList();for(var t in this.nodes)this.nodes.hasOwnProperty(t)&&this.nodeIndices.push(t)},n.prototype.setData=function(t,e){if(void 0===e&&(e=!1),t&&t.dot&&(t.nodes||t.edges))throw new SyntaxError('Data must contain either parameter "dot" or  parameter pair "nodes" and "edges", but not both.');if(this.setOptions(t&&t.options),t&&t.dot){if(t&&t.dot){var i=d.DOTToGraph(t.dot);return void this.setData(i)}}else if(t&&t.gephi){if(t&&t.gephi){var n=u.parseGephi(t.gephi);return void this.setData(n)}}else this._setNodes(t&&t.nodes),this._setEdges(t&&t.edges);if(this._putDataInSector(),!e)if(this.stabilize){var s=this;setTimeout(function(){s._stabilize(),s.start()},0)}else this.start()},n.prototype.setOptions=function(t){if(t){var e;if(void 0!==t.width&&(this.width=t.width),void 0!==t.height&&(this.height=t.height),void 0!==t.stabilize&&(this.stabilize=t.stabilize),void 0!==t.selectable&&(this.selectable=t.selectable),void 0!==t.freezeForStabilization&&(this.constants.freezeForStabilization=t.freezeForStabilization),void 0!==t.configurePhysics&&(this.constants.configurePhysics=t.configurePhysics),void 0!==t.stabilizationIterations&&(this.constants.stabilizationIterations=t.stabilizationIterations),void 0!==t.dragNetwork&&(this.constants.dragNetwork=t.dragNetwork),void 0!==t.dragNodes&&(this.constants.dragNodes=t.dragNodes),void 0!==t.zoomable&&(this.constants.zoomable=t.zoomable),void 0!==t.hover&&(this.constants.hover=t.hover),void 0!==t.hideEdgesOnDrag&&(this.constants.hideEdgesOnDrag=t.hideEdgesOnDrag),void 0!==t.hideNodesOnDrag&&(this.constants.hideNodesOnDrag=t.hideNodesOnDrag),void 0!==t.dragGraph)throw new Error("Option dragGraph is renamed to dragNetwork");if(void 0!==t.labels)for(e in t.labels)t.labels.hasOwnProperty(e)&&(this.constants.labels[e]=t.labels[e]);if(t.onAdd&&(this.triggerFunctions.add=t.onAdd),t.onEdit&&(this.triggerFunctions.edit=t.onEdit),t.onEditEdge&&(this.triggerFunctions.editEdge=t.onEditEdge),t.onConnect&&(this.triggerFunctions.connect=t.onConnect),t.onDelete&&(this.triggerFunctions.del=t.onDelete),t.physics){if(t.physics.barnesHut){this.constants.physics.barnesHut.enabled=!0;for(e in t.physics.barnesHut)t.physics.barnesHut.hasOwnProperty(e)&&(this.constants.physics.barnesHut[e]=t.physics.barnesHut[e])}if(t.physics.repulsion){this.constants.physics.barnesHut.enabled=!1;for(e in t.physics.repulsion)t.physics.repulsion.hasOwnProperty(e)&&(this.constants.physics.repulsion[e]=t.physics.repulsion[e])}if(t.physics.hierarchicalRepulsion){this.constants.hierarchicalLayout.enabled=!0,this.constants.physics.hierarchicalRepulsion.enabled=!0,this.constants.physics.barnesHut.enabled=!1;for(e in t.physics.hierarchicalRepulsion)t.physics.hierarchicalRepulsion.hasOwnProperty(e)&&(this.constants.physics.hierarchicalRepulsion[e]=t.physics.hierarchicalRepulsion[e])}}if(void 0!==t.smoothCurves)if("boolean"==typeof t.smoothCurves)this.constants.smoothCurves.enabled=t.smoothCurves;else{this.constants.smoothCurves.enabled=!0;for(e in t.smoothCurves)t.smoothCurves.hasOwnProperty(e)&&(this.constants.smoothCurves[e]=t.smoothCurves[e])}if(t.hierarchicalLayout){this.constants.hierarchicalLayout.enabled=!0;for(e in t.hierarchicalLayout)t.hierarchicalLayout.hasOwnProperty(e)&&(this.constants.hierarchicalLayout[e]=t.hierarchicalLayout[e])}else void 0!==t.hierarchicalLayout&&(this.constants.hierarchicalLayout.enabled=!1);if(t.clustering){this.constants.clustering.enabled=!0;for(e in t.clustering)t.clustering.hasOwnProperty(e)&&(this.constants.clustering[e]=t.clustering[e])}else void 0!==t.clustering&&(this.constants.clustering.enabled=!1);if(t.navigation){this.constants.navigation.enabled=!0;for(e in t.navigation)t.navigation.hasOwnProperty(e)&&(this.constants.navigation[e]=t.navigation[e])}else void 0!==t.navigation&&(this.constants.navigation.enabled=!1);if(t.keyboard){this.constants.keyboard.enabled=!0;for(e in t.keyboard)t.keyboard.hasOwnProperty(e)&&(this.constants.keyboard[e]=t.keyboard[e])}else void 0!==t.keyboard&&(this.constants.keyboard.enabled=!1);if(t.dataManipulation){this.constants.dataManipulation.enabled=!0;for(e in t.dataManipulation)t.dataManipulation.hasOwnProperty(e)&&(this.constants.dataManipulation[e]=t.dataManipulation[e]);this.editMode=this.constants.dataManipulation.initiallyVisible}else void 0!==t.dataManipulation&&(this.constants.dataManipulation.enabled=!1);if(t.edges){for(e in t.edges)t.edges.hasOwnProperty(e)&&"object"!=typeof t.edges[e]&&(this.constants.edges[e]=t.edges[e]);void 0!==t.edges.color&&(a.isString(t.edges.color)?(this.constants.edges.color={},this.constants.edges.color.color=t.edges.color,this.constants.edges.color.highlight=t.edges.color,this.constants.edges.color.hover=t.edges.color):(void 0!==t.edges.color.color&&(this.constants.edges.color.color=t.edges.color.color),void 0!==t.edges.color.highlight&&(this.constants.edges.color.highlight=t.edges.color.highlight),void 0!==t.edges.color.hover&&(this.constants.edges.color.hover=t.edges.color.hover))),t.edges.fontColor||void 0!==t.edges.color&&(a.isString(t.edges.color)?this.constants.edges.fontColor=t.edges.color:void 0!==t.edges.color.color&&(this.constants.edges.fontColor=t.edges.color.color)),t.edges.dash&&(void 0!==t.edges.dash.length&&(this.constants.edges.dash.length=t.edges.dash.length),void 0!==t.edges.dash.gap&&(this.constants.edges.dash.gap=t.edges.dash.gap),void 0!==t.edges.dash.altLength&&(this.constants.edges.dash.altLength=t.edges.dash.altLength))
}if(t.nodes){for(e in t.nodes)t.nodes.hasOwnProperty(e)&&(this.constants.nodes[e]=t.nodes[e]);t.nodes.color&&(this.constants.nodes.color=a.parseColor(t.nodes.color))}if(t.groups)for(var i in t.groups)if(t.groups.hasOwnProperty(i)){var n=t.groups[i];this.groups.add(i,n)}if(t.tooltip){for(e in t.tooltip)t.tooltip.hasOwnProperty(e)&&(this.constants.tooltip[e]=t.tooltip[e]);t.tooltip.color&&(this.constants.tooltip.color=a.parseColor(t.tooltip.color))}}this._loadPhysicsSystem(),this._loadNavigationControls(),this._loadManipulationSystem(),this._configureSmoothCurves(),this._createKeyBinds(),this.setSize(this.width,this.height),this.moving=!0,this.start()},n.prototype._create=function(){for(;this.containerElement.hasChildNodes();)this.containerElement.removeChild(this.containerElement.firstChild);if(this.frame=document.createElement("div"),this.frame.className="network-frame",this.frame.style.position="relative",this.frame.style.overflow="hidden",this.frame.canvas=document.createElement("canvas"),this.frame.canvas.style.position="relative",this.frame.appendChild(this.frame.canvas),!this.frame.canvas.getContext){var t=document.createElement("DIV");t.style.color="red",t.style.fontWeight="bold",t.style.padding="10px",t.innerHTML="Error: your browser does not support HTML canvas",this.frame.canvas.appendChild(t)}var e=this;this.drag={},this.pinch={},this.hammer=o(this.frame.canvas,{prevent_default:!0}),this.hammer.on("tap",e._onTap.bind(e)),this.hammer.on("doubletap",e._onDoubleTap.bind(e)),this.hammer.on("hold",e._onHold.bind(e)),this.hammer.on("pinch",e._onPinch.bind(e)),this.hammer.on("touch",e._onTouch.bind(e)),this.hammer.on("dragstart",e._onDragStart.bind(e)),this.hammer.on("drag",e._onDrag.bind(e)),this.hammer.on("dragend",e._onDragEnd.bind(e)),this.hammer.on("release",e._onRelease.bind(e)),this.hammer.on("mousewheel",e._onMouseWheel.bind(e)),this.hammer.on("DOMMouseScroll",e._onMouseWheel.bind(e)),this.hammer.on("mousemove",e._onMouseMoveTitle.bind(e)),this.containerElement.appendChild(this.frame)},n.prototype._createKeyBinds=function(){var t=this;this.mousetrap=r,this.mousetrap.reset(),1==this.constants.keyboard.enabled&&(this.mousetrap.bind("up",this._moveUp.bind(t),"keydown"),this.mousetrap.bind("up",this._yStopMoving.bind(t),"keyup"),this.mousetrap.bind("down",this._moveDown.bind(t),"keydown"),this.mousetrap.bind("down",this._yStopMoving.bind(t),"keyup"),this.mousetrap.bind("left",this._moveLeft.bind(t),"keydown"),this.mousetrap.bind("left",this._xStopMoving.bind(t),"keyup"),this.mousetrap.bind("right",this._moveRight.bind(t),"keydown"),this.mousetrap.bind("right",this._xStopMoving.bind(t),"keyup"),this.mousetrap.bind("=",this._zoomIn.bind(t),"keydown"),this.mousetrap.bind("=",this._stopZoom.bind(t),"keyup"),this.mousetrap.bind("-",this._zoomOut.bind(t),"keydown"),this.mousetrap.bind("-",this._stopZoom.bind(t),"keyup"),this.mousetrap.bind("[",this._zoomIn.bind(t),"keydown"),this.mousetrap.bind("[",this._stopZoom.bind(t),"keyup"),this.mousetrap.bind("]",this._zoomOut.bind(t),"keydown"),this.mousetrap.bind("]",this._stopZoom.bind(t),"keyup"),this.mousetrap.bind("pageup",this._zoomIn.bind(t),"keydown"),this.mousetrap.bind("pageup",this._stopZoom.bind(t),"keyup"),this.mousetrap.bind("pagedown",this._zoomOut.bind(t),"keydown"),this.mousetrap.bind("pagedown",this._stopZoom.bind(t),"keyup")),1==this.constants.dataManipulation.enabled&&(this.mousetrap.bind("escape",this._createManipulatorBar.bind(t)),this.mousetrap.bind("del",this._deleteSelected.bind(t)))},n.prototype._getPointer=function(t){return{x:t.pageX-a.getAbsoluteLeft(this.frame.canvas),y:t.pageY-a.getAbsoluteTop(this.frame.canvas)}},n.prototype._onTouch=function(t){this.drag.pointer=this._getPointer(t.gesture.center),this.drag.pinched=!1,this.pinch.scale=this._getScale(),this._handleTouch(this.drag.pointer)},n.prototype._onDragStart=function(){this._handleDragStart()},n.prototype._handleDragStart=function(){var t=this.drag,e=this._getNodeAt(t.pointer);if(t.dragging=!0,t.selection=[],t.translation=this._getTranslation(),t.nodeId=null,null!=e){t.nodeId=e.id,e.isSelected()||this._selectObject(e,!1);for(var i in this.selectionObj.nodes)if(this.selectionObj.nodes.hasOwnProperty(i)){var n=this.selectionObj.nodes[i],s={id:n.id,node:n,x:n.x,y:n.y,xFixed:n.xFixed,yFixed:n.yFixed};n.xFixed=!0,n.yFixed=!0,t.selection.push(s)}}},n.prototype._onDrag=function(t){this._handleOnDrag(t)},n.prototype._handleOnDrag=function(t){if(!this.drag.pinched){var e=this._getPointer(t.gesture.center),i=this,n=this.drag,s=n.selection;if(s&&s.length&&1==this.constants.dragNodes){var o=e.x-n.pointer.x,r=e.y-n.pointer.y;s.forEach(function(t){var e=t.node;t.xFixed||(e.x=i._XconvertDOMtoCanvas(i._XconvertCanvasToDOM(t.x)+o)),t.yFixed||(e.y=i._YconvertDOMtoCanvas(i._YconvertCanvasToDOM(t.y)+r))}),this.moving||(this.moving=!0,this.start())}else if(1==this.constants.dragNetwork){var a=e.x-this.drag.pointer.x,h=e.y-this.drag.pointer.y;this._setTranslation(this.drag.translation.x+a,this.drag.translation.y+h),this._redraw()}}},n.prototype._onDragEnd=function(){this.drag.dragging=!1;var t=this.drag.selection;t&&t.length?(t.forEach(function(t){t.node.xFixed=t.xFixed,t.node.yFixed=t.yFixed}),this.moving=!0,this.start()):this._redraw()},n.prototype._onTap=function(t){var e=this._getPointer(t.gesture.center);this.pointerPosition=e,this._handleTap(e)},n.prototype._onDoubleTap=function(t){var e=this._getPointer(t.gesture.center);this._handleDoubleTap(e)},n.prototype._onHold=function(t){var e=this._getPointer(t.gesture.center);this.pointerPosition=e,this._handleOnHold(e)},n.prototype._onRelease=function(t){var e=this._getPointer(t.gesture.center);this._handleOnRelease(e)},n.prototype._onPinch=function(t){var e=this._getPointer(t.gesture.center);this.drag.pinched=!0,"scale"in this.pinch||(this.pinch.scale=1);var i=this.pinch.scale*t.gesture.scale;this._zoom(i,e)},n.prototype._zoom=function(t,e){if(1==this.constants.zoomable){var i=this._getScale();1e-5>t&&(t=1e-5),t>10&&(t=10);var n=null;void 0!==this.drag&&1==this.drag.dragging&&(n=this.DOMtoCanvas(this.drag.pointer));var s=this._getTranslation(),o=t/i,r=(1-o)*e.x+s.x*o,a=(1-o)*e.y+s.y*o;if(this.areaCenter={x:this._XconvertDOMtoCanvas(e.x),y:this._YconvertDOMtoCanvas(e.y)},this._setScale(t),this._setTranslation(r,a),this.updateClustersDefault(),null!=n){var h=this.canvasToDOM(n);this.drag.pointer.x=h.x,this.drag.pointer.y=h.y}return this._redraw(),t>i?this.emit("zoom",{direction:"+"}):this.emit("zoom",{direction:"-"}),t}},n.prototype._onMouseWheel=function(t){var e=0;if(t.wheelDelta?e=t.wheelDelta/120:t.detail&&(e=-t.detail/3),e){var i=this._getScale(),n=e/10;0>e&&(n/=1-n),i*=1+n;var s=h.fakeGesture(this,t),o=this._getPointer(s.center);this._zoom(i,o)}t.preventDefault()},n.prototype._onMouseMoveTitle=function(t){var e=h.fakeGesture(this,t),i=this._getPointer(e.center);this.popupObj&&this._checkHidePopup(i);var n=this,s=function(){n._checkShowPopup(i)};if(this.popupTimer&&clearInterval(this.popupTimer),this.drag.dragging||(this.popupTimer=setTimeout(s,this.constants.tooltip.delay)),1==this.constants.hover){for(var o in this.hoverObj.edges)this.hoverObj.edges.hasOwnProperty(o)&&(this.hoverObj.edges[o].hover=!1,delete this.hoverObj.edges[o]);var r=this._getNodeAt(i);null==r&&(r=this._getEdgeAt(i)),null!=r&&this._hoverObject(r);for(var a in this.hoverObj.nodes)this.hoverObj.nodes.hasOwnProperty(a)&&(r instanceof g&&r.id!=a||r instanceof m||null==r)&&(this._blurObject(this.hoverObj.nodes[a]),delete this.hoverObj.nodes[a]);this.redraw()}},n.prototype._checkShowPopup=function(t){var e,i={left:this._XconvertDOMtoCanvas(t.x),top:this._YconvertDOMtoCanvas(t.y),right:this._XconvertDOMtoCanvas(t.x),bottom:this._YconvertDOMtoCanvas(t.y)},n=this.popupObj;if(void 0==this.popupObj){var s=this.nodes;for(e in s)if(s.hasOwnProperty(e)){var o=s[e];if(void 0!==o.getTitle()&&o.isOverlappingWith(i)){this.popupObj=o;break}}}if(void 0===this.popupObj){var r=this.edges;for(e in r)if(r.hasOwnProperty(e)){var a=r[e];if(a.connected&&void 0!==a.getTitle()&&a.isOverlappingWith(i)){this.popupObj=a;break}}}if(this.popupObj){if(this.popupObj!=n){var h=this;h.popup||(h.popup=new v(h.frame,h.constants.tooltip)),h.popup.setPosition(t.x-3,t.y-3),h.popup.setText(h.popupObj.getTitle()),h.popup.show()}}else this.popup&&this.popup.hide()},n.prototype._checkHidePopup=function(t){this.popupObj&&this._getNodeAt(t)||(this.popupObj=void 0,this.popup&&this.popup.hide())},n.prototype.setSize=function(t,e){this.frame.style.width=t,this.frame.style.height=e,this.frame.canvas.style.width="100%",this.frame.canvas.style.height="100%",this.frame.canvas.width=this.frame.canvas.clientWidth,this.frame.canvas.height=this.frame.canvas.clientHeight,void 0!==this.manipulationDiv&&(this.manipulationDiv.style.width=this.frame.canvas.clientWidth+"px"),void 0!==this.navigationDivs&&void 0!==this.navigationDivs.wrapper&&(this.navigationDivs.wrapper.style.width=this.frame.canvas.clientWidth+"px",this.navigationDivs.wrapper.style.height=this.frame.canvas.clientHeight+"px"),this.emit("resize",{width:this.frame.canvas.width,height:this.frame.canvas.height})},n.prototype._setNodes=function(t){var e=this.nodesData;if(t instanceof c||t instanceof l)this.nodesData=t;else if(t instanceof Array)this.nodesData=new c,this.nodesData.add(t);else{if(t)throw new TypeError("Array or DataSet expected");this.nodesData=new c}if(e&&a.forEach(this.nodesListeners,function(t,i){e.off(i,t)}),this.nodes={},this.nodesData){var i=this;a.forEach(this.nodesListeners,function(t,e){i.nodesData.on(e,t)});var n=this.nodesData.getIds();this._addNodes(n)}this._updateSelection()},n.prototype._addNodes=function(t){for(var e,i=0,n=t.length;n>i;i++){e=t[i];var s=this.nodesData.get(e),o=new g(s,this.images,this.groups,this.constants);if(this.nodes[e]=o,!(0!=o.xFixed&&0!=o.yFixed||null!==o.x&&null!==o.y)){var r=1*t.length,a=2*Math.PI*Math.random();0==o.xFixed&&(o.x=r*Math.cos(a)),0==o.yFixed&&(o.y=r*Math.sin(a))}this.moving=!0}this._updateNodeIndexList(),1==this.constants.hierarchicalLayout.enabled&&0==this.initializing&&(this._resetLevels(),this._setupHierarchicalLayout()),this._updateCalculationNodes(),this._reconnectEdges(),this._updateValueRange(this.nodes),this.updateLabels()},n.prototype._updateNodes=function(t){for(var e=this.nodes,i=this.nodesData,n=0,s=t.length;s>n;n++){var o=t[n],r=e[o],a=i.get(o);r?r.setProperties(a,this.constants):(r=new g(properties,this.images,this.groups,this.constants),e[o]=r)}this.moving=!0,1==this.constants.hierarchicalLayout.enabled&&0==this.initializing&&(this._resetLevels(),this._setupHierarchicalLayout()),this._updateNodeIndexList(),this._reconnectEdges(),this._updateValueRange(e)},n.prototype._removeNodes=function(t){for(var e=this.nodes,i=0,n=t.length;n>i;i++){var s=t[i];delete e[s]}this._updateNodeIndexList(),1==this.constants.hierarchicalLayout.enabled&&0==this.initializing&&(this._resetLevels(),this._setupHierarchicalLayout()),this._updateCalculationNodes(),this._reconnectEdges(),this._updateSelection(),this._updateValueRange(e)},n.prototype._setEdges=function(t){var e=this.edgesData;if(t instanceof c||t instanceof l)this.edgesData=t;else if(t instanceof Array)this.edgesData=new c,this.edgesData.add(t);else{if(t)throw new TypeError("Array or DataSet expected");this.edgesData=new c}if(e&&a.forEach(this.edgesListeners,function(t,i){e.off(i,t)}),this.edges={},this.edgesData){var i=this;a.forEach(this.edgesListeners,function(t,e){i.edgesData.on(e,t)});var n=this.edgesData.getIds();this._addEdges(n)}this._reconnectEdges()},n.prototype._addEdges=function(t){for(var e=this.edges,i=this.edgesData,n=0,s=t.length;s>n;n++){var o=t[n],r=e[o];r&&r.disconnect();var a=i.get(o,{showInternalIds:!0});e[o]=new m(a,this,this.constants)}this.moving=!0,this._updateValueRange(e),this._createBezierNodes(),1==this.constants.hierarchicalLayout.enabled&&0==this.initializing&&(this._resetLevels(),this._setupHierarchicalLayout()),this._updateCalculationNodes()},n.prototype._updateEdges=function(t){for(var e=this.edges,i=this.edgesData,n=0,s=t.length;s>n;n++){var o=t[n],r=i.get(o),a=e[o];a?(a.disconnect(),a.setProperties(r,this.constants),a.connect()):(a=new m(r,this,this.constants),this.edges[o]=a)}this._createBezierNodes(),1==this.constants.hierarchicalLayout.enabled&&0==this.initializing&&(this._resetLevels(),this._setupHierarchicalLayout()),this.moving=!0,this._updateValueRange(e)},n.prototype._removeEdges=function(t){for(var e=this.edges,i=0,n=t.length;n>i;i++){var s=t[i],o=e[s];o&&(null!=o.via&&delete this.sectors.support.nodes[o.via.id],o.disconnect(),delete e[s])}this.moving=!0,this._updateValueRange(e),1==this.constants.hierarchicalLayout.enabled&&0==this.initializing&&(this._resetLevels(),this._setupHierarchicalLayout()),this._updateCalculationNodes()},n.prototype._reconnectEdges=function(){var t,e=this.nodes,i=this.edges;for(t in e)e.hasOwnProperty(t)&&(e[t].edges=[]);for(t in i)if(i.hasOwnProperty(t)){var n=i[t];n.from=null,n.to=null,n.connect()}},n.prototype._updateValueRange=function(t){var e,i=void 0,n=void 0;for(e in t)if(t.hasOwnProperty(e)){var s=t[e].getValue();void 0!==s&&(i=void 0===i?s:Math.min(s,i),n=void 0===n?s:Math.max(s,n))}if(void 0!==i&&void 0!==n)for(e in t)t.hasOwnProperty(e)&&t[e].setValueRange(i,n)},n.prototype.redraw=function(){this.setSize(this.width,this.height),this._redraw()},n.prototype._redraw=function(){var t=this.frame.canvas.getContext("2d"),e=this.frame.canvas.width,i=this.frame.canvas.height;t.clearRect(0,0,e,i),t.save(),t.translate(this.translation.x,this.translation.y),t.scale(this.scale,this.scale),this.canvasTopLeft={x:this._XconvertDOMtoCanvas(0),y:this._YconvertDOMtoCanvas(0)},this.canvasBottomRight={x:this._XconvertDOMtoCanvas(this.frame.canvas.clientWidth),y:this._YconvertDOMtoCanvas(this.frame.canvas.clientHeight)},this._doInAllSectors("_drawAllSectorNodes",t),(0==this.drag.dragging||void 0===this.drag.dragging||0==this.constants.hideEdgesOnDrag)&&this._doInAllSectors("_drawEdges",t),(0==this.drag.dragging||void 0===this.drag.dragging||0==this.constants.hideNodesOnDrag)&&this._doInAllSectors("_drawNodes",t,!1),1==this.controlNodesActive&&this._doInAllSectors("_drawControlNodes",t),t.restore()},n.prototype._setTranslation=function(t,e){void 0===this.translation&&(this.translation={x:0,y:0}),void 0!==t&&(this.translation.x=t),void 0!==e&&(this.translation.y=e),this.emit("viewChanged")},n.prototype._getTranslation=function(){return{x:this.translation.x,y:this.translation.y}},n.prototype._setScale=function(t){this.scale=t},n.prototype._getScale=function(){return this.scale},n.prototype._XconvertDOMtoCanvas=function(t){return(t-this.translation.x)/this.scale},n.prototype._XconvertCanvasToDOM=function(t){return t*this.scale+this.translation.x},n.prototype._YconvertDOMtoCanvas=function(t){return(t-this.translation.y)/this.scale},n.prototype._YconvertCanvasToDOM=function(t){return t*this.scale+this.translation.y},n.prototype.canvasToDOM=function(t){return{x:this._XconvertCanvasToDOM(t.x),y:this._YconvertCanvasToDOM(t.y)}},n.prototype.DOMtoCanvas=function(t){return{x:this._XconvertDOMtoCanvas(t.x),y:this._YconvertDOMtoCanvas(t.y)}},n.prototype._drawNodes=function(t,e){void 0===e&&(e=!1);var i=this.nodes,n=[];for(var s in i)i.hasOwnProperty(s)&&(i[s].setScaleAndPos(this.scale,this.canvasTopLeft,this.canvasBottomRight),i[s].isSelected()?n.push(s):(i[s].inArea()||e)&&i[s].draw(t));for(var o=0,r=n.length;r>o;o++)(i[n[o]].inArea()||e)&&i[n[o]].draw(t)},n.prototype._drawEdges=function(t){var e=this.edges;for(var i in e)if(e.hasOwnProperty(i)){var n=e[i];n.setScale(this.scale),n.connected&&e[i].draw(t)}},n.prototype._drawControlNodes=function(t){var e=this.edges;for(var i in e)e.hasOwnProperty(i)&&e[i]._drawControlNodes(t)},n.prototype._stabilize=function(){1==this.constants.freezeForStabilization&&this._freezeDefinedNodes();for(var t=0;this.moving&&t<this.constants.stabilizationIterations;)this._physicsTick(),t++;this.zoomExtent(!1,!0),1==this.constants.freezeForStabilization&&this._restoreFrozenNodes(),this.emit("stabilized",{iterations:t})},n.prototype._freezeDefinedNodes=function(){var t=this.nodes;for(var e in t)t.hasOwnProperty(e)&&null!=t[e].x&&null!=t[e].y&&(t[e].fixedData.x=t[e].xFixed,t[e].fixedData.y=t[e].yFixed,t[e].xFixed=!0,t[e].yFixed=!0)},n.prototype._restoreFrozenNodes=function(){var t=this.nodes;for(var e in t)t.hasOwnProperty(e)&&null!=t[e].fixedData.x&&(t[e].xFixed=t[e].fixedData.x,t[e].yFixed=t[e].fixedData.y)},n.prototype._isMoving=function(t){var e=this.nodes;for(var i in e)if(e.hasOwnProperty(i)&&e[i].isMoving(t))return!0;return!1},n.prototype._discreteStepNodes=function(){var t,e=this.physicsDiscreteStepsize,i=this.nodes,n=!1;if(this.constants.maxVelocity>0)for(t in i)i.hasOwnProperty(t)&&(i[t].discreteStepLimited(e,this.constants.maxVelocity),n=!0);else for(t in i)i.hasOwnProperty(t)&&(i[t].discreteStep(e),n=!0);if(1==n){var s=this.constants.minVelocity/Math.max(this.scale,.05);s>.5*this.constants.maxVelocity?this.moving=!0:(this.moving=this._isMoving(s),0==this.moving&&this.emit("stabilized",{iterations:null}),this.moving=this.moving||this.configurePhysics)}},n.prototype._physicsTick=function(){this.freezeSimulation||1==this.moving&&(this._doInAllActiveSectors("_initializeForceCalculation"),this._doInAllActiveSectors("_discreteStepNodes"),1==this.constants.smoothCurves.enabled&&1==this.constants.smoothCurves.dynamic&&this._doInSupportSector("_discreteStepNodes"),this._findCenter(this._getRange()))},n.prototype._animationStep=function(){this.timer=void 0,this._handleNavigation(),this.start();var t=Date.now(),e=1;this._physicsTick();for(var i=Date.now()-t;i<.9*(this.renderTimestep-this.renderTime)&&e<this.maxPhysicsTicksPerRender;)this._physicsTick(),i=Date.now()-t,e++;var n=Date.now();this._redraw(),this.renderTime=Date.now()-n},"undefined"!=typeof window&&(window.requestAnimationFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame),n.prototype.start=function(){if(1==this.moving||0!=this.xIncrement||0!=this.yIncrement||0!=this.zoomIncrement){if(!this.timer){var t=navigator.userAgent.toLowerCase(),e=!1;-1!=t.indexOf("msie 9.0")?e=!0:-1!=t.indexOf("safari")&&t.indexOf("chrome")<=-1&&(e=!0),this.timer=1==e?window.setTimeout(this._animationStep.bind(this),this.renderTimestep):window.requestAnimationFrame(this._animationStep.bind(this),this.renderTimestep)}}else this._redraw()},n.prototype._handleNavigation=function(){if(0!=this.xIncrement||0!=this.yIncrement){var t=this._getTranslation();this._setTranslation(t.x+this.xIncrement,t.y+this.yIncrement)}if(0!=this.zoomIncrement){var e={x:this.frame.canvas.clientWidth/2,y:this.frame.canvas.clientHeight/2};this._zoom(this.scale*(1+this.zoomIncrement),e)}},n.prototype.toggleFreeze=function(){0==this.freezeSimulation?this.freezeSimulation=!0:(this.freezeSimulation=!1,this.start())},n.prototype._configureSmoothCurves=function(t){if(void 0===t&&(t=!0),1==this.constants.smoothCurves.enabled&&1==this.constants.smoothCurves.dynamic){this._createBezierNodes();for(var e in this.sectors.support.nodes)this.sectors.support.nodes.hasOwnProperty(e)&&void 0===this.edges[this.sectors.support.nodes[e]]&&delete this.sectors.support.nodes[e]}else{this.sectors.support.nodes={};for(var i in this.edges)this.edges.hasOwnProperty(i)&&(this.edges[i].smooth=!1,this.edges[i].via=null)}this._updateCalculationNodes(),t||(this.moving=!0,this.start())},n.prototype._createBezierNodes=function(){if(1==this.constants.smoothCurves.enabled&&1==this.constants.smoothCurves.dynamic)for(var t in this.edges)if(this.edges.hasOwnProperty(t)){var e=this.edges[t];if(null==e.via){e.smooth=!0;var i="edgeId:".concat(e.id);this.sectors.support.nodes[i]=new g({id:i,mass:1,shape:"circle",image:"",internalMultiplier:1},{},{},this.constants),e.via=this.sectors.support.nodes[i],e.via.parentEdgeId=e.id,e.positionBezierNode()}}},n.prototype._initializeMixinLoaders=function(){for(var t in y)y.hasOwnProperty(t)&&(n.prototype[t]=y[t])},n.prototype.storePosition=function(){var t=[];for(var e in this.nodes)if(this.nodes.hasOwnProperty(e)){var i=this.nodes[e],n=!this.nodes.xFixed,s=!this.nodes.yFixed;(this.nodesData._data[e].x!=Math.round(i.x)||this.nodesData._data[e].y!=Math.round(i.y))&&t.push({id:e,x:Math.round(i.x),y:Math.round(i.y),allowedToMoveX:n,allowedToMoveY:s})}this.nodesData.update(t)},n.prototype.focusOnNode=function(t,e){if(this.nodes.hasOwnProperty(t)){void 0===e&&(e=this._getScale());var i={x:this.nodes[t].x,y:this.nodes[t].y},n=e;this._setScale(n);var s=this.DOMtoCanvas({x:.5*this.frame.canvas.width,y:.5*this.frame.canvas.height}),o=this._getTranslation(),r={x:s.x-i.x,y:s.y-i.y};this._setTranslation(o.x+n*r.x,o.y+n*r.y),this.redraw()}else console.log("This nodeId cannot be found.")},t.exports=n},function(t,e,i){function n(t,e,i){if(!e)throw"No network provided";this.network=e,this.widthMin=i.edges.widthMin,this.widthMax=i.edges.widthMax,this.id=void 0,this.fromId=void 0,this.toId=void 0,this.style=i.edges.style,this.title=void 0,this.width=i.edges.width,this.widthSelectionMultiplier=i.edges.widthSelectionMultiplier,this.widthSelected=this.width*this.widthSelectionMultiplier,this.hoverWidth=i.edges.hoverWidth,this.value=void 0,this.length=i.physics.springLength,this.customLength=!1,this.selected=!1,this.hover=!1,this.smoothCurves=i.smoothCurves,this.dynamicSmoothCurves=i.dynamicSmoothCurves,this.arrowScaleFactor=i.edges.arrowScaleFactor,this.inheritColor=i.edges.inheritColor,this.from=null,this.to=null,this.via=null,this.originalFromId=[],this.originalToId=[],this.connected=!1,this.dash=s.extend({},i.edges.dash),this.color={color:i.edges.color.color,highlight:i.edges.color.highlight,hover:i.edges.color.hover},this.widthFixed=!1,this.lengthFixed=!1,this.setProperties(t,i),this.controlNodesEnabled=!1,this.controlNodes={from:null,to:null,positions:{}},this.connectedNode=null}var s=i(1),o=i(36);n.prototype.setProperties=function(t,e){if(t)switch(void 0!==t.from&&(this.fromId=t.from),void 0!==t.to&&(this.toId=t.to),void 0!==t.id&&(this.id=t.id),void 0!==t.style&&(this.style=t.style),void 0!==t.label&&(this.label=t.label),this.label&&(this.fontSize=e.edges.fontSize,this.fontFace=e.edges.fontFace,this.fontColor=e.edges.fontColor,this.fontFill=e.edges.fontFill,void 0!==t.fontColor&&(this.fontColor=t.fontColor),void 0!==t.fontSize&&(this.fontSize=t.fontSize),void 0!==t.fontFace&&(this.fontFace=t.fontFace),void 0!==t.fontFill&&(this.fontFill=t.fontFill)),void 0!==t.title&&(this.title=t.title),void 0!==t.width&&(this.width=t.width),void 0!==t.widthSelectionMultiplier&&(this.widthSelectionMultiplier=t.widthSelectionMultiplier),void 0!==t.hoverWidth&&(this.hoverWidth=t.hoverWidth),void 0!==t.value&&(this.value=t.value),void 0!==t.length&&(this.length=t.length,this.customLength=!0),void 0!==t.arrowScaleFactor&&(this.arrowScaleFactor=t.arrowScaleFactor),void 0!==t.inheritColor&&(this.inheritColor=t.inheritColor),t.dash&&(void 0!==t.dash.length&&(this.dash.length=t.dash.length),void 0!==t.dash.gap&&(this.dash.gap=t.dash.gap),void 0!==t.dash.altLength&&(this.dash.altLength=t.dash.altLength)),void 0!==t.color&&(s.isString(t.color)?(this.color.color=t.color,this.color.highlight=t.color):(void 0!==t.color.color&&(this.color.color=t.color.color),void 0!==t.color.highlight&&(this.color.highlight=t.color.highlight),void 0!==t.color.hover&&(this.color.hover=t.color.hover))),this.connect(),this.widthFixed=this.widthFixed||void 0!==t.width,this.lengthFixed=this.lengthFixed||void 0!==t.length,this.widthSelected=this.width*this.widthSelectionMultiplier,this.style){case"line":this.draw=this._drawLine;break;case"arrow":this.draw=this._drawArrow;break;case"arrow-center":this.draw=this._drawArrowCenter;break;case"dash-line":this.draw=this._drawDashLine;break;default:this.draw=this._drawLine}},n.prototype.connect=function(){this.disconnect(),this.from=this.network.nodes[this.fromId]||null,this.to=this.network.nodes[this.toId]||null,this.connected=this.from&&this.to,this.connected?(this.from.attachEdge(this),this.to.attachEdge(this)):(this.from&&this.from.detachEdge(this),this.to&&this.to.detachEdge(this))},n.prototype.disconnect=function(){this.from&&(this.from.detachEdge(this),this.from=null),this.to&&(this.to.detachEdge(this),this.to=null),this.connected=!1},n.prototype.getTitle=function(){return"function"==typeof this.title?this.title():this.title},n.prototype.getValue=function(){return this.value},n.prototype.setValueRange=function(t,e){if(!this.widthFixed&&void 0!==this.value){var i=(this.widthMax-this.widthMin)/(e-t);this.width=(this.value-t)*i+this.widthMin,this.widthSelected=this.width*this.widthSelectionMultiplier}},n.prototype.draw=function(){throw"Method draw not initialized in edge"},n.prototype.isOverlappingWith=function(t){if(this.connected){var e=10,i=this.from.x,n=this.from.y,s=this.to.x,o=this.to.y,r=t.left,a=t.top,h=this._getDistanceToEdge(i,n,s,o,r,a);return e>h}return!1},n.prototype._getColor=function(){var t=this.color;return"to"==this.inheritColor?t={highlight:this.to.color.highlight.border,hover:this.to.color.hover.border,color:this.to.color.border}:("from"==this.inheritColor||1==this.inheritColor)&&(t={highlight:this.from.color.highlight.border,hover:this.from.color.hover.border,color:this.from.color.border}),1==this.selected?t.highlight:1==this.hover?t.hover:t.color},n.prototype._drawLine=function(t){if(t.strokeStyle=this._getColor(),t.lineWidth=this._getLineWidth(),this.from!=this.to){var e,i=this._line(t);if(this.label){if(1==this.smoothCurves.enabled&&null!=i){var n=.5*(.5*(this.from.x+i.x)+.5*(this.to.x+i.x)),s=.5*(.5*(this.from.y+i.y)+.5*(this.to.y+i.y));e={x:n,y:s}}else e=this._pointOnLine(.5);this._label(t,this.label,e.x,e.y)}}else{var o,r,a=this.length/4,h=this.from;h.width||h.resize(t),h.width>h.height?(o=h.x+h.width/2,r=h.y-a):(o=h.x+a,r=h.y-h.height/2),this._circle(t,o,r,a),e=this._pointOnCircle(o,r,a,.5),this._label(t,this.label,e.x,e.y)}},n.prototype._getLineWidth=function(){return 1==this.selected?Math.min(this.widthSelected,this.widthMax)*this.networkScaleInv:1==this.hover?Math.min(this.hoverWidth,this.widthMax)*this.networkScaleInv:this.width*this.networkScaleInv},n.prototype._getViaCoordinates=function(){var t=null,e=null,i=this.smoothCurves.roundness,n=this.smoothCurves.type,s=Math.abs(this.from.x-this.to.x),o=Math.abs(this.from.y-this.to.y);return"discrete"==n||"diagonalCross"==n?Math.abs(this.from.x-this.to.x)<Math.abs(this.from.y-this.to.y)?(this.from.y>this.to.y?this.from.x<this.to.x?(t=this.from.x+i*o,e=this.from.y-i*o):this.from.x>this.to.x&&(t=this.from.x-i*o,e=this.from.y-i*o):this.from.y<this.to.y&&(this.from.x<this.to.x?(t=this.from.x+i*o,e=this.from.y+i*o):this.from.x>this.to.x&&(t=this.from.x-i*o,e=this.from.y+i*o)),"discrete"==n&&(t=i*o>s?this.from.x:t)):Math.abs(this.from.x-this.to.x)>Math.abs(this.from.y-this.to.y)&&(this.from.y>this.to.y?this.from.x<this.to.x?(t=this.from.x+i*s,e=this.from.y-i*s):this.from.x>this.to.x&&(t=this.from.x-i*s,e=this.from.y-i*s):this.from.y<this.to.y&&(this.from.x<this.to.x?(t=this.from.x+i*s,e=this.from.y+i*s):this.from.x>this.to.x&&(t=this.from.x-i*s,e=this.from.y+i*s)),"discrete"==n&&(e=i*s>o?this.from.y:e)):"straightCross"==n?Math.abs(this.from.x-this.to.x)<Math.abs(this.from.y-this.to.y)?(t=this.from.x,e=this.from.y<this.to.y?this.to.y-(1-i)*o:this.to.y+(1-i)*o):Math.abs(this.from.x-this.to.x)>Math.abs(this.from.y-this.to.y)&&(t=this.from.x<this.to.x?this.to.x-(1-i)*s:this.to.x+(1-i)*s,e=this.from.y):"horizontal"==n?(t=this.from.x<this.to.x?this.to.x-(1-i)*s:this.to.x+(1-i)*s,e=this.from.y):"vertical"==n?(t=this.from.x,e=this.from.y<this.to.y?this.to.y-(1-i)*o:this.to.y+(1-i)*o):Math.abs(this.from.x-this.to.x)<Math.abs(this.from.y-this.to.y)?this.from.y>this.to.y?this.from.x<this.to.x?(t=this.from.x+i*o,e=this.from.y-i*o,t=this.to.x<t?this.to.x:t):this.from.x>this.to.x&&(t=this.from.x-i*o,e=this.from.y-i*o,t=this.to.x>t?this.to.x:t):this.from.y<this.to.y&&(this.from.x<this.to.x?(t=this.from.x+i*o,e=this.from.y+i*o,t=this.to.x<t?this.to.x:t):this.from.x>this.to.x&&(t=this.from.x-i*o,e=this.from.y+i*o,t=this.to.x>t?this.to.x:t)):Math.abs(this.from.x-this.to.x)>Math.abs(this.from.y-this.to.y)&&(this.from.y>this.to.y?this.from.x<this.to.x?(t=this.from.x+i*s,e=this.from.y-i*s,e=this.to.y>e?this.to.y:e):this.from.x>this.to.x&&(t=this.from.x-i*s,e=this.from.y-i*s,e=this.to.y>e?this.to.y:e):this.from.y<this.to.y&&(this.from.x<this.to.x?(t=this.from.x+i*s,e=this.from.y+i*s,e=this.to.y<e?this.to.y:e):this.from.x>this.to.x&&(t=this.from.x-i*s,e=this.from.y+i*s,e=this.to.y<e?this.to.y:e))),{x:t,y:e}},n.prototype._line=function(t){if(t.beginPath(),t.moveTo(this.from.x,this.from.y),1==this.smoothCurves.enabled){if(0==this.smoothCurves.dynamic){var e=this._getViaCoordinates();return null==e.x?(t.lineTo(this.to.x,this.to.y),t.stroke(),null):(t.quadraticCurveTo(e.x,e.y,this.to.x,this.to.y),t.stroke(),e)}return t.quadraticCurveTo(this.via.x,this.via.y,this.to.x,this.to.y),t.stroke(),this.via}return t.lineTo(this.to.x,this.to.y),t.stroke(),null},n.prototype._circle=function(t,e,i,n){t.beginPath(),t.arc(e,i,n,0,2*Math.PI,!1),t.stroke()},n.prototype._label=function(t,e,i,n){if(e){t.font=(this.from.selected||this.to.selected?"bold ":"")+this.fontSize+"px "+this.fontFace,t.fillStyle=this.fontFill;var s=t.measureText(e).width,o=this.fontSize,r=i-s/2,a=n-o/2;t.fillRect(r,a,s,o),t.fillStyle=this.fontColor||"black",t.textAlign="left",t.textBaseline="top",t.fillText(e,r,a)}},n.prototype._drawDashLine=function(t){t.strokeStyle=1==this.selected?this.color.highlight:1==this.hover?this.color.hover:this.color.color,t.lineWidth=this._getLineWidth();var e=null;if(void 0!==t.mozDash||void 0!==t.setLineDash){var i=[0];i=void 0!==this.dash.length&&void 0!==this.dash.gap?[this.dash.length,this.dash.gap]:[5,5],"undefined"!=typeof t.setLineDash?(t.setLineDash(i),t.lineDashOffset=0):(t.mozDash=i,t.mozDashOffset=0),e=this._line(t),"undefined"!=typeof t.setLineDash?(t.setLineDash([0]),t.lineDashOffset=0):(t.mozDash=[0],t.mozDashOffset=0)}else t.beginPath(),t.lineCap="round",void 0!==this.dash.altLength?t.dashedLine(this.from.x,this.from.y,this.to.x,this.to.y,[this.dash.length,this.dash.gap,this.dash.altLength,this.dash.gap]):void 0!==this.dash.length&&void 0!==this.dash.gap?t.dashedLine(this.from.x,this.from.y,this.to.x,this.to.y,[this.dash.length,this.dash.gap]):(t.moveTo(this.from.x,this.from.y),t.lineTo(this.to.x,this.to.y)),t.stroke();if(this.label){var n;if(1==this.smoothCurves.enabled&&null!=e){var s=.5*(.5*(this.from.x+e.x)+.5*(this.to.x+e.x)),o=.5*(.5*(this.from.y+e.y)+.5*(this.to.y+e.y));n={x:s,y:o}}else n=this._pointOnLine(.5);this._label(t,this.label,n.x,n.y)}},n.prototype._pointOnLine=function(t){return{x:(1-t)*this.from.x+t*this.to.x,y:(1-t)*this.from.y+t*this.to.y}},n.prototype._pointOnCircle=function(t,e,i,n){var s=2*(n-3/8)*Math.PI;return{x:t+i*Math.cos(s),y:e-i*Math.sin(s)}},n.prototype._drawArrowCenter=function(t){var e;if(1==this.selected?(t.strokeStyle=this.color.highlight,t.fillStyle=this.color.highlight):1==this.hover?(t.strokeStyle=this.color.hover,t.fillStyle=this.color.hover):(t.strokeStyle=this.color.color,t.fillStyle=this.color.color),t.lineWidth=this._getLineWidth(),this.from!=this.to){var i=this._line(t),n=Math.atan2(this.to.y-this.from.y,this.to.x-this.from.x),s=(10+5*this.width)*this.arrowScaleFactor;if(1==this.smoothCurves.enabled&&null!=i){var o=.5*(.5*(this.from.x+i.x)+.5*(this.to.x+i.x)),r=.5*(.5*(this.from.y+i.y)+.5*(this.to.y+i.y));e={x:o,y:r}}else e=this._pointOnLine(.5);t.arrow(e.x,e.y,n,s),t.fill(),t.stroke(),this.label&&this._label(t,this.label,e.x,e.y)}else{var a,h,c=.25*Math.max(100,this.length),l=this.from;l.width||l.resize(t),l.width>l.height?(a=l.x+.5*l.width,h=l.y-c):(a=l.x+c,h=l.y-.5*l.height),this._circle(t,a,h,c);var n=.2*Math.PI,s=(10+5*this.width)*this.arrowScaleFactor;e=this._pointOnCircle(a,h,c,.5),t.arrow(e.x,e.y,n,s),t.fill(),t.stroke(),this.label&&(e=this._pointOnCircle(a,h,c,.5),this._label(t,this.label,e.x,e.y))
}},n.prototype._drawArrow=function(t){1==this.selected?(t.strokeStyle=this.color.highlight,t.fillStyle=this.color.highlight):1==this.hover?(t.strokeStyle=this.color.hover,t.fillStyle=this.color.hover):(t.strokeStyle=this.color.color,t.fillStyle=this.color.color),t.lineWidth=this._getLineWidth();var e,i;if(this.from!=this.to){e=Math.atan2(this.to.y-this.from.y,this.to.x-this.from.x);var n,s=this.to.x-this.from.x,o=this.to.y-this.from.y,r=Math.sqrt(s*s+o*o),a=this.from.distanceToBorder(t,e+Math.PI),h=(r-a)/r,c=h*this.from.x+(1-h)*this.to.x,l=h*this.from.y+(1-h)*this.to.y;1==this.smoothCurves.dynamic&&1==this.smoothCurves.enabled?n=this.via:1==this.smoothCurves.enabled&&(n=this._getViaCoordinates()),1==this.smoothCurves.enabled&&null!=n.x&&(e=Math.atan2(this.to.y-n.y,this.to.x-n.x),s=this.to.x-n.x,o=this.to.y-n.y,r=Math.sqrt(s*s+o*o));var d,u,p=this.to.distanceToBorder(t,e),f=(r-p)/r;if(1==this.smoothCurves.enabled&&null!=n.x?(d=(1-f)*n.x+f*this.to.x,u=(1-f)*n.y+f*this.to.y):(d=(1-f)*this.from.x+f*this.to.x,u=(1-f)*this.from.y+f*this.to.y),t.beginPath(),t.moveTo(c,l),1==this.smoothCurves.enabled&&null!=n.x?t.quadraticCurveTo(n.x,n.y,d,u):t.lineTo(d,u),t.stroke(),i=(10+5*this.width)*this.arrowScaleFactor,t.arrow(d,u,e,i),t.fill(),t.stroke(),this.label){var g;if(1==this.smoothCurves.enabled&&null!=n){var m=.5*(.5*(this.from.x+n.x)+.5*(this.to.x+n.x)),v=.5*(.5*(this.from.y+n.y)+.5*(this.to.y+n.y));g={x:m,y:v}}else g=this._pointOnLine(.5);this._label(t,this.label,g.x,g.y)}}else{var y,b,x,w=this.from,_=.25*Math.max(100,this.length);w.width||w.resize(t),w.width>w.height?(y=w.x+.5*w.width,b=w.y-_,x={x:y,y:w.y,angle:.9*Math.PI}):(y=w.x+_,b=w.y-.5*w.height,x={x:w.x,y:b,angle:.6*Math.PI}),t.beginPath(),t.arc(y,b,_,0,2*Math.PI,!1),t.stroke();var i=(10+5*this.width)*this.arrowScaleFactor;t.arrow(x.x,x.y,x.angle,i),t.fill(),t.stroke(),this.label&&(g=this._pointOnCircle(y,b,_,.5),this._label(t,this.label,g.x,g.y))}},n.prototype._getDistanceToEdge=function(t,e,i,n,s,o){if(this.from!=this.to){if(1==this.smoothCurves.enabled){var r,a;if(1==this.smoothCurves.enabled&&1==this.smoothCurves.dynamic)r=this.via.x,a=this.via.y;else{var h=this._getViaCoordinates();r=h.x,a=h.y}var c,l,d,u,p,f,g,m=1e9;for(l=0;10>l;l++)d=.1*l,u=Math.pow(1-d,2)*t+2*d*(1-d)*r+Math.pow(d,2)*i,p=Math.pow(1-d,2)*e+2*d*(1-d)*a+Math.pow(d,2)*n,l>0&&(c=this._getDistanceToLine(f,g,u,p,s,o),m=m>c?c:m),f=u,g=p;return m}return this._getDistanceToLine(t,e,i,n,s,o)}var u,p,v,y,b=this.length/4,x=this.from;return x.width||x.resize(ctx),x.width>x.height?(u=x.x+x.width/2,p=x.y-b):(u=x.x+b,p=x.y-x.height/2),v=u-s,y=p-o,Math.abs(Math.sqrt(v*v+y*y)-b)},n.prototype._getDistanceToLine=function(t,e,i,n,s,o){var r=i-t,a=n-e,h=r*r+a*a,c=((s-t)*r+(o-e)*a)/h;c>1?c=1:0>c&&(c=0);var l=t+c*r,d=e+c*a,u=l-s,p=d-o;return Math.sqrt(u*u+p*p)},n.prototype.setScale=function(t){this.networkScaleInv=1/t},n.prototype.select=function(){this.selected=!0},n.prototype.unselect=function(){this.selected=!1},n.prototype.positionBezierNode=function(){null!==this.via&&(this.via.x=.5*(this.from.x+this.to.x),this.via.y=.5*(this.from.y+this.to.y))},n.prototype._drawControlNodes=function(t){if(1==this.controlNodesEnabled){if(null===this.controlNodes.from&&null===this.controlNodes.to){var e="edgeIdFrom:".concat(this.id),i="edgeIdTo:".concat(this.id),n={nodes:{group:"",radius:8},physics:{damping:0},clustering:{maxNodeSizeIncrements:0,nodeScaling:{width:0,height:0,radius:0}}};this.controlNodes.from=new o({id:e,shape:"dot",color:{background:"#ff4e00",border:"#3c3c3c",highlight:{background:"#07f968"}}},{},{},n),this.controlNodes.to=new o({id:i,shape:"dot",color:{background:"#ff4e00",border:"#3c3c3c",highlight:{background:"#07f968"}}},{},{},n)}0==this.controlNodes.from.selected&&0==this.controlNodes.to.selected&&(this.controlNodes.positions=this.getControlNodePositions(t),this.controlNodes.from.x=this.controlNodes.positions.from.x,this.controlNodes.from.y=this.controlNodes.positions.from.y,this.controlNodes.to.x=this.controlNodes.positions.to.x,this.controlNodes.to.y=this.controlNodes.positions.to.y),this.controlNodes.from.draw(t),this.controlNodes.to.draw(t)}else this.controlNodes={from:null,to:null,positions:{}}},n.prototype._enableControlNodes=function(){this.controlNodesEnabled=!0},n.prototype._disableControlNodes=function(){this.controlNodesEnabled=!1},n.prototype._getSelectedControlNode=function(t,e){var i=this.controlNodes.positions,n=Math.sqrt(Math.pow(t-i.from.x,2)+Math.pow(e-i.from.y,2)),s=Math.sqrt(Math.pow(t-i.to.x,2)+Math.pow(e-i.to.y,2));return 15>n?(this.connectedNode=this.from,this.from=this.controlNodes.from,this.controlNodes.from):15>s?(this.connectedNode=this.to,this.to=this.controlNodes.to,this.controlNodes.to):null},n.prototype._restoreControlNodes=function(){1==this.controlNodes.from.selected&&(this.from=this.connectedNode,this.connectedNode=null,this.controlNodes.from.unselect()),1==this.controlNodes.to.selected&&(this.to=this.connectedNode,this.connectedNode=null,this.controlNodes.to.unselect())},n.prototype.getControlNodePositions=function(t){var e,i=Math.atan2(this.to.y-this.from.y,this.to.x-this.from.x),n=this.to.x-this.from.x,s=this.to.y-this.from.y,o=Math.sqrt(n*n+s*s),r=this.from.distanceToBorder(t,i+Math.PI),a=(o-r)/o,h=a*this.from.x+(1-a)*this.to.x,c=a*this.from.y+(1-a)*this.to.y;1==this.smoothCurves.dynamic&&1==this.smoothCurves.enabled?e=this.via:1==this.smoothCurves.enabled&&(e=this._getViaCoordinates()),1==this.smoothCurves.enabled&&null!=e.x&&(i=Math.atan2(this.to.y-e.y,this.to.x-e.x),n=this.to.x-e.x,s=this.to.y-e.y,o=Math.sqrt(n*n+s*s));var l,d,u=this.to.distanceToBorder(t,i),p=(o-u)/o;return 1==this.smoothCurves.enabled&&null!=e.x?(l=(1-p)*e.x+p*this.to.x,d=(1-p)*e.y+p*this.to.y):(l=(1-p)*this.from.x+p*this.to.x,d=(1-p)*this.from.y+p*this.to.y),{from:{x:h,y:c},to:{x:l,y:d}}},t.exports=n},function(t,e,i){function n(){this.clear(),this.defaultIndex=0}var s=i(1);n.DEFAULT=[{border:"#2B7CE9",background:"#97C2FC",highlight:{border:"#2B7CE9",background:"#D2E5FF"},hover:{border:"#2B7CE9",background:"#D2E5FF"}},{border:"#FFA500",background:"#FFFF00",highlight:{border:"#FFA500",background:"#FFFFA3"},hover:{border:"#FFA500",background:"#FFFFA3"}},{border:"#FA0A10",background:"#FB7E81",highlight:{border:"#FA0A10",background:"#FFAFB1"},hover:{border:"#FA0A10",background:"#FFAFB1"}},{border:"#41A906",background:"#7BE141",highlight:{border:"#41A906",background:"#A1EC76"},hover:{border:"#41A906",background:"#A1EC76"}},{border:"#E129F0",background:"#EB7DF4",highlight:{border:"#E129F0",background:"#F0B3F5"},hover:{border:"#E129F0",background:"#F0B3F5"}},{border:"#7C29F0",background:"#AD85E4",highlight:{border:"#7C29F0",background:"#D3BDF0"},hover:{border:"#7C29F0",background:"#D3BDF0"}},{border:"#C37F00",background:"#FFA807",highlight:{border:"#C37F00",background:"#FFCA66"},hover:{border:"#C37F00",background:"#FFCA66"}},{border:"#4220FB",background:"#6E6EFD",highlight:{border:"#4220FB",background:"#9B9BFD"},hover:{border:"#4220FB",background:"#9B9BFD"}},{border:"#FD5A77",background:"#FFC0CB",highlight:{border:"#FD5A77",background:"#FFD1D9"},hover:{border:"#FD5A77",background:"#FFD1D9"}},{border:"#4AD63A",background:"#C2FABC",highlight:{border:"#4AD63A",background:"#E6FFE3"},hover:{border:"#4AD63A",background:"#E6FFE3"}}],n.prototype.clear=function(){this.groups={},this.groups.length=function(){var t=0;for(var e in this)this.hasOwnProperty(e)&&t++;return t}},n.prototype.get=function(t){var e=this.groups[t];if(void 0==e){var i=this.defaultIndex%n.DEFAULT.length;this.defaultIndex++,e={},e.color=n.DEFAULT[i],this.groups[t]=e}return e},n.prototype.add=function(t,e){return this.groups[t]=e,e.color&&(e.color=s.parseColor(e.color)),e},t.exports=n},function(t){function e(){this.images={},this.callback=void 0}e.prototype.setOnloadCallback=function(t){this.callback=t},e.prototype.load=function(t){var e=this.images[t];if(void 0==e){var i=this;e=new Image,this.images[t]=e,e.onload=function(){i.callback&&i.callback(this)},e.src=t}return e},t.exports=e},function(t,e,i){function n(t,e,i,n){this.selected=!1,this.hover=!1,this.edges=[],this.dynamicEdges=[],this.reroutedEdges={},this.group=n.nodes.group,this.fontSize=Number(n.nodes.fontSize),this.fontFace=n.nodes.fontFace,this.fontColor=n.nodes.fontColor,this.fontDrawThreshold=3,this.color=n.nodes.color,this.id=void 0,this.shape=n.nodes.shape,this.image=n.nodes.image,this.x=null,this.y=null,this.xFixed=!1,this.yFixed=!1,this.horizontalAlignLeft=!0,this.verticalAlignTop=!0,this.radius=n.nodes.radius,this.baseRadiusValue=n.nodes.radius,this.radiusFixed=!1,this.radiusMin=n.nodes.radiusMin,this.radiusMax=n.nodes.radiusMax,this.level=-1,this.preassignedLevel=!1,this.borderWidth=n.nodes.borderWidth,this.borderWidthSelected=n.nodes.borderWidthSelected,this.imagelist=e,this.grouplist=i,this.fx=0,this.fy=0,this.vx=0,this.vy=0,this.minForce=n.minForce,this.damping=n.physics.damping,this.mass=1,this.fixedData={x:null,y:null},this.setProperties(t,n),this.resetCluster(),this.dynamicEdgesLength=0,this.clusterSession=0,this.clusterSizeWidthFactor=n.clustering.nodeScaling.width,this.clusterSizeHeightFactor=n.clustering.nodeScaling.height,this.clusterSizeRadiusFactor=n.clustering.nodeScaling.radius,this.maxNodeSizeIncrements=n.clustering.maxNodeSizeIncrements,this.growthIndicator=0,this.networkScaleInv=1,this.networkScale=1,this.canvasTopLeft={x:-300,y:-300},this.canvasBottomRight={x:300,y:300},this.parentEdgeId=null}var s=i(1);n.prototype.resetCluster=function(){this.formationScale=void 0,this.clusterSize=1,this.containedNodes={},this.containedEdges={},this.clusterSessions=[]},n.prototype.attachEdge=function(t){-1==this.edges.indexOf(t)&&this.edges.push(t),-1==this.dynamicEdges.indexOf(t)&&this.dynamicEdges.push(t),this.dynamicEdgesLength=this.dynamicEdges.length},n.prototype.detachEdge=function(t){var e=this.edges.indexOf(t);-1!=e&&(this.edges.splice(e,1),this.dynamicEdges.splice(e,1)),this.dynamicEdgesLength=this.dynamicEdges.length},n.prototype.setProperties=function(t,e){if(t){if(this.originalLabel=void 0,void 0!==t.id&&(this.id=t.id),void 0!==t.label&&(this.label=t.label,this.originalLabel=t.label),void 0!==t.title&&(this.title=t.title),void 0!==t.group&&(this.group=t.group),void 0!==t.x&&(this.x=t.x),void 0!==t.y&&(this.y=t.y),void 0!==t.value&&(this.value=t.value),void 0!==t.level&&(this.level=t.level,this.preassignedLevel=!0),void 0!==t.borderWidth&&(this.borderWidth=t.borderWidth),void 0!==t.borderWidthSelected&&(this.borderWidthSelected=t.borderWidthSelected),void 0!==t.mass&&(this.mass=t.mass),void 0!==t.horizontalAlignLeft&&(this.horizontalAlignLeft=t.horizontalAlignLeft),void 0!==t.verticalAlignTop&&(this.verticalAlignTop=t.verticalAlignTop),void 0!==t.triggerFunction&&(this.triggerFunction=t.triggerFunction),void 0===this.id)throw"Node must have an id";if(void 0!==this.group&&""!=this.group){var i=this.grouplist.get(this.group);for(var n in i)i.hasOwnProperty(n)&&(this[n]=i[n])}if(void 0!==t.shape&&(this.shape=t.shape),void 0!==t.image&&(this.image=t.image),void 0!==t.radius&&(this.radius=t.radius,this.baseRadiusValue=this.radius),void 0!==t.color&&(this.color=s.parseColor(t.color)),void 0!==t.fontColor&&(this.fontColor=t.fontColor),void 0!==t.fontSize&&(this.fontSize=t.fontSize),void 0!==t.fontFace&&(this.fontFace=t.fontFace),void 0!==this.image&&""!=this.image){if(!this.imagelist)throw"No imagelist provided";this.imageObj=this.imagelist.load(this.image)}switch(this.xFixed=this.xFixed||void 0!==t.x&&!t.allowedToMoveX,this.yFixed=this.yFixed||void 0!==t.y&&!t.allowedToMoveY,this.radiusFixed=this.radiusFixed||void 0!==t.radius,"image"==this.shape&&(this.radiusMin=e.nodes.widthMin,this.radiusMax=e.nodes.widthMax),this.shape){case"database":this.draw=this._drawDatabase,this.resize=this._resizeDatabase;break;case"box":this.draw=this._drawBox,this.resize=this._resizeBox;break;case"circle":this.draw=this._drawCircle,this.resize=this._resizeCircle;break;case"ellipse":this.draw=this._drawEllipse,this.resize=this._resizeEllipse;break;case"image":this.draw=this._drawImage,this.resize=this._resizeImage;break;case"text":this.draw=this._drawText,this.resize=this._resizeText;break;case"dot":this.draw=this._drawDot,this.resize=this._resizeShape;break;case"square":this.draw=this._drawSquare,this.resize=this._resizeShape;break;case"triangle":this.draw=this._drawTriangle,this.resize=this._resizeShape;break;case"triangleDown":this.draw=this._drawTriangleDown,this.resize=this._resizeShape;break;case"star":this.draw=this._drawStar,this.resize=this._resizeShape;break;default:this.draw=this._drawEllipse,this.resize=this._resizeEllipse}this._reset()}},n.prototype.select=function(){this.selected=!0,this._reset()},n.prototype.unselect=function(){this.selected=!1,this._reset()},n.prototype.clearSizeCache=function(){this._reset()},n.prototype._reset=function(){this.width=void 0,this.height=void 0},n.prototype.getTitle=function(){return"function"==typeof this.title?this.title():this.title},n.prototype.distanceToBorder=function(t,e){var i=1;switch(this.width||this.resize(t),this.shape){case"circle":case"dot":return this.radius+i;case"ellipse":var n=this.width/2,s=this.height/2,o=Math.sin(e)*n,r=Math.cos(e)*s;return n*s/Math.sqrt(o*o+r*r);case"box":case"image":case"text":default:return this.width?Math.min(Math.abs(this.width/2/Math.cos(e)),Math.abs(this.height/2/Math.sin(e)))+i:0}},n.prototype._setForce=function(t,e){this.fx=t,this.fy=e},n.prototype._addForce=function(t,e){this.fx+=t,this.fy+=e},n.prototype.discreteStep=function(t){if(!this.xFixed){var e=this.damping*this.vx,i=(this.fx-e)/this.mass;this.vx+=i*t,this.x+=this.vx*t}if(!this.yFixed){var n=this.damping*this.vy,s=(this.fy-n)/this.mass;this.vy+=s*t,this.y+=this.vy*t}},n.prototype.discreteStepLimited=function(t,e){if(this.xFixed)this.fx=0;else{var i=this.damping*this.vx,n=(this.fx-i)/this.mass;this.vx+=n*t,this.vx=Math.abs(this.vx)>e?this.vx>0?e:-e:this.vx,this.x+=this.vx*t}if(this.yFixed)this.fy=0;else{var s=this.damping*this.vy,o=(this.fy-s)/this.mass;this.vy+=o*t,this.vy=Math.abs(this.vy)>e?this.vy>0?e:-e:this.vy,this.y+=this.vy*t}},n.prototype.isFixed=function(){return this.xFixed&&this.yFixed},n.prototype.isMoving=function(t){return Math.abs(this.vx)>t||Math.abs(this.vy)>t},n.prototype.isSelected=function(){return this.selected},n.prototype.getValue=function(){return this.value},n.prototype.getDistance=function(t,e){var i=this.x-t,n=this.y-e;return Math.sqrt(i*i+n*n)},n.prototype.setValueRange=function(t,e){if(!this.radiusFixed&&void 0!==this.value)if(e==t)this.radius=(this.radiusMin+this.radiusMax)/2;else{var i=(this.radiusMax-this.radiusMin)/(e-t);this.radius=(this.value-t)*i+this.radiusMin}this.baseRadiusValue=this.radius},n.prototype.draw=function(){throw"Draw method not initialized for node"},n.prototype.resize=function(){throw"Resize method not initialized for node"},n.prototype.isOverlappingWith=function(t){return this.left<t.right&&this.left+this.width>t.left&&this.top<t.bottom&&this.top+this.height>t.top},n.prototype._resizeImage=function(){if(!this.width||!this.height){var t,e;if(this.value){this.radius=this.baseRadiusValue;var i=this.imageObj.height/this.imageObj.width;void 0!==i?(t=this.radius||this.imageObj.width,e=this.radius*i||this.imageObj.height):(t=0,e=0)}else t=this.imageObj.width,e=this.imageObj.height;this.width=t,this.height=e,this.growthIndicator=0,this.width>0&&this.height>0&&(this.width+=Math.min(this.clusterSize-1,this.maxNodeSizeIncrements)*this.clusterSizeWidthFactor,this.height+=Math.min(this.clusterSize-1,this.maxNodeSizeIncrements)*this.clusterSizeHeightFactor,this.radius+=Math.min(this.clusterSize-1,this.maxNodeSizeIncrements)*this.clusterSizeRadiusFactor,this.growthIndicator=this.width-t)}},n.prototype._drawImage=function(t){this._resizeImage(t),this.left=this.x-this.width/2,this.top=this.y-this.height/2;var e;if(0!=this.imageObj.width){if(this.clusterSize>1){var i=this.clusterSize>1?10:0;i*=this.networkScaleInv,i=Math.min(.2*this.width,i),t.globalAlpha=.5,t.drawImage(this.imageObj,this.left-i,this.top-i,this.width+2*i,this.height+2*i)}t.globalAlpha=1,t.drawImage(this.imageObj,this.left,this.top,this.width,this.height),e=this.y+this.height/2}else e=this.y;this._label(t,this.label,this.x,e,void 0,"top")},n.prototype._resizeBox=function(t){if(!this.width){var e=5,i=this.getTextSize(t);this.width=i.width+2*e,this.height=i.height+2*e,this.width+=.5*Math.min(this.clusterSize-1,this.maxNodeSizeIncrements)*this.clusterSizeWidthFactor,this.height+=.5*Math.min(this.clusterSize-1,this.maxNodeSizeIncrements)*this.clusterSizeHeightFactor,this.growthIndicator=this.width-(i.width+2*e)}},n.prototype._drawBox=function(t){this._resizeBox(t),this.left=this.x-this.width/2,this.top=this.y-this.height/2;var e=2.5,i=this.borderWidth,n=this.borderWidthSelected||2*this.borderWidth;t.strokeStyle=this.selected?this.color.highlight.border:this.hover?this.color.hover.border:this.color.border,this.clusterSize>1&&(t.lineWidth=(this.selected?n:i)+(this.clusterSize>1?e:0),t.lineWidth*=this.networkScaleInv,t.lineWidth=Math.min(this.width,t.lineWidth),t.roundRect(this.left-2*t.lineWidth,this.top-2*t.lineWidth,this.width+4*t.lineWidth,this.height+4*t.lineWidth,this.radius),t.stroke()),t.lineWidth=(this.selected?n:i)+(this.clusterSize>1?e:0),t.lineWidth*=this.networkScaleInv,t.lineWidth=Math.min(this.width,t.lineWidth),t.fillStyle=this.selected?this.color.highlight.background:this.color.background,t.roundRect(this.left,this.top,this.width,this.height,this.radius),t.fill(),t.stroke(),this._label(t,this.label,this.x,this.y)},n.prototype._resizeDatabase=function(t){if(!this.width){var e=5,i=this.getTextSize(t),n=i.width+2*e;this.width=n,this.height=n,this.width+=Math.min(this.clusterSize-1,this.maxNodeSizeIncrements)*this.clusterSizeWidthFactor,this.height+=Math.min(this.clusterSize-1,this.maxNodeSizeIncrements)*this.clusterSizeHeightFactor,this.radius+=Math.min(this.clusterSize-1,this.maxNodeSizeIncrements)*this.clusterSizeRadiusFactor,this.growthIndicator=this.width-n}},n.prototype._drawDatabase=function(t){this._resizeDatabase(t),this.left=this.x-this.width/2,this.top=this.y-this.height/2;var e=2.5,i=this.borderWidth,n=this.borderWidthSelected||2*this.borderWidth;t.strokeStyle=this.selected?this.color.highlight.border:this.hover?this.color.hover.border:this.color.border,this.clusterSize>1&&(t.lineWidth=(this.selected?n:i)+(this.clusterSize>1?e:0),t.lineWidth*=this.networkScaleInv,t.lineWidth=Math.min(this.width,t.lineWidth),t.database(this.x-this.width/2-2*t.lineWidth,this.y-.5*this.height-2*t.lineWidth,this.width+4*t.lineWidth,this.height+4*t.lineWidth),t.stroke()),t.lineWidth=(this.selected?n:i)+(this.clusterSize>1?e:0),t.lineWidth*=this.networkScaleInv,t.lineWidth=Math.min(this.width,t.lineWidth),t.fillStyle=this.selected?this.color.highlight.background:this.hover?this.color.hover.background:this.color.background,t.database(this.x-this.width/2,this.y-.5*this.height,this.width,this.height),t.fill(),t.stroke(),this._label(t,this.label,this.x,this.y)},n.prototype._resizeCircle=function(t){if(!this.width){var e=5,i=this.getTextSize(t),n=Math.max(i.width,i.height)+2*e;this.radius=n/2,this.width=n,this.height=n,this.radius+=.5*Math.min(this.clusterSize-1,this.maxNodeSizeIncrements)*this.clusterSizeRadiusFactor,this.growthIndicator=this.radius-.5*n}},n.prototype._drawCircle=function(t){this._resizeCircle(t),this.left=this.x-this.width/2,this.top=this.y-this.height/2;var e=2.5,i=this.borderWidth,n=this.borderWidthSelected||2*this.borderWidth;t.strokeStyle=this.selected?this.color.highlight.border:this.hover?this.color.hover.border:this.color.border,this.clusterSize>1&&(t.lineWidth=(this.selected?n:i)+(this.clusterSize>1?e:0),t.lineWidth*=this.networkScaleInv,t.lineWidth=Math.min(this.width,t.lineWidth),t.circle(this.x,this.y,this.radius+2*t.lineWidth),t.stroke()),t.lineWidth=(this.selected?n:i)+(this.clusterSize>1?e:0),t.lineWidth*=this.networkScaleInv,t.lineWidth=Math.min(this.width,t.lineWidth),t.fillStyle=this.selected?this.color.highlight.background:this.hover?this.color.hover.background:this.color.background,t.circle(this.x,this.y,this.radius),t.fill(),t.stroke(),this._label(t,this.label,this.x,this.y)},n.prototype._resizeEllipse=function(t){if(!this.width){var e=this.getTextSize(t);this.width=1.5*e.width,this.height=2*e.height,this.width<this.height&&(this.width=this.height);var i=this.width;this.width+=Math.min(this.clusterSize-1,this.maxNodeSizeIncrements)*this.clusterSizeWidthFactor,this.height+=Math.min(this.clusterSize-1,this.maxNodeSizeIncrements)*this.clusterSizeHeightFactor,this.radius+=Math.min(this.clusterSize-1,this.maxNodeSizeIncrements)*this.clusterSizeRadiusFactor,this.growthIndicator=this.width-i}},n.prototype._drawEllipse=function(t){this._resizeEllipse(t),this.left=this.x-this.width/2,this.top=this.y-this.height/2;var e=2.5,i=this.borderWidth,n=this.borderWidthSelected||2*this.borderWidth;t.strokeStyle=this.selected?this.color.highlight.border:this.hover?this.color.hover.border:this.color.border,this.clusterSize>1&&(t.lineWidth=(this.selected?n:i)+(this.clusterSize>1?e:0),t.lineWidth*=this.networkScaleInv,t.lineWidth=Math.min(this.width,t.lineWidth),t.ellipse(this.left-2*t.lineWidth,this.top-2*t.lineWidth,this.width+4*t.lineWidth,this.height+4*t.lineWidth),t.stroke()),t.lineWidth=(this.selected?n:i)+(this.clusterSize>1?e:0),t.lineWidth*=this.networkScaleInv,t.lineWidth=Math.min(this.width,t.lineWidth),t.fillStyle=this.selected?this.color.highlight.background:this.hover?this.color.hover.background:this.color.background,t.ellipse(this.left,this.top,this.width,this.height),t.fill(),t.stroke(),this._label(t,this.label,this.x,this.y)},n.prototype._drawDot=function(t){this._drawShape(t,"circle")},n.prototype._drawTriangle=function(t){this._drawShape(t,"triangle")},n.prototype._drawTriangleDown=function(t){this._drawShape(t,"triangleDown")},n.prototype._drawSquare=function(t){this._drawShape(t,"square")},n.prototype._drawStar=function(t){this._drawShape(t,"star")},n.prototype._resizeShape=function(){if(!this.width){this.radius=this.baseRadiusValue;var t=2*this.radius;this.width=t,this.height=t,this.width+=Math.min(this.clusterSize-1,this.maxNodeSizeIncrements)*this.clusterSizeWidthFactor,this.height+=Math.min(this.clusterSize-1,this.maxNodeSizeIncrements)*this.clusterSizeHeightFactor,this.radius+=.5*Math.min(this.clusterSize-1,this.maxNodeSizeIncrements)*this.clusterSizeRadiusFactor,this.growthIndicator=this.width-t}},n.prototype._drawShape=function(t,e){this._resizeShape(t),this.left=this.x-this.width/2,this.top=this.y-this.height/2;var i=2.5,n=this.borderWidth,s=this.borderWidthSelected||2*this.borderWidth,o=2;switch(e){case"dot":o=2;break;case"square":o=2;break;case"triangle":o=3;break;case"triangleDown":o=3;break;case"star":o=4}t.strokeStyle=this.selected?this.color.highlight.border:this.hover?this.color.hover.border:this.color.border,this.clusterSize>1&&(t.lineWidth=(this.selected?s:n)+(this.clusterSize>1?i:0),t.lineWidth*=this.networkScaleInv,t.lineWidth=Math.min(this.width,t.lineWidth),t[e](this.x,this.y,this.radius+o*t.lineWidth),t.stroke()),t.lineWidth=(this.selected?s:n)+(this.clusterSize>1?i:0),t.lineWidth*=this.networkScaleInv,t.lineWidth=Math.min(this.width,t.lineWidth),t.fillStyle=this.selected?this.color.highlight.background:this.hover?this.color.hover.background:this.color.background,t[e](this.x,this.y,this.radius),t.fill(),t.stroke(),this.label&&this._label(t,this.label,this.x,this.y+this.height/2,void 0,"top",!0)},n.prototype._resizeText=function(t){if(!this.width){var e=5,i=this.getTextSize(t);this.width=i.width+2*e,this.height=i.height+2*e,this.width+=Math.min(this.clusterSize-1,this.maxNodeSizeIncrements)*this.clusterSizeWidthFactor,this.height+=Math.min(this.clusterSize-1,this.maxNodeSizeIncrements)*this.clusterSizeHeightFactor,this.radius+=Math.min(this.clusterSize-1,this.maxNodeSizeIncrements)*this.clusterSizeRadiusFactor,this.growthIndicator=this.width-(i.width+2*e)}},n.prototype._drawText=function(t){this._resizeText(t),this.left=this.x-this.width/2,this.top=this.y-this.height/2,this._label(t,this.label,this.x,this.y)},n.prototype._label=function(t,e,i,n,s,o,r){if(e&&this.fontSize*this.networkScale>this.fontDrawThreshold){t.font=(this.selected?"bold ":"")+this.fontSize+"px "+this.fontFace,t.fillStyle=this.fontColor||"black",t.textAlign=s||"center",t.textBaseline=o||"middle";var a=e.split("\n"),h=a.length,c=this.fontSize+4,l=n+(1-h)/2*c;1==r&&(l=n+(1-h)/(2*c));for(var d=0;h>d;d++)t.fillText(a[d],i,l),l+=c}},n.prototype.getTextSize=function(t){if(void 0!==this.label){t.font=(this.selected?"bold ":"")+this.fontSize+"px "+this.fontFace;for(var e=this.label.split("\n"),i=(this.fontSize+4)*e.length,n=0,s=0,o=e.length;o>s;s++)n=Math.max(n,t.measureText(e[s]).width);return{width:n,height:i}}return{width:0,height:0}},n.prototype.inArea=function(){return void 0!==this.width?this.x+this.width*this.networkScaleInv>=this.canvasTopLeft.x&&this.x-this.width*this.networkScaleInv<this.canvasBottomRight.x&&this.y+this.height*this.networkScaleInv>=this.canvasTopLeft.y&&this.y-this.height*this.networkScaleInv<this.canvasBottomRight.y:!0},n.prototype.inView=function(){return this.x>=this.canvasTopLeft.x&&this.x<this.canvasBottomRight.x&&this.y>=this.canvasTopLeft.y&&this.y<this.canvasBottomRight.y},n.prototype.setScaleAndPos=function(t,e,i){this.networkScaleInv=1/t,this.networkScale=t,this.canvasTopLeft=e,this.canvasBottomRight=i},n.prototype.setScale=function(t){this.networkScaleInv=1/t,this.networkScale=t},n.prototype.clearVelocity=function(){this.vx=0,this.vy=0},n.prototype.updateVelocity=function(t){var e=this.vx*this.vx*t;this.vx=Math.sqrt(e/this.mass),e=this.vy*this.vy*t,this.vy=Math.sqrt(e/this.mass)},t.exports=n},function(t){function e(t,e,i,n,s){this.container=t?t:document.body,void 0===s&&("object"==typeof e?(s=e,e=void 0):"object"==typeof n?(s=n,n=void 0):s={fontColor:"black",fontSize:14,fontFace:"verdana",color:{border:"#666",background:"#FFFFC6"}}),this.x=0,this.y=0,this.padding=5,void 0!==e&&void 0!==i&&this.setPosition(e,i),void 0!==n&&this.setText(n),this.frame=document.createElement("div");var o=this.frame.style;o.position="absolute",o.visibility="hidden",o.border="1px solid "+s.color.border,o.color=s.fontColor,o.fontSize=s.fontSize+"px",o.fontFamily=s.fontFace,o.padding=this.padding+"px",o.backgroundColor=s.color.background,o.borderRadius="3px",o.MozBorderRadius="3px",o.WebkitBorderRadius="3px",o.boxShadow="3px 3px 10px rgba(128, 128, 128, 0.5)",o.whiteSpace="nowrap",this.container.appendChild(this.frame)}e.prototype.setPosition=function(t,e){this.x=parseInt(t),this.y=parseInt(e)},e.prototype.setText=function(t){this.frame.innerHTML=t},e.prototype.show=function(t){if(void 0===t&&(t=!0),t){var e=this.frame.clientHeight,i=this.frame.clientWidth,n=this.frame.parentNode.clientHeight,s=this.frame.parentNode.clientWidth,o=this.y-e;o+e+this.padding>n&&(o=n-e-this.padding),o<this.padding&&(o=this.padding);var r=this.x;r+i+this.padding>s&&(r=s-i-this.padding),r<this.padding&&(r=this.padding),this.frame.style.left=r+"px",this.frame.style.top=o+"px",this.frame.style.visibility="visible"}else this.hide()},e.prototype.hide=function(){this.frame.style.visibility="hidden"},t.exports=e},function(t,e){function i(t){return M=t,p()}function n(){E=0,k=M.charAt(0)}function s(){E++,k=M.charAt(E)}function o(){return M.charAt(E+1)}function r(t){return A.test(t)}function a(t,e){if(t||(t={}),e)for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t}function h(t,e,i){for(var n=e.split("."),s=t;n.length;){var o=n.shift();n.length?(s[o]||(s[o]={}),s=s[o]):s[o]=i}}function c(t,e){for(var i,n,s=null,o=[t],r=t;r.parent;)o.push(r.parent),r=r.parent;if(r.nodes)for(i=0,n=r.nodes.length;n>i;i++)if(e.id===r.nodes[i].id){s=r.nodes[i];break}for(s||(s={id:e.id},t.node&&(s.attr=a(s.attr,t.node))),i=o.length-1;i>=0;i--){var h=o[i];h.nodes||(h.nodes=[]),-1==h.nodes.indexOf(s)&&h.nodes.push(s)}e.attr&&(s.attr=a(s.attr,e.attr))}function l(t,e){if(t.edges||(t.edges=[]),t.edges.push(e),t.edge){var i=a({},t.edge);e.attr=a(i,e.attr)}}function d(t,e,i,n,s){var o={from:e,to:i,type:n};return t.edge&&(o.attr=a({},t.edge)),o.attr=a(o.attr||{},s),o}function u(){for(N=T.NULL,L="";" "==k||"	"==k||"\n"==k||"\r"==k;)s();do{var t=!1;if("#"==k){for(var e=E-1;" "==M.charAt(e)||"	"==M.charAt(e);)e--;if("\n"==M.charAt(e)||""==M.charAt(e)){for(;""!=k&&"\n"!=k;)s();t=!0}}if("/"==k&&"/"==o()){for(;""!=k&&"\n"!=k;)s();t=!0}if("/"==k&&"*"==o()){for(;""!=k;){if("*"==k&&"/"==o()){s(),s();break}s()}t=!0}for(;" "==k||"	"==k||"\n"==k||"\r"==k;)s()}while(t);if(""==k)return void(N=T.DELIMITER);var i=k+o();if(D[i])return N=T.DELIMITER,L=i,s(),void s();if(D[k])return N=T.DELIMITER,L=k,void s();if(r(k)||"-"==k){for(L+=k,s();r(k);)L+=k,s();return"false"==L?L=!1:"true"==L?L=!0:isNaN(Number(L))||(L=Number(L)),void(N=T.IDENTIFIER)}if('"'==k){for(s();""!=k&&('"'!=k||'"'==k&&'"'==o());)L+=k,'"'==k&&s(),s();if('"'!=k)throw w('End of string " expected');return s(),void(N=T.IDENTIFIER)}for(N=T.UNKNOWN;""!=k;)L+=k,s();throw new SyntaxError('Syntax error in part "'+_(L,30)+'"')}function p(){var t={};if(n(),u(),"strict"==L&&(t.strict=!0,u()),("graph"==L||"digraph"==L)&&(t.type=L,u()),N==T.IDENTIFIER&&(t.id=L,u()),"{"!=L)throw w("Angle bracket { expected");if(u(),f(t),"}"!=L)throw w("Angle bracket } expected");if(u(),""!==L)throw w("End of file expected");return u(),delete t.node,delete t.edge,delete t.graph,t}function f(t){for(;""!==L&&"}"!=L;)g(t),";"==L&&u()}function g(t){var e=m(t);if(e)return void b(t,e);var i=v(t);if(!i){if(N!=T.IDENTIFIER)throw w("Identifier expected");var n=L;if(u(),"="==L){if(u(),N!=T.IDENTIFIER)throw w("Identifier expected");t[n]=L,u()}else y(t,n)}}function m(t){var e=null;if("subgraph"==L&&(e={},e.type="subgraph",u(),N==T.IDENTIFIER&&(e.id=L,u())),"{"==L){if(u(),e||(e={}),e.parent=t,e.node=t.node,e.edge=t.edge,e.graph=t.graph,f(e),"}"!=L)throw w("Angle bracket } expected");u(),delete e.node,delete e.edge,delete e.graph,delete e.parent,t.subgraphs||(t.subgraphs=[]),t.subgraphs.push(e)}return e}function v(t){return"node"==L?(u(),t.node=x(),"node"):"edge"==L?(u(),t.edge=x(),"edge"):"graph"==L?(u(),t.graph=x(),"graph"):null}function y(t,e){var i={id:e},n=x();n&&(i.attr=n),c(t,i),b(t,e)}function b(t,e){for(;"->"==L||"--"==L;){var i,n=L;u();var s=m(t);if(s)i=s;else{if(N!=T.IDENTIFIER)throw w("Identifier or subgraph expected");i=L,c(t,{id:i}),u()}var o=x(),r=d(t,e,i,n,o);l(t,r),e=i}}function x(){for(var t=null;"["==L;){for(u(),t={};""!==L&&"]"!=L;){if(N!=T.IDENTIFIER)throw w("Attribute name expected");var e=L;if(u(),"="!=L)throw w("Equal sign = expected");if(u(),N!=T.IDENTIFIER)throw w("Attribute value expected");var i=L;h(t,e,i),u(),","==L&&u()}if("]"!=L)throw w("Bracket ] expected");u()}return t}function w(t){return new SyntaxError(t+', got "'+_(L,30)+'" (char '+E+")")}function _(t,e){return t.length<=e?t:t.substr(0,27)+"..."}function S(t,e,i){t instanceof Array?t.forEach(function(t){e instanceof Array?e.forEach(function(e){i(t,e)}):i(t,e)}):e instanceof Array?e.forEach(function(e){i(t,e)}):i(t,e)}function C(t){function e(t){var e={from:t.from,to:t.to};return a(e,t.attr),e.style="->"==t.type?"arrow":"line",e}var n=i(t),s={nodes:[],edges:[],options:{}};return n.nodes&&n.nodes.forEach(function(t){var e={id:t.id,label:String(t.label||t.id)};a(e,t.attr),e.image&&(e.shape="image"),s.nodes.push(e)}),n.edges&&n.edges.forEach(function(t){var i,n;i=t.from instanceof Object?t.from.nodes:{id:t.from},n=t.to instanceof Object?t.to.nodes:{id:t.to},t.from instanceof Object&&t.from.edges&&t.from.edges.forEach(function(t){var i=e(t);s.edges.push(i)}),S(i,n,function(i,n){var o=d(s,i.id,n.id,t.type,t.attr),r=e(o);s.edges.push(r)}),t.to instanceof Object&&t.to.edges&&t.to.edges.forEach(function(t){var i=e(t);s.edges.push(i)})}),n.attr&&(s.options=n.attr),s}var T={NULL:0,DELIMITER:1,IDENTIFIER:2,UNKNOWN:3},D={"{":!0,"}":!0,"[":!0,"]":!0,";":!0,"=":!0,",":!0,"->":!0,"--":!0},M="",E=0,k="",L="",N=T.NULL,A=/[a-zA-Z_0-9.:#]/;e.parseDOT=i,e.DOTToGraph=C},function(t,e){function i(t,e){var i=[],n=[];
this.options={edges:{inheritColor:!0},nodes:{allowedToMove:!1,parseColor:!1}},void 0!==e&&(this.options.nodes.allowedToMove=e.allowedToMove|!1,this.options.nodes.parseColor=e.parseColor|!1,this.options.edges.inheritColor=e.inheritColor|!0);for(var s=t.edges,o=t.nodes,r=0;r<s.length;r++){var a={},h=s[r];a.id=h.id,a.from=h.source,a.to=h.target,a.attributes=h.attributes,a.color=h.color,a.inheritColor=void 0!==a.color?!1:this.options.inheritColor,i.push(a)}for(var r=0;r<o.length;r++){var c={},l=o[r];c.id=l.id,c.attributes=l.attributes,c.x=l.x,c.y=l.y,c.label=l.label,c.color=1==this.options.nodes.parseColor?l.color:void 0!==l.color?{background:l.color,border:l.color}:void 0,c.radius=l.size,c.allowedToMoveX=this.options.nodes.allowedToMove,c.allowedToMoveY=this.options.nodes.allowedToMove,n.push(c)}return{nodes:n,edges:i}}e.parseGephi=i},function(t,e,i){t.exports="undefined"!=typeof window&&window.moment||i(46)},function(t,e,i){t.exports="undefined"!=typeof window?window.Hammer||i(48):function(){throw Error("hammer.js is only available in a browser, not in node.js.")}},function(t,e,i){var n=i(41);e.fakeGesture=function(t,e){var i=null,s=n.event.getTouchList(e,i),o=n.event.collectEventData(this,i,s,e);return isNaN(o.center.pageX)&&(o.center.pageX=e.pageX),isNaN(o.center.pageY)&&(o.center.pageY=e.pageY),o}},function(){"undefined"!=typeof CanvasRenderingContext2D&&(CanvasRenderingContext2D.prototype.circle=function(t,e,i){this.beginPath(),this.arc(t,e,i,0,2*Math.PI,!1)},CanvasRenderingContext2D.prototype.square=function(t,e,i){this.beginPath(),this.rect(t-i,e-i,2*i,2*i)},CanvasRenderingContext2D.prototype.triangle=function(t,e,i){this.beginPath();var n=2*i,s=n/2,o=Math.sqrt(3)/6*n,r=Math.sqrt(n*n-s*s);this.moveTo(t,e-(r-o)),this.lineTo(t+s,e+o),this.lineTo(t-s,e+o),this.lineTo(t,e-(r-o)),this.closePath()},CanvasRenderingContext2D.prototype.triangleDown=function(t,e,i){this.beginPath();var n=2*i,s=n/2,o=Math.sqrt(3)/6*n,r=Math.sqrt(n*n-s*s);this.moveTo(t,e+(r-o)),this.lineTo(t+s,e-o),this.lineTo(t-s,e-o),this.lineTo(t,e+(r-o)),this.closePath()},CanvasRenderingContext2D.prototype.star=function(t,e,i){this.beginPath();for(var n=0;10>n;n++){var s=n%2===0?1.3*i:.5*i;this.lineTo(t+s*Math.sin(2*n*Math.PI/10),e-s*Math.cos(2*n*Math.PI/10))}this.closePath()},CanvasRenderingContext2D.prototype.roundRect=function(t,e,i,n,s){var o=Math.PI/180;0>i-2*s&&(s=i/2),0>n-2*s&&(s=n/2),this.beginPath(),this.moveTo(t+s,e),this.lineTo(t+i-s,e),this.arc(t+i-s,e+s,s,270*o,360*o,!1),this.lineTo(t+i,e+n-s),this.arc(t+i-s,e+n-s,s,0,90*o,!1),this.lineTo(t+s,e+n),this.arc(t+s,e+n-s,s,90*o,180*o,!1),this.lineTo(t,e+s),this.arc(t+s,e+s,s,180*o,270*o,!1)},CanvasRenderingContext2D.prototype.ellipse=function(t,e,i,n){var s=.5522848,o=i/2*s,r=n/2*s,a=t+i,h=e+n,c=t+i/2,l=e+n/2;this.beginPath(),this.moveTo(t,l),this.bezierCurveTo(t,l-r,c-o,e,c,e),this.bezierCurveTo(c+o,e,a,l-r,a,l),this.bezierCurveTo(a,l+r,c+o,h,c,h),this.bezierCurveTo(c-o,h,t,l+r,t,l)},CanvasRenderingContext2D.prototype.database=function(t,e,i,n){var s=1/3,o=i,r=n*s,a=.5522848,h=o/2*a,c=r/2*a,l=t+o,d=e+r,u=t+o/2,p=e+r/2,f=e+(n-r/2),g=e+n;this.beginPath(),this.moveTo(l,p),this.bezierCurveTo(l,p+c,u+h,d,u,d),this.bezierCurveTo(u-h,d,t,p+c,t,p),this.bezierCurveTo(t,p-c,u-h,e,u,e),this.bezierCurveTo(u+h,e,l,p-c,l,p),this.lineTo(l,f),this.bezierCurveTo(l,f+c,u+h,g,u,g),this.bezierCurveTo(u-h,g,t,f+c,t,f),this.lineTo(t,p)},CanvasRenderingContext2D.prototype.arrow=function(t,e,i,n){var s=t-n*Math.cos(i),o=e-n*Math.sin(i),r=t-.9*n*Math.cos(i),a=e-.9*n*Math.sin(i),h=s+n/3*Math.cos(i+.5*Math.PI),c=o+n/3*Math.sin(i+.5*Math.PI),l=s+n/3*Math.cos(i-.5*Math.PI),d=o+n/3*Math.sin(i-.5*Math.PI);this.beginPath(),this.moveTo(t,e),this.lineTo(h,c),this.lineTo(r,a),this.lineTo(l,d),this.closePath()},CanvasRenderingContext2D.prototype.dashedLine=function(t,e,i,n,s){s||(s=[10,5]),0==u&&(u=.001);var o=s.length;this.moveTo(t,e);for(var r=i-t,a=n-e,h=a/r,c=Math.sqrt(r*r+a*a),l=0,d=!0;c>=.1;){var u=s[l++%o];u>c&&(u=c);var p=Math.sqrt(u*u/(1+h*h));0>r&&(p=-p),t+=p,e+=h*p,this[d?"lineTo":"moveTo"](t,e),c-=u,d=!d}})},function(t,e,i){var n=i(55),s=i(49),o=i(50),r=i(51),a=i(52),h=i(53),c=i(54);e._loadMixin=function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e])},e._clearMixin=function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=void 0)},e._loadPhysicsSystem=function(){this._loadMixin(n),this._loadSelectedForceSolver(),1==this.constants.configurePhysics&&this._loadPhysicsConfiguration()},e._loadClusterSystem=function(){this.clusterSession=0,this.hubThreshold=5,this._loadMixin(s)},e._loadSectorSystem=function(){this.sectors={},this.activeSector=["default"],this.sectors.active={},this.sectors.active["default"]={nodes:{},edges:{},nodeIndices:[],formationScale:1,drawingNode:void 0},this.sectors.frozen={},this.sectors.support={nodes:{},edges:{},nodeIndices:[],formationScale:1,drawingNode:void 0},this.nodeIndices=this.sectors.active["default"].nodeIndices,this._loadMixin(o)},e._loadSelectionSystem=function(){this.selectionObj={nodes:{},edges:{}},this._loadMixin(r)},e._loadManipulationSystem=function(){this.blockConnectingEdgeSelection=!1,this.forceAppendSelection=!1,1==this.constants.dataManipulation.enabled?(void 0===this.manipulationDiv&&(this.manipulationDiv=document.createElement("div"),this.manipulationDiv.className="network-manipulationDiv",this.manipulationDiv.id="network-manipulationDiv",this.manipulationDiv.style.display=1==this.editMode?"block":"none",this.containerElement.insertBefore(this.manipulationDiv,this.frame)),void 0===this.editModeDiv&&(this.editModeDiv=document.createElement("div"),this.editModeDiv.className="network-manipulation-editMode",this.editModeDiv.id="network-manipulation-editMode",this.editModeDiv.style.display=1==this.editMode?"none":"block",this.containerElement.insertBefore(this.editModeDiv,this.frame)),void 0===this.closeDiv&&(this.closeDiv=document.createElement("div"),this.closeDiv.className="network-manipulation-closeDiv",this.closeDiv.id="network-manipulation-closeDiv",this.closeDiv.style.display=this.manipulationDiv.style.display,this.containerElement.insertBefore(this.closeDiv,this.frame)),this._loadMixin(a),this._createManipulatorBar()):void 0!==this.manipulationDiv&&(this._createManipulatorBar(),this.containerElement.removeChild(this.manipulationDiv),this.containerElement.removeChild(this.editModeDiv),this.containerElement.removeChild(this.closeDiv),this.manipulationDiv=void 0,this.editModeDiv=void 0,this.closeDiv=void 0,this._clearMixin(a))},e._loadNavigationControls=function(){this._loadMixin(h),this._cleanNavigation(),1==this.constants.navigation.enabled&&this._loadNavigationElements()},e._loadHierarchySystem=function(){this._loadMixin(c)}},function(t){function e(t){return t?i(t):void 0}function i(t){for(var i in e.prototype)t[i]=e.prototype[i];return t}t.exports=e,e.prototype.on=e.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks[t]=this._callbacks[t]||[]).push(e),this},e.prototype.once=function(t,e){function i(){n.off(t,i),e.apply(this,arguments)}var n=this;return this._callbacks=this._callbacks||{},i.fn=e,this.on(t,i),this},e.prototype.off=e.prototype.removeListener=e.prototype.removeAllListeners=e.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var i=this._callbacks[t];if(!i)return this;if(1==arguments.length)return delete this._callbacks[t],this;for(var n,s=0;s<i.length;s++)if(n=i[s],n===e||n.fn===e){i.splice(s,1);break}return this},e.prototype.emit=function(t){this._callbacks=this._callbacks||{};var e=[].slice.call(arguments,1),i=this._callbacks[t];if(i){i=i.slice(0);for(var n=0,s=i.length;s>n;++n)i[n].apply(this,e)}return this},e.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks[t]||[]},e.prototype.hasListeners=function(t){return!!this.listeners(t).length}},function(t,e,i){var n;(function(t,s){(function(o){function r(t,e,i){switch(arguments.length){case 2:return null!=t?t:e;case 3:return null!=t?t:null!=e?e:i;default:throw new Error("Implement me")}}function a(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function h(t,e){function i(){ve.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+t)}var n=!0;return f(function(){return n&&(i(),n=!1),e.apply(this,arguments)},e)}function c(t,e){return function(i){return v(t.call(this,i),e)}}function l(t,e){return function(i){return this.lang().ordinal(t.call(this,i),e)}}function d(){}function u(t){L(t),f(this,t)}function p(t){var e=S(t),i=e.year||0,n=e.quarter||0,s=e.month||0,o=e.week||0,r=e.day||0,a=e.hour||0,h=e.minute||0,c=e.second||0,l=e.millisecond||0;this._milliseconds=+l+1e3*c+6e4*h+36e5*a,this._days=+r+7*o,this._months=+s+3*n+12*i,this._data={},this._bubble()}function f(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return e.hasOwnProperty("toString")&&(t.toString=e.toString),e.hasOwnProperty("valueOf")&&(t.valueOf=e.valueOf),t}function g(t){var e,i={};for(e in t)t.hasOwnProperty(e)&&Ne.hasOwnProperty(e)&&(i[e]=t[e]);return i}function m(t){return 0>t?Math.ceil(t):Math.floor(t)}function v(t,e,i){for(var n=""+Math.abs(t),s=t>=0;n.length<e;)n="0"+n;return(s?i?"+":"":"-")+n}function y(t,e,i,n){var s=e._milliseconds,o=e._days,r=e._months;n=null==n?!0:n,s&&t._d.setTime(+t._d+s*i),o&&ue(t,"Date",de(t,"Date")+o*i),r&&le(t,de(t,"Month")+r*i),n&&ve.updateOffset(t,o||r)}function b(t){return"[object Array]"===Object.prototype.toString.call(t)}function x(t){return"[object Date]"===Object.prototype.toString.call(t)||t instanceof Date}function w(t,e,i){var n,s=Math.min(t.length,e.length),o=Math.abs(t.length-e.length),r=0;for(n=0;s>n;n++)(i&&t[n]!==e[n]||!i&&T(t[n])!==T(e[n]))&&r++;return r+o}function _(t){if(t){var e=t.toLowerCase().replace(/(.)s$/,"$1");t=ri[t]||ai[e]||e}return t}function S(t){var e,i,n={};for(i in t)t.hasOwnProperty(i)&&(e=_(i),e&&(n[e]=t[i]));return n}function C(t){var e,i;if(0===t.indexOf("week"))e=7,i="day";else{if(0!==t.indexOf("month"))return;e=12,i="month"}ve[t]=function(n,s){var r,a,h=ve.fn._lang[t],c=[];if("number"==typeof n&&(s=n,n=o),a=function(t){var e=ve().utc().set(i,t);return h.call(ve.fn._lang,e,n||"")},null!=s)return a(s);for(r=0;e>r;r++)c.push(a(r));return c}}function T(t){var e=+t,i=0;return 0!==e&&isFinite(e)&&(i=e>=0?Math.floor(e):Math.ceil(e)),i}function D(t,e){return new Date(Date.UTC(t,e+1,0)).getUTCDate()}function M(t,e,i){return re(ve([t,11,31+e-i]),e,i).week}function E(t){return k(t)?366:365}function k(t){return t%4===0&&t%100!==0||t%400===0}function L(t){var e;t._a&&-2===t._pf.overflow&&(e=t._a[Ce]<0||t._a[Ce]>11?Ce:t._a[Te]<1||t._a[Te]>D(t._a[Se],t._a[Ce])?Te:t._a[De]<0||t._a[De]>23?De:t._a[Me]<0||t._a[Me]>59?Me:t._a[Ee]<0||t._a[Ee]>59?Ee:t._a[ke]<0||t._a[ke]>999?ke:-1,t._pf._overflowDayOfYear&&(Se>e||e>Te)&&(e=Te),t._pf.overflow=e)}function N(t){return null==t._isValid&&(t._isValid=!isNaN(t._d.getTime())&&t._pf.overflow<0&&!t._pf.empty&&!t._pf.invalidMonth&&!t._pf.nullInput&&!t._pf.invalidFormat&&!t._pf.userInvalidated,t._strict&&(t._isValid=t._isValid&&0===t._pf.charsLeftOver&&0===t._pf.unusedTokens.length)),t._isValid}function A(t){return t?t.toLowerCase().replace("_","-"):t}function O(t,e){return e._isUTC?ve(t).zone(e._offset||0):ve(t).local()}function P(t,e){return e.abbr=t,Le[t]||(Le[t]=new d),Le[t].set(e),Le[t]}function I(t){delete Le[t]}function F(t){var e,n,s,o,r=0,a=function(t){if(!Le[t]&&Ae)try{i(56)("./"+t)}catch(e){}return Le[t]};if(!t)return ve.fn._lang;if(!b(t)){if(n=a(t))return n;t=[t]}for(;r<t.length;){for(o=A(t[r]).split("-"),e=o.length,s=A(t[r+1]),s=s?s.split("-"):null;e>0;){if(n=a(o.slice(0,e).join("-")))return n;if(s&&s.length>=e&&w(o,s,!0)>=e-1)break;e--}r++}return ve.fn._lang}function K(t){return t.match(/\[[\s\S]/)?t.replace(/^\[|\]$/g,""):t.replace(/\\/g,"")}function z(t){var e,i,n=t.match(Fe);for(e=0,i=n.length;i>e;e++)n[e]=ui[n[e]]?ui[n[e]]:K(n[e]);return function(s){var o="";for(e=0;i>e;e++)o+=n[e]instanceof Function?n[e].call(s,t):n[e];return o}}function R(t,e){return t.isValid()?(e=H(e,t.lang()),hi[e]||(hi[e]=z(e)),hi[e](t)):t.lang().invalidDate()}function H(t,e){function i(t){return e.longDateFormat(t)||t}var n=5;for(Ke.lastIndex=0;n>=0&&Ke.test(t);)t=t.replace(Ke,i),Ke.lastIndex=0,n-=1;return t}function G(t,e){var i,n=e._strict;switch(t){case"Q":return $e;case"DDDD":return qe;case"YYYY":case"GGGG":case"gggg":return n?Ze:He;case"Y":case"G":case"g":return Je;case"YYYYYY":case"YYYYY":case"GGGGG":case"ggggg":return n?Qe:Ge;case"S":if(n)return $e;case"SS":if(n)return Xe;case"SSS":if(n)return qe;case"DDD":return Re;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return We;case"a":case"A":return F(e._l)._meridiemParse;case"X":return Ue;case"Z":case"ZZ":return Ye;case"T":return je;case"SSSS":return Be;case"MM":case"DD":case"YY":case"GG":case"gg":case"HH":case"hh":case"mm":case"ss":case"ww":case"WW":return n?Xe:ze;case"M":case"D":case"d":case"H":case"h":case"m":case"s":case"w":case"W":case"e":case"E":return ze;case"Do":return Ve;default:return i=new RegExp(Z(q(t.replace("\\","")),"i"))}}function B(t){t=t||"";var e=t.match(Ye)||[],i=e[e.length-1]||[],n=(i+"").match(si)||["-",0,0],s=+(60*n[1])+T(n[2]);return"+"===n[0]?-s:s}function W(t,e,i){var n,s=i._a;switch(t){case"Q":null!=e&&(s[Ce]=3*(T(e)-1));break;case"M":case"MM":null!=e&&(s[Ce]=T(e)-1);break;case"MMM":case"MMMM":n=F(i._l).monthsParse(e),null!=n?s[Ce]=n:i._pf.invalidMonth=e;break;case"D":case"DD":null!=e&&(s[Te]=T(e));break;case"Do":null!=e&&(s[Te]=T(parseInt(e,10)));break;case"DDD":case"DDDD":null!=e&&(i._dayOfYear=T(e));break;case"YY":s[Se]=ve.parseTwoDigitYear(e);break;case"YYYY":case"YYYYY":case"YYYYYY":s[Se]=T(e);break;case"a":case"A":i._isPm=F(i._l).isPM(e);break;case"H":case"HH":case"h":case"hh":s[De]=T(e);break;case"m":case"mm":s[Me]=T(e);break;case"s":case"ss":s[Ee]=T(e);break;case"S":case"SS":case"SSS":case"SSSS":s[ke]=T(1e3*("0."+e));break;case"X":i._d=new Date(1e3*parseFloat(e));break;case"Z":case"ZZ":i._useUTC=!0,i._tzm=B(e);break;case"dd":case"ddd":case"dddd":n=F(i._l).weekdaysParse(e),null!=n?(i._w=i._w||{},i._w.d=n):i._pf.invalidWeekday=e;break;case"w":case"ww":case"W":case"WW":case"d":case"e":case"E":t=t.substr(0,1);case"gggg":case"GGGG":case"GGGGG":t=t.substr(0,2),e&&(i._w=i._w||{},i._w[t]=T(e));break;case"gg":case"GG":i._w=i._w||{},i._w[t]=ve.parseTwoDigitYear(e)}}function Y(t){var e,i,n,s,o,a,h,c;e=t._w,null!=e.GG||null!=e.W||null!=e.E?(o=1,a=4,i=r(e.GG,t._a[Se],re(ve(),1,4).year),n=r(e.W,1),s=r(e.E,1)):(c=F(t._l),o=c._week.dow,a=c._week.doy,i=r(e.gg,t._a[Se],re(ve(),o,a).year),n=r(e.w,1),null!=e.d?(s=e.d,o>s&&++n):s=null!=e.e?e.e+o:o),h=ae(i,n,s,a,o),t._a[Se]=h.year,t._dayOfYear=h.dayOfYear}function j(t){var e,i,n,s,o=[];if(!t._d){for(n=V(t),t._w&&null==t._a[Te]&&null==t._a[Ce]&&Y(t),t._dayOfYear&&(s=r(t._a[Se],n[Se]),t._dayOfYear>E(s)&&(t._pf._overflowDayOfYear=!0),i=ie(s,0,t._dayOfYear),t._a[Ce]=i.getUTCMonth(),t._a[Te]=i.getUTCDate()),e=0;3>e&&null==t._a[e];++e)t._a[e]=o[e]=n[e];for(;7>e;e++)t._a[e]=o[e]=null==t._a[e]?2===e?1:0:t._a[e];t._d=(t._useUTC?ie:ee).apply(null,o),null!=t._tzm&&t._d.setUTCMinutes(t._d.getUTCMinutes()+t._tzm)}}function U(t){var e;t._d||(e=S(t._i),t._a=[e.year,e.month,e.day,e.hour,e.minute,e.second,e.millisecond],j(t))}function V(t){var e=new Date;return t._useUTC?[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]:[e.getFullYear(),e.getMonth(),e.getDate()]}function X(t){if(t._f===ve.ISO_8601)return void Q(t);t._a=[],t._pf.empty=!0;var e,i,n,s,o,r=F(t._l),a=""+t._i,h=a.length,c=0;for(n=H(t._f,r).match(Fe)||[],e=0;e<n.length;e++)s=n[e],i=(a.match(G(s,t))||[])[0],i&&(o=a.substr(0,a.indexOf(i)),o.length>0&&t._pf.unusedInput.push(o),a=a.slice(a.indexOf(i)+i.length),c+=i.length),ui[s]?(i?t._pf.empty=!1:t._pf.unusedTokens.push(s),W(s,i,t)):t._strict&&!i&&t._pf.unusedTokens.push(s);t._pf.charsLeftOver=h-c,a.length>0&&t._pf.unusedInput.push(a),t._isPm&&t._a[De]<12&&(t._a[De]+=12),t._isPm===!1&&12===t._a[De]&&(t._a[De]=0),j(t),L(t)}function q(t){return t.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(t,e,i,n,s){return e||i||n||s})}function Z(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function $(t){var e,i,n,s,o;if(0===t._f.length)return t._pf.invalidFormat=!0,void(t._d=new Date(0/0));for(s=0;s<t._f.length;s++)o=0,e=f({},t),e._pf=a(),e._f=t._f[s],X(e),N(e)&&(o+=e._pf.charsLeftOver,o+=10*e._pf.unusedTokens.length,e._pf.score=o,(null==n||n>o)&&(n=o,i=e));f(t,i||e)}function Q(t){var e,i,n=t._i,s=ti.exec(n);if(s){for(t._pf.iso=!0,e=0,i=ii.length;i>e;e++)if(ii[e][1].exec(n)){t._f=ii[e][0]+(s[6]||" ");break}for(e=0,i=ni.length;i>e;e++)if(ni[e][1].exec(n)){t._f+=ni[e][0];break}n.match(Ye)&&(t._f+="Z"),X(t)}else t._isValid=!1}function J(t){Q(t),t._isValid===!1&&(delete t._isValid,ve.createFromInputFallback(t))}function te(t){var e=t._i,i=Oe.exec(e);e===o?t._d=new Date:i?t._d=new Date(+i[1]):"string"==typeof e?J(t):b(e)?(t._a=e.slice(0),j(t)):x(e)?t._d=new Date(+e):"object"==typeof e?U(t):"number"==typeof e?t._d=new Date(e):ve.createFromInputFallback(t)}function ee(t,e,i,n,s,o,r){var a=new Date(t,e,i,n,s,o,r);return 1970>t&&a.setFullYear(t),a}function ie(t){var e=new Date(Date.UTC.apply(null,arguments));return 1970>t&&e.setUTCFullYear(t),e}function ne(t,e){if("string"==typeof t)if(isNaN(t)){if(t=e.weekdaysParse(t),"number"!=typeof t)return null}else t=parseInt(t,10);return t}function se(t,e,i,n,s){return s.relativeTime(e||1,!!i,t,n)}function oe(t,e,i){var n=_e(Math.abs(t)/1e3),s=_e(n/60),o=_e(s/60),r=_e(o/24),a=_e(r/365),h=n<ci.s&&["s",n]||1===s&&["m"]||s<ci.m&&["mm",s]||1===o&&["h"]||o<ci.h&&["hh",o]||1===r&&["d"]||r<=ci.dd&&["dd",r]||r<=ci.dm&&["M"]||r<ci.dy&&["MM",_e(r/30)]||1===a&&["y"]||["yy",a];return h[2]=e,h[3]=t>0,h[4]=i,se.apply({},h)}function re(t,e,i){var n,s=i-e,o=i-t.day();return o>s&&(o-=7),s-7>o&&(o+=7),n=ve(t).add("d",o),{week:Math.ceil(n.dayOfYear()/7),year:n.year()}}function ae(t,e,i,n,s){var o,r,a=ie(t,0,1).getUTCDay();return a=0===a?7:a,i=null!=i?i:s,o=s-a+(a>n?7:0)-(s>a?7:0),r=7*(e-1)+(i-s)+o+1,{year:r>0?t:t-1,dayOfYear:r>0?r:E(t-1)+r}}function he(t){var e=t._i,i=t._f;return null===e||i===o&&""===e?ve.invalid({nullInput:!0}):("string"==typeof e&&(t._i=e=F().preparse(e)),ve.isMoment(e)?(t=g(e),t._d=new Date(+e._d)):i?b(i)?$(t):X(t):te(t),new u(t))}function ce(t,e){var i,n;if(1===e.length&&b(e[0])&&(e=e[0]),!e.length)return ve();for(i=e[0],n=1;n<e.length;++n)e[n][t](i)&&(i=e[n]);return i}function le(t,e){var i;return"string"==typeof e&&(e=t.lang().monthsParse(e),"number"!=typeof e)?t:(i=Math.min(t.date(),D(t.year(),e)),t._d["set"+(t._isUTC?"UTC":"")+"Month"](e,i),t)}function de(t,e){return t._d["get"+(t._isUTC?"UTC":"")+e]()}function ue(t,e,i){return"Month"===e?le(t,i):t._d["set"+(t._isUTC?"UTC":"")+e](i)}function pe(t,e){return function(i){return null!=i?(ue(this,t,i),ve.updateOffset(this,e),this):de(this,t)}}function fe(t){ve.duration.fn[t]=function(){return this._data[t]}}function ge(t,e){ve.duration.fn["as"+t]=function(){return+this/e}}function me(t){"undefined"==typeof ender&&(ye=we.moment,we.moment=t?h("Accessing Moment through the global scope is deprecated, and will be removed in an upcoming release.",ve):ve)}for(var ve,ye,be,xe="2.7.0",we="undefined"!=typeof t?t:this,_e=Math.round,Se=0,Ce=1,Te=2,De=3,Me=4,Ee=5,ke=6,Le={},Ne={_isAMomentObject:null,_i:null,_f:null,_l:null,_strict:null,_tzm:null,_isUTC:null,_offset:null,_pf:null,_lang:null},Ae="undefined"!=typeof s&&s.exports,Oe=/^\/?Date\((\-?\d+)/i,Pe=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,Ie=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,Fe=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|X|zz?|ZZ?|.)/g,Ke=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,ze=/\d\d?/,Re=/\d{1,3}/,He=/\d{1,4}/,Ge=/[+\-]?\d{1,6}/,Be=/\d+/,We=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,Ye=/Z|[\+\-]\d\d:?\d\d/gi,je=/T/i,Ue=/[\+\-]?\d+(\.\d{1,3})?/,Ve=/\d{1,2}/,$e=/\d/,Xe=/\d\d/,qe=/\d{3}/,Ze=/\d{4}/,Qe=/[+-]?\d{6}/,Je=/[+-]?\d+/,ti=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,ei="YYYY-MM-DDTHH:mm:ssZ",ii=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],ni=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],si=/([\+\-]|\d\d)/gi,oi=("Date|Hours|Minutes|Seconds|Milliseconds".split("|"),{Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6}),ri={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",Q:"quarter",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},ai={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},hi={},ci={s:45,m:45,h:22,dd:25,dm:45,dy:345},li="DDD w W M D d".split(" "),di="M D H h m s w W".split(" "),ui={M:function(){return this.month()+1},MMM:function(t){return this.lang().monthsShort(this,t)},MMMM:function(t){return this.lang().months(this,t)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(t){return this.lang().weekdaysMin(this,t)},ddd:function(t){return this.lang().weekdaysShort(this,t)},dddd:function(t){return this.lang().weekdays(this,t)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return v(this.year()%100,2)},YYYY:function(){return v(this.year(),4)},YYYYY:function(){return v(this.year(),5)},YYYYYY:function(){var t=this.year(),e=t>=0?"+":"-";return e+v(Math.abs(t),6)},gg:function(){return v(this.weekYear()%100,2)},gggg:function(){return v(this.weekYear(),4)},ggggg:function(){return v(this.weekYear(),5)},GG:function(){return v(this.isoWeekYear()%100,2)},GGGG:function(){return v(this.isoWeekYear(),4)},GGGGG:function(){return v(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.lang().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.lang().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return T(this.milliseconds()/100)},SS:function(){return v(T(this.milliseconds()/10),2)},SSS:function(){return v(this.milliseconds(),3)},SSSS:function(){return v(this.milliseconds(),3)},Z:function(){var t=-this.zone(),e="+";return 0>t&&(t=-t,e="-"),e+v(T(t/60),2)+":"+v(T(t)%60,2)},ZZ:function(){var t=-this.zone(),e="+";return 0>t&&(t=-t,e="-"),e+v(T(t/60),2)+v(T(t)%60,2)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},X:function(){return this.unix()},Q:function(){return this.quarter()}},pi=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"];li.length;)be=li.pop(),ui[be+"o"]=l(ui[be],be);for(;di.length;)be=di.pop(),ui[be+be]=c(ui[be],2);for(ui.DDDD=c(ui.DDD,3),f(d.prototype,{set:function(t){var e,i;for(i in t)e=t[i],"function"==typeof e?this[i]=e:this["_"+i]=e},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(t){return this._months[t.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(t){return this._monthsShort[t.month()]},monthsParse:function(t){var e,i,n;for(this._monthsParse||(this._monthsParse=[]),e=0;12>e;e++)if(this._monthsParse[e]||(i=ve.utc([2e3,e]),n="^"+this.months(i,"")+"|^"+this.monthsShort(i,""),this._monthsParse[e]=new RegExp(n.replace(".",""),"i")),this._monthsParse[e].test(t))return e},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(t){return this._weekdays[t.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(t){return this._weekdaysShort[t.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(t){return this._weekdaysMin[t.day()]},weekdaysParse:function(t){var e,i,n;for(this._weekdaysParse||(this._weekdaysParse=[]),e=0;7>e;e++)if(this._weekdaysParse[e]||(i=ve([2e3,1]).day(e),n="^"+this.weekdays(i,"")+"|^"+this.weekdaysShort(i,"")+"|^"+this.weekdaysMin(i,""),this._weekdaysParse[e]=new RegExp(n.replace(".",""),"i")),this._weekdaysParse[e].test(t))return e},_longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},longDateFormat:function(t){var e=this._longDateFormat[t];return!e&&this._longDateFormat[t.toUpperCase()]&&(e=this._longDateFormat[t.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(t){return t.slice(1)}),this._longDateFormat[t]=e),e},isPM:function(t){return"p"===(t+"").toLowerCase().charAt(0)},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(t,e,i){return t>11?i?"pm":"PM":i?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(t,e){var i=this._calendar[t];return"function"==typeof i?i.apply(e):i},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(t,e,i,n){var s=this._relativeTime[i];return"function"==typeof s?s(t,e,i,n):s.replace(/%d/i,t)},pastFuture:function(t,e){var i=this._relativeTime[t>0?"future":"past"];return"function"==typeof i?i(e):i.replace(/%s/i,e)},ordinal:function(t){return this._ordinal.replace("%d",t)},_ordinal:"%d",preparse:function(t){return t},postformat:function(t){return t},week:function(t){return re(t,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}}),ve=function(t,e,i,n){var s;return"boolean"==typeof i&&(n=i,i=o),s={},s._isAMomentObject=!0,s._i=t,s._f=e,s._l=i,s._strict=n,s._isUTC=!1,s._pf=a(),he(s)},ve.suppressDeprecationWarnings=!1,ve.createFromInputFallback=h("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(t){t._d=new Date(t._i)}),ve.min=function(){var t=[].slice.call(arguments,0);return ce("isBefore",t)},ve.max=function(){var t=[].slice.call(arguments,0);return ce("isAfter",t)},ve.utc=function(t,e,i,n){var s;return"boolean"==typeof i&&(n=i,i=o),s={},s._isAMomentObject=!0,s._useUTC=!0,s._isUTC=!0,s._l=i,s._i=t,s._f=e,s._strict=n,s._pf=a(),he(s).utc()},ve.unix=function(t){return ve(1e3*t)},ve.duration=function(t,e){var i,n,s,o=t,r=null;return ve.isDuration(t)?o={ms:t._milliseconds,d:t._days,M:t._months}:"number"==typeof t?(o={},e?o[e]=t:o.milliseconds=t):(r=Pe.exec(t))?(i="-"===r[1]?-1:1,o={y:0,d:T(r[Te])*i,h:T(r[De])*i,m:T(r[Me])*i,s:T(r[Ee])*i,ms:T(r[ke])*i}):(r=Ie.exec(t))&&(i="-"===r[1]?-1:1,s=function(t){var e=t&&parseFloat(t.replace(",","."));return(isNaN(e)?0:e)*i},o={y:s(r[2]),M:s(r[3]),d:s(r[4]),h:s(r[5]),m:s(r[6]),s:s(r[7]),w:s(r[8])}),n=new p(o),ve.isDuration(t)&&t.hasOwnProperty("_lang")&&(n._lang=t._lang),n},ve.version=xe,ve.defaultFormat=ei,ve.ISO_8601=function(){},ve.momentProperties=Ne,ve.updateOffset=function(){},ve.relativeTimeThreshold=function(t,e){return ci[t]===o?!1:(ci[t]=e,!0)},ve.lang=function(t,e){var i;return t?(e?P(A(t),e):null===e?(I(t),t="en"):Le[t]||F(t),i=ve.duration.fn._lang=ve.fn._lang=F(t),i._abbr):ve.fn._lang._abbr},ve.langData=function(t){return t&&t._lang&&t._lang._abbr&&(t=t._lang._abbr),F(t)},ve.isMoment=function(t){return t instanceof u||null!=t&&t.hasOwnProperty("_isAMomentObject")},ve.isDuration=function(t){return t instanceof p},be=pi.length-1;be>=0;--be)C(pi[be]);ve.normalizeUnits=function(t){return _(t)},ve.invalid=function(t){var e=ve.utc(0/0);return null!=t?f(e._pf,t):e._pf.userInvalidated=!0,e},ve.parseZone=function(){return ve.apply(null,arguments).parseZone()},ve.parseTwoDigitYear=function(t){return T(t)+(T(t)>68?1900:2e3)},f(ve.fn=u.prototype,{clone:function(){return ve(this)},valueOf:function(){return+this._d+6e4*(this._offset||0)},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.clone().lang("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){var t=ve(this).utc();return 0<t.year()&&t.year()<=9999?R(t,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):R(t,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var t=this;return[t.year(),t.month(),t.date(),t.hours(),t.minutes(),t.seconds(),t.milliseconds()]},isValid:function(){return N(this)},isDSTShifted:function(){return this._a?this.isValid()&&w(this._a,(this._isUTC?ve.utc(this._a):ve(this._a)).toArray())>0:!1},parsingFlags:function(){return f({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(){return this.zone(0)},local:function(){return this.zone(0),this._isUTC=!1,this},format:function(t){var e=R(this,t||ve.defaultFormat);return this.lang().postformat(e)},add:function(t,e){var i;return i="string"==typeof t&&"string"==typeof e?ve.duration(isNaN(+e)?+t:+e,isNaN(+e)?e:t):"string"==typeof t?ve.duration(+e,t):ve.duration(t,e),y(this,i,1),this},subtract:function(t,e){var i;return i="string"==typeof t&&"string"==typeof e?ve.duration(isNaN(+e)?+t:+e,isNaN(+e)?e:t):"string"==typeof t?ve.duration(+e,t):ve.duration(t,e),y(this,i,-1),this},diff:function(t,e,i){var n,s,o=O(t,this),r=6e4*(this.zone()-o.zone());return e=_(e),"year"===e||"month"===e?(n=432e5*(this.daysInMonth()+o.daysInMonth()),s=12*(this.year()-o.year())+(this.month()-o.month()),s+=(this-ve(this).startOf("month")-(o-ve(o).startOf("month")))/n,s-=6e4*(this.zone()-ve(this).startOf("month").zone()-(o.zone()-ve(o).startOf("month").zone()))/n,"year"===e&&(s/=12)):(n=this-o,s="second"===e?n/1e3:"minute"===e?n/6e4:"hour"===e?n/36e5:"day"===e?(n-r)/864e5:"week"===e?(n-r)/6048e5:n),i?s:m(s)},from:function(t,e){return ve.duration(this.diff(t)).lang(this.lang()._abbr).humanize(!e)},fromNow:function(t){return this.from(ve(),t)},calendar:function(t){var e=t||ve(),i=O(e,this).startOf("day"),n=this.diff(i,"days",!0),s=-6>n?"sameElse":-1>n?"lastWeek":0>n?"lastDay":1>n?"sameDay":2>n?"nextDay":7>n?"nextWeek":"sameElse";return this.format(this.lang().calendar(s,this))},isLeapYear:function(){return k(this.year())},isDST:function(){return this.zone()<this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone()},day:function(t){var e=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=t?(t=ne(t,this.lang()),this.add({d:t-e})):e},month:pe("Month",!0),startOf:function(t){switch(t=_(t)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===t?this.weekday(0):"isoWeek"===t&&this.isoWeekday(1),"quarter"===t&&this.month(3*Math.floor(this.month()/3)),this},endOf:function(t){return t=_(t),this.startOf(t).add("isoWeek"===t?"week":t,1).subtract("ms",1)},isAfter:function(t,e){return e="undefined"!=typeof e?e:"millisecond",+this.clone().startOf(e)>+ve(t).startOf(e)},isBefore:function(t,e){return e="undefined"!=typeof e?e:"millisecond",+this.clone().startOf(e)<+ve(t).startOf(e)},isSame:function(t,e){return e=e||"ms",+this.clone().startOf(e)===+O(t,this).startOf(e)},min:h("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(t){return t=ve.apply(null,arguments),this>t?this:t
}),max:h("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(t){return t=ve.apply(null,arguments),t>this?this:t}),zone:function(t,e){var i=this._offset||0;return null==t?this._isUTC?i:this._d.getTimezoneOffset():("string"==typeof t&&(t=B(t)),Math.abs(t)<16&&(t=60*t),this._offset=t,this._isUTC=!0,i!==t&&(!e||this._changeInProgress?y(this,ve.duration(i-t,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,ve.updateOffset(this,!0),this._changeInProgress=null)),this)},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){return this._tzm?this.zone(this._tzm):"string"==typeof this._i&&this.zone(this._i),this},hasAlignedHourOffset:function(t){return t=t?ve(t).zone():0,(this.zone()-t)%60===0},daysInMonth:function(){return D(this.year(),this.month())},dayOfYear:function(t){var e=_e((ve(this).startOf("day")-ve(this).startOf("year"))/864e5)+1;return null==t?e:this.add("d",t-e)},quarter:function(t){return null==t?Math.ceil((this.month()+1)/3):this.month(3*(t-1)+this.month()%3)},weekYear:function(t){var e=re(this,this.lang()._week.dow,this.lang()._week.doy).year;return null==t?e:this.add("y",t-e)},isoWeekYear:function(t){var e=re(this,1,4).year;return null==t?e:this.add("y",t-e)},week:function(t){var e=this.lang().week(this);return null==t?e:this.add("d",7*(t-e))},isoWeek:function(t){var e=re(this,1,4).week;return null==t?e:this.add("d",7*(t-e))},weekday:function(t){var e=(this.day()+7-this.lang()._week.dow)%7;return null==t?e:this.add("d",t-e)},isoWeekday:function(t){return null==t?this.day()||7:this.day(this.day()%7?t:t-7)},isoWeeksInYear:function(){return M(this.year(),1,4)},weeksInYear:function(){var t=this._lang._week;return M(this.year(),t.dow,t.doy)},get:function(t){return t=_(t),this[t]()},set:function(t,e){return t=_(t),"function"==typeof this[t]&&this[t](e),this},lang:function(t){return t===o?this._lang:(this._lang=F(t),this)}}),ve.fn.millisecond=ve.fn.milliseconds=pe("Milliseconds",!1),ve.fn.second=ve.fn.seconds=pe("Seconds",!1),ve.fn.minute=ve.fn.minutes=pe("Minutes",!1),ve.fn.hour=ve.fn.hours=pe("Hours",!0),ve.fn.date=pe("Date",!0),ve.fn.dates=h("dates accessor is deprecated. Use date instead.",pe("Date",!0)),ve.fn.year=pe("FullYear",!0),ve.fn.years=h("years accessor is deprecated. Use year instead.",pe("FullYear",!0)),ve.fn.days=ve.fn.day,ve.fn.months=ve.fn.month,ve.fn.weeks=ve.fn.week,ve.fn.isoWeeks=ve.fn.isoWeek,ve.fn.quarters=ve.fn.quarter,ve.fn.toJSON=ve.fn.toISOString,f(ve.duration.fn=p.prototype,{_bubble:function(){var t,e,i,n,s=this._milliseconds,o=this._days,r=this._months,a=this._data;a.milliseconds=s%1e3,t=m(s/1e3),a.seconds=t%60,e=m(t/60),a.minutes=e%60,i=m(e/60),a.hours=i%24,o+=m(i/24),a.days=o%30,r+=m(o/30),a.months=r%12,n=m(r/12),a.years=n},weeks:function(){return m(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*T(this._months/12)},humanize:function(t){var e=+this,i=oe(e,!t,this.lang());return t&&(i=this.lang().pastFuture(e,i)),this.lang().postformat(i)},add:function(t,e){var i=ve.duration(t,e);return this._milliseconds+=i._milliseconds,this._days+=i._days,this._months+=i._months,this._bubble(),this},subtract:function(t,e){var i=ve.duration(t,e);return this._milliseconds-=i._milliseconds,this._days-=i._days,this._months-=i._months,this._bubble(),this},get:function(t){return t=_(t),this[t.toLowerCase()+"s"]()},as:function(t){return t=_(t),this["as"+t.charAt(0).toUpperCase()+t.slice(1)+"s"]()},lang:ve.fn.lang,toIsoString:function(){var t=Math.abs(this.years()),e=Math.abs(this.months()),i=Math.abs(this.days()),n=Math.abs(this.hours()),s=Math.abs(this.minutes()),o=Math.abs(this.seconds()+this.milliseconds()/1e3);return this.asSeconds()?(this.asSeconds()<0?"-":"")+"P"+(t?t+"Y":"")+(e?e+"M":"")+(i?i+"D":"")+(n||s||o?"T":"")+(n?n+"H":"")+(s?s+"M":"")+(o?o+"S":""):"P0D"}});for(be in oi)oi.hasOwnProperty(be)&&(ge(be,oi[be]),fe(be.toLowerCase()));ge("Weeks",6048e5),ve.duration.fn.asMonths=function(){return(+this-31536e6*this.years())/2592e6+12*this.years()},ve.lang("en",{ordinal:function(t){var e=t%10,i=1===T(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th";return t+i}}),Ae?s.exports=ve:(n=function(t,e,i){return i.config&&i.config()&&i.config().noGlobal===!0&&(we.moment=ye),ve}.call(e,i,e,s),!(n!==o&&(s.exports=n)),me(!0))}).call(this)}).call(e,function(){return this}(),i(60)(t))},function(t){function e(t,e,i){return t.addEventListener?t.addEventListener(e,i,!1):void t.attachEvent("on"+e,i)}function i(t){return"keypress"==t.type?String.fromCharCode(t.which):x[t.which]?x[t.which]:w[t.which]?w[t.which]:String.fromCharCode(t.which).toLowerCase()}function n(t){var e=t.target||t.srcElement,i=e.tagName;return(" "+e.className+" ").indexOf(" mousetrap ")>-1?!1:"INPUT"==i||"SELECT"==i||"TEXTAREA"==i||e.contentEditable&&"true"==e.contentEditable}function s(t,e){return t.sort().join(",")===e.sort().join(",")}function o(t){t=t||{};var e,i=!1;for(e in D)t[e]?i=!0:D[e]=0;i||(E=!1)}function r(t,e,i,n,o){var r,a,h=[];if(!C[t])return[];for("keyup"==i&&d(t)&&(e=[t]),r=0;r<C[t].length;++r)a=C[t][r],a.seq&&D[a.seq]!=a.level||i==a.action&&("keypress"==i||s(e,a.modifiers))&&(n&&a.combo==o&&C[t].splice(r,1),h.push(a));return h}function a(t){var e=[];return t.shiftKey&&e.push("shift"),t.altKey&&e.push("alt"),t.ctrlKey&&e.push("ctrl"),t.metaKey&&e.push("meta"),e}function h(t,e){t(e)===!1&&(e.preventDefault&&e.preventDefault(),e.stopPropagation&&e.stopPropagation(),e.returnValue=!1,e.cancelBubble=!0)}function c(t,e){if(!n(e)){var i,s=r(t,a(e),e.type),c={},l=!1;for(i=0;i<s.length;++i)s[i].seq?(l=!0,c[s[i].seq]=1,h(s[i].callback,e)):l||E||h(s[i].callback,e);e.type!=E||d(t)||o(c)}}function l(t){t.which="number"==typeof t.which?t.which:t.keyCode;var e=i(t);return e?"keyup"==t.type&&M==e?void(M=!1):void c(e,t):void 0}function d(t){return"shift"==t||"ctrl"==t||"alt"==t||"meta"==t}function u(){clearTimeout(b),b=setTimeout(o,1e3)}function p(){if(!y){y={};for(var t in x)t>95&&112>t||x.hasOwnProperty(t)&&(y[x[t]]=t)}return y}function f(t,e,i){return i||(i=p()[t]?"keydown":"keypress"),"keypress"==i&&e.length&&(i="keydown"),i}function g(t,e,n,s){D[t]=0,s||(s=f(e[0],[]));var r,a=function(){E=s,++D[t],u()},c=function(t){h(n,t),"keyup"!==s&&(M=i(t)),setTimeout(o,10)};for(r=0;r<e.length;++r)m(e[r],r<e.length-1?a:c,s,t,r)}function m(t,e,i,n,s){t=t.replace(/\s+/g," ");var o,a,h,c=t.split(" "),l=[];if(c.length>1)return g(t,c,e,i);for(h="+"===t?["+"]:t.split("+"),o=0;o<h.length;++o)a=h[o],S[a]&&(a=S[a]),i&&"keypress"!=i&&_[a]&&(a=_[a],l.push("shift")),d(a)&&l.push(a);i=f(a,l,i),C[a]||(C[a]=[]),r(a,l,i,!n,t),C[a][n?"unshift":"push"]({callback:e,modifiers:l,action:i,seq:n,level:s,combo:t})}function v(t,e,i){for(var n=0;n<t.length;++n)m(t[n],e,i)}for(var y,b,x={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},w={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},_={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},S={option:"alt",command:"meta","return":"enter",escape:"esc"},C={},T={},D={},M=!1,E=!1,k=1;20>k;++k)x[111+k]="f"+k;for(k=0;9>=k;++k)x[k+96]=k;e(document,"keypress",l),e(document,"keydown",l),e(document,"keyup",l);var L={bind:function(t,e,i){return v(t instanceof Array?t:[t],e,i),T[t+":"+i]=e,this},unbind:function(t,e){return T[t+":"+e]&&(delete T[t+":"+e],this.bind(t,function(){},e)),this},trigger:function(t,e){return T[t+":"+e](),this},reset:function(){return C={},T={},this}};t.exports=L},function(t,e,i){var n;!function(s,o){"use strict";function r(){a.READY||(_.determineEventTypes(),w.each(a.gestures,function(t){C.register(t)}),_.onTouch(a.DOCUMENT,v,C.detect),_.onTouch(a.DOCUMENT,y,C.detect),a.READY=!0)}var a=function T(t,e){return new T.Instance(t,e||{})};a.VERSION="1.1.3",a.defaults={behavior:{userSelect:"none",touchAction:"pan-y",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}},a.DOCUMENT=document,a.HAS_POINTEREVENTS=navigator.pointerEnabled||navigator.msPointerEnabled,a.HAS_TOUCHEVENTS="ontouchstart"in s,a.IS_MOBILE=/mobile|tablet|ip(ad|hone|od)|android|silk/i.test(navigator.userAgent),a.NO_MOUSEEVENTS=a.HAS_TOUCHEVENTS&&a.IS_MOBILE||a.HAS_POINTEREVENTS,a.CALCULATE_INTERVAL=25;var h={},c=a.DIRECTION_DOWN="down",l=a.DIRECTION_LEFT="left",d=a.DIRECTION_UP="up",u=a.DIRECTION_RIGHT="right",p=a.POINTER_MOUSE="mouse",f=a.POINTER_TOUCH="touch",g=a.POINTER_PEN="pen",m=a.EVENT_START="start",v=a.EVENT_MOVE="move",y=a.EVENT_END="end",b=a.EVENT_RELEASE="release",x=a.EVENT_TOUCH="touch";a.READY=!1,a.plugins=a.plugins||{},a.gestures=a.gestures||{};var w=a.utils={extend:function(t,e,i){for(var n in e)!e.hasOwnProperty(n)||t[n]!==o&&i||(t[n]=e[n]);return t},on:function(t,e,i){t.addEventListener(e,i,!1)},off:function(t,e,i){t.removeEventListener(e,i,!1)},each:function(t,e,i){var n,s;if("forEach"in t)t.forEach(e,i);else if(t.length!==o){for(n=0,s=t.length;s>n;n++)if(e.call(i,t[n],n,t)===!1)return}else for(n in t)if(t.hasOwnProperty(n)&&e.call(i,t[n],n,t)===!1)return},inStr:function(t,e){return t.indexOf(e)>-1},inArray:function(t,e){if(t.indexOf){var i=t.indexOf(e);return-1===i?!1:i}for(var n=0,s=t.length;s>n;n++)if(t[n]===e)return n;return!1},toArray:function(t){return Array.prototype.slice.call(t,0)},hasParent:function(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1},getCenter:function(t){var e=[],i=[],n=[],s=[],o=Math.min,r=Math.max;return 1===t.length?{pageX:t[0].pageX,pageY:t[0].pageY,clientX:t[0].clientX,clientY:t[0].clientY}:(w.each(t,function(t){e.push(t.pageX),i.push(t.pageY),n.push(t.clientX),s.push(t.clientY)}),{pageX:(o.apply(Math,e)+r.apply(Math,e))/2,pageY:(o.apply(Math,i)+r.apply(Math,i))/2,clientX:(o.apply(Math,n)+r.apply(Math,n))/2,clientY:(o.apply(Math,s)+r.apply(Math,s))/2})},getVelocity:function(t,e,i){return{x:Math.abs(e/t)||0,y:Math.abs(i/t)||0}},getAngle:function(t,e){var i=e.clientX-t.clientX,n=e.clientY-t.clientY;return 180*Math.atan2(n,i)/Math.PI},getDirection:function(t,e){var i=Math.abs(t.clientX-e.clientX),n=Math.abs(t.clientY-e.clientY);return i>=n?t.clientX-e.clientX>0?l:u:t.clientY-e.clientY>0?d:c},getDistance:function(t,e){var i=e.clientX-t.clientX,n=e.clientY-t.clientY;return Math.sqrt(i*i+n*n)},getScale:function(t,e){return t.length>=2&&e.length>=2?this.getDistance(e[0],e[1])/this.getDistance(t[0],t[1]):1},getRotation:function(t,e){return t.length>=2&&e.length>=2?this.getAngle(e[1],e[0])-this.getAngle(t[1],t[0]):0},isVertical:function(t){return t==d||t==c},setPrefixedCss:function(t,e,i,n){var s=["","Webkit","Moz","O","ms"];e=w.toCamelCase(e);for(var o=0;o<s.length;o++){var r=e;if(s[o]&&(r=s[o]+r.slice(0,1).toUpperCase()+r.slice(1)),r in t.style){t.style[r]=(null==n||n)&&i||"";break}}},toggleBehavior:function(t,e,i){if(e&&t&&t.style){w.each(e,function(e,n){w.setPrefixedCss(t,n,e,i)});var n=i&&function(){return!1};"none"==e.userSelect&&(t.onselectstart=n),"none"==e.userDrag&&(t.ondragstart=n)}},toCamelCase:function(t){return t.replace(/[_-]([a-z])/g,function(t){return t[1].toUpperCase()})}},_=a.event={preventMouseEvents:!1,started:!1,shouldDetect:!1,on:function(t,e,i,n){var s=e.split(" ");w.each(s,function(e){w.on(t,e,i),n&&n(e)})},off:function(t,e,i,n){var s=e.split(" ");w.each(s,function(e){w.off(t,e,i),n&&n(e)})},onTouch:function(t,e,i){var n=this,s=function(s){var o,r=s.type.toLowerCase(),h=a.HAS_POINTEREVENTS,c=w.inStr(r,"mouse");c&&n.preventMouseEvents||(c&&e==m&&0===s.button?(n.preventMouseEvents=!1,n.shouldDetect=!0):h&&e==m?n.shouldDetect=1===s.buttons||S.matchType(f,s):c||e!=m||(n.preventMouseEvents=!0,n.shouldDetect=!0),h&&e!=y&&S.updatePointer(e,s),n.shouldDetect&&(o=n.doDetect.call(n,s,e,t,i)),o==y&&(n.preventMouseEvents=!1,n.shouldDetect=!1,S.reset()),h&&e==y&&S.updatePointer(e,s))};return this.on(t,h[e],s),s},doDetect:function(t,e,i,n){var s=this.getTouchList(t,e),o=s.length,r=e,a=s.trigger,h=o;e==m?a=x:e==y&&(a=b,h=s.length-(t.changedTouches?t.changedTouches.length:1)),h>0&&this.started&&(r=v),this.started=!0;var c=this.collectEventData(i,r,s,t);return e!=y&&n.call(C,c),a&&(c.changedLength=h,c.eventType=a,n.call(C,c),c.eventType=r,delete c.changedLength),r==y&&(n.call(C,c),this.started=!1),r},determineEventTypes:function(){var t;return t=a.HAS_POINTEREVENTS?s.PointerEvent?["pointerdown","pointermove","pointerup pointercancel lostpointercapture"]:["MSPointerDown","MSPointerMove","MSPointerUp MSPointerCancel MSLostPointerCapture"]:a.NO_MOUSEEVENTS?["touchstart","touchmove","touchend touchcancel"]:["touchstart mousedown","touchmove mousemove","touchend touchcancel mouseup"],h[m]=t[0],h[v]=t[1],h[y]=t[2],h},getTouchList:function(t,e){if(a.HAS_POINTEREVENTS)return S.getTouchList();if(t.touches){if(e==v)return t.touches;var i=[],n=[].concat(w.toArray(t.touches),w.toArray(t.changedTouches)),s=[];return w.each(n,function(t){w.inArray(i,t.identifier)===!1&&s.push(t),i.push(t.identifier)}),s}return t.identifier=1,[t]},collectEventData:function(t,e,i,n){var s=f;return w.inStr(n.type,"mouse")||S.matchType(p,n)?s=p:S.matchType(g,n)&&(s=g),{center:w.getCenter(i),timeStamp:Date.now(),target:n.target,touches:i,eventType:e,pointerType:s,srcEvent:n,preventDefault:function(){var t=this.srcEvent;t.preventManipulation&&t.preventManipulation(),t.preventDefault&&t.preventDefault()},stopPropagation:function(){this.srcEvent.stopPropagation()},stopDetect:function(){return C.stopDetect()}}}},S=a.PointerEvent={pointers:{},getTouchList:function(){var t=[];return w.each(this.pointers,function(e){t.push(e)}),t},updatePointer:function(t,e){t==y||t!=y&&1!==e.buttons?delete this.pointers[e.pointerId]:(e.identifier=e.pointerId,this.pointers[e.pointerId]=e)},matchType:function(t,e){if(!e.pointerType)return!1;var i=e.pointerType,n={};return n[p]=i===(e.MSPOINTER_TYPE_MOUSE||p),n[f]=i===(e.MSPOINTER_TYPE_TOUCH||f),n[g]=i===(e.MSPOINTER_TYPE_PEN||g),n[t]},reset:function(){this.pointers={}}},C=a.detection={gestures:[],current:null,previous:null,stopped:!1,startDetect:function(t,e){this.current||(this.stopped=!1,this.current={inst:t,startEvent:w.extend({},e),lastEvent:!1,lastCalcEvent:!1,futureCalcEvent:!1,lastCalcData:{},name:""},this.detect(e))},detect:function(t){if(this.current&&!this.stopped){t=this.extendEventData(t);var e=this.current.inst,i=e.options;return w.each(this.gestures,function(n){!this.stopped&&e.enabled&&i[n.name]&&n.handler.call(n,t,e)},this),this.current&&(this.current.lastEvent=t),t.eventType==y&&this.stopDetect(),t}},stopDetect:function(){this.previous=w.extend({},this.current),this.current=null,this.stopped=!0},getCalculatedData:function(t,e,i,n,s){var o=this.current,r=!1,h=o.lastCalcEvent,c=o.lastCalcData;h&&t.timeStamp-h.timeStamp>a.CALCULATE_INTERVAL&&(e=h.center,i=t.timeStamp-h.timeStamp,n=t.center.clientX-h.center.clientX,s=t.center.clientY-h.center.clientY,r=!0),(t.eventType==x||t.eventType==b)&&(o.futureCalcEvent=t),(!o.lastCalcEvent||r)&&(c.velocity=w.getVelocity(i,n,s),c.angle=w.getAngle(e,t.center),c.direction=w.getDirection(e,t.center),o.lastCalcEvent=o.futureCalcEvent||t,o.futureCalcEvent=t),t.velocityX=c.velocity.x,t.velocityY=c.velocity.y,t.interimAngle=c.angle,t.interimDirection=c.direction},extendEventData:function(t){var e=this.current,i=e.startEvent,n=e.lastEvent||i;(t.eventType==x||t.eventType==b)&&(i.touches=[],w.each(t.touches,function(t){i.touches.push({clientX:t.clientX,clientY:t.clientY})}));var s=t.timeStamp-i.timeStamp,o=t.center.clientX-i.center.clientX,r=t.center.clientY-i.center.clientY;return this.getCalculatedData(t,n.center,s,o,r),w.extend(t,{startEvent:i,deltaTime:s,deltaX:o,deltaY:r,distance:w.getDistance(i.center,t.center),angle:w.getAngle(i.center,t.center),direction:w.getDirection(i.center,t.center),scale:w.getScale(i.touches,t.touches),rotation:w.getRotation(i.touches,t.touches)}),t},register:function(t){var e=t.defaults||{};return e[t.name]===o&&(e[t.name]=!0),w.extend(a.defaults,e,!0),t.index=t.index||1e3,this.gestures.push(t),this.gestures.sort(function(t,e){return t.index<e.index?-1:t.index>e.index?1:0}),this.gestures}};a.Instance=function(t,e){var i=this;r(),this.element=t,this.enabled=!0,w.each(e,function(t,i){delete e[i],e[w.toCamelCase(i)]=t}),this.options=w.extend(w.extend({},a.defaults),e||{}),this.options.behavior&&w.toggleBehavior(this.element,this.options.behavior,!0),this.eventStartHandler=_.onTouch(t,m,function(t){i.enabled&&t.eventType==m?C.startDetect(i,t):t.eventType==x&&C.detect(t)}),this.eventHandlers=[]},a.Instance.prototype={on:function(t,e){var i=this;return _.on(i.element,t,e,function(t){i.eventHandlers.push({gesture:t,handler:e})}),i},off:function(t,e){var i=this;return _.off(i.element,t,e,function(t){var n=w.inArray({gesture:t,handler:e});n!==!1&&i.eventHandlers.splice(n,1)}),i},trigger:function(t,e){e||(e={});var i=a.DOCUMENT.createEvent("Event");i.initEvent(t,!0,!0),i.gesture=e;var n=this.element;return w.hasParent(e.target,n)&&(n=e.target),n.dispatchEvent(i),this},enable:function(t){return this.enabled=t,this},dispose:function(){var t,e;for(w.toggleBehavior(this.element,this.options.behavior,!1),t=-1;e=this.eventHandlers[++t];)w.off(this.element,e.gesture,e.handler);return this.eventHandlers=[],_.off(this.element,h[m],this.eventStartHandler),null}},function(t){function e(e,n){var s=C.current;if(!(n.options.dragMaxTouches>0&&e.touches.length>n.options.dragMaxTouches))switch(e.eventType){case m:i=!1;break;case v:if(e.distance<n.options.dragMinDistance&&s.name!=t)return;var o=s.startEvent.center;if(s.name!=t&&(s.name=t,n.options.dragDistanceCorrection&&e.distance>0)){var r=Math.abs(n.options.dragMinDistance/e.distance);o.pageX+=e.deltaX*r,o.pageY+=e.deltaY*r,o.clientX+=e.deltaX*r,o.clientY+=e.deltaY*r,e=C.extendEventData(e)}(s.lastEvent.dragLockToAxis||n.options.dragLockToAxis&&n.options.dragLockMinDistance<=e.distance)&&(e.dragLockToAxis=!0);var a=s.lastEvent.direction;e.dragLockToAxis&&a!==e.direction&&(e.direction=w.isVertical(a)?e.deltaY<0?d:c:e.deltaX<0?l:u),i||(n.trigger(t+"start",e),i=!0),n.trigger(t,e),n.trigger(t+e.direction,e);var h=w.isVertical(e.direction);(n.options.dragBlockVertical&&h||n.options.dragBlockHorizontal&&!h)&&e.preventDefault();break;case b:i&&e.changedLength<=n.options.dragMaxTouches&&(n.trigger(t+"end",e),i=!1);break;case y:i=!1}}var i=!1;a.gestures.Drag={name:t,index:50,handler:e,defaults:{dragMinDistance:10,dragDistanceCorrection:!0,dragMaxTouches:1,dragBlockHorizontal:!1,dragBlockVertical:!1,dragLockToAxis:!1,dragLockMinDistance:25}}}("drag"),a.gestures.Gesture={name:"gesture",index:1337,handler:function(t,e){e.trigger(this.name,t)}},function(t){function e(e,n){var s=n.options,o=C.current;switch(e.eventType){case m:clearTimeout(i),o.name=t,i=setTimeout(function(){o&&o.name==t&&n.trigger(t,e)},s.holdTimeout);break;case v:e.distance>s.holdThreshold&&clearTimeout(i);break;case b:clearTimeout(i)}}var i;a.gestures.Hold={name:t,index:10,defaults:{holdTimeout:500,holdThreshold:2},handler:e}}("hold"),a.gestures.Release={name:"release",index:1/0,handler:function(t,e){t.eventType==b&&e.trigger(this.name,t)}},a.gestures.Swipe={name:"swipe",index:40,defaults:{swipeMinTouches:1,swipeMaxTouches:1,swipeVelocityX:.6,swipeVelocityY:.6},handler:function(t,e){if(t.eventType==b){var i=t.touches.length,n=e.options;if(i<n.swipeMinTouches||i>n.swipeMaxTouches)return;(t.velocityX>n.swipeVelocityX||t.velocityY>n.swipeVelocityY)&&(e.trigger(this.name,t),e.trigger(this.name+t.direction,t))}}},function(t){function e(e,n){var s,o,r=n.options,a=C.current,h=C.previous;switch(e.eventType){case m:i=!1;break;case v:i=i||e.distance>r.tapMaxDistance;break;case y:!w.inStr(e.srcEvent.type,"cancel")&&e.deltaTime<r.tapMaxTime&&!i&&(s=h&&h.lastEvent&&e.timeStamp-h.lastEvent.timeStamp,o=!1,h&&h.name==t&&s&&s<r.doubleTapInterval&&e.distance<r.doubleTapDistance&&(n.trigger("doubletap",e),o=!0),(!o||r.tapAlways)&&(a.name=t,n.trigger(a.name,e)))}}var i=!1;a.gestures.Tap={name:t,index:100,handler:e,defaults:{tapMaxTime:250,tapMaxDistance:10,tapAlways:!0,doubleTapDistance:20,doubleTapInterval:300}}}("tap"),a.gestures.Touch={name:"touch",index:-1/0,defaults:{preventDefault:!1,preventMouse:!1},handler:function(t,e){return e.options.preventMouse&&t.pointerType==p?void t.stopDetect():(e.options.preventDefault&&t.preventDefault(),void(t.eventType==x&&e.trigger("touch",t)))}},function(t){function e(e,n){switch(e.eventType){case m:i=!1;break;case v:if(e.touches.length<2)return;var s=Math.abs(1-e.scale),o=Math.abs(e.rotation);if(s<n.options.transformMinScale&&o<n.options.transformMinRotation)return;C.current.name=t,i||(n.trigger(t+"start",e),i=!0),n.trigger(t,e),o>n.options.transformMinRotation&&n.trigger("rotate",e),s>n.options.transformMinScale&&(n.trigger("pinch",e),n.trigger("pinch"+(e.scale<1?"in":"out"),e));break;case b:i&&e.changedLength<2&&(n.trigger(t+"end",e),i=!1)}}var i=!1;a.gestures.Transform={name:t,index:45,defaults:{transformMinScale:.01,transformMinRotation:1},handler:e}}("transform"),n=function(){return a}.call(e,i,e,t),!(n!==o&&(t.exports=n))}(window)},function(t,e){e.startWithClustering=function(){this.clusterToFit(this.constants.clustering.initialMaxNodes,!0),this.updateLabels(),this.stabilize&&this._stabilize(),this.start()},e.clusterToFit=function(t,e){for(var i=this.nodeIndices.length,n=50,s=0;i>t&&n>s;)s%3==0?(this.forceAggregateHubs(!0),this.normalizeClusterLevels()):this.increaseClusterLevel(),i=this.nodeIndices.length,s+=1;s>0&&1==e&&this.repositionNodes(),this._updateCalculationNodes()},e.openCluster=function(t){var e=this.moving;if(t.clusterSize>this.constants.clustering.sectorThreshold&&this._nodeInActiveArea(t)&&("default"!=this._sector()||1!=this.nodeIndices.length)){this._addSector(t);for(var i=0;this.nodeIndices.length<this.constants.clustering.initialMaxNodes&&10>i;)this.decreaseClusterLevel(),i+=1}else this._expandClusterNode(t,!1,!0),this._updateNodeIndexList(),this._updateDynamicEdges(),this._updateCalculationNodes(),this.updateLabels();this.moving!=e&&this.start()},e.updateClustersDefault=function(){1==this.constants.clustering.enabled&&this.updateClusters(0,!1,!1)},e.increaseClusterLevel=function(){this.updateClusters(-1,!1,!0)},e.decreaseClusterLevel=function(){this.updateClusters(1,!1,!0)},e.updateClusters=function(t,e,i,n){var s=this.moving,o=this.nodeIndices.length;this.previousScale>this.scale&&0==t&&this._collapseSector(),this.previousScale>this.scale||-1==t?this._formClusters(i):(this.previousScale<this.scale||1==t)&&(1==i?this._openClusters(e,i):this._openClustersBySize()),this._updateNodeIndexList(),this.nodeIndices.length==o&&(this.previousScale>this.scale||-1==t)&&(this._aggregateHubs(i),this._updateNodeIndexList()),(this.previousScale>this.scale||-1==t)&&(this.handleChains(),this._updateNodeIndexList()),this.previousScale=this.scale,this._updateDynamicEdges(),this.updateLabels(),this.nodeIndices.length<o&&(this.clusterSession+=1,this.normalizeClusterLevels()),(0==n||void 0===n)&&this.moving!=s&&this.start(),this._updateCalculationNodes()},e.handleChains=function(){var t=this._getChainFraction();t>this.constants.clustering.chainThreshold&&this._reduceAmountOfChains(1-this.constants.clustering.chainThreshold/t)},e._aggregateHubs=function(t){this._getHubSize(),this._formClustersByHub(t,!1)},e.forceAggregateHubs=function(t){var e=this.moving,i=this.nodeIndices.length;this._aggregateHubs(!0),this._updateNodeIndexList(),this._updateDynamicEdges(),this.updateLabels(),this.nodeIndices.length!=i&&(this.clusterSession+=1),(0==t||void 0===t)&&this.moving!=e&&this.start()},e._openClustersBySize=function(){for(var t in this.nodes)if(this.nodes.hasOwnProperty(t)){var e=this.nodes[t];1==e.inView()&&(e.width*this.scale>this.constants.clustering.screenSizeThreshold*this.frame.canvas.clientWidth||e.height*this.scale>this.constants.clustering.screenSizeThreshold*this.frame.canvas.clientHeight)&&this.openCluster(e)}},e._openClusters=function(t,e){for(var i=0;i<this.nodeIndices.length;i++){var n=this.nodes[this.nodeIndices[i]];this._expandClusterNode(n,t,e),this._updateCalculationNodes()}},e._expandClusterNode=function(t,e,i,n){if(t.clusterSize>1&&(t.clusterSize<this.constants.clustering.sectorThreshold&&(n=!0),e=n?!0:e,t.formationScale<this.scale||1==i))for(var s in t.containedNodes)if(t.containedNodes.hasOwnProperty(s)){var o=t.containedNodes[s];1==i?(o.clusterSession==t.clusterSessions[t.clusterSessions.length-1]||n)&&this._expelChildFromParent(t,s,e,i,n):this._nodeInActiveArea(t)&&this._expelChildFromParent(t,s,e,i,n)}},e._expelChildFromParent=function(t,e,i,n,s){var o=t.containedNodes[e];if(o.formationScale<this.scale||1==n){this._unselectAll(),this.nodes[e]=o,this._releaseContainedEdges(t,o),this._connectEdgeBackToChild(t,o),this._validateEdges(t),t.mass-=o.mass,t.clusterSize-=o.clusterSize,t.fontSize=Math.min(this.constants.clustering.maxFontSize,this.constants.nodes.fontSize+this.constants.clustering.fontSizeMultiplier*t.clusterSize),t.dynamicEdgesLength=t.dynamicEdges.length,o.x=t.x+t.growthIndicator*(.5-Math.random()),o.y=t.y+t.growthIndicator*(.5-Math.random()),delete t.containedNodes[e];var r=!1;for(var a in t.containedNodes)if(t.containedNodes.hasOwnProperty(a)&&t.containedNodes[a].clusterSession==o.clusterSession){r=!0;break}0==r&&t.clusterSessions.pop(),this._repositionBezierNodes(o),o.clusterSession=0,t.clearSizeCache(),this.moving=!0}1==i&&this._expandClusterNode(o,i,n,s)},e._repositionBezierNodes=function(t){for(var e=0;e<t.dynamicEdges.length;e++)t.dynamicEdges[e].positionBezierNode()},e._formClusters=function(t){0==t?this._formClustersByZoom():this._forceClustersByZoom()},e._formClustersByZoom=function(){var t,e,i,n=this.constants.clustering.clusterEdgeThreshold/this.scale;for(var s in this.edges)if(this.edges.hasOwnProperty(s)){var o=this.edges[s];if(o.connected&&o.toId!=o.fromId&&(t=o.to.x-o.from.x,e=o.to.y-o.from.y,i=Math.sqrt(t*t+e*e),n>i)){var r=o.from,a=o.to;o.to.mass>o.from.mass&&(r=o.to,a=o.from),1==a.dynamicEdgesLength?this._addToCluster(r,a,!1):1==r.dynamicEdgesLength&&this._addToCluster(a,r,!1)}}},e._forceClustersByZoom=function(){for(var t in this.nodes)if(this.nodes.hasOwnProperty(t)){var e=this.nodes[t];if(1==e.dynamicEdgesLength&&0!=e.dynamicEdges.length){var i=e.dynamicEdges[0],n=i.toId==e.id?this.nodes[i.fromId]:this.nodes[i.toId];e.id!=n.id&&(n.mass>e.mass?this._addToCluster(n,e,!0):this._addToCluster(e,n,!0))}}},e._clusterToSmallestNeighbour=function(t){for(var e=-1,i=null,n=0;n<t.dynamicEdges.length;n++)if(void 0!==t.dynamicEdges[n]){var s=null;t.dynamicEdges[n].fromId!=t.id?s=t.dynamicEdges[n].from:t.dynamicEdges[n].toId!=t.id&&(s=t.dynamicEdges[n].to),null!=s&&e>s.clusterSessions.length&&(e=s.clusterSessions.length,i=s)}null!=s&&void 0!==this.nodes[s.id]&&this._addToCluster(s,t,!0)},e._formClustersByHub=function(t,e){for(var i in this.nodes)this.nodes.hasOwnProperty(i)&&this._formClusterFromHub(this.nodes[i],t,e)},e._formClusterFromHub=function(t,e,i,n){if(void 0===n&&(n=0),t.dynamicEdgesLength>=this.hubThreshold&&0==i||t.dynamicEdgesLength==this.hubThreshold&&1==i){for(var s,o,r,a=this.constants.clustering.clusterEdgeThreshold/this.scale,h=!1,c=[],l=t.dynamicEdges.length,d=0;l>d;d++)c.push(t.dynamicEdges[d].id);if(0==e)for(h=!1,d=0;l>d;d++){var u=this.edges[c[d]];if(void 0!==u&&u.connected&&u.toId!=u.fromId&&(s=u.to.x-u.from.x,o=u.to.y-u.from.y,r=Math.sqrt(s*s+o*o),a>r)){h=!0;break}}if(!e&&h||e)for(d=0;l>d;d++)if(u=this.edges[c[d]],void 0!==u){var p=this.nodes[u.fromId==t.id?u.toId:u.fromId];p.dynamicEdges.length<=this.hubThreshold+n&&p.id!=t.id&&this._addToCluster(t,p,e)}}},e._addToCluster=function(t,e,i){t.containedNodes[e.id]=e;for(var n=0;n<e.dynamicEdges.length;n++){var s=e.dynamicEdges[n];s.toId==t.id||s.fromId==t.id?this._addToContainedEdges(t,e,s):this._connectEdgeToCluster(t,e,s)}e.dynamicEdges=[],this._containCircularEdgesFromNode(t,e),delete this.nodes[e.id];var o=t.mass;e.clusterSession=this.clusterSession,t.mass+=e.mass,t.clusterSize+=e.clusterSize,t.fontSize=Math.min(this.constants.clustering.maxFontSize,this.constants.nodes.fontSize+this.constants.clustering.fontSizeMultiplier*t.clusterSize),t.clusterSessions[t.clusterSessions.length-1]!=this.clusterSession&&t.clusterSessions.push(this.clusterSession),t.formationScale=1==i?0:this.scale,t.clearSizeCache(),t.containedNodes[e.id].formationScale=t.formationScale,e.clearVelocity(),t.updateVelocity(o),this.moving=!0},e._updateDynamicEdges=function(){for(var t=0;t<this.nodeIndices.length;t++){var e=this.nodes[this.nodeIndices[t]];e.dynamicEdgesLength=e.dynamicEdges.length;var i=0;if(e.dynamicEdgesLength>1)for(var n=0;n<e.dynamicEdgesLength-1;n++)for(var s=e.dynamicEdges[n].toId,o=e.dynamicEdges[n].fromId,r=n+1;r<e.dynamicEdgesLength;r++)(e.dynamicEdges[r].toId==s&&e.dynamicEdges[r].fromId==o||e.dynamicEdges[r].fromId==s&&e.dynamicEdges[r].toId==o)&&(i+=1);e.dynamicEdgesLength-=i}},e._addToContainedEdges=function(t,e,i){t.containedEdges.hasOwnProperty(e.id)||(t.containedEdges[e.id]=[]),t.containedEdges[e.id].push(i),delete this.edges[i.id];for(var n=0;n<t.dynamicEdges.length;n++)if(t.dynamicEdges[n].id==i.id){t.dynamicEdges.splice(n,1);break}},e._connectEdgeToCluster=function(t,e,i){i.toId==i.fromId?this._addToContainedEdges(t,e,i):(i.toId==e.id?(i.originalToId.push(e.id),i.to=t,i.toId=t.id):(i.originalFromId.push(e.id),i.from=t,i.fromId=t.id),this._addToReroutedEdges(t,e,i))},e._containCircularEdgesFromNode=function(t,e){for(var i=0;i<t.dynamicEdges.length;i++){var n=t.dynamicEdges[i];n.toId==n.fromId&&this._addToContainedEdges(t,e,n)}},e._addToReroutedEdges=function(t,e,i){t.reroutedEdges.hasOwnProperty(e.id)||(t.reroutedEdges[e.id]=[]),t.reroutedEdges[e.id].push(i),t.dynamicEdges.push(i)},e._connectEdgeBackToChild=function(t,e){if(t.reroutedEdges.hasOwnProperty(e.id)){for(var i=0;i<t.reroutedEdges[e.id].length;i++){var n=t.reroutedEdges[e.id][i];n.originalFromId[n.originalFromId.length-1]==e.id?(n.originalFromId.pop(),n.fromId=e.id,n.from=e):(n.originalToId.pop(),n.toId=e.id,n.to=e),e.dynamicEdges.push(n);for(var s=0;s<t.dynamicEdges.length;s++)if(t.dynamicEdges[s].id==n.id){t.dynamicEdges.splice(s,1);break}}delete t.reroutedEdges[e.id]}},e._validateEdges=function(t){for(var e=0;e<t.dynamicEdges.length;e++){var i=t.dynamicEdges[e];t.id!=i.toId&&t.id!=i.fromId&&t.dynamicEdges.splice(e,1)}},e._releaseContainedEdges=function(t,e){for(var i=0;i<t.containedEdges[e.id].length;i++){var n=t.containedEdges[e.id][i];this.edges[n.id]=n,e.dynamicEdges.push(n),t.dynamicEdges.push(n)}delete t.containedEdges[e.id]},e.updateLabels=function(){var t;for(t in this.nodes)if(this.nodes.hasOwnProperty(t)){var e=this.nodes[t];e.clusterSize>1&&(e.label="[".concat(String(e.clusterSize),"]"))}for(t in this.nodes)this.nodes.hasOwnProperty(t)&&(e=this.nodes[t],1==e.clusterSize&&(e.label=void 0!==e.originalLabel?e.originalLabel:String(e.id)))},e.normalizeClusterLevels=function(){var t,e=0,i=1e9,n=0;for(t in this.nodes)this.nodes.hasOwnProperty(t)&&(n=this.nodes[t].clusterSessions.length,n>e&&(e=n),i>n&&(i=n));if(e-i>this.constants.clustering.clusterLevelDifference){var s=this.nodeIndices.length,o=e-this.constants.clustering.clusterLevelDifference;for(t in this.nodes)this.nodes.hasOwnProperty(t)&&this.nodes[t].clusterSessions.length<o&&this._clusterToSmallestNeighbour(this.nodes[t]);this._updateNodeIndexList(),this._updateDynamicEdges(),this.nodeIndices.length!=s&&(this.clusterSession+=1)}},e._nodeInActiveArea=function(t){return Math.abs(t.x-this.areaCenter.x)<=this.constants.clustering.activeAreaBoxSize/this.scale&&Math.abs(t.y-this.areaCenter.y)<=this.constants.clustering.activeAreaBoxSize/this.scale},e.repositionNodes=function(){for(var t=0;t<this.nodeIndices.length;t++){var e=this.nodes[this.nodeIndices[t]];if(0==e.xFixed||0==e.yFixed){var i=1*this.nodeIndices.length*Math.min(100,e.mass),n=2*Math.PI*Math.random();
0==e.xFixed&&(e.x=i*Math.cos(n)),0==e.yFixed&&(e.y=i*Math.sin(n)),this._repositionBezierNodes(e)}}},e._getHubSize=function(){for(var t=0,e=0,i=0,n=0,s=0;s<this.nodeIndices.length;s++){var o=this.nodes[this.nodeIndices[s]];o.dynamicEdgesLength>n&&(n=o.dynamicEdgesLength),t+=o.dynamicEdgesLength,e+=Math.pow(o.dynamicEdgesLength,2),i+=1}t/=i,e/=i;var r=e-Math.pow(t,2),a=Math.sqrt(r);this.hubThreshold=Math.floor(t+2*a),this.hubThreshold>n&&(this.hubThreshold=n)},e._reduceAmountOfChains=function(t){this.hubThreshold=2;var e=Math.floor(this.nodeIndices.length*t);for(var i in this.nodes)this.nodes.hasOwnProperty(i)&&2==this.nodes[i].dynamicEdgesLength&&this.nodes[i].dynamicEdges.length>=2&&e>0&&(this._formClusterFromHub(this.nodes[i],!0,!0,1),e-=1)},e._getChainFraction=function(){var t=0,e=0;for(var i in this.nodes)this.nodes.hasOwnProperty(i)&&(2==this.nodes[i].dynamicEdgesLength&&this.nodes[i].dynamicEdges.length>=2&&(t+=1),e+=1);return t/e}},function(t,e,i){var n=i(1);e._putDataInSector=function(){this.sectors.active[this._sector()].nodes=this.nodes,this.sectors.active[this._sector()].edges=this.edges,this.sectors.active[this._sector()].nodeIndices=this.nodeIndices},e._switchToSector=function(t,e){void 0===e||"active"==e?this._switchToActiveSector(t):this._switchToFrozenSector(t)},e._switchToActiveSector=function(t){this.nodeIndices=this.sectors.active[t].nodeIndices,this.nodes=this.sectors.active[t].nodes,this.edges=this.sectors.active[t].edges},e._switchToSupportSector=function(){this.nodeIndices=this.sectors.support.nodeIndices,this.nodes=this.sectors.support.nodes,this.edges=this.sectors.support.edges},e._switchToFrozenSector=function(t){this.nodeIndices=this.sectors.frozen[t].nodeIndices,this.nodes=this.sectors.frozen[t].nodes,this.edges=this.sectors.frozen[t].edges},e._loadLatestSector=function(){this._switchToSector(this._sector())},e._sector=function(){return this.activeSector[this.activeSector.length-1]},e._previousSector=function(){if(this.activeSector.length>1)return this.activeSector[this.activeSector.length-2];throw new TypeError("there are not enough sectors in the this.activeSector array.")},e._setActiveSector=function(t){this.activeSector.push(t)},e._forgetLastSector=function(){this.activeSector.pop()},e._createNewSector=function(t){this.sectors.active[t]={nodes:{},edges:{},nodeIndices:[],formationScale:this.scale,drawingNode:void 0},this.sectors.active[t].drawingNode=new Node({id:t,color:{background:"#eaefef",border:"495c5e"}},{},{},this.constants),this.sectors.active[t].drawingNode.clusterSize=2},e._deleteActiveSector=function(t){delete this.sectors.active[t]},e._deleteFrozenSector=function(t){delete this.sectors.frozen[t]},e._freezeSector=function(t){this.sectors.frozen[t]=this.sectors.active[t],this._deleteActiveSector(t)},e._activateSector=function(t){this.sectors.active[t]=this.sectors.frozen[t],this._deleteFrozenSector(t)},e._mergeThisWithFrozen=function(t){for(var e in this.nodes)this.nodes.hasOwnProperty(e)&&(this.sectors.frozen[t].nodes[e]=this.nodes[e]);for(var i in this.edges)this.edges.hasOwnProperty(i)&&(this.sectors.frozen[t].edges[i]=this.edges[i]);for(var n=0;n<this.nodeIndices.length;n++)this.sectors.frozen[t].nodeIndices.push(this.nodeIndices[n])},e._collapseThisToSingleCluster=function(){this.clusterToFit(1,!1)},e._addSector=function(t){var e=this._sector();delete this.nodes[t.id];var i=n.randomUUID();this._freezeSector(e),this._createNewSector(i),this._setActiveSector(i),this._switchToSector(this._sector()),this.nodes[t.id]=t},e._collapseSector=function(){var t=this._sector();if("default"!=t&&(1==this.nodeIndices.length||this.sectors.active[t].drawingNode.width*this.scale<this.constants.clustering.screenSizeThreshold*this.frame.canvas.clientWidth||this.sectors.active[t].drawingNode.height*this.scale<this.constants.clustering.screenSizeThreshold*this.frame.canvas.clientHeight)){var e=this._previousSector();this._collapseThisToSingleCluster(),this._mergeThisWithFrozen(e),this._deleteActiveSector(t),this._activateSector(e),this._switchToSector(e),this._forgetLastSector(),this._updateNodeIndexList(),this._updateCalculationNodes()}},e._doInAllActiveSectors=function(t,e){if(void 0===e)for(var i in this.sectors.active)this.sectors.active.hasOwnProperty(i)&&(this._switchToActiveSector(i),this[t]());else for(var i in this.sectors.active)if(this.sectors.active.hasOwnProperty(i)){this._switchToActiveSector(i);var n=Array.prototype.splice.call(arguments,1);n.length>1?this[t](n[0],n[1]):this[t](e)}this._loadLatestSector()},e._doInSupportSector=function(t,e){if(void 0===e)this._switchToSupportSector(),this[t]();else{this._switchToSupportSector();var i=Array.prototype.splice.call(arguments,1);i.length>1?this[t](i[0],i[1]):this[t](e)}this._loadLatestSector()},e._doInAllFrozenSectors=function(t,e){if(void 0===e)for(var i in this.sectors.frozen)this.sectors.frozen.hasOwnProperty(i)&&(this._switchToFrozenSector(i),this[t]());else for(var i in this.sectors.frozen)if(this.sectors.frozen.hasOwnProperty(i)){this._switchToFrozenSector(i);var n=Array.prototype.splice.call(arguments,1);n.length>1?this[t](n[0],n[1]):this[t](e)}this._loadLatestSector()},e._doInAllSectors=function(t,e){var i=Array.prototype.splice.call(arguments,1);void 0===e?(this._doInAllActiveSectors(t),this._doInAllFrozenSectors(t)):i.length>1?(this._doInAllActiveSectors(t,i[0],i[1]),this._doInAllFrozenSectors(t,i[0],i[1])):(this._doInAllActiveSectors(t,e),this._doInAllFrozenSectors(t,e))},e._clearNodeIndexList=function(){var t=this._sector();this.sectors.active[t].nodeIndices=[],this.nodeIndices=this.sectors.active[t].nodeIndices},e._drawSectorNodes=function(t,e){var i,n=1e9,s=-1e9,o=1e9,r=-1e9;for(var a in this.sectors[e])if(this.sectors[e].hasOwnProperty(a)&&void 0!==this.sectors[e][a].drawingNode){this._switchToSector(a,e),n=1e9,s=-1e9,o=1e9,r=-1e9;for(var h in this.nodes)this.nodes.hasOwnProperty(h)&&(i=this.nodes[h],i.resize(t),o>i.x-.5*i.width&&(o=i.x-.5*i.width),r<i.x+.5*i.width&&(r=i.x+.5*i.width),n>i.y-.5*i.height&&(n=i.y-.5*i.height),s<i.y+.5*i.height&&(s=i.y+.5*i.height));i=this.sectors[e][a].drawingNode,i.x=.5*(r+o),i.y=.5*(s+n),i.width=2*(i.x-o),i.height=2*(i.y-n),i.radius=Math.sqrt(Math.pow(.5*i.width,2)+Math.pow(.5*i.height,2)),i.setScale(this.scale),i._drawCircle(t)}},e._drawAllSectorNodes=function(t){this._drawSectorNodes(t,"frozen"),this._drawSectorNodes(t,"active"),this._loadLatestSector()}},function(t,e,i){var n=i(36);e._getNodesOverlappingWith=function(t,e){var i=this.nodes;for(var n in i)i.hasOwnProperty(n)&&i[n].isOverlappingWith(t)&&e.push(n)},e._getAllNodesOverlappingWith=function(t){var e=[];return this._doInAllActiveSectors("_getNodesOverlappingWith",t,e),e},e._pointerToPositionObject=function(t){var e=this._XconvertDOMtoCanvas(t.x),i=this._YconvertDOMtoCanvas(t.y);return{left:e,top:i,right:e,bottom:i}},e._getNodeAt=function(t){var e=this._pointerToPositionObject(t),i=this._getAllNodesOverlappingWith(e);return i.length>0?this.nodes[i[i.length-1]]:null},e._getEdgesOverlappingWith=function(t,e){var i=this.edges;for(var n in i)i.hasOwnProperty(n)&&i[n].isOverlappingWith(t)&&e.push(n)},e._getAllEdgesOverlappingWith=function(t){var e=[];return this._doInAllActiveSectors("_getEdgesOverlappingWith",t,e),e},e._getEdgeAt=function(t){var e=this._pointerToPositionObject(t),i=this._getAllEdgesOverlappingWith(e);return i.length>0?this.edges[i[i.length-1]]:null},e._addToSelection=function(t){t instanceof n?this.selectionObj.nodes[t.id]=t:this.selectionObj.edges[t.id]=t},e._addToHover=function(t){t instanceof n?this.hoverObj.nodes[t.id]=t:this.hoverObj.edges[t.id]=t},e._removeFromSelection=function(t){t instanceof n?delete this.selectionObj.nodes[t.id]:delete this.selectionObj.edges[t.id]},e._unselectAll=function(t){void 0===t&&(t=!1);for(var e in this.selectionObj.nodes)this.selectionObj.nodes.hasOwnProperty(e)&&this.selectionObj.nodes[e].unselect();for(var i in this.selectionObj.edges)this.selectionObj.edges.hasOwnProperty(i)&&this.selectionObj.edges[i].unselect();this.selectionObj={nodes:{},edges:{}},0==t&&this.emit("select",this.getSelection())},e._unselectClusters=function(t){void 0===t&&(t=!1);for(var e in this.selectionObj.nodes)this.selectionObj.nodes.hasOwnProperty(e)&&this.selectionObj.nodes[e].clusterSize>1&&(this.selectionObj.nodes[e].unselect(),this._removeFromSelection(this.selectionObj.nodes[e]));0==t&&this.emit("select",this.getSelection())},e._getSelectedNodeCount=function(){var t=0;for(var e in this.selectionObj.nodes)this.selectionObj.nodes.hasOwnProperty(e)&&(t+=1);return t},e._getSelectedNode=function(){for(var t in this.selectionObj.nodes)if(this.selectionObj.nodes.hasOwnProperty(t))return this.selectionObj.nodes[t];return null},e._getSelectedEdge=function(){for(var t in this.selectionObj.edges)if(this.selectionObj.edges.hasOwnProperty(t))return this.selectionObj.edges[t];return null},e._getSelectedEdgeCount=function(){var t=0;for(var e in this.selectionObj.edges)this.selectionObj.edges.hasOwnProperty(e)&&(t+=1);return t},e._getSelectedObjectCount=function(){var t=0;for(var e in this.selectionObj.nodes)this.selectionObj.nodes.hasOwnProperty(e)&&(t+=1);for(var i in this.selectionObj.edges)this.selectionObj.edges.hasOwnProperty(i)&&(t+=1);return t},e._selectionIsEmpty=function(){for(var t in this.selectionObj.nodes)if(this.selectionObj.nodes.hasOwnProperty(t))return!1;for(var e in this.selectionObj.edges)if(this.selectionObj.edges.hasOwnProperty(e))return!1;return!0},e._clusterInSelection=function(){for(var t in this.selectionObj.nodes)if(this.selectionObj.nodes.hasOwnProperty(t)&&this.selectionObj.nodes[t].clusterSize>1)return!0;return!1},e._selectConnectedEdges=function(t){for(var e=0;e<t.dynamicEdges.length;e++){var i=t.dynamicEdges[e];i.select(),this._addToSelection(i)}},e._hoverConnectedEdges=function(t){for(var e=0;e<t.dynamicEdges.length;e++){var i=t.dynamicEdges[e];i.hover=!0,this._addToHover(i)}},e._unselectConnectedEdges=function(t){for(var e=0;e<t.dynamicEdges.length;e++){var i=t.dynamicEdges[e];i.unselect(),this._removeFromSelection(i)}},e._selectObject=function(t,e,i,s){void 0===i&&(i=!1),void 0===s&&(s=!0),0==this._selectionIsEmpty()&&0==e&&0==this.forceAppendSelection&&this._unselectAll(!0),0==t.selected?(t.select(),this._addToSelection(t),t instanceof n&&0==this.blockConnectingEdgeSelection&&1==s&&this._selectConnectedEdges(t)):(t.unselect(),this._removeFromSelection(t)),0==i&&this.emit("select",this.getSelection())},e._blurObject=function(t){1==t.hover&&(t.hover=!1,this.emit("blurNode",{node:t.id}))},e._hoverObject=function(t){0==t.hover&&(t.hover=!0,this._addToHover(t),t instanceof n&&this.emit("hoverNode",{node:t.id})),t instanceof n&&this._hoverConnectedEdges(t)},e._handleTouch=function(){},e._handleTap=function(t){var e=this._getNodeAt(t);if(null!=e)this._selectObject(e,!1);else{var i=this._getEdgeAt(t);null!=i?this._selectObject(i,!1):this._unselectAll()}this.emit("click",this.getSelection()),this._redraw()},e._handleDoubleTap=function(t){var e=this._getNodeAt(t);null!=e&&void 0!==e&&(this.areaCenter={x:this._XconvertDOMtoCanvas(t.x),y:this._YconvertDOMtoCanvas(t.y)},this.openCluster(e)),this.emit("doubleClick",this.getSelection())},e._handleOnHold=function(t){var e=this._getNodeAt(t);if(null!=e)this._selectObject(e,!0);else{var i=this._getEdgeAt(t);null!=i&&this._selectObject(i,!0)}this._redraw()},e._handleOnRelease=function(){},e.getSelection=function(){var t=this.getSelectedNodes(),e=this.getSelectedEdges();return{nodes:t,edges:e}},e.getSelectedNodes=function(){var t=[];for(var e in this.selectionObj.nodes)this.selectionObj.nodes.hasOwnProperty(e)&&t.push(e);return t},e.getSelectedEdges=function(){var t=[];for(var e in this.selectionObj.edges)this.selectionObj.edges.hasOwnProperty(e)&&t.push(e);return t},e.setSelection=function(t){var e,i,n;if(!t||void 0==t.length)throw"Selection must be an array with ids";for(this._unselectAll(!0),e=0,i=t.length;i>e;e++){n=t[e];var s=this.nodes[n];if(!s)throw new RangeError('Node with id "'+n+'" not found');this._selectObject(s,!0,!0)}console.log("setSelection is deprecated. Please use selectNodes instead."),this.redraw()},e.selectNodes=function(t,e){var i,n,s;if(!t||void 0==t.length)throw"Selection must be an array with ids";for(this._unselectAll(!0),i=0,n=t.length;n>i;i++){s=t[i];var o=this.nodes[s];if(!o)throw new RangeError('Node with id "'+s+'" not found');this._selectObject(o,!0,!0,e)}this.redraw()},e.selectEdges=function(t){var e,i,n;if(!t||void 0==t.length)throw"Selection must be an array with ids";for(this._unselectAll(!0),e=0,i=t.length;i>e;e++){n=t[e];var s=this.edges[n];if(!s)throw new RangeError('Edge with id "'+n+'" not found');this._selectObject(s,!0,!0,highlightEdges)}this.redraw()},e._updateSelection=function(){for(var t in this.selectionObj.nodes)this.selectionObj.nodes.hasOwnProperty(t)&&(this.nodes.hasOwnProperty(t)||delete this.selectionObj.nodes[t]);for(var e in this.selectionObj.edges)this.selectionObj.edges.hasOwnProperty(e)&&(this.edges.hasOwnProperty(e)||delete this.selectionObj.edges[e])}},function(t,e,i){var n=i(1),s=i(36),o=i(33);e._clearManipulatorBar=function(){for(;this.manipulationDiv.hasChildNodes();)this.manipulationDiv.removeChild(this.manipulationDiv.firstChild)},e._restoreOverloadedFunctions=function(){for(var t in this.cachedFunctions)this.cachedFunctions.hasOwnProperty(t)&&(this[t]=this.cachedFunctions[t])},e._toggleEditMode=function(){this.editMode=!this.editMode;var t=document.getElementById("network-manipulationDiv"),e=document.getElementById("network-manipulation-closeDiv"),i=document.getElementById("network-manipulation-editMode");1==this.editMode?(t.style.display="block",e.style.display="block",i.style.display="none",e.onclick=this._toggleEditMode.bind(this)):(t.style.display="none",e.style.display="none",i.style.display="block",e.onclick=null),this._createManipulatorBar()},e._createManipulatorBar=function(){if(this.boundFunction&&this.off("select",this.boundFunction),void 0!==this.edgeBeingEdited&&(this.edgeBeingEdited._disableControlNodes(),this.edgeBeingEdited=void 0,this.selectedControlNode=null,this.controlNodesActive=!1),this._restoreOverloadedFunctions(),this.freezeSimulation=!1,this.blockConnectingEdgeSelection=!1,this.forceAppendSelection=!1,1==this.editMode){for(;this.manipulationDiv.hasChildNodes();)this.manipulationDiv.removeChild(this.manipulationDiv.firstChild);this.manipulationDiv.innerHTML="<span class='network-manipulationUI add' id='network-manipulate-addNode'><span class='network-manipulationLabel'>"+this.constants.labels.add+"</span></span><div class='network-seperatorLine'></div><span class='network-manipulationUI connect' id='network-manipulate-connectNode'><span class='network-manipulationLabel'>"+this.constants.labels.link+"</span></span>",1==this._getSelectedNodeCount()&&this.triggerFunctions.edit?this.manipulationDiv.innerHTML+="<div class='network-seperatorLine'></div><span class='network-manipulationUI edit' id='network-manipulate-editNode'><span class='network-manipulationLabel'>"+this.constants.labels.editNode+"</span></span>":1==this._getSelectedEdgeCount()&&0==this._getSelectedNodeCount()&&(this.manipulationDiv.innerHTML+="<div class='network-seperatorLine'></div><span class='network-manipulationUI edit' id='network-manipulate-editEdge'><span class='network-manipulationLabel'>"+this.constants.labels.editEdge+"</span></span>"),0==this._selectionIsEmpty()&&(this.manipulationDiv.innerHTML+="<div class='network-seperatorLine'></div><span class='network-manipulationUI delete' id='network-manipulate-delete'><span class='network-manipulationLabel'>"+this.constants.labels.del+"</span></span>");var t=document.getElementById("network-manipulate-addNode");t.onclick=this._createAddNodeToolbar.bind(this);var e=document.getElementById("network-manipulate-connectNode");if(e.onclick=this._createAddEdgeToolbar.bind(this),1==this._getSelectedNodeCount()&&this.triggerFunctions.edit){var i=document.getElementById("network-manipulate-editNode");i.onclick=this._editNode.bind(this)}else if(1==this._getSelectedEdgeCount()&&0==this._getSelectedNodeCount()){var i=document.getElementById("network-manipulate-editEdge");i.onclick=this._createEditEdgeToolbar.bind(this)}if(0==this._selectionIsEmpty()){var n=document.getElementById("network-manipulate-delete");n.onclick=this._deleteSelected.bind(this)}var s=document.getElementById("network-manipulation-closeDiv");s.onclick=this._toggleEditMode.bind(this),this.boundFunction=this._createManipulatorBar.bind(this),this.on("select",this.boundFunction)}else{this.editModeDiv.innerHTML="<span class='network-manipulationUI edit editmode' id='network-manipulate-editModeButton'><span class='network-manipulationLabel'>"+this.constants.labels.edit+"</span></span>";var o=document.getElementById("network-manipulate-editModeButton");o.onclick=this._toggleEditMode.bind(this)}},e._createAddNodeToolbar=function(){this._clearManipulatorBar(),this.boundFunction&&this.off("select",this.boundFunction),this.manipulationDiv.innerHTML="<span class='network-manipulationUI back' id='network-manipulate-back'><span class='network-manipulationLabel'>"+this.constants.labels.back+" </span></span><div class='network-seperatorLine'></div><span class='network-manipulationUI none' id='network-manipulate-back'><span id='network-manipulatorLabel' class='network-manipulationLabel'>"+this.constants.labels.addDescription+"</span></span>";var t=document.getElementById("network-manipulate-back");t.onclick=this._createManipulatorBar.bind(this),this.boundFunction=this._addNode.bind(this),this.on("select",this.boundFunction)},e._createAddEdgeToolbar=function(){this._clearManipulatorBar(),this._unselectAll(!0),this.freezeSimulation=!0,this.boundFunction&&this.off("select",this.boundFunction),this._unselectAll(),this.forceAppendSelection=!1,this.blockConnectingEdgeSelection=!0,this.manipulationDiv.innerHTML="<span class='network-manipulationUI back' id='network-manipulate-back'><span class='network-manipulationLabel'>"+this.constants.labels.back+" </span></span><div class='network-seperatorLine'></div><span class='network-manipulationUI none' id='network-manipulate-back'><span id='network-manipulatorLabel' class='network-manipulationLabel'>"+this.constants.labels.linkDescription+"</span></span>";var t=document.getElementById("network-manipulate-back");t.onclick=this._createManipulatorBar.bind(this),this.boundFunction=this._handleConnect.bind(this),this.on("select",this.boundFunction),this.cachedFunctions._handleTouch=this._handleTouch,this.cachedFunctions._handleOnRelease=this._handleOnRelease,this._handleTouch=this._handleConnect,this._handleOnRelease=this._finishConnect,this._redraw()},e._createEditEdgeToolbar=function(){this._clearManipulatorBar(),this.controlNodesActive=!0,this.boundFunction&&this.off("select",this.boundFunction),this.edgeBeingEdited=this._getSelectedEdge(),this.edgeBeingEdited._enableControlNodes(),this.manipulationDiv.innerHTML="<span class='network-manipulationUI back' id='network-manipulate-back'><span class='network-manipulationLabel'>"+this.constants.labels.back+" </span></span><div class='network-seperatorLine'></div><span class='network-manipulationUI none' id='network-manipulate-back'><span id='network-manipulatorLabel' class='network-manipulationLabel'>"+this.constants.labels.editEdgeDescription+"</span></span>";var t=document.getElementById("network-manipulate-back");t.onclick=this._createManipulatorBar.bind(this),this.cachedFunctions._handleTouch=this._handleTouch,this.cachedFunctions._handleOnRelease=this._handleOnRelease,this.cachedFunctions._handleTap=this._handleTap,this.cachedFunctions._handleDragStart=this._handleDragStart,this.cachedFunctions._handleOnDrag=this._handleOnDrag,this._handleTouch=this._selectControlNode,this._handleTap=function(){},this._handleOnDrag=this._controlNodeDrag,this._handleDragStart=function(){},this._handleOnRelease=this._releaseControlNode,this._redraw()},e._selectControlNode=function(t){this.edgeBeingEdited.controlNodes.from.unselect(),this.edgeBeingEdited.controlNodes.to.unselect(),this.selectedControlNode=this.edgeBeingEdited._getSelectedControlNode(this._XconvertDOMtoCanvas(t.x),this._YconvertDOMtoCanvas(t.y)),null!==this.selectedControlNode&&(this.selectedControlNode.select(),this.freezeSimulation=!0),this._redraw()},e._controlNodeDrag=function(t){var e=this._getPointer(t.gesture.center);null!==this.selectedControlNode&&void 0!==this.selectedControlNode&&(this.selectedControlNode.x=this._XconvertDOMtoCanvas(e.x),this.selectedControlNode.y=this._YconvertDOMtoCanvas(e.y)),this._redraw()},e._releaseControlNode=function(t){var e=this._getNodeAt(t);null!=e?(1==this.edgeBeingEdited.controlNodes.from.selected&&(this._editEdge(e.id,this.edgeBeingEdited.to.id),this.edgeBeingEdited.controlNodes.from.unselect()),1==this.edgeBeingEdited.controlNodes.to.selected&&(this._editEdge(this.edgeBeingEdited.from.id,e.id),this.edgeBeingEdited.controlNodes.to.unselect())):this.edgeBeingEdited._restoreControlNodes(),this.freezeSimulation=!1,this._redraw()},e._handleConnect=function(t){if(0==this._getSelectedNodeCount()){var e=this._getNodeAt(t);null!=e&&(e.clusterSize>1?alert("Cannot create edges to a cluster."):(this._selectObject(e,!1),this.sectors.support.nodes.targetNode=new s({id:"targetNode"},{},{},this.constants),this.sectors.support.nodes.targetNode.x=e.x,this.sectors.support.nodes.targetNode.y=e.y,this.sectors.support.nodes.targetViaNode=new s({id:"targetViaNode"},{},{},this.constants),this.sectors.support.nodes.targetViaNode.x=e.x,this.sectors.support.nodes.targetViaNode.y=e.y,this.sectors.support.nodes.targetViaNode.parentEdgeId="connectionEdge",this.edges.connectionEdge=new o({id:"connectionEdge",from:e.id,to:this.sectors.support.nodes.targetNode.id},this,this.constants),this.edges.connectionEdge.from=e,this.edges.connectionEdge.connected=!0,this.edges.connectionEdge.smooth=!0,this.edges.connectionEdge.selected=!0,this.edges.connectionEdge.to=this.sectors.support.nodes.targetNode,this.edges.connectionEdge.via=this.sectors.support.nodes.targetViaNode,this.cachedFunctions._handleOnDrag=this._handleOnDrag,this._handleOnDrag=function(t){var e=this._getPointer(t.gesture.center);this.sectors.support.nodes.targetNode.x=this._XconvertDOMtoCanvas(e.x),this.sectors.support.nodes.targetNode.y=this._YconvertDOMtoCanvas(e.y),this.sectors.support.nodes.targetViaNode.x=.5*(this._XconvertDOMtoCanvas(e.x)+this.edges.connectionEdge.from.x),this.sectors.support.nodes.targetViaNode.y=this._YconvertDOMtoCanvas(e.y)},this.moving=!0,this.start()))}},e._finishConnect=function(t){if(1==this._getSelectedNodeCount()){this._handleOnDrag=this.cachedFunctions._handleOnDrag,delete this.cachedFunctions._handleOnDrag;var e=this.edges.connectionEdge.fromId;delete this.edges.connectionEdge,delete this.sectors.support.nodes.targetNode,delete this.sectors.support.nodes.targetViaNode;var i=this._getNodeAt(t);null!=i&&(i.clusterSize>1?alert("Cannot create edges to a cluster."):(this._createEdge(e,i.id),this._createManipulatorBar())),this._unselectAll()}},e._addNode=function(){if(this._selectionIsEmpty()&&1==this.editMode){var t=this._pointerToPositionObject(this.pointerPosition),e={id:n.randomUUID(),x:t.left,y:t.top,label:"new",allowedToMoveX:!0,allowedToMoveY:!0};if(this.triggerFunctions.add)if(2==this.triggerFunctions.add.length){var i=this;this.triggerFunctions.add(e,function(t){i.nodesData.add(t),i._createManipulatorBar(),i.moving=!0,i.start()})}else alert(this.constants.labels.addError),this._createManipulatorBar(),this.moving=!0,this.start();else this.nodesData.add(e),this._createManipulatorBar(),this.moving=!0,this.start()}},e._createEdge=function(t,e){if(1==this.editMode){var i={from:t,to:e};if(this.triggerFunctions.connect)if(2==this.triggerFunctions.connect.length){var n=this;this.triggerFunctions.connect(i,function(t){n.edgesData.add(t),n.moving=!0,n.start()})}else alert(this.constants.labels.linkError),this.moving=!0,this.start();else this.edgesData.add(i),this.moving=!0,this.start()}},e._editEdge=function(t,e){if(1==this.editMode){var i={id:this.edgeBeingEdited.id,from:t,to:e};if(this.triggerFunctions.editEdge)if(2==this.triggerFunctions.editEdge.length){var n=this;this.triggerFunctions.editEdge(i,function(t){n.edgesData.update(t),n.moving=!0,n.start()})}else alert(this.constants.labels.linkError),this.moving=!0,this.start();else this.edgesData.update(i),this.moving=!0,this.start()}},e._editNode=function(){if(this.triggerFunctions.edit&&1==this.editMode){var t=this._getSelectedNode(),e={id:t.id,label:t.label,group:t.group,shape:t.shape,color:{background:t.color.background,border:t.color.border,highlight:{background:t.color.highlight.background,border:t.color.highlight.border}}};if(2==this.triggerFunctions.edit.length){var i=this;this.triggerFunctions.edit(e,function(t){i.nodesData.update(t),i._createManipulatorBar(),i.moving=!0,i.start()})}else alert(this.constants.labels.editError)}else alert(this.constants.labels.editBoundError)},e._deleteSelected=function(){if(!this._selectionIsEmpty()&&1==this.editMode)if(this._clusterInSelection())alert(this.constants.labels.deleteClusterError);else{var t=this.getSelectedNodes(),e=this.getSelectedEdges();if(this.triggerFunctions.del){var i=this,n={nodes:t,edges:e};(this.triggerFunctions.del.length=2)?this.triggerFunctions.del(n,function(t){i.edgesData.remove(t.edges),i.nodesData.remove(t.nodes),i._unselectAll(),i.moving=!0,i.start()}):alert(this.constants.labels.deleteError)}else this.edgesData.remove(e),this.nodesData.remove(t),this._unselectAll(),this.moving=!0,this.start()}}},function(t,e,i){var n=i(1);e._cleanNavigation=function(){var t=document.getElementById("network-navigation_wrapper");null!=t&&this.containerElement.removeChild(t),document.onmouseup=null},e._loadNavigationElements=function(){this._cleanNavigation(),this.navigationDivs={};var t=["up","down","left","right","zoomIn","zoomOut","zoomExtends"],e=["_moveUp","_moveDown","_moveLeft","_moveRight","_zoomIn","_zoomOut","zoomExtent"];this.navigationDivs.wrapper=document.createElement("div"),this.navigationDivs.wrapper.id="network-navigation_wrapper",this.navigationDivs.wrapper.style.position="absolute",this.navigationDivs.wrapper.style.width=this.frame.canvas.clientWidth+"px",this.navigationDivs.wrapper.style.height=this.frame.canvas.clientHeight+"px",this.containerElement.insertBefore(this.navigationDivs.wrapper,this.frame);for(var i=0;i<t.length;i++)this.navigationDivs[t[i]]=document.createElement("div"),this.navigationDivs[t[i]].id="network-navigation_"+t[i],this.navigationDivs[t[i]].className="network-navigation "+t[i],this.navigationDivs.wrapper.appendChild(this.navigationDivs[t[i]]),this.navigationDivs[t[i]].onmousedown=this[e[i]].bind(this);document.onmouseup=this._stopMovement.bind(this)},e._stopMovement=function(){this._xStopMoving(),this._yStopMoving(),this._stopZoom()},e._moveUp=function(t){this.yIncrement=this.constants.keyboard.speed.y,this.start(),n.preventDefault(t),this.navigationDivs&&(this.navigationDivs.up.className+=" active")},e._moveDown=function(t){this.yIncrement=-this.constants.keyboard.speed.y,this.start(),n.preventDefault(t),this.navigationDivs&&(this.navigationDivs.down.className+=" active")},e._moveLeft=function(t){this.xIncrement=this.constants.keyboard.speed.x,this.start(),n.preventDefault(t),this.navigationDivs&&(this.navigationDivs.left.className+=" active")},e._moveRight=function(t){this.xIncrement=-this.constants.keyboard.speed.y,this.start(),n.preventDefault(t),this.navigationDivs&&(this.navigationDivs.right.className+=" active")},e._zoomIn=function(t){this.zoomIncrement=this.constants.keyboard.speed.zoom,this.start(),n.preventDefault(t),this.navigationDivs&&(this.navigationDivs.zoomIn.className+=" active")},e._zoomOut=function(){this.zoomIncrement=-this.constants.keyboard.speed.zoom,this.start(),n.preventDefault(event),this.navigationDivs&&(this.navigationDivs.zoomOut.className+=" active")},e._stopZoom=function(){this.zoomIncrement=0,this.navigationDivs&&(this.navigationDivs.zoomIn.className=this.navigationDivs.zoomIn.className.replace(" active",""),this.navigationDivs.zoomOut.className=this.navigationDivs.zoomOut.className.replace(" active",""))},e._yStopMoving=function(){this.yIncrement=0,this.navigationDivs&&(this.navigationDivs.up.className=this.navigationDivs.up.className.replace(" active",""),this.navigationDivs.down.className=this.navigationDivs.down.className.replace(" active",""))},e._xStopMoving=function(){this.xIncrement=0,this.navigationDivs&&(this.navigationDivs.left.className=this.navigationDivs.left.className.replace(" active",""),this.navigationDivs.right.className=this.navigationDivs.right.className.replace(" active",""))}},function(t,e){e._resetLevels=function(){for(var t in this.nodes)if(this.nodes.hasOwnProperty(t)){var e=this.nodes[t];0==e.preassignedLevel&&(e.level=-1)}},e._setupHierarchicalLayout=function(){if(1==this.constants.hierarchicalLayout.enabled&&this.nodeIndices.length>0){"RL"==this.constants.hierarchicalLayout.direction||"DU"==this.constants.hierarchicalLayout.direction?this.constants.hierarchicalLayout.levelSeparation*=-1:this.constants.hierarchicalLayout.levelSeparation=Math.abs(this.constants.hierarchicalLayout.levelSeparation),"RL"==this.constants.hierarchicalLayout.direction||"LR"==this.constants.hierarchicalLayout.direction?1==this.constants.smoothCurves.enabled&&(this.constants.smoothCurves.type="vertical"):1==this.constants.smoothCurves.enabled&&(this.constants.smoothCurves.type="horizontal");var t,e,i=0,n=!1,s=!1;for(e in this.nodes)this.nodes.hasOwnProperty(e)&&(t=this.nodes[e],-1!=t.level?n=!0:s=!0,i<t.edges.length&&(i=t.edges.length));if(1==s&&1==n)alert("To use the hierarchical layout, nodes require either no predefined levels or levels have to be defined for all nodes."),this.zoomExtent(!0,this.constants.clustering.enabled),this.constants.clustering.enabled||this.start();else{this._changeConstants(),1==s&&this._determineLevels(i);var o=this._getDistribution();this._placeNodesByHierarchy(o),this.start()}}},e._placeNodesByHierarchy=function(t){var e,i;for(var n in t)if(t.hasOwnProperty(n))for(e in t[n].nodes)t[n].nodes.hasOwnProperty(e)&&(i=t[n].nodes[e],"UD"==this.constants.hierarchicalLayout.direction||"DU"==this.constants.hierarchicalLayout.direction?i.xFixed&&(i.x=t[n].minPos,i.xFixed=!1,t[n].minPos+=t[n].nodeSpacing):i.yFixed&&(i.y=t[n].minPos,i.yFixed=!1,t[n].minPos+=t[n].nodeSpacing),this._placeBranchNodes(i.edges,i.id,t,i.level));this._stabilize()},e._getDistribution=function(){var t,e,i,n={};for(t in this.nodes)this.nodes.hasOwnProperty(t)&&(e=this.nodes[t],e.xFixed=!0,e.yFixed=!0,"UD"==this.constants.hierarchicalLayout.direction||"DU"==this.constants.hierarchicalLayout.direction?e.y=this.constants.hierarchicalLayout.levelSeparation*e.level:e.x=this.constants.hierarchicalLayout.levelSeparation*e.level,void 0===n[e.level]&&(n[e.level]={amount:0,nodes:{},minPos:0,nodeSpacing:0}),n[e.level].amount+=1,n[e.level].nodes[t]=e);var s=0;for(i in n)n.hasOwnProperty(i)&&s<n[i].amount&&(s=n[i].amount);for(i in n)n.hasOwnProperty(i)&&(n[i].nodeSpacing=(s+1)*this.constants.hierarchicalLayout.nodeSpacing,n[i].nodeSpacing/=n[i].amount+1,n[i].minPos=n[i].nodeSpacing-.5*(n[i].amount+1)*n[i].nodeSpacing);return n},e._determineLevels=function(t){var e,i;for(e in this.nodes)this.nodes.hasOwnProperty(e)&&(i=this.nodes[e],i.edges.length==t&&(i.level=0));for(e in this.nodes)this.nodes.hasOwnProperty(e)&&(i=this.nodes[e],0==i.level&&this._setLevel(1,i.edges,i.id))},e._changeConstants=function(){this.constants.clustering.enabled=!1,this.constants.physics.barnesHut.enabled=!1,this.constants.physics.hierarchicalRepulsion.enabled=!0,this._loadSelectedForceSolver(),1==this.constants.smoothCurves.enabled&&(this.constants.smoothCurves.dynamic=!1),this._configureSmoothCurves()},e._placeBranchNodes=function(t,e,i,n){for(var s=0;s<t.length;s++){var o=null;o=t[s].toId==e?t[s].from:t[s].to;var r=!1;"UD"==this.constants.hierarchicalLayout.direction||"DU"==this.constants.hierarchicalLayout.direction?o.xFixed&&o.level>n&&(o.xFixed=!1,o.x=i[o.level].minPos,r=!0):o.yFixed&&o.level>n&&(o.yFixed=!1,o.y=i[o.level].minPos,r=!0),1==r&&(i[o.level].minPos+=i[o.level].nodeSpacing,o.edges.length>1&&this._placeBranchNodes(o.edges,o.id,i,o.level))
}},e._setLevel=function(t,e,i){for(var n=0;n<e.length;n++){var s=null;s=e[n].toId==i?e[n].from:e[n].to,(-1==s.level||s.level>t)&&(s.level=t,e.length>1&&this._setLevel(t+1,s.edges,s.id))}},e._restoreNodes=function(){for(var t in this.nodes)this.nodes.hasOwnProperty(t)&&(this.nodes[t].xFixed=!1,this.nodes[t].yFixed=!1)}},function(t,e,i){function n(){this.constants.smoothCurves.enabled=!this.constants.smoothCurves.enabled;var t=document.getElementById("graph_toggleSmooth");t.style.background=1==this.constants.smoothCurves.enabled?"#A4FF56":"#FF8532",this._configureSmoothCurves(!1)}function s(){for(var t in this.calculationNodes)this.calculationNodes.hasOwnProperty(t)&&(this.calculationNodes[t].vx=0,this.calculationNodes[t].vy=0,this.calculationNodes[t].fx=0,this.calculationNodes[t].fy=0);1==this.constants.hierarchicalLayout.enabled?(this._setupHierarchicalLayout(),a.call(this,"graph_H_nd",1,"physics_hierarchicalRepulsion_nodeDistance"),a.call(this,"graph_H_cg",1,"physics_centralGravity"),a.call(this,"graph_H_sc",1,"physics_springConstant"),a.call(this,"graph_H_sl",1,"physics_springLength"),a.call(this,"graph_H_damp",1,"physics_damping")):this.repositionNodes(),this.moving=!0,this.start()}function o(){var t="No options are required, default values used.",e=[],i=document.getElementById("graph_physicsMethod1"),n=document.getElementById("graph_physicsMethod2");if(1==i.checked){if(this.constants.physics.barnesHut.gravitationalConstant!=this.backupConstants.physics.barnesHut.gravitationalConstant&&e.push("gravitationalConstant: "+this.constants.physics.barnesHut.gravitationalConstant),this.constants.physics.centralGravity!=this.backupConstants.physics.barnesHut.centralGravity&&e.push("centralGravity: "+this.constants.physics.centralGravity),this.constants.physics.springLength!=this.backupConstants.physics.barnesHut.springLength&&e.push("springLength: "+this.constants.physics.springLength),this.constants.physics.springConstant!=this.backupConstants.physics.barnesHut.springConstant&&e.push("springConstant: "+this.constants.physics.springConstant),this.constants.physics.damping!=this.backupConstants.physics.barnesHut.damping&&e.push("damping: "+this.constants.physics.damping),0!=e.length){t="var options = {",t+="physics: {barnesHut: {";for(var s=0;s<e.length;s++)t+=e[s],s<e.length-1&&(t+=", ");t+="}}"}this.constants.smoothCurves.enabled!=this.backupConstants.smoothCurves.enabled&&(0==e.length?t="var options = {":t+=", ",t+="smoothCurves: "+this.constants.smoothCurves.enabled),"No options are required, default values used."!=t&&(t+="};")}else if(1==n.checked){if(t="var options = {",t+="physics: {barnesHut: {enabled: false}",this.constants.physics.repulsion.nodeDistance!=this.backupConstants.physics.repulsion.nodeDistance&&e.push("nodeDistance: "+this.constants.physics.repulsion.nodeDistance),this.constants.physics.centralGravity!=this.backupConstants.physics.repulsion.centralGravity&&e.push("centralGravity: "+this.constants.physics.centralGravity),this.constants.physics.springLength!=this.backupConstants.physics.repulsion.springLength&&e.push("springLength: "+this.constants.physics.springLength),this.constants.physics.springConstant!=this.backupConstants.physics.repulsion.springConstant&&e.push("springConstant: "+this.constants.physics.springConstant),this.constants.physics.damping!=this.backupConstants.physics.repulsion.damping&&e.push("damping: "+this.constants.physics.damping),0!=e.length){t+=", repulsion: {";for(var s=0;s<e.length;s++)t+=e[s],s<e.length-1&&(t+=", ");t+="}}"}0==e.length&&(t+="}"),this.constants.smoothCurves!=this.backupConstants.smoothCurves&&(t+=", smoothCurves: "+this.constants.smoothCurves),t+="};"}else{if(t="var options = {",this.constants.physics.hierarchicalRepulsion.nodeDistance!=this.backupConstants.physics.hierarchicalRepulsion.nodeDistance&&e.push("nodeDistance: "+this.constants.physics.hierarchicalRepulsion.nodeDistance),this.constants.physics.centralGravity!=this.backupConstants.physics.hierarchicalRepulsion.centralGravity&&e.push("centralGravity: "+this.constants.physics.centralGravity),this.constants.physics.springLength!=this.backupConstants.physics.hierarchicalRepulsion.springLength&&e.push("springLength: "+this.constants.physics.springLength),this.constants.physics.springConstant!=this.backupConstants.physics.hierarchicalRepulsion.springConstant&&e.push("springConstant: "+this.constants.physics.springConstant),this.constants.physics.damping!=this.backupConstants.physics.hierarchicalRepulsion.damping&&e.push("damping: "+this.constants.physics.damping),0!=e.length){t+="physics: {hierarchicalRepulsion: {";for(var s=0;s<e.length;s++)t+=e[s],s<e.length-1&&(t+=", ");t+="}},"}if(t+="hierarchicalLayout: {",e=[],this.constants.hierarchicalLayout.direction!=this.backupConstants.hierarchicalLayout.direction&&e.push("direction: "+this.constants.hierarchicalLayout.direction),Math.abs(this.constants.hierarchicalLayout.levelSeparation)!=this.backupConstants.hierarchicalLayout.levelSeparation&&e.push("levelSeparation: "+this.constants.hierarchicalLayout.levelSeparation),this.constants.hierarchicalLayout.nodeSpacing!=this.backupConstants.hierarchicalLayout.nodeSpacing&&e.push("nodeSpacing: "+this.constants.hierarchicalLayout.nodeSpacing),0!=e.length){for(var s=0;s<e.length;s++)t+=e[s],s<e.length-1&&(t+=", ");t+="}"}else t+="enabled:true}";t+="};"}this.optionsDiv.innerHTML=t}function r(){var t=["graph_BH_table","graph_R_table","graph_H_table"],e=document.querySelector('input[name="graph_physicsMethod"]:checked').value,i="graph_"+e+"_table",n=document.getElementById(i);n.style.display="block";for(var s=0;s<t.length;s++)t[s]!=i&&(n=document.getElementById(t[s]),n.style.display="none");this._restoreNodes(),"R"==e?(this.constants.hierarchicalLayout.enabled=!1,this.constants.physics.hierarchicalRepulsion.enabled=!1,this.constants.physics.barnesHut.enabled=!1):"H"==e?0==this.constants.hierarchicalLayout.enabled&&(this.constants.hierarchicalLayout.enabled=!0,this.constants.physics.hierarchicalRepulsion.enabled=!0,this.constants.physics.barnesHut.enabled=!1,this.constants.smoothCurves.enabled=!1,this._setupHierarchicalLayout()):(this.constants.hierarchicalLayout.enabled=!1,this.constants.physics.hierarchicalRepulsion.enabled=!1,this.constants.physics.barnesHut.enabled=!0),this._loadSelectedForceSolver();var o=document.getElementById("graph_toggleSmooth");o.style.background=1==this.constants.smoothCurves.enabled?"#A4FF56":"#FF8532",this.moving=!0,this.start()}function a(t,e,i){var n=t+"_value",s=document.getElementById(t).value;e instanceof Array?(document.getElementById(n).value=e[parseInt(s)],this._overWriteGraphConstants(i,e[parseInt(s)])):(document.getElementById(n).value=parseInt(e)*parseFloat(s),this._overWriteGraphConstants(i,parseInt(e)*parseFloat(s))),("hierarchicalLayout_direction"==i||"hierarchicalLayout_levelSeparation"==i||"hierarchicalLayout_nodeSpacing"==i)&&this._setupHierarchicalLayout(),this.moving=!0,this.start()}var h=i(1),c=i(57),l=i(58),d=i(59);e._toggleBarnesHut=function(){this.constants.physics.barnesHut.enabled=!this.constants.physics.barnesHut.enabled,this._loadSelectedForceSolver(),this.moving=!0,this.start()},e._loadSelectedForceSolver=function(){1==this.constants.physics.barnesHut.enabled?(this._clearMixin(c),this._clearMixin(l),this.constants.physics.centralGravity=this.constants.physics.barnesHut.centralGravity,this.constants.physics.springLength=this.constants.physics.barnesHut.springLength,this.constants.physics.springConstant=this.constants.physics.barnesHut.springConstant,this.constants.physics.damping=this.constants.physics.barnesHut.damping,this._loadMixin(d)):1==this.constants.physics.hierarchicalRepulsion.enabled?(this._clearMixin(d),this._clearMixin(c),this.constants.physics.centralGravity=this.constants.physics.hierarchicalRepulsion.centralGravity,this.constants.physics.springLength=this.constants.physics.hierarchicalRepulsion.springLength,this.constants.physics.springConstant=this.constants.physics.hierarchicalRepulsion.springConstant,this.constants.physics.damping=this.constants.physics.hierarchicalRepulsion.damping,this._loadMixin(l)):(this._clearMixin(d),this._clearMixin(l),this.barnesHutTree=void 0,this.constants.physics.centralGravity=this.constants.physics.repulsion.centralGravity,this.constants.physics.springLength=this.constants.physics.repulsion.springLength,this.constants.physics.springConstant=this.constants.physics.repulsion.springConstant,this.constants.physics.damping=this.constants.physics.repulsion.damping,this._loadMixin(c))},e._initializeForceCalculation=function(){1==this.nodeIndices.length?this.nodes[this.nodeIndices[0]]._setForce(0,0):(this.nodeIndices.length>this.constants.clustering.clusterThreshold&&1==this.constants.clustering.enabled&&this.clusterToFit(this.constants.clustering.reduceToNodes,!1),this._calculateForces())},e._calculateForces=function(){this._calculateGravitationalForces(),this._calculateNodeForces(),this.constants.physics.springConstant>0&&(1==this.constants.smoothCurves.enabled&&1==this.constants.smoothCurves.dynamic?this._calculateSpringForcesWithSupport():1==this.constants.physics.hierarchicalRepulsion.enabled?this._calculateHierarchicalSpringForces():this._calculateSpringForces())},e._updateCalculationNodes=function(){if(1==this.constants.smoothCurves.enabled&&1==this.constants.smoothCurves.dynamic){this.calculationNodes={},this.calculationNodeIndices=[];for(var t in this.nodes)this.nodes.hasOwnProperty(t)&&(this.calculationNodes[t]=this.nodes[t]);var e=this.sectors.support.nodes;for(var i in e)e.hasOwnProperty(i)&&(this.edges.hasOwnProperty(e[i].parentEdgeId)?this.calculationNodes[i]=e[i]:e[i]._setForce(0,0));for(var n in this.calculationNodes)this.calculationNodes.hasOwnProperty(n)&&this.calculationNodeIndices.push(n)}else this.calculationNodes=this.nodes,this.calculationNodeIndices=this.nodeIndices},e._calculateGravitationalForces=function(){var t,e,i,n,s,o=this.calculationNodes,r=this.constants.physics.centralGravity,a=0;for(s=0;s<this.calculationNodeIndices.length;s++)n=o[this.calculationNodeIndices[s]],n.damping=this.constants.physics.damping,"default"==this._sector()&&0!=r?(t=-n.x,e=-n.y,i=Math.sqrt(t*t+e*e),a=0==i?0:r/i,n.fx=t*a,n.fy=e*a):(n.fx=0,n.fy=0)},e._calculateSpringForces=function(){var t,e,i,n,s,o,r,a,h,c=this.edges;for(i in c)c.hasOwnProperty(i)&&(e=c[i],e.connected&&this.nodes.hasOwnProperty(e.toId)&&this.nodes.hasOwnProperty(e.fromId)&&(t=e.customLength?e.length:this.constants.physics.springLength,t+=(e.to.clusterSize+e.from.clusterSize-2)*this.constants.clustering.edgeGrowth,n=e.from.x-e.to.x,s=e.from.y-e.to.y,h=Math.sqrt(n*n+s*s),0==h&&(h=.01),a=this.constants.physics.springConstant*(t-h)/h,o=n*a,r=s*a,e.from.fx+=o,e.from.fy+=r,e.to.fx-=o,e.to.fy-=r))},e._calculateSpringForcesWithSupport=function(){var t,e,i,n,s=this.edges;for(i in s)if(s.hasOwnProperty(i)&&(e=s[i],e.connected&&this.nodes.hasOwnProperty(e.toId)&&this.nodes.hasOwnProperty(e.fromId)&&null!=e.via)){var o=e.to,r=e.via,a=e.from;t=e.customLength?e.length:this.constants.physics.springLength,n=o.clusterSize+a.clusterSize-2,t+=n*this.constants.clustering.edgeGrowth,this._calculateSpringForce(o,r,.5*t),this._calculateSpringForce(r,a,.5*t)}},e._calculateSpringForce=function(t,e,i){var n,s,o,r,a,h;n=t.x-e.x,s=t.y-e.y,h=Math.sqrt(n*n+s*s),0==h&&(h=.01),a=this.constants.physics.springConstant*(i-h)/h,o=n*a,r=s*a,t.fx+=o,t.fy+=r,e.fx-=o,e.fy-=r},e._loadPhysicsConfiguration=function(){if(void 0===this.physicsConfiguration){this.backupConstants={},h.deepExtend(this.backupConstants,this.constants);var t=["LR","RL","UD","DU"];this.physicsConfiguration=document.createElement("div"),this.physicsConfiguration.className="PhysicsConfiguration",this.physicsConfiguration.innerHTML='<table><tr><td><b>Simulation Mode:</b></td></tr><tr><td width="120px"><input type="radio" name="graph_physicsMethod" id="graph_physicsMethod1" value="BH" checked="checked">Barnes Hut</td><td width="120px"><input type="radio" name="graph_physicsMethod" id="graph_physicsMethod2" value="R">Repulsion</td><td width="120px"><input type="radio" name="graph_physicsMethod" id="graph_physicsMethod3" value="H">Hierarchical</td></tr></table><table id="graph_BH_table" style="display:none"><tr><td><b>Barnes Hut</b></td></tr><tr><td width="150px">gravitationalConstant</td><td>0</td><td><input type="range" min="0" max="20000" value="'+-1*this.constants.physics.barnesHut.gravitationalConstant+'" step="25" style="width:300px" id="graph_BH_gc"></td><td  width="50px">-20000</td><td><input value="'+-1*this.constants.physics.barnesHut.gravitationalConstant+'" id="graph_BH_gc_value" style="width:60px"></td></tr><tr><td width="150px">centralGravity</td><td>0</td><td><input type="range" min="0" max="3"  value="'+this.constants.physics.barnesHut.centralGravity+'" step="0.05"  style="width:300px" id="graph_BH_cg"></td><td>3</td><td><input value="'+this.constants.physics.barnesHut.centralGravity+'" id="graph_BH_cg_value" style="width:60px"></td></tr><tr><td width="150px">springLength</td><td>0</td><td><input type="range" min="0" max="500" value="'+this.constants.physics.barnesHut.springLength+'" step="1" style="width:300px" id="graph_BH_sl"></td><td>500</td><td><input value="'+this.constants.physics.barnesHut.springLength+'" id="graph_BH_sl_value" style="width:60px"></td></tr><tr><td width="150px">springConstant</td><td>0</td><td><input type="range" min="0" max="0.5" value="'+this.constants.physics.barnesHut.springConstant+'" step="0.001" style="width:300px" id="graph_BH_sc"></td><td>0.5</td><td><input value="'+this.constants.physics.barnesHut.springConstant+'" id="graph_BH_sc_value" style="width:60px"></td></tr><tr><td width="150px">damping</td><td>0</td><td><input type="range" min="0" max="0.3" value="'+this.constants.physics.barnesHut.damping+'" step="0.005" style="width:300px" id="graph_BH_damp"></td><td>0.3</td><td><input value="'+this.constants.physics.barnesHut.damping+'" id="graph_BH_damp_value" style="width:60px"></td></tr></table><table id="graph_R_table" style="display:none"><tr><td><b>Repulsion</b></td></tr><tr><td width="150px">nodeDistance</td><td>0</td><td><input type="range" min="0" max="300" value="'+this.constants.physics.repulsion.nodeDistance+'" step="1" style="width:300px" id="graph_R_nd"></td><td width="50px">300</td><td><input value="'+this.constants.physics.repulsion.nodeDistance+'" id="graph_R_nd_value" style="width:60px"></td></tr><tr><td width="150px">centralGravity</td><td>0</td><td><input type="range" min="0" max="3"  value="'+this.constants.physics.repulsion.centralGravity+'" step="0.05"  style="width:300px" id="graph_R_cg"></td><td>3</td><td><input value="'+this.constants.physics.repulsion.centralGravity+'" id="graph_R_cg_value" style="width:60px"></td></tr><tr><td width="150px">springLength</td><td>0</td><td><input type="range" min="0" max="500" value="'+this.constants.physics.repulsion.springLength+'" step="1" style="width:300px" id="graph_R_sl"></td><td>500</td><td><input value="'+this.constants.physics.repulsion.springLength+'" id="graph_R_sl_value" style="width:60px"></td></tr><tr><td width="150px">springConstant</td><td>0</td><td><input type="range" min="0" max="0.5" value="'+this.constants.physics.repulsion.springConstant+'" step="0.001" style="width:300px" id="graph_R_sc"></td><td>0.5</td><td><input value="'+this.constants.physics.repulsion.springConstant+'" id="graph_R_sc_value" style="width:60px"></td></tr><tr><td width="150px">damping</td><td>0</td><td><input type="range" min="0" max="0.3" value="'+this.constants.physics.repulsion.damping+'" step="0.005" style="width:300px" id="graph_R_damp"></td><td>0.3</td><td><input value="'+this.constants.physics.repulsion.damping+'" id="graph_R_damp_value" style="width:60px"></td></tr></table><table id="graph_H_table" style="display:none"><tr><td width="150"><b>Hierarchical</b></td></tr><tr><td width="150px">nodeDistance</td><td>0</td><td><input type="range" min="0" max="300" value="'+this.constants.physics.hierarchicalRepulsion.nodeDistance+'" step="1" style="width:300px" id="graph_H_nd"></td><td width="50px">300</td><td><input value="'+this.constants.physics.hierarchicalRepulsion.nodeDistance+'" id="graph_H_nd_value" style="width:60px"></td></tr><tr><td width="150px">centralGravity</td><td>0</td><td><input type="range" min="0" max="3"  value="'+this.constants.physics.hierarchicalRepulsion.centralGravity+'" step="0.05"  style="width:300px" id="graph_H_cg"></td><td>3</td><td><input value="'+this.constants.physics.hierarchicalRepulsion.centralGravity+'" id="graph_H_cg_value" style="width:60px"></td></tr><tr><td width="150px">springLength</td><td>0</td><td><input type="range" min="0" max="500" value="'+this.constants.physics.hierarchicalRepulsion.springLength+'" step="1" style="width:300px" id="graph_H_sl"></td><td>500</td><td><input value="'+this.constants.physics.hierarchicalRepulsion.springLength+'" id="graph_H_sl_value" style="width:60px"></td></tr><tr><td width="150px">springConstant</td><td>0</td><td><input type="range" min="0" max="0.5" value="'+this.constants.physics.hierarchicalRepulsion.springConstant+'" step="0.001" style="width:300px" id="graph_H_sc"></td><td>0.5</td><td><input value="'+this.constants.physics.hierarchicalRepulsion.springConstant+'" id="graph_H_sc_value" style="width:60px"></td></tr><tr><td width="150px">damping</td><td>0</td><td><input type="range" min="0" max="0.3" value="'+this.constants.physics.hierarchicalRepulsion.damping+'" step="0.005" style="width:300px" id="graph_H_damp"></td><td>0.3</td><td><input value="'+this.constants.physics.hierarchicalRepulsion.damping+'" id="graph_H_damp_value" style="width:60px"></td></tr><tr><td width="150px">direction</td><td>1</td><td><input type="range" min="0" max="3" value="'+t.indexOf(this.constants.hierarchicalLayout.direction)+'" step="1" style="width:300px" id="graph_H_direction"></td><td>4</td><td><input value="'+this.constants.hierarchicalLayout.direction+'" id="graph_H_direction_value" style="width:60px"></td></tr><tr><td width="150px">levelSeparation</td><td>1</td><td><input type="range" min="0" max="500" value="'+this.constants.hierarchicalLayout.levelSeparation+'" step="1" style="width:300px" id="graph_H_levsep"></td><td>500</td><td><input value="'+this.constants.hierarchicalLayout.levelSeparation+'" id="graph_H_levsep_value" style="width:60px"></td></tr><tr><td width="150px">nodeSpacing</td><td>1</td><td><input type="range" min="0" max="500" value="'+this.constants.hierarchicalLayout.nodeSpacing+'" step="1" style="width:300px" id="graph_H_nspac"></td><td>500</td><td><input value="'+this.constants.hierarchicalLayout.nodeSpacing+'" id="graph_H_nspac_value" style="width:60px"></td></tr></table><table><tr><td><b>Options:</b></td></tr><tr><td width="180px"><input type="button" id="graph_toggleSmooth" value="Toggle smoothCurves" style="width:150px"></td><td width="180px"><input type="button" id="graph_repositionNodes" value="Reinitialize" style="width:150px"></td><td width="180px"><input type="button" id="graph_generateOptions" value="Generate Options" style="width:150px"></td></tr></table>',this.containerElement.parentElement.insertBefore(this.physicsConfiguration,this.containerElement),this.optionsDiv=document.createElement("div"),this.optionsDiv.style.fontSize="14px",this.optionsDiv.style.fontFamily="verdana",this.containerElement.parentElement.insertBefore(this.optionsDiv,this.containerElement);var e;e=document.getElementById("graph_BH_gc"),e.onchange=a.bind(this,"graph_BH_gc",-1,"physics_barnesHut_gravitationalConstant"),e=document.getElementById("graph_BH_cg"),e.onchange=a.bind(this,"graph_BH_cg",1,"physics_centralGravity"),e=document.getElementById("graph_BH_sc"),e.onchange=a.bind(this,"graph_BH_sc",1,"physics_springConstant"),e=document.getElementById("graph_BH_sl"),e.onchange=a.bind(this,"graph_BH_sl",1,"physics_springLength"),e=document.getElementById("graph_BH_damp"),e.onchange=a.bind(this,"graph_BH_damp",1,"physics_damping"),e=document.getElementById("graph_R_nd"),e.onchange=a.bind(this,"graph_R_nd",1,"physics_repulsion_nodeDistance"),e=document.getElementById("graph_R_cg"),e.onchange=a.bind(this,"graph_R_cg",1,"physics_centralGravity"),e=document.getElementById("graph_R_sc"),e.onchange=a.bind(this,"graph_R_sc",1,"physics_springConstant"),e=document.getElementById("graph_R_sl"),e.onchange=a.bind(this,"graph_R_sl",1,"physics_springLength"),e=document.getElementById("graph_R_damp"),e.onchange=a.bind(this,"graph_R_damp",1,"physics_damping"),e=document.getElementById("graph_H_nd"),e.onchange=a.bind(this,"graph_H_nd",1,"physics_hierarchicalRepulsion_nodeDistance"),e=document.getElementById("graph_H_cg"),e.onchange=a.bind(this,"graph_H_cg",1,"physics_centralGravity"),e=document.getElementById("graph_H_sc"),e.onchange=a.bind(this,"graph_H_sc",1,"physics_springConstant"),e=document.getElementById("graph_H_sl"),e.onchange=a.bind(this,"graph_H_sl",1,"physics_springLength"),e=document.getElementById("graph_H_damp"),e.onchange=a.bind(this,"graph_H_damp",1,"physics_damping"),e=document.getElementById("graph_H_direction"),e.onchange=a.bind(this,"graph_H_direction",t,"hierarchicalLayout_direction"),e=document.getElementById("graph_H_levsep"),e.onchange=a.bind(this,"graph_H_levsep",1,"hierarchicalLayout_levelSeparation"),e=document.getElementById("graph_H_nspac"),e.onchange=a.bind(this,"graph_H_nspac",1,"hierarchicalLayout_nodeSpacing");var i=document.getElementById("graph_physicsMethod1"),c=document.getElementById("graph_physicsMethod2"),l=document.getElementById("graph_physicsMethod3");c.checked=!0,this.constants.physics.barnesHut.enabled&&(i.checked=!0),this.constants.hierarchicalLayout.enabled&&(l.checked=!0);var d=document.getElementById("graph_toggleSmooth"),u=document.getElementById("graph_repositionNodes"),p=document.getElementById("graph_generateOptions");d.onclick=n.bind(this),u.onclick=s.bind(this),p.onclick=o.bind(this),d.style.background=1==this.constants.smoothCurves&&0==this.constants.dynamicSmoothCurves?"#A4FF56":"#FF8532",r.apply(this),i.onchange=r.bind(this),c.onchange=r.bind(this),l.onchange=r.bind(this)}},e._overWriteGraphConstants=function(t,e){var i=t.split("_");1==i.length?this.constants[i[0]]=e:2==i.length?this.constants[i[0]][i[1]]=e:3==i.length&&(this.constants[i[0]][i[1]][i[2]]=e)}},function(t,e,i){function n(t){return i(s(t))}function s(t){return o[t]||function(){throw new Error("Cannot find module '"+t+"'.")}()}var o={};n.keys=function(){return Object.keys(o)},n.resolve=s,t.exports=n},function(t,e){e._calculateNodeForces=function(){var t,e,i,n,s,o,r,a,h,c,l,d=this.calculationNodes,u=this.calculationNodeIndices,p=-2/3,f=4/3,g=this.constants.physics.repulsion.nodeDistance,m=g;for(c=0;c<u.length-1;c++)for(a=d[u[c]],l=c+1;l<u.length;l++){h=d[u[l]],o=a.clusterSize+h.clusterSize-2,t=h.x-a.x,e=h.y-a.y,i=Math.sqrt(t*t+e*e),m=0==o?g:g*(1+o*this.constants.clustering.distanceAmplification);var v=p/m;2*m>i&&(r=.5*m>i?1:v*i+f,r*=0==o?1:1+o*this.constants.clustering.forceAmplification,r/=i,n=t*r,s=e*r,a.fx-=n,a.fy-=s,h.fx+=n,h.fy+=s)}}},function(t,e){e._calculateNodeForces=function(){var t,e,i,n,s,o,r,a,h,c,l=this.calculationNodes,d=this.calculationNodeIndices,u=this.constants.physics.hierarchicalRepulsion.nodeDistance;for(h=0;h<d.length-1;h++)for(r=l[d[h]],c=h+1;c<d.length;c++)if(a=l[d[c]],r.level==a.level){t=a.x-r.x,e=a.y-r.y,i=Math.sqrt(t*t+e*e);var p=.05;o=u>i?-Math.pow(p*i,2)+Math.pow(p*u,2):0,0==i?i=.01:o/=i,n=t*o,s=e*o,r.fx-=n,r.fy-=s,a.fx+=n,a.fy+=s}},e._calculateHierarchicalSpringForces=function(){for(var t,e,i,n,s,o,r,a,h,c=this.edges,l=this.calculationNodes,d=this.calculationNodeIndices,u=0;u<d.length;u++){var p=l[d[u]];p.springFx=0,p.springFy=0}for(i in c)if(c.hasOwnProperty(i)&&(e=c[i],e.connected&&this.nodes.hasOwnProperty(e.toId)&&this.nodes.hasOwnProperty(e.fromId)))if(t=e.customLength?e.length:this.constants.physics.springLength,t+=(e.to.clusterSize+e.from.clusterSize-2)*this.constants.clustering.edgeGrowth,n=e.from.x-e.to.x,s=e.from.y-e.to.y,h=Math.sqrt(n*n+s*s),0==h&&(h=.01),a=this.constants.physics.springConstant*(t-h)/h,o=n*a,r=s*a,e.to.level!=e.from.level)e.to.springFx-=o,e.to.springFy-=r,e.from.springFx+=o,e.from.springFy+=r;else{var f=.5;e.to.fx-=f*o,e.to.fy-=f*r,e.from.fx+=f*o,e.from.fy+=f*r}var g,m,a=1;for(u=0;u<d.length;u++){var v=l[d[u]];g=Math.min(a,Math.max(-a,v.springFx)),m=Math.min(a,Math.max(-a,v.springFy)),v.fx+=g,v.fy+=m}var y=0,b=0;for(u=0;u<d.length;u++){var v=l[d[u]];y+=v.fx,b+=v.fy}var x=y/d.length,w=b/d.length;for(u=0;u<d.length;u++){var v=l[d[u]];v.fx-=x,v.fy-=w}}},function(t,e){e._calculateNodeForces=function(){if(0!=this.constants.physics.barnesHut.gravitationalConstant){var t,e=this.calculationNodes,i=this.calculationNodeIndices,n=i.length;this._formBarnesHutTree(e,i);for(var s=this.barnesHutTree,o=0;n>o;o++)t=e[i[o]],this._getForceContribution(s.root.children.NW,t),this._getForceContribution(s.root.children.NE,t),this._getForceContribution(s.root.children.SW,t),this._getForceContribution(s.root.children.SE,t)}},e._getForceContribution=function(t,e){if(t.childrenCount>0){var i,n,s;if(i=t.centerOfMass.x-e.x,n=t.centerOfMass.y-e.y,s=Math.sqrt(i*i+n*n),s*t.calcSize>this.constants.physics.barnesHut.theta){0==s&&(s=.1*Math.random(),i=s);var o=this.constants.physics.barnesHut.gravitationalConstant*t.mass*e.mass/(s*s*s),r=i*o,a=n*o;e.fx+=r,e.fy+=a}else if(4==t.childrenCount)this._getForceContribution(t.children.NW,e),this._getForceContribution(t.children.NE,e),this._getForceContribution(t.children.SW,e),this._getForceContribution(t.children.SE,e);else if(t.children.data.id!=e.id){0==s&&(s=.5*Math.random(),i=s);var o=this.constants.physics.barnesHut.gravitationalConstant*t.mass*e.mass/(s*s*s),r=i*o,a=n*o;e.fx+=r,e.fy+=a}}},e._formBarnesHutTree=function(t,e){for(var i,n=e.length,s=Number.MAX_VALUE,o=Number.MAX_VALUE,r=-Number.MAX_VALUE,a=-Number.MAX_VALUE,h=0;n>h;h++){var c=t[e[h]].x,l=t[e[h]].y;s>c&&(s=c),c>r&&(r=c),o>l&&(o=l),l>a&&(a=l)}var d=Math.abs(r-s)-Math.abs(a-o);d>0?(o-=.5*d,a+=.5*d):(s+=.5*d,r-=.5*d);var u=1e-5,p=Math.max(u,Math.abs(r-s)),f=.5*p,g=.5*(s+r),m=.5*(o+a),v={root:{centerOfMass:{x:0,y:0},mass:0,range:{minX:g-f,maxX:g+f,minY:m-f,maxY:m+f},size:p,calcSize:1/p,children:{data:null},maxWidth:0,level:0,childrenCount:4}};for(this._splitBranch(v.root),h=0;n>h;h++)i=t[e[h]],this._placeInTree(v.root,i);this.barnesHutTree=v},e._updateBranchMass=function(t,e){var i=t.mass+e.mass,n=1/i;t.centerOfMass.x=t.centerOfMass.x*t.mass+e.x*e.mass,t.centerOfMass.x*=n,t.centerOfMass.y=t.centerOfMass.y*t.mass+e.y*e.mass,t.centerOfMass.y*=n,t.mass=i;var s=Math.max(Math.max(e.height,e.radius),e.width);t.maxWidth=t.maxWidth<s?s:t.maxWidth},e._placeInTree=function(t,e,i){(1!=i||void 0===i)&&this._updateBranchMass(t,e),t.children.NW.range.maxX>e.x?t.children.NW.range.maxY>e.y?this._placeInRegion(t,e,"NW"):this._placeInRegion(t,e,"SW"):t.children.NW.range.maxY>e.y?this._placeInRegion(t,e,"NE"):this._placeInRegion(t,e,"SE")},e._placeInRegion=function(t,e,i){switch(t.children[i].childrenCount){case 0:t.children[i].children.data=e,t.children[i].childrenCount=1,this._updateBranchMass(t.children[i],e);break;case 1:t.children[i].children.data.x==e.x&&t.children[i].children.data.y==e.y?(e.x+=Math.random(),e.y+=Math.random()):(this._splitBranch(t.children[i]),this._placeInTree(t.children[i],e));break;case 4:this._placeInTree(t.children[i],e)}},e._splitBranch=function(t){var e=null;1==t.childrenCount&&(e=t.children.data,t.mass=0,t.centerOfMass.x=0,t.centerOfMass.y=0),t.childrenCount=4,t.children.data=null,this._insertRegion(t,"NW"),this._insertRegion(t,"NE"),this._insertRegion(t,"SW"),this._insertRegion(t,"SE"),null!=e&&this._placeInTree(t,e)},e._insertRegion=function(t,e){var i,n,s,o,r=.5*t.size;switch(e){case"NW":i=t.range.minX,n=t.range.minX+r,s=t.range.minY,o=t.range.minY+r;break;case"NE":i=t.range.minX+r,n=t.range.maxX,s=t.range.minY,o=t.range.minY+r;break;case"SW":i=t.range.minX,n=t.range.minX+r,s=t.range.minY+r,o=t.range.maxY;break;case"SE":i=t.range.minX+r,n=t.range.maxX,s=t.range.minY+r,o=t.range.maxY}t.children[e]={centerOfMass:{x:0,y:0},mass:0,range:{minX:i,maxX:n,minY:s,maxY:o},size:.5*t.size,calcSize:2*t.calcSize,children:{data:null},maxWidth:0,level:t.level+1,childrenCount:0}},e._drawTree=function(t,e){void 0!==this.barnesHutTree&&(t.lineWidth=1,this._drawBranch(this.barnesHutTree.root,t,e))},e._drawBranch=function(t,e,i){void 0===i&&(i="#FF0000"),4==t.childrenCount&&(this._drawBranch(t.children.NW,e),this._drawBranch(t.children.NE,e),this._drawBranch(t.children.SE,e),this._drawBranch(t.children.SW,e)),e.strokeStyle=i,e.beginPath(),e.moveTo(t.range.minX,t.range.minY),e.lineTo(t.range.maxX,t.range.minY),e.stroke(),e.beginPath(),e.moveTo(t.range.maxX,t.range.minY),e.lineTo(t.range.maxX,t.range.maxY),e.stroke(),e.beginPath(),e.moveTo(t.range.maxX,t.range.maxY),e.lineTo(t.range.minX,t.range.maxY),e.stroke(),e.beginPath(),e.moveTo(t.range.minX,t.range.maxY),e.lineTo(t.range.minX,t.range.minY),e.stroke()}},function(t){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children=[],t.webpackPolyfill=1),t}}])});var NetworkCanvas=function(t){function e(t,e){var i=!1;"#"==t[0]&&(t=t.slice(1),i=!0);var n=parseInt(t,16),s=(n>>16)+e;s>255?s=255:0>s&&(s=0);var o=(n>>8&255)+e;o>255?o=255:0>o&&(o=0);var r=(255&n)+e;return r>255?r=255:0>r&&(r=0),(i?"#":"")+(r|o<<8|s<<16).toString(16)}var n,s,o,r,a,h,c,l,d,u=this,p=!1,f=!1,g=new Array,m=[],v=[];v.blue="#0174DF",v["placid-blue"]="#83b5dd",v["violet-tulip"]="#9B90C8",v.hemlock="#9eccb3",v.paloma="#aab1b0",v.freesia="#ffd600",v.cayenne="#c40000",v["celosia-orange"]="#f47d44",v.sand="#ceb48d",v["dazzling-blue"]="#006bb6",v.edge=v.blue,v.selected="gold";var y={debugLevel:2,defaultNodeSize:20,defaultNodeColor:v.blue,defaultEdgeColor:v.edge,concentricCircleColor:"#ffffff",concentricCircleNumber:4,nodeTypes:[{name:"Person",color:v.blue},{name:"OnlinePerson",color:v.hemlock},{name:"Organisation",color:v.cayenne},{name:"Professional",color:v["violet-tulip"]}]},b=new Array("nodeMove","nodeTouch","edgeCreate","edgeDelete"),x=y,w=new Array("Barney","Jonathon","Myles","Alethia","Tammera","Veola","Meredith","Renee","Grisel","Celestina","Fausto","Eliana","Raymundo","Lyle","Carry","Kittie","Melonie","Elke","Mattie","Kieth","Lourie","Marcie","Trinity","Librada","Lloyd","Pearlie","Velvet","Stephan","Hildegard","Winfred","Tempie","Maybelle","Melynda","Tiera","Lisbeth","Kiera","Gaye","Edra","Karissa","Manda","Ethelene","Michelle","Pamella","Jospeh","Tonette","Maren","Aundrea","Madelene","Epifania","Olive");this.init=function(){u.initKinetic(),u.drawUIComponents(),u.loadGraph(),$("body").velocity({opacity:"1"},{duration:1e3},{easing:"easeInSine"}),$("#new-name-box").focus(),$(document).on("keypress",function(t){$("#new-name-box").focus(),8!==t.which||$(t.target).is("input, textarea, div")||t.preventDefault(),13!==event.which?0==p&&0==f&&(p=!0,$("#newNodeForm").css("visibility","visible"),$("#newNodeForm").velocity({opacity:"1",marginTop:"0"},{duration:150},{easing:"easeInSine"}),$("#newNodeForm > *").velocity({opacity:"1",left:"0"},{duration:400},{easing:"easeInSine"}).promise().done(function(){p=!1,f=!0})):p||(p=!0,$("#newNodeForm").velocity({scale:"5",opacity:"0",marginTop:"0"},{duration:200},{easing:"easeInSine"}).promise().done(function(){$("#newNodeForm > *").velocity({opacity:"0",left:"1000px"}),$("#newNodeForm").velocity({scale:"1"}),p=!1,f=!1,$("#newNodeForm").css("visibility","hidden"),$("#new-name-box").focus()}))})},this.addToLog=function(t,e,i){if(!e&&!t)return!1;var n=+new Date,s={};return s.timestamp=n,s.eventType=t,s.eventValue=e,s.objectID=i,g.push(s),S("Logged "+s.eventType+" on object "+s.objectID+" at time point "+n,2),!0},this.addNode=function(t,e,i,n,s,o){var h=u.getNodes(),c=s||h.length,l={};l.coords=t||new Array($(window).width()+50,100),l.size=e||x.defaultNodeSize,l.label=n||w[Math.round(_(0,w.length-1))],l.id=s||h.length;var d=Math.round(_(0,x.nodeTypes.length-1));l.type=i||x.nodeTypes[d].name,l.color=o||x.nodeTypes[d].color,l.strokeWidth=4;
var p=new Kinetic.Group({id:l.id,x:l.coords[0],y:l.coords[1],name:l.label,edges:[],type:l.type,nodeSize:l.size,color:l.color,draggable:!0,dragDistance:10});switch(l.type){case"Person":var f=new Kinetic.Circle({radius:l.size,fill:l.color,stroke:u.calculateStrokeColor(l.color),strokeWidth:l.strokeWidth});break;case"Organisation":var f=new Kinetic.Rect({width:2*l.size,height:2*l.size,fill:l.color,stroke:u.calculateStrokeColor(l.color),strokeWidth:l.strokeWidth,offset:{x:l.size,y:l.size}});break;case"OnlinePerson":var f=new Kinetic.RegularPolygon({sides:3,fill:l.color,radius:1.2*l.size,stroke:u.calculateStrokeColor(l.color),strokeWidth:l.strokeWidth});break;case"Professional":var f=new Kinetic.Star({numPoints:6,fill:l.color,innerRadius:l.size-l.size/3,outerRadius:l.size+l.size/3,stroke:u.calculateStrokeColor(l.color),strokeWidth:l.strokeWidth})}var g=new Kinetic.Text({text:l.label,fontSize:20,fontFamily:"Lato",fill:"white",offsetX:-1*l.size-10,offsetY:1*l.size-10,fontStyle:300});if(p.add(f),p.add(g),S("Putting node "+l.label+" at coordinates x:"+l.coords[0]+", y:"+l.coords[1],2),u.addToLog("nodeCreate",l,c),p.on("dragstart",function(){S("dragstart",0),this.attrs.oldx=this.attrs.x,this.attrs.oldy=this.attrs.y;var t=this;this.moveToTop(),a.draw()}),p.on("dragmove",function(t){S("Dragmove",0);var e=this;$.each(r.children,function(t,i){if(i.attrs.from==e||i.attrs.to==e){var n=[i.attrs.from.attrs.x,i.attrs.from.attrs.y,i.attrs.to.attrs.x,i.attrs.to.attrs.y];i.attrs.points=n}}),r.draw()}),p.on("tap click",function(t){S("tap or click.",0),u.addToLog("nodeClick",this,this.attrs.id),this.moveToTop(),a.draw()}),p.on("dbltap dblclick",function(t){S("double tap",0),m.push(this),2==m.length?(u.addEdge(m[0],m[1]),m[0].children[0].stroke(u.calculateStrokeColor(u.getNodeColorByType(m[0].attrs.type))),m[1].children[0].stroke(u.calculateStrokeColor(u.getNodeColorByType(m[1].attrs.type))),m=[],a.draw()):(this.children[0].stroke(v.selected),a.draw())}),p.on("dragend",function(){S("dragend",0);var t=this,e={},i={};e.x=this.attrs.oldx,e.y=this.attrs.oldy,i.x=this.attrs.x,i.y=this.attrs.y;var n={from:e,to:i};u.addToLog("nodeMove",n,this.attrs.id),u.saveGraph(),delete this.attrs.oldx,delete this.attrs.oldy}),a.add(p),p.moveToBottom(),a.draw(),u.saveGraph(),null==t){var y=new Kinetic.Tween({node:p,x:$(window).width()-150,y:100,duration:.7,easing:Kinetic.Easings.EaseOut});y.play()}return p},this.addEdge=function(t,e){var i=!1,n,s,o;if(null!=t&&"object"==typeof t||null!=e&&"object"==typeof e?(n=t,s=e):(n=this.getNodeByID(t),s=this.getNodeByID(e)),r.children.length>0&&$.each(r.children,function(t,e){(e.attrs.from==n&&e.attrs.to==s||e.attrs.to==n&&e.attrs.from==s)&&(o=e,i=!0)}),i)return this.removeEdge(o),!1;var h=[n.attrs.x,n.attrs.y,s.attrs.x,s.attrs.y],c=new Kinetic.Line({strokeWidth:2,stroke:x.defaultEdgeColor,from:n,to:s,points:h});r.add(c),r.draw(),a.draw(),S("Created Edge between "+n.children[1].attrs.text+" and "+s.children[1].attrs.text,"success",2);var l=u.getSimpleEdge(r.children.length-1);return u.addToLog("edgeCreate",l,"0"),u.saveGraph(),!0},this.removeEdge=function(t){S("Removing edge."),$.each(r.children,function(e,i){i==t&&(r.children[e].remove(),r.draw())}),this.saveGraph()},this.calculateStrokeColor=function(t){return e(t,15)},this.clearGraph=function(){r.removeChildren(),r.clear(),a.removeChildren(),a.clear(),u.saveGraph()},this.createRandomGraph=function(t,e){for(t=t||10,e=e||.4,S("Creating random graph...",3),i=0;t>i;i++){var n=i+1;S("Adding node "+n+" of "+t,1),u.addNode(new Array(Math.round(_(100,window.innerWidth-100)),Math.round(_(100,window.innerHeight-100))))}S("Adding edges.",3);var s=u.getNodes();$.each(s,function(t,i){if(_(0,1)<e){var n=Math.round(_(0,s.length-1));u.addEdge(s[t],s[n])}})},this.initKinetic=function(){n=new Kinetic.Stage({container:"kineticCanvas",width:window.innerWidth,height:window.innerHeight}),o=new Kinetic.Layer,a=new Kinetic.Layer,r=new Kinetic.Layer,l=new Kinetic.Layer,n.add(o),n.add(r),n.add(a),n.add(l)},this.drawUIComponents=function(){var t,e,s=x.concentricCircleColor,r=window.innerHeight-2*x.defaultNodeSize,a=.1;for(i=0;i<x.concentricCircleNumber;i++){var h=1-i/x.concentricCircleNumber,c=r/2*h,e=new Kinetic.Circle({x:window.innerWidth/2,y:window.innerHeight/2,radius:c,stroke:"white",strokeWidth:1.5,opacity:0}),t=new Kinetic.Circle({x:window.innerWidth/2,y:window.innerHeight/2,radius:c,fill:s,opacity:a,strokeWidth:0});a+=(.3-a)/x.concentricCircleNumber,o.add(t),o.add(e)}var d=new Kinetic.Circle({radius:50,stroke:"#666",strokeWidth:0,y:window.innerHeight-100,x:100});d.on("click tap",function(){var t=n.getPointerPosition(),e=new Array;e[0]=t.x,e[1]=t.y;var i=u.addNode(e);d.moveToBottom(),l.draw()}),l.add(d),o.draw(),l.draw()},this.loadGraph=function(){S("Loading graph from localStorage.",3),loadedNodes=localStorage.getObject("nodes")||{},loadedEdges=localStorage.getObject("edges")||{},$.each(loadedNodes,function(t,e){var i=[];i.push(e.x),i.push(e.y),u.addNode(i,e.nodeSize,e.type,e.name,t,e.color)}),$.each(loadedEdges,function(t,e){u.addEdge(e.from,e.to)})},this.saveGraph=function(){S("Saving graph.",3),simpleNodes=u.getSimpleNodes(),simpleEdges=u.getSimpleEdges(),log=u.getLog(),localStorage.setObject("nodes",simpleNodes),localStorage.setObject("edges",simpleEdges),localStorage.setObject("log",log)},this.getNodes=function(){return a.children},this.getEdges=function(){return r.children},this.getSimpleNodes=function(){var t={},e=u.getNodes();return $.each(e,function(e,i){t[i.attrs.id]={},t[i.attrs.id].x=i.attrs.x,t[i.attrs.id].y=i.attrs.y,t[i.attrs.id].name=i.attrs.name,t[i.attrs.id].type=i.attrs.type,t[i.attrs.id].size=i.attrs.size,t[i.attrs.id].color=i.attrs.color}),t},this.getSimpleEdges=function(){var t={},e=0;return $.each(r.children,function(i,n){t[e]={},t[e].from=n.attrs.from.attrs.id,t[e].to=n.attrs.to.attrs.id,e++}),t},this.getSimpleEdge=function(t){var e=u.getSimpleEdges();if(!t)return!1;var i=e[t];return i},this.getEdgeLayer=function(){return r},this.getNodeByID=function(t){var e={},i=u.getNodes();return $.each(i,function(i,n){n.attrs.id==t&&(e=n)}),e},this.getNodeColorByType=function(t){var e=null;return $.each(x.nodeTypes,function(i,n){n.name==t&&(e=n.color)}),e?e:!1},this.getLog=function(){return g},this.getLastEvent=function(){return g[g.length-1]};var _=function(t,e){return Math.random()*(e-t)+t};Storage.prototype.setObject=function(t,e){this.setItem(t,JSON.stringify(e))},Storage.prototype.getObject=function(t){if(null===this.getItem(t))return S("Key not found in localStorage. Returning false."),!1;S("Key found in localStorage. Returning.");var e=this.getItem(t);return e&&JSON.parse(e)};var S=function(t,e){var e=e||0;e>=x.debugLevel&&console.log(t)};u.init()},test={},menu=function(){var t={},e=!1;return t.open=function(){$(".menu-item").transition({marginLeft:0},500,"ease"),$(".menu-container").transition({opacity:"1"},500),e=!0},t.close=function(){$(".menu-item").transition({marginLeft:"-110px"},500,"ease"),$(".menu-container").transition({opacity:"0"},500),e=!1},t.toggle=function(){e?t.close():t.open()},t}();window.onload=function(){window.n=new NetworkCanvas({}),$("#menu-button").click(function(){menu.toggle()}),$(".menu-item").click(function(){menu.close()}),$("#kineticCanvas").click(function(){menu.close()}),$("#refresh-button").click(function(){$(this).addClass(".refresh-animate"),location.reload()}),$("#generate-graph-submit").click(function(){$(".modal").modal("hide"),menu.close(),$("#gen-graph-clear").is(":checked")&&n.clearGraph();var t=$("#gen-graph-nodes").val(),e=$("#gen-graph-edge-prob").val();n.createRandomGraph(t,e)})};