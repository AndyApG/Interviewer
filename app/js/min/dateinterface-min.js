var DateInterface=function e(t){var a={},i;return a.options={targetEl:$(".container"),edgeType:"Dyad",heading:"Default Heading"},extend(a.options,t),a.init=function(){a.options.targetEl.append("<h1>"+a.options.heading+"</h1>"),a.options.targetEl.append('<p class="lead">'+a.options.subheading+"</p>"),a.options.targetEl.append('<div class="date-container"></div>'),i=network.getEdges(a.options.criteria),console.log(i);var e=0,t=0;$.each(i,function(a,i){var r=network.getEdges({type:"Dyad",from:network.getNodes({type_t0:"Ego"})[0].id,to:i.to})[0],c='<div class="date-picker-item overlay"><div class="row"><div class="col-sm-12"><h2>Regarding <span>'+r.nname_t0+'</span></h2></div></div><div class="row"><div class="alert alert-danger logic-error" role="alert"><span class="glyphicon glyphicon-exclamation-sign" aria-hidden="true"></span><span class="sr-only">Error:</span> Your last sexual encounter cannot come before your first. Please correct the dates before continuing.</div><div class="col-sm-5"><div class="form-group"><p class="lead">When was the first time you had sex?</p><div class="input-group date first row'+t+'" id="datetimepicker'+e+'"><input type="text" class="form-control" readonly /><span class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span></span></div><div class="checkbox"><label><input type="checkbox" name="checkbox-time" class="checkbox-time checkbox'+e+'"> More than 6 months ago.</label></div></div></div><div class="col-sm-5 col-sm-offset-2"><div class="form-group"><p class="lead">When was the last time you had sex?</p><div class="input-group date second row'+t+'" id="datetimepicker'+(e+1)+'"><input type="text" class="form-control" readonly /><span class="input-group-addon"><span class="glyphicon glyphicon-calendar"></span></span></div></div></div></div></div>';$(c).appendTo(".date-container");var s={format:"MM/DD/YYYY"};$("#datetimepicker"+e).datetimepicker(s),$("#datetimepicker"+(e+1)).datetimepicker(s),$("#datetimepicker"+e+", #datetimepicker"+(e+1)).on("dp.change",function(e){console.log("changed");var t={},a,r,c,s,o=$(this);$(this).hasClass("first")?($(".checkbox"+o.attr("id").slice(-1)).is(":checked")?(console.log("checkbox for id "+o.attr("id").slice(-1)+" is checked"),t.sex_first_before_range=!0,s=null):(console.log("checkbox for id "+o.attr("id").slice(-1)+" is NOT checked"),t.sex_first_before_range=!1,s=o.data("DateTimePicker").date().format("MM/DD/YYYY")),a=parseInt(o.attr("id").slice(-1))+1,r=parseInt(o.attr("id").slice(-1)),c=parseInt(o.attr("id").slice(-1))+1,null!==e.date,t.sex_first_t0=s):($(".checkbox"+o.attr("id").slice(-1)).is(":checked")?(console.log("checkbox for id "+o.attr("id").slice(-1)+" is checked"),t.sex_last_before_range=!0,s=null):(console.log("checkbox for id "+o.attr("id").slice(-1)+" is NOT checked"),t.sex_last_before_range=!1,s=o.data("DateTimePicker").date().format("MM/DD/YYYY")),a=parseInt(o.attr("id").slice(-1))-1,r=parseInt(o.attr("id").slice(-1))-1,c=parseInt(o.attr("id").slice(-1)),null!==e.date,t.sex_last_t0=s),console.log("about to do it"),console.log(t),network.updateEdge(i.id,t),moment($("#datetimepicker"+r).data("DateTimePicker").date()).isAfter($("#datetimepicker"+c).data("DateTimePicker").date())?(o.parent().parent().parent().children(".logic-error").fadeIn(),$(".arrow-next").attr("disabled","disabled")):(o.parent().parent().parent().children(".logic-error").fadeOut(),$(".arrow-next").removeAttr("disabled"))}),"undefined"!=typeof i.sex_first_t0&&(console.log("first:"),console.log(i.sex_first_t0),null===i.sex_first_t0?($(".checkbox"+e).prop("checked",!0),$("#datetimepicker"+e).data("DateTimePicker").date(moment().subtract(6,"months").format("MM/DD/YYYY")),$("#datetimepicker"+e).children().css({opacity:.5}),$("#datetimepicker"+e).data("DateTimePicker").disable()):$("#datetimepicker"+e).data("DateTimePicker").date(i.sex_first_t0)),"undefined"!=typeof i.sex_last_t0&&(console.log("last:"),console.log(i.sex_last_t0),null===i.sex_last_t0?($(".checkbox"+(e+1)).prop("checked",!0),$("#datetimepicker"+(e+1)).data("DateTimePicker").date(moment().subtract(6,"months").format("MM/DD/YYYY")),$("#datetimepicker"+(e+1)).children().css({opacity:.5}),$("#datetimepicker"+(e+1)).data("DateTimePicker").disable()):$("#datetimepicker"+(e+1)).data("DateTimePicker").date(i.sex_last_t0)),$(".checkbox"+e+", .checkbox"+(e+1)).change(function(e){console.log("checkbox changed");var t=$(e.target);this.checked?(t.parent().parent().parent().children(".date").data("DateTimePicker").date(moment().subtract(6,"months").format("MM/DD/YYYY")),t.parent().parent().parent().children(".date").data("DateTimePicker").disable(),t.parent().parent().parent().children(".date").children().css({opacity:.5})):(t.parent().parent().parent().children(".date").data("DateTimePicker").enable(),t.parent().parent().parent().children(".date").children().css({opacity:1}),t.parent().parent().parent().children(".date").data("DateTimePicker").date(moment().format("MM/DD/YYYY")))}),e+=2,t++})},a.destroy=function(){},a.init(),a};